{"version":3,"sources":["webpack:///static/js/app.3abf6a1216817295293e.js","webpack:///./examples/components/demo-block.vue","webpack:///./src/model-collada.vue","webpack:///./examples/router/index.js","webpack:///./examples/App.vue","webpack:///./examples/index.js","webpack:///./examples/pages/demo-background.vue","webpack:///./examples/pages/demo-basic.vue","webpack:///./examples/pages/demo-collada.vue","webpack:///./examples/pages/demo-event.vue","webpack:///./examples/pages/demo-json.vue","webpack:///./examples/pages/demo-obj-mtl.vue","webpack:///./examples/pages/index.js","webpack:///./examples/pages/demo-obj.vue","webpack:///./examples/pages/demo-rotate.vue","webpack:///./examples/pages/demo-stl.vue","webpack:///./src/model-stl.vue","webpack:///./src/model-three.vue","webpack:///./examples/pages/demo-json.vue?5534","webpack:///./examples/pages/demo-stl.vue?ec03","webpack:///./examples/pages/demo-obj.vue?36e0","webpack:///./examples/pages/demo-basic.vue?1bd2","webpack:///./examples/pages/demo-background.vue?486b","webpack:///App.vue","webpack:///./examples/pages/demo-obj-mtl.vue?ed5c","webpack:///./examples/components/demo-block.vue?b978","webpack:///./examples/pages/demo-collada.vue?eca3","webpack:///./examples/pages/demo-rotate.vue?ee2b","webpack:///./examples/App.vue?3f0c","webpack:///./src/model-mixin.vue?997a","webpack:///./examples/pages/demo-event.vue?853b","webpack:///./examples/pages/demo-background.vue?ab96","webpack:///./examples/components/demo-block.vue?7ecb","webpack:///demo-block.vue","webpack:///./examples/App.vue?f2b2","webpack:///demo-background.vue","webpack:///./src/model-obj.vue","webpack:///demo-basic.vue","webpack:///demo-collada.vue","webpack:///demo-event.vue","webpack:///demo-json.vue","webpack:///demo-obj-mtl.vue","webpack:///demo-obj.vue","webpack:///demo-rotate.vue","webpack:///demo-stl.vue","webpack:///model-collada.vue","webpack:///model-mixin.vue","webpack:///model-obj.vue","webpack:///model-stl.vue","webpack:///model-three.vue","webpack:///./src/controls/OrbitControls.js","webpack:///./src/loaders/ColladaLoader.js","webpack:///./src/loaders/DDSLoader.js","webpack:///./src/loaders/MTLLoader.js","webpack:///./src/loaders/OBJLoader.js","webpack:///./src/loaders/STLLoader.js","webpack:///./src/model-mixin.vue","webpack:///./src/util.js","webpack:///./examples/pages/demo-background.vue?4f59","webpack:///./examples/components/demo-block.vue?5dbb","webpack:///./examples/App.vue?4909"],"names":["webpackJsonp","2","module","exports","__webpack_require__","Component","22","23","__webpack_exports__","__WEBPACK_IMPORTED_MODULE_0_vue__","__WEBPACK_IMPORTED_MODULE_1_vue_router__","__WEBPACK_IMPORTED_MODULE_2__pages__","use","routes","map","page","name","path","component","push","redirect","24","25","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_1__App_vue__","__WEBPACK_IMPORTED_MODULE_1__App_vue___default","n","__WEBPACK_IMPORTED_MODULE_2__router__","el","router","render","h","a","254","255","256","257","258","259","26","d","pages","__WEBPACK_IMPORTED_MODULE_0__demo_basic__","__WEBPACK_IMPORTED_MODULE_0__demo_basic___default","__WEBPACK_IMPORTED_MODULE_1__demo_event__","__WEBPACK_IMPORTED_MODULE_1__demo_event___default","__WEBPACK_IMPORTED_MODULE_2__demo_background__","__WEBPACK_IMPORTED_MODULE_2__demo_background___default","__WEBPACK_IMPORTED_MODULE_3__demo_rotate__","__WEBPACK_IMPORTED_MODULE_3__demo_rotate___default","__WEBPACK_IMPORTED_MODULE_4__demo_obj__","__WEBPACK_IMPORTED_MODULE_4__demo_obj___default","__WEBPACK_IMPORTED_MODULE_5__demo_obj_mtl__","__WEBPACK_IMPORTED_MODULE_5__demo_obj_mtl___default","__WEBPACK_IMPORTED_MODULE_6__demo_stl__","__WEBPACK_IMPORTED_MODULE_6__demo_stl___default","__WEBPACK_IMPORTED_MODULE_7__demo_collada__","__WEBPACK_IMPORTED_MODULE_7__demo_collada___default","__WEBPACK_IMPORTED_MODULE_8__demo_json__","__WEBPACK_IMPORTED_MODULE_8__demo_json___default","260","261","262","263","264","265","_vm","this","_h","$createElement","_c","_self","attrs","vue-code","code","html-code","htmlCode","slot","backgroundAlpha","src","on","on-load","onLoad","_v","directives","rawName","expression","staticClass","staticRenderFns","266","267","268","269","click","$event","bgColor","bgAlpha","backgroundColor","27","270","mtl","271","_t","ref","_s","_f","vueCode","272","273","rotation","274","_m","to","href","275","staticStyle","width","height","margin","border","padding","color","276","on-mousemove","onMouseMove","278","content","i","locals","279","28","__WEBPACK_IMPORTED_MODULE_0_highlight_js_styles_github_css__","__WEBPACK_IMPORTED_MODULE_1_highlight_js__","__WEBPACK_IMPORTED_MODULE_1_highlight_js___default","codeHandler","replace","props","String","type","default","mounted","highlightBlock","$refs","data","filters","val","components","280","29","__WEBPACK_IMPORTED_MODULE_0__components_demo_block__","__WEBPACK_IMPORTED_MODULE_0__components_demo_block___default","__WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue__","__WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue___default","loading","methods","setBackground","alpha","ModelObj","DemoBlock","3","30","__WEBPACK_IMPORTED_MODULE_1__src_model_three_vue__","__WEBPACK_IMPORTED_MODULE_1__src_model_three_vue___default","ModelThree","31","__WEBPACK_IMPORTED_MODULE_1__src_model_collada_vue__","__WEBPACK_IMPORTED_MODULE_1__src_model_collada_vue___default","ModelCollada","32","intersected","event","console","log","material","setStyle","object","33","34","35","36","x","Math","PI","y","z","collada","rotate","requestAnimationFrame","37","__WEBPACK_IMPORTED_MODULE_1__src_model_stl_vue__","__WEBPACK_IMPORTED_MODULE_1__src_model_stl_vue___default","ModelStl","38","__WEBPACK_IMPORTED_MODULE_0__loaders_ColladaLoader__","__WEBPACK_IMPORTED_MODULE_2__model_mixin_vue__","__WEBPACK_IMPORTED_MODULE_2__model_mixin_vue___default","mixins","lights","Array","position","skyColor","groundColor","intensity","smoothing","Boolean","loader","options","convertUpAxis","load","_this","scene","remove","add","updateCamera","$emit","err","39","__WEBPACK_IMPORTED_MODULE_0_three__","__WEBPACK_IMPORTED_MODULE_1__util__","__WEBPACK_IMPORTED_MODULE_2__controls_OrbitControls__","suportWebGL","canvas","document","createElement","window","WebGLRenderingContext","getContext","e","Number","scale","cameraPosition","cameraRotation","cameraUp","cameraLookAt","controllable","size","raycaster","mouse","camera","renderer","controls","allLights","clock","performance","Date","computed","hasListener","events","_events","result","forEach","length","created","addEventListener","onResize","undefined","$el","offsetWidth","offsetHeight","antialias","shadowMap","enabled","update","onMouseDown","onMouseUp","onClick","animate","beforeDestroy","removeEventListener","watch","deep","handler","set","oldVal","updateLights","updateRenderer","updateControls","$nextTick","pick","clientX","clientY","rect","getBoundingClientRect","left","top","setFromCamera","intersects","intersectObject","updateModel","copy","matrixWorldNeedsUpdate","setSize","setPixelRatio","devicePixelRatio","setClearColor","getHex","setClearAlpha","distance","center","aspect","updateProjectionMatrix","lookAt","target","_this2","apply","item","toLowerCase","light","_color","_intensity","decay","PointLight","_color2","_intensity2","_intensity3","dispose","_this3","process","40","__WEBPACK_IMPORTED_MODULE_0__loaders_OBJLoader__","__WEBPACK_IMPORTED_MODULE_1__loaders_MTLLoader__","__WEBPACK_IMPORTED_MODULE_2__util__","__WEBPACK_IMPORTED_MODULE_3__model_mixin_vue__","__WEBPACK_IMPORTED_MODULE_3__model_mixin_vue___default","mtlPath","mtlLoader","traverse","child","geometry","computeVertexNormals","onError","mtlSrc","exec","setPath","materials","preload","setMaterials","41","__WEBPACK_IMPORTED_MODULE_0__loaders_STLLoader__","__WEBPACK_IMPORTED_MODULE_1__model_mixin_vue__","__WEBPACK_IMPORTED_MODULE_1__model_mixin_vue___default","__WEBPACK_IMPORTED_MODULE_2_three__","42","43","OrbitControls","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_create__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_create___default","__WEBPACK_IMPORTED_MODULE_1_three__","domElement","getAutoRotationAngle","scope","autoRotateSpeed","getZoomScale","pow","zoomSpeed","rotateLeft","angle","sphericalDelta","theta","rotateUp","phi","dollyIn","dollyScale","zoom","max","minZoom","min","maxZoom","zoomChanged","warn","enableZoom","dollyOut","handleMouseDownRotate","rotateStart","handleMouseDownDolly","dollyStart","handleMouseDownPan","panStart","handleMouseMoveRotate","rotateEnd","rotateDelta","subVectors","element","body","clientWidth","rotateSpeed","clientHeight","handleMouseMoveDolly","dollyEnd","dollyDelta","handleMouseMovePan","panEnd","panDelta","pan","handleMouseUp","handleMouseWheel","deltaY","handleKeyDown","keyCode","keys","UP","keyPanSpeed","BOTTOM","LEFT","RIGHT","handleTouchStartRotate","touches","pageX","pageY","handleTouchStartDolly","dx","dy","sqrt","handleTouchStartPan","handleTouchMoveRotate","handleTouchMoveDolly","handleTouchMovePan","handleTouchEnd","preventDefault","button","mouseButtons","ORBIT","enableRotate","state","STATE","ROTATE","ZOOM","DOLLY","PAN","enablePan","NONE","dispatchEvent","startEvent","endEvent","onMouseWheel","stopPropagation","onKeyDown","enableKeys","onTouchStart","TOUCH_ROTATE","TOUCH_DOLLY","TOUCH_PAN","onTouchMove","onTouchEnd","onContextMenu","minDistance","maxDistance","Infinity","minPolarAngle","maxPolarAngle","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","autoRotate","MIDDLE","target0","clone","position0","zoom0","getPolarAngle","spherical","getAzimuthalAngle","saveState","reset","changeEvent","offset","quat","setFromUnitVectors","up","quatInverse","inverse","lastPosition","lastQuaternion","sub","applyQuaternion","setFromVector3","makeSafe","radius","panOffset","setFromSpherical","distanceToSquared","EPS","dot","quaternion","panLeft","v","objectMatrix","setFromMatrixColumn","multiplyScalar","panUp","deltaX","targetDistance","tan","fov","matrix","right","bottom","prototype","constructor","44","ColladaLoader","url","readyCallback","progressCallback","failCallback","implementation","createDocument","request","XMLHttpRequest","onreadystatechange","readyState","status","response","readyCallbackFunc","parse","error","getResponseHeader","total","loaded","responseText","open","send","alert","text","callBack","COLLADA","DOMParser","parseFromString","parts","split","pop","baseUrl","join","parseAsset","setUpConversion","images","parseLib","_Image","Material","effects","Effect","geometries","Geometry","cameras","Camera","Light","controllers","Controller","animations","Animation","visualScenes","VisualScene","kinematicsModels","KinematicsModel","morphs","skins","visualScene","parseScene","nodes","createSceneGraph","colladaUnit","createAnimations","kinematicsModel","parseKinematicsModel","createKinematics","animData","kinematics","dae","setPreferredShading","shading","preferredShading","elements","querySelectorAll","childNodes","nodeName","meter","getAttribute","parseFloat","colladaUp","textContent","charAt","q","classSpec","prefix","lib","elementsLength","j","daeElement","id","sceneElement","kinematicsModelElement","recurseHierarchy","node","getChildById","colladaId","newData","fps","hierarchy","sids","il","time","children","jl","calcAnimationBounds","ID","start","end","frames","animation","sampler","create","startTime","endTime","input","createMorph","ctrl","morphCtrl","InstanceController","morph","targets","target_id","daeGeometry","mesh","primitives","vertices","morphTargets","setupSkeleton","bones","frame","parent","world","localworld","channels","channel","m","output","multiplyMatrices","setupSkinningMatrices","skin","bone","found","joints","sid","inv","invBindMatrices","invBindMatrix","skinningMatrix","animatrix","weights","k","w","joint","flattenSkeleton","skeleton","list","walk","parentid","decompose","pos","scl","rotq","skinToBindPose","skinController","skinned","vidx","index","weight","o","s","applyMatrix4","applySkin","instanceCtrl","animationBounds","getChildBySid","bonelist","sortedbones","bindShapeMatrix","skinIndices","skinWeights","indicies","animationdata","key","rot","jointMap","getJointValue","jointIndex","jointData","setJointValue","limits","static","threejsNode","axis","transforms","m1","transform","indexOf","multiply","makeRotationAxis","degToRad","makeTranslation","obj","elementsFloat32Arr","slice","call","elementsRowMajor","querySelector","nodeType","visualTarget","parseInt","visualTargetElement","parentVisualElement","parentElement","parentVisualElementId","colladaNode","zeroPosition","morphController","controller","source","inst_geom","InstanceGeometry","instance_material","second","double_sided_materials","first_material","instance_geometry","instance_materials","used_materials","used_materials_array","num_materials","mat","effect_id","instance_effect","shader","material3js","doubleSided","symbol","_copied_material","side","opacity","geom","geometry3js","faces","face","materialIndex","daeMaterial","skinning","isLineStrip","instance_camera","cparams","cam","yfov","aspect_ratio","znear","zfar","instance_light","lparams","technique","falloff_angle","layer","centerGeometry","delta","getLibraryNode","attObj","attributes","getNamedItem","getChannelsForNode","bakeAnimations","member","fullSid","getTransformBySid","arrIndices","getConvertedIndex","getConvertedMember","getData","findKey","Key","timeNdx","findTimeNdx","splice","addTarget","hasTarget","interpolateKeys","retVal","ndx","prevKey","getPrevKeyWith","nextKey","getNextKeyWith","prevTarget","getTarget","nextData","prevData","init_from","Morph","method","Skin","Node","Transform","InstanceMaterial","Mesh","Polygons","count","inputs","vcount","p","Polylist","LineStrips","Triangles","Accessor","stride","params","Vertices","Input","semantic","Source","ColorOrTexture","setRGB","random","texture","texcoord","texOpts","Shader","effect","Surface","format","Sampler2D","wrap_s","wrap_t","minfilter","magfilter","mipfilter","surface","InstanceEffect","Channel","dotSyntax","arrSyntax","Sampler","strideOut","interpolation","duration","InstanceCamera","InstanceLight","links","Joint","middlePosition","Link","attachments","Attachment","_source","sources","_bools","str","raw","_strings","l","_floats","_ints","_trimString","_attr_as_int","defaultValue","hasAttribute","loadTextureImage","image","needsUpdate","extractDoubleSided","upAxis","upConversion","fixCoords","sign","tmp","getConvertedTranslation","getConvertedVec3","arr","getConvertedMat4","members","indices","X","Y","Z","subdivideFaces","defaultEnvMap","parseInputs","read","f","parseJoints","parseWeights","numBones","vertex_weights","influence","recursive","getChannelForTransform","transformSid","shift","info","iNode","updateMatrix","identity","convert","n11","n21","n31","n41","n12","n22","n32","n42","n13","n23","n33","n43","n14","n24","n34","n44","propName","toString","instances","instance","vertexData","primitive","setVertices","handlePrimitive","calcNormals","idx32","numParams","pList","vcIndex","maxOffset","texture_sets","pCount","vs","ns","ts","cs","accessor","NORMAL","len","TEXCOORD","COLOR","uv","uvArr","clr","faceVertexUvs","param","isColor","isTexture","opaque","rgba","offsetU","offsetV","repeatU","repeatV","wrapU","wrapV","parseTexture","toUpperCase","bumpType","transparent","transparencyLevel","r","g","b","transparency","diffuse","ambient","specular","emission","bump","normal","prop","cot","samplerId","Handlers","get","wrapS","wrapT","repeat","emissive","parseTechnique","parseProfileCOMMON","parseNewparam","_image","parseExtra","parseExtraTechnique","anim","opt_sid","interpolate","nextTarget","parseOptics","perspective","xfov","orthographic","xmag","ymag","parseCommon","profile","axisElement","_axis","jointTypes","45","DDSLoader","_parser","buffer","loadMipmaps","fourCCToInt32","charCodeAt","dds","mipmaps","mipmapCount","FOURCC_DXT1","FOURCC_DXT3","FOURCC_DXT5","FOURCC_ETC1","header","Int32Array","blockBytes","fourCC","isRGBAUncompressed","fromCharCode","caps2","isCubemap","dataOffset","byteArray","dataLength","srcBuffer","Uint8Array","dst","mipmap","46","MTLLoader","__WEBPACK_IMPORTED_MODULE_1__DDSLoader__","LoaderHandlers","manager","onProgress","setTexturePath","texturePath","setBaseUrl","setCrossOrigin","crossOrigin","setMaterialOptions","materialOptions","lines","delimiter_pattern","materialsInfo","line","trim","substring","ss","materialCreator","MaterialCreator","setManager","materialsArray","nameLookup","wrap","converted","mn","covmat","save","lprop","normalizeRGB","ignoreZeroRGBs","getIndex","materialName","getAsArray","createMaterial_","resolveURL","test","setMapForType","mapType","texParams","getTextureParams","loadTexture","fromArray","shininess","matParams","items","bumpScale","mapping","47","OBJLoader","regexp","vertex_pattern","normal_pattern","uv_pattern","face_vertex","face_vertex_uv","face_vertex_uv_normal","face_vertex_normal","object_pattern","smoothing_pattern","material_library_pattern","material_use_pattern","_createParserState","objects","normals","uvs","materialLibraries","startObject","fromDeclaration","previousMaterial","currentMaterial","_finalize","smooth","startMaterial","libraries","previous","inherited","groupCount","mtllib","isArray","groupStart","groupEnd","cloned","bind","lastMultiMaterial","mi","declared","finalize","parseVertexIndex","parseNormalIndex","parseUVIndex","addVertex","c","addVertexLine","addNormal","addUV","addUVLine","addFace","ua","ub","uc","ud","na","nb","nc","nd","vLen","ia","ib","ic","uvLen","nLen","addLineGeometry","vi","uvi","lineFirstChar","lineSecondChar","trimLeft","Error","lineParts","lineVertices","lineUVs","li","llen","substr","container","concat","isLine","buffergeometry","addAttribute","Float32Array","createdMaterials","miLen","sourceMaterial","materialLine","addGroup","timeEnd","48","STLLoader","setResponseType","binData","ensureBinary","face_size","n_faces","reader","DataView","getUint32","byteLength","solid","getUint8","parseBinary","parseASCII","ensureString","colors","defaultR","defaultG","defaultB","hasColors","normalX","getFloat32","normalY","normalZ","packedColor","getUint16","vertexstart","patternFace","patternNormal","patternVertex","buf","array_buffer","strArray","6","7","getSize","box","setFromObject","getCenter","toIndexed","bufferGeometry","exists","equals","raw_uvs","raw_positions","array","hasUV","raw_normals","hasNormal","face_normalss","face_uvs","tmp_indices","v0","v1","v2","n0","n1","n2","uv0","uv1","uv2","positionBuffer","normalBuffer","uvBuffer","i2","i3","setIndex","Uint32Array","72","73","74","75"],"mappings":"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","file":"static/js/app.3abf6a1216817295293e.js","sourcesContent":["webpackJsonp([1],{\n\n/***/ 2:\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(279)\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(28),\n  /* template */\n  __webpack_require__(271),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 22:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(38),\n  /* template */\n  null,\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 23:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(13);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vue_router__ = __webpack_require__(277);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__pages__ = __webpack_require__(26);\n\n\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */].use(__WEBPACK_IMPORTED_MODULE_1_vue_router__[\"a\" /* default */]);\n\nvar routes = __WEBPACK_IMPORTED_MODULE_2__pages__[\"a\" /* pages */].map(function (page) {\n\n    var name = page.name;\n\n    return {\n        path: '/' + name,\n        name: name,\n        component: page\n    };\n});\n\nroutes.push({\n    path: '*',\n    redirect: '/demo-basic'\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (new __WEBPACK_IMPORTED_MODULE_1_vue_router__[\"a\" /* default */]({ routes: routes }));\n\n/***/ }),\n\n/***/ 24:\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(280)\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(27),\n  /* template */\n  __webpack_require__(274),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 25:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(13);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__App_vue__ = __webpack_require__(24);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__App_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__App_vue__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__router__ = __webpack_require__(23);\n\n\n\n\nnew __WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */]({\n  el: '#app',\n  router: __WEBPACK_IMPORTED_MODULE_2__router__[\"a\" /* default */],\n  render: function render(h) {\n    return h(__WEBPACK_IMPORTED_MODULE_1__App_vue___default.a);\n  }\n});\n\n/***/ }),\n\n/***/ 254:\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(278)\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(29),\n  /* template */\n  __webpack_require__(269),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 255:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(30),\n  /* template */\n  __webpack_require__(268),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 256:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(31),\n  /* template */\n  __webpack_require__(272),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 257:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(32),\n  /* template */\n  __webpack_require__(276),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 258:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(33),\n  /* template */\n  __webpack_require__(265),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 259:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(34),\n  /* template */\n  __webpack_require__(270),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 26:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return pages; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__demo_basic__ = __webpack_require__(255);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__demo_basic___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__demo_basic__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__demo_event__ = __webpack_require__(257);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__demo_event___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__demo_event__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__demo_background__ = __webpack_require__(254);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__demo_background___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__demo_background__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__demo_rotate__ = __webpack_require__(261);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__demo_rotate___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3__demo_rotate__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__demo_obj__ = __webpack_require__(260);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__demo_obj___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4__demo_obj__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__demo_obj_mtl__ = __webpack_require__(259);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__demo_obj_mtl___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5__demo_obj_mtl__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__demo_stl__ = __webpack_require__(262);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__demo_stl___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6__demo_stl__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__demo_collada__ = __webpack_require__(256);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__demo_collada___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7__demo_collada__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__demo_json__ = __webpack_require__(258);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__demo_json___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_8__demo_json__);\n\n\n\n\n\n\n\n\n\n\n\n\nvar pages = [__WEBPACK_IMPORTED_MODULE_0__demo_basic___default.a, __WEBPACK_IMPORTED_MODULE_1__demo_event___default.a, __WEBPACK_IMPORTED_MODULE_2__demo_background___default.a, __WEBPACK_IMPORTED_MODULE_3__demo_rotate___default.a, __WEBPACK_IMPORTED_MODULE_4__demo_obj___default.a, __WEBPACK_IMPORTED_MODULE_5__demo_obj_mtl___default.a, __WEBPACK_IMPORTED_MODULE_6__demo_stl___default.a, __WEBPACK_IMPORTED_MODULE_7__demo_collada___default.a, __WEBPACK_IMPORTED_MODULE_8__demo_json___default.a];\n\n\n\n/***/ }),\n\n/***/ 260:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(35),\n  /* template */\n  __webpack_require__(267),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 261:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(36),\n  /* template */\n  __webpack_require__(273),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 262:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(37),\n  /* template */\n  __webpack_require__(266),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 263:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(41),\n  /* template */\n  null,\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 264:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(42),\n  /* template */\n  null,\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 265:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('model-obj', {\n    attrs: {\n      \"backgroundAlpha\": 0,\n      \"src\": \"static/models/obj/tree.obj\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"example-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 266:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('model-stl', {\n    attrs: {\n      \"backgroundAlpha\": 0,\n      \"src\": \"static/models/stl/gear.stl\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"example-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 267:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('model-obj', {\n    attrs: {\n      \"backgroundAlpha\": 0,\n      \"src\": \"static/models/obj/tree.obj\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"example-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 268:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('model-three', {\n    attrs: {\n      \"backgroundAlpha\": 0,\n      \"src\": \"static/models/json/scene.json\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"example-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 269:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('p', {\n    staticClass: \"background-text\"\n  }, [_vm._v(\"\\n            Vue\"), _c('br'), _vm._v(\"3D\"), _c('br'), _vm._v(\"Model\"), _c('br'), _vm._v(\"Background\\n        \")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"background-buttons\"\n  }, [_c('p', [_vm._v(\"Color\")]), _vm._v(\" \"), _c('button', {\n    on: {\n      \"click\": function($event) {\n        _vm.bgColor = '#ff0'\n      }\n    }\n  }, [_vm._v(\"#ff0\")]), _vm._v(\" \"), _c('button', {\n    on: {\n      \"click\": function($event) {\n        _vm.bgColor = '#f00'\n      }\n    }\n  }, [_vm._v(\"#f00\")]), _vm._v(\" \"), _c('button', {\n    on: {\n      \"click\": function($event) {\n        _vm.bgColor = '#13ce66'\n      }\n    }\n  }, [_vm._v(\"#13ce66\")]), _vm._v(\" \"), _c('p', [_vm._v(\"Alpha\")]), _vm._v(\" \"), _c('button', {\n    on: {\n      \"click\": function($event) {\n        _vm.bgAlpha = 0.5\n      }\n    }\n  }, [_vm._v(\"0.5\")]), _vm._v(\" \"), _c('button', {\n    on: {\n      \"click\": function($event) {\n        _vm.bgAlpha = 1\n      }\n    }\n  }, [_vm._v(\"1\")]), _vm._v(\" \"), _c('button', {\n    on: {\n      \"click\": function($event) {\n        _vm.bgAlpha = 0\n      }\n    }\n  }, [_vm._v(\"0\")])]), _vm._v(\" \"), _c('model-obj', {\n    staticClass: \"model-box\",\n    attrs: {\n      \"backgroundAlpha\": _vm.bgAlpha,\n      \"backgroundColor\": _vm.bgColor,\n      \"src\": \"static/models/obj/tree.obj\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"example-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 27:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'app'\n});\n\n/***/ }),\n\n/***/ 270:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('model-obj', {\n    attrs: {\n      \"backgroundAlpha\": 0,\n      \"src\": \"static/models/obj/male02/male02.obj\",\n      \"mtl\": \"static/models/obj/male02/male02.mtl\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"example-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 271:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"demo-block\"\n  }, [_c('div', {\n    staticClass: \"demo-block-preview\"\n  }, [_vm._t(\"preview\")], 2), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code\"\n  }, [_c('div', {\n    staticClass: \"demo-block-code-box\"\n  }, [_c('h3', [_vm._v(\"Vue Component & Webpack\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code-box-content\"\n  }, [_c('pre', [_vm._v(\"                    \"), _c('code', {\n    ref: \"vueCode\",\n    staticClass: \"html\"\n  }, [_vm._v(_vm._s(_vm._f(\"code\")(_vm.vueCode)))]), _vm._v(\"\\n                \")])])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code-box\"\n  }, [_c('h3', [_vm._v(\"HTML & JS\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code-box-content\"\n  }, [_c('pre', [_vm._v(\"                    \"), _c('code', {\n    ref: \"htmlCode\",\n    staticClass: \"html\"\n  }, [_vm._v(_vm._s(_vm._f(\"code\")(_vm.htmlCode)))]), _vm._v(\"\\n                \")])])])])])\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 272:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('model-collada', {\n    attrs: {\n      \"backgroundAlpha\": 0,\n      \"src\": \"static/models/collada/elf/elf.dae\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"example-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 273:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('model-collada', {\n    ref: \"collada\",\n    attrs: {\n      \"rotation\": _vm.rotation,\n      \"src\": \"static/models/collada/elf/elf.dae\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"example-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 274:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"examples\"\n  }, [_vm._m(0), _vm._v(\" \"), _c('div', {\n    staticClass: \"examples-content\"\n  }, [_c('ul', {\n    staticClass: \"examples-menu\"\n  }, [_c('li', {\n    staticClass: \"examples-menu-title\"\n  }, [_vm._v(\"Examples\")]), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-basic\"\n    }\n  }, [_vm._v(\"basic\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-rotate\"\n    }\n  }, [_vm._v(\"rotate\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-background\"\n    }\n  }, [_vm._v(\"background\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-title\"\n  }, [_vm._v(\"Events\")]), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-event\"\n    }\n  }, [_vm._v(\"mousemove\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-title\"\n  }, [_vm._v(\"Model Formats\")]), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-basic\"\n    }\n  }, [_vm._v(\"JSON Model (.json)\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-obj\"\n    }\n  }, [_vm._v(\"OBJ Model (.obj)\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-obj-mtl\"\n    }\n  }, [_vm._v(\"OBJ + MTL (.obj + .mtl)\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-stl\"\n    }\n  }, [_vm._v(\"STL Model (.stl)\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-collada\"\n    }\n  }, [_vm._v(\"Collada Model (.dae)\")])], 1)]), _vm._v(\" \"), _c('div', {\n    staticClass: \"examples-pages\"\n  }, [_c('router-view')], 1)])])\n},staticRenderFns: [function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"examples-header\"\n  }, [_c('a', {\n    staticClass: \"title\",\n    attrs: {\n      \"href\": \"https://github.com/hujiulong/vue-3d-model\"\n    }\n  }, [_vm._v(\"Vue3DModel\")]), _vm._v(\" \"), _c('a', {\n    staticClass: \"github\",\n    attrs: {\n      \"href\": \"https://github.com/hujiulong/vue-3d-model\"\n    }\n  }, [_vm._v(\"View on GitHub\")])])\n}]}\n\n/***/ }),\n\n/***/ 275:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticStyle: {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"border\": \"0\",\n      \"padding\": \"0\"\n    }\n  }, [(_vm.suportWebGL) ? _c('canvas', {\n    ref: \"canvas\",\n    staticStyle: {\n      \"width\": \"100%\",\n      \"height\": \"100%\"\n    }\n  }) : _c('div', [_vm._t(\"default\", [_vm._v(\"\\n            Your browser does not seem to support \"), _c('a', {\n    staticStyle: {\n      \"color\": \"#000\"\n    },\n    attrs: {\n      \"href\": \"http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation\"\n    }\n  }, [_vm._v(\"WebGL\")]), _vm._v(\".\"), _c('br'), _vm._v(\"'\\n        \")])], 2)])\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 276:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('model-obj', {\n    ref: \"model\",\n    attrs: {\n      \"backgroundAlpha\": 0,\n      \"src\": \"static/models/obj/tree.obj\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad,\n      \"on-mousemove\": _vm.onMouseMove\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"example-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 278:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(72);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(12)(\"7ef4e056\", content, true);\n\n/***/ }),\n\n/***/ 279:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(73);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(12)(\"ef4a88ea\", content, true);\n\n/***/ }),\n\n/***/ 28:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_highlight_js_styles_github_css__ = __webpack_require__(75);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_highlight_js_styles_github_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_highlight_js_styles_github_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_highlight_js__ = __webpack_require__(77);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_highlight_js___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_highlight_js__);\n\n\n\n\n\nvar codeHandler = function codeHandler(code) {\n    var scripts = '<script src=\"vue.js\"></script>\\n \\xA0 \\xA0<script src=\"vue-3d-model.min.js\"></script>';\n\n    return code.replace(/#scripts#/ig, scripts);\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'app',\n    props: {\n        vueCode: String,\n        htmlCode: {\n            type: String,\n            default: '// TODO'\n        }\n    },\n    mounted: function mounted() {\n        __WEBPACK_IMPORTED_MODULE_1_highlight_js___default.a.highlightBlock(this.$refs.vueCode);\n        __WEBPACK_IMPORTED_MODULE_1_highlight_js___default.a.highlightBlock(this.$refs.htmlCode);\n    },\n    data: function data() {\n        return {};\n    },\n\n    filters: {\n        code: function code(val) {\n            return codeHandler(val);\n        }\n    },\n    components: {}\n});\n\n/***/ }),\n\n/***/ 280:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(74);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(12)(\"c86a7b1a\", content, true);\n\n/***/ }),\n\n/***/ 29:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__components_demo_block__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue__);\n\n\n\n\n\nvar code = '\\n<template>\\n    <p class=\"background-text\">\\n        Vue<br>3D<br>Model<br>Background\\n    </p>\\n    <div class=\"background-buttons\">\\n        <p>Color</p>\\n        <button @click=\"bgColor = \\'#ff0\\'\">#ff0</button>\\n        <button @click=\"bgColor = \\'#f00\\'\">#f00</button>\\n        <button @click=\"bgColor = \\'#13ce66\\'\">#13ce66</button>\\n        <p>Alpha</p>\\n        <button @click=\"bgAlpha = 0.5\">0.5</button>\\n        <button @click=\"bgAlpha = 1\">1</button>\\n        <button @click=\"bgAlpha = 0\">0</button>\\n    </div>\\n    <model-obj\\n        :backgroundAlpha=\"bgAlpha\"\\n        :backgroundColor=\"bgColor\"\\n        src=\"static/models/obj/tree.obj\"></model-obj>\\n</template>\\n\\n<script>\\n    import { ModelObj } from \\'vue-3d-model\\'\\n\\n    export default {\\n        data () {\\n            return {\\n                bgColor: \\'#ff0\\',\\n                bgAlpha: 0.5\\n            }\\n        },\\n        components: {\\n            ModelObj\\n        }\\n    }\\n</script>\\n';\n\nvar htmlCode = '\\n<body>\\n    <div id=\"app\">\\n        <p class=\"background-text\">\\n            Vue<br>3D<br>Model<br>Background\\n        </p>\\n        <div class=\"background-buttons\">\\n            <p>Color</p>\\n            <button @click=\"bgColor = \\'#ff0\\'\">#ff0</button>\\n            <button @click=\"bgColor = \\'#f00\\'\">#f00</button>\\n            <button @click=\"bgColor = \\'#13ce66\\'\">#13ce66</button>\\n            <p>Alpha</p>\\n            <button @click=\"bgAlpha = 0.5\">0.5</button>\\n            <button @click=\"bgAlpha = 1\">1</button>\\n            <button @click=\"bgAlpha = 0\">0</button>\\n        </div>\\n        <model-obj\\n            :backgroundAlpha=\"bgAlpha\"\\n            :backgroundColor=\"bgColor\"\\n            src=\"static/models/obj/tree.obj\"></model-obj>\\n    </div>\\n    #scripts#\\n    <script>\\n        new Vue({\\n            el: \\'#app\\',\\n            data: {\\n                bgColor: \\'#ff0\\',\\n                bgAlpha: 0.5\\n            }\\n        })\\n    </script>\\n</body>\\n';\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'demo-background',\n    data: function data() {\n        return {\n            code: code,\n            htmlCode: htmlCode,\n            loading: true,\n            bgColor: '#ff0',\n            bgAlpha: 0.5\n        };\n    },\n\n    methods: {\n        onLoad: function onLoad() {\n            this.loading = false;\n        },\n        setBackground: function setBackground(color, alpha) {}\n    },\n    components: {\n        ModelObj: __WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue___default.a,\n        DemoBlock: __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default.a\n    }\n});\n\n/***/ }),\n\n/***/ 3:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(40),\n  /* template */\n  null,\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 30:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__components_demo_block__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_model_three_vue__ = __webpack_require__(264);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_model_three_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__src_model_three_vue__);\n\n\n\n\n\nvar code = '\\n<template>\\n    <model-three src=\"static/models/json/scene.json\"></model-three>\\n</template>\\n\\n<script>\\n    import { ModelThree } from \\'vue-3d-model\\'\\n\\n    export default {\\n        components: {\\n            ModelThree\\n        }\\n    }\\n</script>\\n';\n\nvar htmlCode = '\\n<body>\\n    <div id=\"app\">\\n        <model-three src=\"static/models/json/scene.json\"></model-three>\\n    </div>\\n    #scripts#\\n    <script>\\n        new Vue({\\n            el: \\'#app\\'\\n        })\\n    </script>\\n</body>\\n';\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'demo-basic',\n    data: function data() {\n        return {\n            code: code,\n            htmlCode: htmlCode,\n            loading: true\n        };\n    },\n\n    methods: {\n        onLoad: function onLoad() {\n            this.loading = false;\n        }\n    },\n    components: {\n        ModelThree: __WEBPACK_IMPORTED_MODULE_1__src_model_three_vue___default.a,\n        DemoBlock: __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default.a\n    }\n});\n\n/***/ }),\n\n/***/ 31:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__components_demo_block__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_model_collada_vue__ = __webpack_require__(22);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_model_collada_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__src_model_collada_vue__);\n\n\n\n\n\nvar code = '\\n<template>\\n    <model-collada src=\"static/models/collada/elf.dae\"></model-collada>\\n</template>\\n\\n<script>\\n    import { ModelCollada } from \\'vue-3d-model\\'\\n\\n    export default {\\n        components: {\\n            ModelCollada\\n        }\\n    }\\n</script>\\n';\n\nvar htmlCode = '\\n<body>\\n    <div id=\"app\">\\n        <model-collada src=\"static/models/collada/elf.dae\"></model-collada>\\n    </div>\\n    #scripts#\\n    <script>\\n        new Vue({\\n            el: \\'#app\\'\\n        })\\n    </script>\\n</body>\\n';\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'demo-collada',\n    data: function data() {\n        return {\n            code: code,\n            htmlCode: htmlCode,\n            loading: true\n        };\n    },\n\n    methods: {\n        onLoad: function onLoad() {\n            this.loading = false;\n        }\n    },\n    components: {\n        ModelCollada: __WEBPACK_IMPORTED_MODULE_1__src_model_collada_vue___default.a,\n        DemoBlock: __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default.a\n    }\n});\n\n/***/ }),\n\n/***/ 32:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__components_demo_block__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue__);\n\n\n\n\n\nvar code = '\\n\\n<template>\\n    <model-obj \\n        src=\"static/models/obj/tree.obj\"\\n        @on-mousemove=\"onMouseMove\">\\n    </model-obj>\\n</template>\\n\\n<script>\\n    import { ModelObj } from \\'vue-3d-model\\'\\n\\n    export default {\\n        data () {\\n            return {\\n                intersected: null\\n            }\\n        },\\n        methods: {\\n            onMouseMove ( event ) {\\n\\n                console.log( event );   // event: { distance, face, faceIndex, point, index, uv, object }\\n\\n                if ( !event ) {\\n\\n                    if ( this.intersected ) {\\n                        this.intersected.material.color.setStyle( \\'#fff\\' );\\n                    }\\n\\n                    this.intersected = null;\\n                    return;\\n                }\\n\\n                this.intersected = event.object;\\n                this.intersected.material.color.setStyle( \\'#13ce66\\' );\\n            }\\n        },\\n        components: {\\n            ModelObj\\n        }\\n    }\\n</script>\\n\\n';\n\nvar htmlCode = '\\n<body>\\n    <div id=\"app\">\\n        <model-obj \\n            src=\"static/models/obj/tree.obj\"\\n            @on-mousemove=\"onMouseMove\">\\n        </model-obj>\\n    </div>\\n    #scripts#\\n    <script>\\n        new Vue({\\n            el: \\'#app\\',\\n            data: {\\n                intersected: null\\n            },\\n            methods: {\\n                onMouseMove ( event ) {\\n\\n                    console.log( event );   // event: { distance, face, faceIndex, point, index, uv, object }\\n\\n                    if ( !event ) {\\n\\n                        if ( this.intersected ) {\\n                            this.intersected.material.color.setStyle( \\'#fff\\' );\\n                        }\\n\\n                        this.intersected = null;\\n                        return;\\n                    }\\n\\n                    this.intersected = event.object;\\n                    this.intersected.material.color.setStyle( \\'#13ce66\\' );\\n                }\\n            }\\n        })\\n    </script>\\n</body>\\n';\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'demo-gltf',\n    data: function data() {\n        return {\n            code: code,\n            htmlCode: htmlCode,\n            loading: true,\n            intersected: null\n        };\n    },\n\n    methods: {\n        onLoad: function onLoad() {\n            this.loading = false;\n        },\n        onMouseMove: function onMouseMove(event) {\n\n            console.log(event);\n\n            if (!event) {\n\n                if (this.intersected) {\n                    this.intersected.material.color.setStyle('#fff');\n                }\n\n                this.intersected = null;\n                return;\n            }\n\n            this.intersected = event.object;\n            this.intersected.material.color.setStyle('#13ce66');\n        }\n    },\n    components: {\n        ModelObj: __WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue___default.a,\n        DemoBlock: __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default.a\n    }\n});\n\n/***/ }),\n\n/***/ 33:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__components_demo_block__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue__);\n\n\n\n\n\nvar code = '\\n<template>\\n    <model-obj src=\"static/models/obj/tree.obj\"></model-obj>\\n</template>\\n\\n<script>\\n    import { ModelObj } from \\'vue-3d-model\\'\\n\\n    export default {\\n        components: {\\n            ModelObj\\n        }\\n    }\\n</script>\\n';\n\nvar htmlCode = '\\n<body>\\n    <div id=\"app\">\\n        <model-obj src=\"static/models/obj/tree.obj\"></model-obj>\\n    </div>\\n    #scripts#\\n    <script>\\n        new Vue({\\n            el: \\'#app\\'\\n        })\\n    </script>\\n</body>\\n';\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'demo-obj',\n    data: function data() {\n        return {\n            code: code,\n            htmlCode: htmlCode,\n            loading: true\n        };\n    },\n\n    methods: {\n        onLoad: function onLoad() {\n            this.loading = false;\n        }\n    },\n    components: {\n        ModelObj: __WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue___default.a,\n        DemoBlock: __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default.a\n    }\n});\n\n/***/ }),\n\n/***/ 34:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__components_demo_block__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue__);\n\n\n\n\n\nvar code = '\\n<template>\\n    <model-obj \\n        src=\"static/models/obj/male02/male02.obj\"\\n        mtl=\"static/models/obj/male02/male02.mtl\"></model-obj>\\n</template>\\n\\n<script>\\n    import { ModelObj } from \\'vue-3d-model\\'\\n\\n    export default {\\n        components: {\\n            ModelObj\\n        }\\n    }\\n</script>\\n';\n\nvar htmlCode = '\\n<body>\\n    <div id=\"app\">\\n        <model-obj \\n            src=\"static/models/obj/male02/male02.obj\"\\n            mtl=\"static/models/obj/male02/male02.mtl\"></model-obj>\\n    </div>\\n    #scripts#\\n    <script>\\n        new Vue({\\n            el: \\'#app\\'\\n        })\\n    </script>\\n</body>\\n';\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'demo-obj-mtl',\n    data: function data() {\n        return {\n            code: code,\n            htmlCode: htmlCode,\n            loading: true\n        };\n    },\n\n    methods: {\n        onLoad: function onLoad() {\n            this.loading = false;\n        }\n    },\n    components: {\n        ModelObj: __WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue___default.a,\n        DemoBlock: __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default.a\n    }\n});\n\n/***/ }),\n\n/***/ 35:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__components_demo_block__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue__);\n\n\n\n\n\nvar code = '\\n<template>\\n    <model-obj src=\"static/models/obj/tree.obj\"></model-obj>\\n</template>\\n\\n<script>\\n    import { ModelObj } from \\'vue-3d-model\\'\\n\\n    export default {\\n        components: {\\n            ModelObj\\n        }\\n    }\\n</script>\\n';\n\nvar htmlCode = '\\n<body>\\n    <div id=\"app\">\\n        <model-obj src=\"static/models/obj/tree.obj\"></model-obj>\\n    </div>\\n    #scripts#\\n    <script>\\n        new Vue({\\n            el: \\'#app\\'\\n        })\\n    </script>\\n</body>\\n';\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'demo-obj',\n    data: function data() {\n        return {\n            code: code,\n            htmlCode: htmlCode,\n            loading: true\n        };\n    },\n\n    methods: {\n        onLoad: function onLoad() {\n            this.loading = false;\n        }\n    },\n    components: {\n        ModelObj: __WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue___default.a,\n        DemoBlock: __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default.a\n    }\n});\n\n/***/ }),\n\n/***/ 36:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__components_demo_block__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_model_collada_vue__ = __webpack_require__(22);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_model_collada_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__src_model_collada_vue__);\n\n\n\n\n\nvar code = '\\n<template>\\n    <model-collada\\n        :rotation=\"rotation\"\\n        @on-load=\"onLoad\"\\n        src=\"static/models/collada/elf.dae\"></model-collada>\\n</template>\\n\\n<script>\\n    import { ModelCollada } from \\'vue-3d-model\\'\\n\\n    export default {\\n        data: {\\n            rotation: {\\n                x: 0,\\n                y: 0,\\n                z: 0\\n            }\\n        },\\n        methods: {\\n            onLoad () {\\n                this.rotate();\\n            },\\n            rotate () {\\n                this.rotation.y += 0.01;\\n                requestAnimationFrame( this.rotate );\\n            }\\n        },\\n        components: {\\n            ModelCollada\\n        }\\n    }\\n</script>\\n';\n\nvar htmlCode = '\\n<body>\\n    <div id=\"app\">\\n        <model-collada\\n            :rotation=\"rotation\"\\n            @on-load=\"onLoad\"\\n            src=\"static/models/collada/elf.dae\"></model-collada>\\n    </div>\\n    #scripts#\\n    <script>\\n        new Vue({\\n            el: \\'#app\\',\\n            data: {\\n                rotation: {\\n                    x: 0,\\n                    y: 0,\\n                    z: 0\\n                }\\n            },\\n            methods: {\\n                onLoad () {\\n                    this.rotate();\\n                },\\n                rotate () {\\n                    this.rotation.y += 0.01;\\n                    requestAnimationFrame( this.rotate );\\n                }\\n            }\\n        })\\n    </script>\\n</body>\\n';\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'demo-rotate',\n    data: function data() {\n        return {\n            code: code,\n            htmlCode: htmlCode,\n            loading: true,\n            rotation: {\n                x: -Math.PI / 2,\n                y: 0,\n                z: 0\n            }\n        };\n    },\n\n    methods: {\n        onLoad: function onLoad() {\n            this.loading = false;\n            console.log(this.$refs.collada.object.rotation);\n\n            this.rotate();\n        },\n        rotate: function rotate() {\n            requestAnimationFrame(this.rotate);\n            this.rotation.z += 0.01;\n        }\n    },\n    components: {\n        ModelCollada: __WEBPACK_IMPORTED_MODULE_1__src_model_collada_vue___default.a,\n        DemoBlock: __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default.a\n    }\n});\n\n/***/ }),\n\n/***/ 37:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__components_demo_block__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_model_stl_vue__ = __webpack_require__(263);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_model_stl_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__src_model_stl_vue__);\n\n\n\n\n\nvar code = '\\n<template>\\n    <model-stl src=\"static/models/stl/slotted_disk.stl\"></model-stl>\\n</template>\\n\\n<script>\\n    import { ModelStl } from \\'vue-3d-model\\'\\n\\n    export default {\\n        components: {\\n            ModelStl\\n        }\\n    }\\n</script>\\n';\n\nvar htmlCode = '\\n<body>\\n    <div id=\"app\">\\n        <model-stl src=\"static/models/stl/slotted_disk.stl\"></model-stl>\\n    </div>\\n    #scripts#\\n    <script>\\n        new Vue({\\n            el: \\'#app\\'\\n        })\\n    </script>\\n</body>\\n';\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'demo-stl',\n    data: function data() {\n        return {\n            code: code,\n            htmlCode: htmlCode,\n            loading: true\n        };\n    },\n\n    methods: {\n        onLoad: function onLoad() {\n            this.loading = false;\n        }\n    },\n    components: {\n        ModelStl: __WEBPACK_IMPORTED_MODULE_1__src_model_stl_vue___default.a,\n        DemoBlock: __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default.a\n    }\n});\n\n/***/ }),\n\n/***/ 38:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__loaders_ColladaLoader__ = __webpack_require__(44);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__util__ = __webpack_require__(7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__model_mixin_vue__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__model_mixin_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__model_mixin_vue__);\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'model-collada',\n    mixins: [__WEBPACK_IMPORTED_MODULE_2__model_mixin_vue___default.a],\n    props: {\n        lights: {\n            type: Array,\n            default: function _default() {\n                return [{\n                    type: 'HemisphereLight',\n                    position: { x: 0, y: 1, z: 0 },\n                    skyColor: 0xaaaaff,\n                    groundColor: 0x806060,\n                    intensity: 0.2\n                }, {\n                    type: 'DirectionalLight',\n                    position: { x: 1, y: 1, z: 1 },\n                    color: 0xffffff,\n                    intensity: 0.8\n                }];\n            }\n        },\n        smoothing: {\n            type: Boolean,\n            default: false\n        }\n    },\n    data: function data() {\n\n        var loader = new __WEBPACK_IMPORTED_MODULE_0__loaders_ColladaLoader__[\"a\" /* ColladaLoader */]();\n        loader.options.convertUpAxis = true;\n\n        return {\n            loader: loader\n        };\n    },\n\n    methods: {\n        load: function load() {\n            var _this = this;\n\n            if (!this.src) return;\n\n            if (this.object) {\n                this.scene.remove(this.object);\n            }\n\n            this.loader.load(this.src, function (collada) {\n\n                _this.object = collada.scene;\n\n                _this.scene.add(_this.object);\n\n                _this.updateCamera();\n\n                _this.$emit('on-load');\n            }, function (err) {\n\n                _this.$emit('on-error', err);\n            });\n        }\n    }\n});\n\n/***/ }),\n\n/***/ 39:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_three__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__util__ = __webpack_require__(7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__controls_OrbitControls__ = __webpack_require__(43);\n\n\n\n\n\n\nvar suportWebGL = function () {\n\n    try {\n        var canvas = document.createElement('canvas');\n        return !!(window.WebGLRenderingContext && (canvas.getContext('webgl') || canvas.getContext('experimental-webgl')));\n    } catch (e) {\n        return false;\n    }\n}();\n\nvar handler = null;\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    props: {\n        src: {\n            type: String\n        },\n        width: {\n            type: Number\n        },\n        height: {\n            type: Number\n        },\n        position: {\n            type: Object,\n            default: function _default() {\n                return { x: 0, y: 0, z: 0 };\n            }\n        },\n        rotation: {\n            type: Object,\n            default: function _default() {\n                return { x: 0, y: 0, z: 0 };\n            }\n        },\n        scale: {\n            type: Object,\n            default: function _default() {\n                return { x: 1, y: 1, z: 1 };\n            }\n        },\n        lights: {\n            type: Array,\n            default: function _default() {\n                return [];\n            }\n        },\n        cameraPosition: {\n            type: Object\n        },\n        cameraRotation: {\n            type: Object\n        },\n        cameraUp: {\n            type: Object\n        },\n        cameraLookAt: {\n            type: Object\n        },\n        backgroundColor: {\n            default: 0xffffff\n        },\n        backgroundAlpha: {\n            type: Number,\n            default: 1\n        },\n        controllable: {\n            type: Boolean,\n            default: true\n        }\n    },\n    data: function data() {\n        return {\n            suportWebGL: suportWebGL,\n            size: {\n                width: this.width,\n                height: this.height\n            },\n            object: null,\n            raycaster: new __WEBPACK_IMPORTED_MODULE_0_three__[\"z\" /* Raycaster */](),\n            mouse: new __WEBPACK_IMPORTED_MODULE_0_three__[\"c\" /* Vector2 */](),\n            camera: new __WEBPACK_IMPORTED_MODULE_0_three__[\"A\" /* PerspectiveCamera */](45, 1, 0.001, 100000),\n            scene: new __WEBPACK_IMPORTED_MODULE_0_three__[\"B\" /* Scene */](),\n            renderer: null,\n            controls: null,\n            allLights: [],\n            clock: typeof performance === 'undefined' ? Date : performance\n        };\n    },\n\n    computed: {\n        hasListener: function hasListener() {\n            var events = this._events;\n            var result = {};\n\n            ['on-mousemove', 'on-mouseup', 'on-mousedown', 'on-click'].forEach(function (name) {\n                result[name] = !!events[name] && events[name].length > 0;\n            });\n\n            return result;\n        }\n    },\n    created: function created() {\n        window.addEventListener('resize', this.onResize, false);\n    },\n    mounted: function mounted() {\n\n        if (this.width === undefined || this.height === undefined) {\n            this.size = {\n                width: this.$el.offsetWidth,\n                height: this.$el.offsetHeight\n            };\n        }\n\n        this.renderer = new __WEBPACK_IMPORTED_MODULE_0_three__[\"C\" /* WebGLRenderer */]({ antialias: true, alpha: true, canvas: this.$refs.canvas });\n        this.renderer.shadowMap.enabled = true;\n\n        this.load();\n        this.update();\n\n        this.$el.addEventListener('mousedown', this.onMouseDown, false);\n        this.$el.addEventListener('mousemove', this.onMouseMove, false);\n        this.$el.addEventListener('mouseup', this.onMouseUp, false);\n        this.$el.addEventListener('click', this.onClick, false);\n\n        this.animate();\n    },\n    beforeDestroy: function beforeDestroy() {\n\n        this.$el.removeEventListener('mousedown', this.onMouseDown, false);\n        this.$el.removeEventListener('mousemove', this.onMouseMove, false);\n        this.$el.removeEventListener('mouseup', this.onMouseUp, false);\n        this.$el.removeEventListener('click', this.onClick, false);\n    },\n\n    watch: {\n        src: function src() {\n            this.load();\n        },\n\n        rotation: {\n            deep: true,\n            handler: function handler(val) {\n                if (!this.object) return;\n                this.object.rotation.set(val.x, val.y, val.z);\n            }\n        },\n        position: {\n            deep: true,\n            handler: function handler(val) {\n                if (!this.object) return;\n                this.object.position.set(val.x, val.y, val.z);\n            }\n        },\n        scale: {\n            deep: true,\n            handler: function handler(val) {\n                if (!this.object) return;\n                this.object.scale.set(val.x, val.y, val.z);\n            }\n        },\n        lights: {\n            deep: true,\n            handler: function handler(val, oldVal) {\n                this.updateLights();\n            }\n        },\n        size: {\n            deep: true,\n            handler: function handler(val) {\n                this.updateCamera();\n                this.updateRenderer();\n            }\n        },\n        controllable: function controllable() {\n            this.updateControls();\n        },\n        backgroundAlpha: function backgroundAlpha() {\n            this.updateRenderer();\n        },\n        backgroundColor: function backgroundColor() {\n            this.updateRenderer();\n        }\n    },\n    methods: {\n        onResize: function onResize() {\n            var _this = this;\n\n            if (this.width === undefined || this.height === undefined) {\n\n                this.$nextTick(function () {\n                    _this.size = {\n                        width: _this.$el.offsetWidth,\n                        height: _this.$el.offsetHeight\n                    };\n                });\n            }\n        },\n        onMouseDown: function onMouseDown(event) {\n\n            if (!this.hasListener['on-mousedown']) return;\n\n            var intersected = this.pick(event.clientX, event.clientY);\n            this.$emit('on-mousedown', intersected);\n        },\n        onMouseMove: function onMouseMove(event) {\n\n            if (!this.hasListener['on-mousemove']) return;\n\n            var intersected = this.pick(event.clientX, event.clientY);\n            this.$emit('on-mousemove', intersected);\n        },\n        onMouseUp: function onMouseUp(event) {\n\n            if (!this.hasListener['on-mouseup']) return;\n\n            var intersected = this.pick(event.clientX, event.clientY);\n            this.$emit('on-mouseup', intersected);\n        },\n        onClick: function onClick(event) {\n\n            if (!this.hasListener['on-click']) return;\n\n            var intersected = this.pick(event.clientX, event.clientY);\n            this.$emit('on-click', intersected);\n        },\n        pick: function pick(x, y) {\n\n            if (!this.object) return;\n\n            var rect = this.$el.getBoundingClientRect();\n\n            x -= rect.left;\n            y -= rect.top;\n\n            this.mouse.x = x / this.size.width * 2 - 1;\n            this.mouse.y = -(y / this.size.height) * 2 + 1;\n\n            this.raycaster.setFromCamera(this.mouse, this.camera);\n\n            var intersects = this.raycaster.intersectObject(this.object, true);\n\n            return (intersects && intersects.length) > 0 ? intersects[0] : null;\n        },\n        update: function update() {\n\n            this.updateRenderer();\n            this.updateModel();\n            this.updateCamera();\n            this.updateLights();\n            this.updateControls();\n        },\n        updateModel: function updateModel() {\n\n            var object = this.object;\n\n            if (!object) return;\n\n            object.position.copy(this.position);\n            object.rotation.copy(this.rotation);\n            object.scale.copy(this.scale);\n\n            object.matrixWorldNeedsUpdate = true;\n        },\n        updateRenderer: function updateRenderer() {\n\n            var renderer = this.renderer;\n\n            renderer.setSize(this.size.width, this.size.height);\n            renderer.setPixelRatio(window.devicePixelRatio || 1);\n            renderer.setClearColor(new __WEBPACK_IMPORTED_MODULE_0_three__[\"j\" /* Color */](this.backgroundColor).getHex());\n            renderer.setClearAlpha(this.backgroundAlpha);\n        },\n        updateCamera: function updateCamera() {\n\n            var camera = this.camera;\n            var object = this.object;\n\n            var distance = 0;\n            var center = null;\n\n            camera.aspect = this.size.width / this.size.height;\n            camera.updateProjectionMatrix();\n\n            if (!this.cameraLookAt && !this.cameraPosition && !this.cameraRotation && !this.cameraUp) {\n\n                if (!object) return;\n\n                distance = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__util__[\"b\" /* getSize */])(object).length();\n                center = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__util__[\"c\" /* getCenter */])(object);\n\n                camera.position.set(0, 0, 0);\n                camera.position.z = distance;\n                camera.position.add(center);\n                camera.lookAt(center);\n            } else {}\n\n            if (this.controls && center) this.controls.target.copy(center);\n        },\n        updateLights: function updateLights() {\n            var _this2 = this;\n\n            this.scene.remove.apply(this.scene, this.allLights);\n\n            this.allLights = [];\n\n            this.lights.forEach(function (item) {\n\n                if (!item.type) return;\n\n                var type = item.type.toLowerCase();\n\n                var light = null;\n\n                if (type === 'ambient' || type === 'ambientlight') {\n\n                    var color = item.color || 0x404040;\n                    var intensity = item.intensity || 1;\n\n                    light = new __WEBPACK_IMPORTED_MODULE_0_three__[\"D\" /* AmbientLight */](color, intensity);\n                } else if (type === 'point' || type === 'pointlight') {\n\n                    var _color = item.color || 0xffffff;\n                    var _intensity = item.intensity || 1;\n                    var distance = item.distance || 0;\n                    var decay = item.decay || 1;\n\n                    light = new PointLight(_color, _intensity, distance, decay);\n\n                    if (item.position) {\n                        light.position.copy(item.position);\n                    }\n                } else if (type === 'directional' || type === 'directionallight') {\n\n                    var _color2 = item.color || 0xffffff;\n                    var _intensity2 = item.intensity || 1;\n\n                    light = new __WEBPACK_IMPORTED_MODULE_0_three__[\"E\" /* DirectionalLight */](_color2, _intensity2);\n\n                    if (item.position) {\n                        light.position.copy(item.position);\n                    }\n\n                    if (item.target) {\n                        light.target.copy(item.target);\n                    }\n                } else if (type === 'hemisphere' || type === 'hemispherelight') {\n\n                    var skyColor = item.skyColor || 0xffffff;\n                    var groundColor = item.groundColor || 0xffffff;\n                    var _intensity3 = item.intensity || 1;\n\n                    light = new __WEBPACK_IMPORTED_MODULE_0_three__[\"F\" /* HemisphereLight */](skyColor, groundColor, _intensity3);\n\n                    if (item.position) {\n                        light.position.copy(item.position);\n                    }\n                }\n\n                _this2.allLights.push(light);\n                _this2.scene.add(light);\n            });\n        },\n        updateControls: function updateControls() {\n\n            if (this.controllable && this.controls) return;\n\n            if (this.controllable) {\n\n                if (this.controls) return;\n\n                this.controls = new __WEBPACK_IMPORTED_MODULE_2__controls_OrbitControls__[\"a\" /* OrbitControls */](this.camera, this.$el);\n                this.controls.type = 'orbit';\n            } else {\n\n                if (this.controls) {\n\n                    this.controls.dispose();\n                    this.controls = null;\n                }\n            }\n        },\n        load: function load() {\n            var _this3 = this;\n\n            if (!this.src) return;\n\n            if (this.object) {\n                this.scene.remove(this.object);\n            }\n\n            this.loader.load(this.src, function (object) {\n\n                if (_this3.process) {\n                    _this3.process(object);\n                }\n\n                _this3.object = object;\n\n                _this3.scene.add(_this3.object);\n\n                _this3.updateCamera();\n\n                _this3.$emit('on-load');\n            }, function (err) {\n\n                _this3.$emit('on-error', err);\n            });\n        },\n        animate: function animate() {\n            requestAnimationFrame(this.animate);\n            this.render();\n        },\n        render: function render() {\n            this.renderer.render(this.scene, this.camera);\n        }\n    }\n});\n\n/***/ }),\n\n/***/ 40:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__loaders_OBJLoader__ = __webpack_require__(47);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__loaders_MTLLoader__ = __webpack_require__(46);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__util__ = __webpack_require__(7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__model_mixin_vue__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__model_mixin_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3__model_mixin_vue__);\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'model-obj',\n    mixins: [__WEBPACK_IMPORTED_MODULE_3__model_mixin_vue___default.a],\n    props: {\n        lights: {\n            type: Array,\n            default: function _default() {\n                return [{\n                    type: 'HemisphereLight',\n                    position: { x: 0, y: 1, z: 0 },\n                    skyColor: 0xaaaaff,\n                    groundColor: 0x806060,\n                    intensity: 0.2\n                }, {\n                    type: 'DirectionalLight',\n                    position: { x: 1, y: 1, z: 1 },\n                    color: 0xffffff,\n                    intensity: 0.8\n                }];\n            }\n        },\n        smoothing: {\n            type: Boolean,\n            default: false\n        },\n        mtlPath: {\n            type: String\n        },\n        mtl: {\n            type: String\n        }\n    },\n    data: function data() {\n        return {\n            loader: new __WEBPACK_IMPORTED_MODULE_0__loaders_OBJLoader__[\"a\" /* OBJLoader */](),\n            mtlLoader: new __WEBPACK_IMPORTED_MODULE_1__loaders_MTLLoader__[\"a\" /* MTLLoader */]()\n        };\n    },\n\n    watch: {\n        mtl: function mtl() {\n            this.load();\n        }\n    },\n    methods: {\n        process: function process(object) {\n            if (this.smoothing) {\n                object.traverse(function (child) {\n                    if (child.geometry) {\n                        child.geometry = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__util__[\"a\" /* toIndexed */])(child.geometry);\n                        child.geometry.computeVertexNormals();\n                    }\n                });\n            }\n        },\n        load: function load() {\n            var _this = this;\n\n            if (!this.src) return;\n\n            if (this.object) {\n                this.scene.remove(this.object);\n            }\n\n            var onLoad = function onLoad(object) {\n\n                if (_this.process) {\n                    _this.process(object);\n                }\n\n                _this.object = object;\n\n                _this.scene.add(_this.object);\n\n                _this.updateCamera();\n\n                _this.$emit('on-load');\n            };\n\n            var onError = function onError(err) {\n\n                _this.$emit('on-error', err);\n            };\n\n            if (this.mtl) {\n\n                var mtlPath = this.mtlPath;\n                var mtlSrc = this.mtl;\n\n                if (!this.mtlPath) {\n\n                    var result = /^(.*\\/)([^/]*)$/.exec(this.mtl);\n\n                    if (result) {\n                        mtlPath = result[1];\n                        mtlSrc = result[2];\n                    }\n                }\n\n                if (mtlPath) {\n                    this.mtlLoader.setPath(mtlPath);\n                }\n\n                this.mtlLoader.load(mtlSrc, function (materials) {\n\n                    materials.preload();\n\n                    _this.loader.setMaterials(materials);\n\n                    _this.loader.load(_this.src, onLoad, onError);\n                }, onError);\n            } else {\n\n                this.loader.load(this.src, onLoad, onError);\n            }\n        }\n    }\n});\n\n/***/ }),\n\n/***/ 41:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__loaders_STLLoader__ = __webpack_require__(48);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__model_mixin_vue__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__model_mixin_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__model_mixin_vue__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_three__ = __webpack_require__(1);\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'model-stl',\n    mixins: [__WEBPACK_IMPORTED_MODULE_1__model_mixin_vue___default.a],\n    props: {\n        lights: {\n            type: Array,\n            default: function _default() {\n                return [{\n                    type: 'HemisphereLight',\n                    position: { x: 0, y: 1, z: 0 },\n                    skyColor: 0xaaaaff,\n                    groundColor: 0x806060,\n                    intensity: 0.2\n                }, {\n                    type: 'DirectionalLight',\n                    position: { x: 1, y: 1, z: 1 },\n                    color: 0xffffff,\n                    intensity: 0.8\n                }];\n            }\n        }\n    },\n    data: function data() {\n        return {\n            loader: new __WEBPACK_IMPORTED_MODULE_0__loaders_STLLoader__[\"a\" /* STLLoader */]()\n        };\n    },\n\n    methods: {\n        load: function load() {\n            var _this = this;\n\n            if (!this.src) return;\n\n            if (this.object) {\n                this.scene.remove(this.object);\n            }\n\n            this.loader.load(this.src, function (geometry) {\n\n                _this.object = new __WEBPACK_IMPORTED_MODULE_2_three__[\"x\" /* Mesh */](geometry, new __WEBPACK_IMPORTED_MODULE_2_three__[\"k\" /* MeshPhongMaterial */]());\n\n                _this.scene.add(_this.object);\n\n                _this.updateCamera();\n\n                _this.$emit('on-load');\n            }, function (err) {\n\n                _this.$emit('on-error', err);\n            });\n        }\n    }\n});\n\n/***/ }),\n\n/***/ 42:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_three__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__model_mixin_vue__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__model_mixin_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__model_mixin_vue__);\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'model-three',\n    mixins: [__WEBPACK_IMPORTED_MODULE_1__model_mixin_vue___default.a],\n    data: function data() {\n        return {\n            loader: new __WEBPACK_IMPORTED_MODULE_0_three__[\"_4\" /* ObjectLoader */]()\n        };\n    }\n});\n\n/***/ }),\n\n/***/ 43:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return OrbitControls; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_create__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_create___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_create__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_three__ = __webpack_require__(1);\n\n\n\nvar OrbitControls = function OrbitControls(object, domElement) {\n\n\t\tthis.object = object;\n\n\t\tthis.domElement = domElement !== undefined ? domElement : document;\n\n\t\tthis.enabled = true;\n\n\t\tthis.target = new __WEBPACK_IMPORTED_MODULE_1_three__[\"b\" /* Vector3 */]();\n\n\t\tthis.minDistance = 0;\n\t\tthis.maxDistance = Infinity;\n\n\t\tthis.minZoom = 0;\n\t\tthis.maxZoom = Infinity;\n\n\t\tthis.minPolarAngle = 0;\n\t\tthis.maxPolarAngle = Math.PI;\n\t\tthis.minAzimuthAngle = -Infinity;\n\t\tthis.maxAzimuthAngle = Infinity;\n\t\tthis.enableDamping = false;\n\t\tthis.dampingFactor = 0.25;\n\n\t\tthis.enableZoom = true;\n\t\tthis.zoomSpeed = 1.0;\n\n\t\tthis.enableRotate = true;\n\t\tthis.rotateSpeed = 1.0;\n\n\t\tthis.enablePan = true;\n\t\tthis.keyPanSpeed = 7.0;\n\t\tthis.autoRotate = false;\n\t\tthis.autoRotateSpeed = 2.0;\n\t\tthis.enableKeys = true;\n\n\t\tthis.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 };\n\n\t\tthis.mouseButtons = { ORBIT: __WEBPACK_IMPORTED_MODULE_1_three__[\"G\" /* MOUSE */].LEFT, ZOOM: __WEBPACK_IMPORTED_MODULE_1_three__[\"G\" /* MOUSE */].MIDDLE, PAN: __WEBPACK_IMPORTED_MODULE_1_three__[\"G\" /* MOUSE */].RIGHT };\n\n\t\tthis.target0 = this.target.clone();\n\t\tthis.position0 = this.object.position.clone();\n\t\tthis.zoom0 = this.object.zoom;\n\n\t\tthis.getPolarAngle = function () {\n\n\t\t\t\treturn spherical.phi;\n\t\t};\n\n\t\tthis.getAzimuthalAngle = function () {\n\n\t\t\t\treturn spherical.theta;\n\t\t};\n\n\t\tthis.saveState = function () {\n\n\t\t\t\tscope.target0.copy(scope.target);\n\t\t\t\tscope.position0.copy(scope.object.position);\n\t\t\t\tscope.zoom0 = scope.object.zoom;\n\t\t};\n\n\t\tthis.reset = function () {\n\n\t\t\t\tscope.target.copy(scope.target0);\n\t\t\t\tscope.object.position.copy(scope.position0);\n\t\t\t\tscope.object.zoom = scope.zoom0;\n\n\t\t\t\tscope.object.updateProjectionMatrix();\n\t\t\t\tscope.dispatchEvent(changeEvent);\n\n\t\t\t\tscope.update();\n\n\t\t\t\tstate = STATE.NONE;\n\t\t};\n\n\t\tthis.update = function () {\n\n\t\t\t\tvar offset = new __WEBPACK_IMPORTED_MODULE_1_three__[\"b\" /* Vector3 */]();\n\n\t\t\t\tvar quat = new __WEBPACK_IMPORTED_MODULE_1_three__[\"H\" /* Quaternion */]().setFromUnitVectors(object.up, new __WEBPACK_IMPORTED_MODULE_1_three__[\"b\" /* Vector3 */](0, 1, 0));\n\t\t\t\tvar quatInverse = quat.clone().inverse();\n\n\t\t\t\tvar lastPosition = new __WEBPACK_IMPORTED_MODULE_1_three__[\"b\" /* Vector3 */]();\n\t\t\t\tvar lastQuaternion = new __WEBPACK_IMPORTED_MODULE_1_three__[\"H\" /* Quaternion */]();\n\n\t\t\t\treturn function update() {\n\n\t\t\t\t\t\tvar position = scope.object.position;\n\n\t\t\t\t\t\toffset.copy(position).sub(scope.target);\n\n\t\t\t\t\t\toffset.applyQuaternion(quat);\n\n\t\t\t\t\t\tspherical.setFromVector3(offset);\n\n\t\t\t\t\t\tif (scope.autoRotate && state === STATE.NONE) {\n\n\t\t\t\t\t\t\t\trotateLeft(getAutoRotationAngle());\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tspherical.theta += sphericalDelta.theta;\n\t\t\t\t\t\tspherical.phi += sphericalDelta.phi;\n\n\t\t\t\t\t\tspherical.theta = Math.max(scope.minAzimuthAngle, Math.min(scope.maxAzimuthAngle, spherical.theta));\n\n\t\t\t\t\t\tspherical.phi = Math.max(scope.minPolarAngle, Math.min(scope.maxPolarAngle, spherical.phi));\n\n\t\t\t\t\t\tspherical.makeSafe();\n\n\t\t\t\t\t\tspherical.radius *= scale;\n\n\t\t\t\t\t\tspherical.radius = Math.max(scope.minDistance, Math.min(scope.maxDistance, spherical.radius));\n\n\t\t\t\t\t\tscope.target.add(panOffset);\n\n\t\t\t\t\t\toffset.setFromSpherical(spherical);\n\n\t\t\t\t\t\toffset.applyQuaternion(quatInverse);\n\n\t\t\t\t\t\tposition.copy(scope.target).add(offset);\n\n\t\t\t\t\t\tscope.object.lookAt(scope.target);\n\n\t\t\t\t\t\tif (scope.enableDamping === true) {\n\n\t\t\t\t\t\t\t\tsphericalDelta.theta *= 1 - scope.dampingFactor;\n\t\t\t\t\t\t\t\tsphericalDelta.phi *= 1 - scope.dampingFactor;\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tsphericalDelta.set(0, 0, 0);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tscale = 1;\n\t\t\t\t\t\tpanOffset.set(0, 0, 0);\n\n\t\t\t\t\t\tif (zoomChanged || lastPosition.distanceToSquared(scope.object.position) > EPS || 8 * (1 - lastQuaternion.dot(scope.object.quaternion)) > EPS) {\n\n\t\t\t\t\t\t\t\tscope.dispatchEvent(changeEvent);\n\n\t\t\t\t\t\t\t\tlastPosition.copy(scope.object.position);\n\t\t\t\t\t\t\t\tlastQuaternion.copy(scope.object.quaternion);\n\t\t\t\t\t\t\t\tzoomChanged = false;\n\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn false;\n\t\t\t\t};\n\t\t}();\n\n\t\tthis.dispose = function () {\n\n\t\t\t\tscope.domElement.removeEventListener('contextmenu', onContextMenu, false);\n\t\t\t\tscope.domElement.removeEventListener('mousedown', onMouseDown, false);\n\t\t\t\tscope.domElement.removeEventListener('wheel', onMouseWheel, false);\n\n\t\t\t\tscope.domElement.removeEventListener('touchstart', onTouchStart, false);\n\t\t\t\tscope.domElement.removeEventListener('touchend', onTouchEnd, false);\n\t\t\t\tscope.domElement.removeEventListener('touchmove', onTouchMove, false);\n\n\t\t\t\tdocument.removeEventListener('mousemove', onMouseMove, false);\n\t\t\t\tdocument.removeEventListener('mouseup', onMouseUp, false);\n\n\t\t\t\twindow.removeEventListener('keydown', onKeyDown, false);\n\t\t};\n\n\t\tvar scope = this;\n\n\t\tvar changeEvent = { type: 'change' };\n\t\tvar startEvent = { type: 'start' };\n\t\tvar endEvent = { type: 'end' };\n\n\t\tvar STATE = { NONE: -1, ROTATE: 0, DOLLY: 1, PAN: 2, TOUCH_ROTATE: 3, TOUCH_DOLLY: 4, TOUCH_PAN: 5 };\n\n\t\tvar state = STATE.NONE;\n\n\t\tvar EPS = 0.000001;\n\n\t\tvar spherical = new __WEBPACK_IMPORTED_MODULE_1_three__[\"I\" /* Spherical */]();\n\t\tvar sphericalDelta = new __WEBPACK_IMPORTED_MODULE_1_three__[\"I\" /* Spherical */]();\n\n\t\tvar scale = 1;\n\t\tvar panOffset = new __WEBPACK_IMPORTED_MODULE_1_three__[\"b\" /* Vector3 */]();\n\t\tvar zoomChanged = false;\n\n\t\tvar rotateStart = new __WEBPACK_IMPORTED_MODULE_1_three__[\"c\" /* Vector2 */]();\n\t\tvar rotateEnd = new __WEBPACK_IMPORTED_MODULE_1_three__[\"c\" /* Vector2 */]();\n\t\tvar rotateDelta = new __WEBPACK_IMPORTED_MODULE_1_three__[\"c\" /* Vector2 */]();\n\n\t\tvar panStart = new __WEBPACK_IMPORTED_MODULE_1_three__[\"c\" /* Vector2 */]();\n\t\tvar panEnd = new __WEBPACK_IMPORTED_MODULE_1_three__[\"c\" /* Vector2 */]();\n\t\tvar panDelta = new __WEBPACK_IMPORTED_MODULE_1_three__[\"c\" /* Vector2 */]();\n\n\t\tvar dollyStart = new __WEBPACK_IMPORTED_MODULE_1_three__[\"c\" /* Vector2 */]();\n\t\tvar dollyEnd = new __WEBPACK_IMPORTED_MODULE_1_three__[\"c\" /* Vector2 */]();\n\t\tvar dollyDelta = new __WEBPACK_IMPORTED_MODULE_1_three__[\"c\" /* Vector2 */]();\n\n\t\tfunction getAutoRotationAngle() {\n\n\t\t\t\treturn 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n\t\t}\n\n\t\tfunction getZoomScale() {\n\n\t\t\t\treturn Math.pow(0.95, scope.zoomSpeed);\n\t\t}\n\n\t\tfunction rotateLeft(angle) {\n\n\t\t\t\tsphericalDelta.theta -= angle;\n\t\t}\n\n\t\tfunction rotateUp(angle) {\n\n\t\t\t\tsphericalDelta.phi -= angle;\n\t\t}\n\n\t\tvar panLeft = function () {\n\n\t\t\t\tvar v = new __WEBPACK_IMPORTED_MODULE_1_three__[\"b\" /* Vector3 */]();\n\n\t\t\t\treturn function panLeft(distance, objectMatrix) {\n\n\t\t\t\t\t\tv.setFromMatrixColumn(objectMatrix, 0);\n\t\t\t\t\t\tv.multiplyScalar(-distance);\n\n\t\t\t\t\t\tpanOffset.add(v);\n\t\t\t\t};\n\t\t}();\n\n\t\tvar panUp = function () {\n\n\t\t\t\tvar v = new __WEBPACK_IMPORTED_MODULE_1_three__[\"b\" /* Vector3 */]();\n\n\t\t\t\treturn function panUp(distance, objectMatrix) {\n\n\t\t\t\t\t\tv.setFromMatrixColumn(objectMatrix, 1);\n\t\t\t\t\t\tv.multiplyScalar(distance);\n\n\t\t\t\t\t\tpanOffset.add(v);\n\t\t\t\t};\n\t\t}();\n\n\t\tvar pan = function () {\n\n\t\t\t\tvar offset = new __WEBPACK_IMPORTED_MODULE_1_three__[\"b\" /* Vector3 */]();\n\n\t\t\t\treturn function pan(deltaX, deltaY) {\n\n\t\t\t\t\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t\t\t\t\t\tif (scope.object instanceof __WEBPACK_IMPORTED_MODULE_1_three__[\"A\" /* PerspectiveCamera */]) {\n\t\t\t\t\t\t\t\tvar position = scope.object.position;\n\t\t\t\t\t\t\t\toffset.copy(position).sub(scope.target);\n\t\t\t\t\t\t\t\tvar targetDistance = offset.length();\n\n\t\t\t\t\t\t\t\ttargetDistance *= Math.tan(scope.object.fov / 2 * Math.PI / 180.0);\n\n\t\t\t\t\t\t\t\tpanLeft(2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix);\n\t\t\t\t\t\t\t\tpanUp(2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix);\n\t\t\t\t\t\t} else if (scope.object instanceof __WEBPACK_IMPORTED_MODULE_1_three__[\"J\" /* OrthographicCamera */]) {\n\t\t\t\t\t\t\t\tpanLeft(deltaX * (scope.object.right - scope.object.left) / scope.object.zoom / element.clientWidth, scope.object.matrix);\n\t\t\t\t\t\t\t\tpanUp(deltaY * (scope.object.top - scope.object.bottom) / scope.object.zoom / element.clientHeight, scope.object.matrix);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tconsole.warn('WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.');\n\t\t\t\t\t\t\t\tscope.enablePan = false;\n\t\t\t\t\t\t}\n\t\t\t\t};\n\t\t}();\n\n\t\tfunction dollyIn(dollyScale) {\n\n\t\t\t\tif (scope.object instanceof __WEBPACK_IMPORTED_MODULE_1_three__[\"A\" /* PerspectiveCamera */]) {\n\n\t\t\t\t\t\tscale /= dollyScale;\n\t\t\t\t} else if (scope.object instanceof __WEBPACK_IMPORTED_MODULE_1_three__[\"J\" /* OrthographicCamera */]) {\n\n\t\t\t\t\t\tscope.object.zoom = Math.max(scope.minZoom, Math.min(scope.maxZoom, scope.object.zoom * dollyScale));\n\t\t\t\t\t\tscope.object.updateProjectionMatrix();\n\t\t\t\t\t\tzoomChanged = true;\n\t\t\t\t} else {\n\n\t\t\t\t\t\tconsole.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.');\n\t\t\t\t\t\tscope.enableZoom = false;\n\t\t\t\t}\n\t\t}\n\n\t\tfunction dollyOut(dollyScale) {\n\n\t\t\t\tif (scope.object instanceof __WEBPACK_IMPORTED_MODULE_1_three__[\"A\" /* PerspectiveCamera */]) {\n\n\t\t\t\t\t\tscale *= dollyScale;\n\t\t\t\t} else if (scope.object instanceof __WEBPACK_IMPORTED_MODULE_1_three__[\"J\" /* OrthographicCamera */]) {\n\n\t\t\t\t\t\tscope.object.zoom = Math.max(scope.minZoom, Math.min(scope.maxZoom, scope.object.zoom / dollyScale));\n\t\t\t\t\t\tscope.object.updateProjectionMatrix();\n\t\t\t\t\t\tzoomChanged = true;\n\t\t\t\t} else {\n\n\t\t\t\t\t\tconsole.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.');\n\t\t\t\t\t\tscope.enableZoom = false;\n\t\t\t\t}\n\t\t}\n\n\t\tfunction handleMouseDownRotate(event) {\n\n\t\t\t\trotateStart.set(event.clientX, event.clientY);\n\t\t}\n\n\t\tfunction handleMouseDownDolly(event) {\n\n\t\t\t\tdollyStart.set(event.clientX, event.clientY);\n\t\t}\n\n\t\tfunction handleMouseDownPan(event) {\n\n\t\t\t\tpanStart.set(event.clientX, event.clientY);\n\t\t}\n\n\t\tfunction handleMouseMoveRotate(event) {\n\n\t\t\t\trotateEnd.set(event.clientX, event.clientY);\n\t\t\t\trotateDelta.subVectors(rotateEnd, rotateStart);\n\n\t\t\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t\t\t\trotateLeft(2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed);\n\n\t\t\t\trotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed);\n\n\t\t\t\trotateStart.copy(rotateEnd);\n\n\t\t\t\tscope.update();\n\t\t}\n\n\t\tfunction handleMouseMoveDolly(event) {\n\n\t\t\t\tdollyEnd.set(event.clientX, event.clientY);\n\n\t\t\t\tdollyDelta.subVectors(dollyEnd, dollyStart);\n\n\t\t\t\tif (dollyDelta.y > 0) {\n\n\t\t\t\t\t\tdollyIn(getZoomScale());\n\t\t\t\t} else if (dollyDelta.y < 0) {\n\n\t\t\t\t\t\tdollyOut(getZoomScale());\n\t\t\t\t}\n\n\t\t\t\tdollyStart.copy(dollyEnd);\n\n\t\t\t\tscope.update();\n\t\t}\n\n\t\tfunction handleMouseMovePan(event) {\n\n\t\t\t\tpanEnd.set(event.clientX, event.clientY);\n\n\t\t\t\tpanDelta.subVectors(panEnd, panStart);\n\n\t\t\t\tpan(panDelta.x, panDelta.y);\n\n\t\t\t\tpanStart.copy(panEnd);\n\n\t\t\t\tscope.update();\n\t\t}\n\n\t\tfunction handleMouseUp(event) {}\n\n\t\tfunction handleMouseWheel(event) {\n\n\t\t\t\tif (event.deltaY < 0) {\n\n\t\t\t\t\t\tdollyOut(getZoomScale());\n\t\t\t\t} else if (event.deltaY > 0) {\n\n\t\t\t\t\t\tdollyIn(getZoomScale());\n\t\t\t\t}\n\n\t\t\t\tscope.update();\n\t\t}\n\n\t\tfunction handleKeyDown(event) {\n\n\t\t\t\tswitch (event.keyCode) {\n\n\t\t\t\t\t\tcase scope.keys.UP:\n\t\t\t\t\t\t\t\tpan(0, scope.keyPanSpeed);\n\t\t\t\t\t\t\t\tscope.update();\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase scope.keys.BOTTOM:\n\t\t\t\t\t\t\t\tpan(0, -scope.keyPanSpeed);\n\t\t\t\t\t\t\t\tscope.update();\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase scope.keys.LEFT:\n\t\t\t\t\t\t\t\tpan(scope.keyPanSpeed, 0);\n\t\t\t\t\t\t\t\tscope.update();\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase scope.keys.RIGHT:\n\t\t\t\t\t\t\t\tpan(-scope.keyPanSpeed, 0);\n\t\t\t\t\t\t\t\tscope.update();\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\t\t}\n\n\t\tfunction handleTouchStartRotate(event) {\n\n\t\t\t\trotateStart.set(event.touches[0].pageX, event.touches[0].pageY);\n\t\t}\n\n\t\tfunction handleTouchStartDolly(event) {\n\n\t\t\t\tvar dx = event.touches[0].pageX - event.touches[1].pageX;\n\t\t\t\tvar dy = event.touches[0].pageY - event.touches[1].pageY;\n\n\t\t\t\tvar distance = Math.sqrt(dx * dx + dy * dy);\n\n\t\t\t\tdollyStart.set(0, distance);\n\t\t}\n\n\t\tfunction handleTouchStartPan(event) {\n\n\t\t\t\tpanStart.set(event.touches[0].pageX, event.touches[0].pageY);\n\t\t}\n\n\t\tfunction handleTouchMoveRotate(event) {\n\n\t\t\t\trotateEnd.set(event.touches[0].pageX, event.touches[0].pageY);\n\t\t\t\trotateDelta.subVectors(rotateEnd, rotateStart);\n\n\t\t\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t\t\t\trotateLeft(2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed);\n\n\t\t\t\trotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed);\n\n\t\t\t\trotateStart.copy(rotateEnd);\n\n\t\t\t\tscope.update();\n\t\t}\n\n\t\tfunction handleTouchMoveDolly(event) {\n\n\t\t\t\tvar dx = event.touches[0].pageX - event.touches[1].pageX;\n\t\t\t\tvar dy = event.touches[0].pageY - event.touches[1].pageY;\n\n\t\t\t\tvar distance = Math.sqrt(dx * dx + dy * dy);\n\n\t\t\t\tdollyEnd.set(0, distance);\n\n\t\t\t\tdollyDelta.subVectors(dollyEnd, dollyStart);\n\n\t\t\t\tif (dollyDelta.y > 0) {\n\n\t\t\t\t\t\tdollyOut(getZoomScale());\n\t\t\t\t} else if (dollyDelta.y < 0) {\n\n\t\t\t\t\t\tdollyIn(getZoomScale());\n\t\t\t\t}\n\n\t\t\t\tdollyStart.copy(dollyEnd);\n\n\t\t\t\tscope.update();\n\t\t}\n\n\t\tfunction handleTouchMovePan(event) {\n\n\t\t\t\tpanEnd.set(event.touches[0].pageX, event.touches[0].pageY);\n\n\t\t\t\tpanDelta.subVectors(panEnd, panStart);\n\n\t\t\t\tpan(panDelta.x, panDelta.y);\n\n\t\t\t\tpanStart.copy(panEnd);\n\n\t\t\t\tscope.update();\n\t\t}\n\n\t\tfunction handleTouchEnd(event) {}\n\n\t\tfunction onMouseDown(event) {\n\n\t\t\t\tif (scope.enabled === false) return;\n\n\t\t\t\tevent.preventDefault();\n\n\t\t\t\tswitch (event.button) {\n\n\t\t\t\t\t\tcase scope.mouseButtons.ORBIT:\n\n\t\t\t\t\t\t\t\tif (scope.enableRotate === false) return;\n\n\t\t\t\t\t\t\t\thandleMouseDownRotate(event);\n\n\t\t\t\t\t\t\t\tstate = STATE.ROTATE;\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase scope.mouseButtons.ZOOM:\n\n\t\t\t\t\t\t\t\tif (scope.enableZoom === false) return;\n\n\t\t\t\t\t\t\t\thandleMouseDownDolly(event);\n\n\t\t\t\t\t\t\t\tstate = STATE.DOLLY;\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase scope.mouseButtons.PAN:\n\n\t\t\t\t\t\t\t\tif (scope.enablePan === false) return;\n\n\t\t\t\t\t\t\t\thandleMouseDownPan(event);\n\n\t\t\t\t\t\t\t\tstate = STATE.PAN;\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\tif (state !== STATE.NONE) {\n\n\t\t\t\t\t\tdocument.addEventListener('mousemove', onMouseMove, false);\n\t\t\t\t\t\tdocument.addEventListener('mouseup', onMouseUp, false);\n\n\t\t\t\t\t\tscope.dispatchEvent(startEvent);\n\t\t\t\t}\n\t\t}\n\n\t\tfunction onMouseMove(event) {\n\n\t\t\t\tif (scope.enabled === false) return;\n\n\t\t\t\tevent.preventDefault();\n\n\t\t\t\tswitch (state) {\n\n\t\t\t\t\t\tcase STATE.ROTATE:\n\n\t\t\t\t\t\t\t\tif (scope.enableRotate === false) return;\n\n\t\t\t\t\t\t\t\thandleMouseMoveRotate(event);\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase STATE.DOLLY:\n\n\t\t\t\t\t\t\t\tif (scope.enableZoom === false) return;\n\n\t\t\t\t\t\t\t\thandleMouseMoveDolly(event);\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase STATE.PAN:\n\n\t\t\t\t\t\t\t\tif (scope.enablePan === false) return;\n\n\t\t\t\t\t\t\t\thandleMouseMovePan(event);\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\t\t}\n\n\t\tfunction onMouseUp(event) {\n\n\t\t\t\tif (scope.enabled === false) return;\n\n\t\t\t\thandleMouseUp(event);\n\n\t\t\t\tdocument.removeEventListener('mousemove', onMouseMove, false);\n\t\t\t\tdocument.removeEventListener('mouseup', onMouseUp, false);\n\n\t\t\t\tscope.dispatchEvent(endEvent);\n\n\t\t\t\tstate = STATE.NONE;\n\t\t}\n\n\t\tfunction onMouseWheel(event) {\n\n\t\t\t\tif (scope.enabled === false || scope.enableZoom === false || state !== STATE.NONE && state !== STATE.ROTATE) return;\n\n\t\t\t\tevent.preventDefault();\n\t\t\t\tevent.stopPropagation();\n\n\t\t\t\thandleMouseWheel(event);\n\n\t\t\t\tscope.dispatchEvent(startEvent);\n\t\t\t\tscope.dispatchEvent(endEvent);\n\t\t}\n\n\t\tfunction onKeyDown(event) {\n\n\t\t\t\tif (scope.enabled === false || scope.enableKeys === false || scope.enablePan === false) return;\n\n\t\t\t\thandleKeyDown(event);\n\t\t}\n\n\t\tfunction onTouchStart(event) {\n\n\t\t\t\tif (scope.enabled === false) return;\n\n\t\t\t\tswitch (event.touches.length) {\n\n\t\t\t\t\t\tcase 1:\n\n\t\t\t\t\t\t\t\tif (scope.enableRotate === false) return;\n\n\t\t\t\t\t\t\t\thandleTouchStartRotate(event);\n\n\t\t\t\t\t\t\t\tstate = STATE.TOUCH_ROTATE;\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 2:\n\n\t\t\t\t\t\t\t\tif (scope.enableZoom === false) return;\n\n\t\t\t\t\t\t\t\thandleTouchStartDolly(event);\n\n\t\t\t\t\t\t\t\tstate = STATE.TOUCH_DOLLY;\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 3:\n\n\t\t\t\t\t\t\t\tif (scope.enablePan === false) return;\n\n\t\t\t\t\t\t\t\thandleTouchStartPan(event);\n\n\t\t\t\t\t\t\t\tstate = STATE.TOUCH_PAN;\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t\t}\n\n\t\t\t\tif (state !== STATE.NONE) {\n\n\t\t\t\t\t\tscope.dispatchEvent(startEvent);\n\t\t\t\t}\n\t\t}\n\n\t\tfunction onTouchMove(event) {\n\n\t\t\t\tif (scope.enabled === false) return;\n\n\t\t\t\tevent.preventDefault();\n\t\t\t\tevent.stopPropagation();\n\n\t\t\t\tswitch (event.touches.length) {\n\n\t\t\t\t\t\tcase 1:\n\n\t\t\t\t\t\t\t\tif (scope.enableRotate === false) return;\n\t\t\t\t\t\t\t\tif (state !== STATE.TOUCH_ROTATE) return;\n\n\t\t\t\t\t\t\t\thandleTouchMoveRotate(event);\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 2:\n\n\t\t\t\t\t\t\t\tif (scope.enableZoom === false) return;\n\t\t\t\t\t\t\t\tif (state !== STATE.TOUCH_DOLLY) return;\n\n\t\t\t\t\t\t\t\thandleTouchMoveDolly(event);\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 3:\n\n\t\t\t\t\t\t\t\tif (scope.enablePan === false) return;\n\t\t\t\t\t\t\t\tif (state !== STATE.TOUCH_PAN) return;\n\n\t\t\t\t\t\t\t\thandleTouchMovePan(event);\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t\t}\n\t\t}\n\n\t\tfunction onTouchEnd(event) {\n\n\t\t\t\tif (scope.enabled === false) return;\n\n\t\t\t\thandleTouchEnd(event);\n\n\t\t\t\tscope.dispatchEvent(endEvent);\n\n\t\t\t\tstate = STATE.NONE;\n\t\t}\n\n\t\tfunction onContextMenu(event) {\n\n\t\t\t\tevent.preventDefault();\n\t\t}\n\n\t\tscope.domElement.addEventListener('contextmenu', onContextMenu, false);\n\n\t\tscope.domElement.addEventListener('mousedown', onMouseDown, false);\n\t\tscope.domElement.addEventListener('wheel', onMouseWheel, false);\n\n\t\tscope.domElement.addEventListener('touchstart', onTouchStart, false);\n\t\tscope.domElement.addEventListener('touchend', onTouchEnd, false);\n\t\tscope.domElement.addEventListener('touchmove', onTouchMove, false);\n\n\t\twindow.addEventListener('keydown', onKeyDown, false);\n\n\t\tthis.update();\n};\n\nOrbitControls.prototype = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_create___default()(__WEBPACK_IMPORTED_MODULE_1_three__[\"K\" /* EventDispatcher */].prototype);\nOrbitControls.prototype.constructor = OrbitControls;\n\n\n\n/***/ }),\n\n/***/ 44:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return ColladaLoader; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_create__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_create___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_create__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_three__ = __webpack_require__(1);\n\n\n\nvar ColladaLoader = function ColladaLoader() {\n\n\t\tvar COLLADA = null;\n\t\tvar scene = null;\n\t\tvar visualScene;\n\t\tvar kinematicsModel;\n\n\t\tvar readyCallbackFunc = null;\n\n\t\tvar sources = {};\n\t\tvar images = {};\n\t\tvar animations = {};\n\t\tvar controllers = {};\n\t\tvar geometries = {};\n\t\tvar materials = {};\n\t\tvar effects = {};\n\t\tvar cameras = {};\n\t\tvar lights = {};\n\n\t\tvar animData;\n\t\tvar kinematics;\n\t\tvar visualScenes;\n\t\tvar kinematicsModels;\n\t\tvar baseUrl;\n\t\tvar morphs;\n\t\tvar skins;\n\n\t\tvar flip_uv = true;\n\t\tvar preferredShading = __WEBPACK_IMPORTED_MODULE_1_three__[\"v\" /* SmoothShading */];\n\n\t\tvar options = {\n\t\t\t\tcenterGeometry: false,\n\n\t\t\t\tconvertUpAxis: false,\n\n\t\t\t\tsubdivideFaces: true,\n\n\t\t\t\tupAxis: 'Y',\n\n\t\t\t\tdefaultEnvMap: null\n\n\t\t};\n\n\t\tvar colladaUnit = 1.0;\n\t\tvar colladaUp = 'Y';\n\t\tvar upConversion = null;\n\n\t\tfunction load(url, readyCallback, progressCallback, failCallback) {\n\n\t\t\t\tvar length = 0;\n\n\t\t\t\tif (document.implementation && document.implementation.createDocument) {\n\n\t\t\t\t\t\tvar request = new XMLHttpRequest();\n\n\t\t\t\t\t\trequest.onreadystatechange = function () {\n\n\t\t\t\t\t\t\t\tif (request.readyState === 4) {\n\n\t\t\t\t\t\t\t\t\t\tif (request.status === 0 || request.status === 200) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (request.response) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treadyCallbackFunc = readyCallback;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tparse(request.response, undefined, url);\n\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (failCallback) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfailCallback({ type: 'error', url: url });\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.error(\"ColladaLoader: Empty or non-existing file (\" + url + \")\");\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (failCallback) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfailCallback({ type: 'error', url: url });\n\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.error('ColladaLoader: Couldn\\'t load \"' + url + '\" (' + request.status + ')');\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else if (request.readyState === 3) {\n\n\t\t\t\t\t\t\t\t\t\tif (progressCallback) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (length === 0) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlength = request.getResponseHeader(\"Content-Length\");\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\tprogressCallback({ total: length, loaded: request.responseText.length });\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\trequest.open(\"GET\", url, true);\n\t\t\t\t\t\trequest.send(null);\n\t\t\t\t} else {\n\n\t\t\t\t\t\talert(\"Don't know how to parse XML!\");\n\t\t\t\t}\n\t\t}\n\n\t\tfunction parse(text, callBack, url) {\n\n\t\t\t\tCOLLADA = new DOMParser().parseFromString(text, 'text/xml');\n\t\t\t\tcallBack = callBack || readyCallbackFunc;\n\n\t\t\t\tif (url !== undefined) {\n\n\t\t\t\t\t\tvar parts = url.split('/');\n\t\t\t\t\t\tparts.pop();\n\t\t\t\t\t\tbaseUrl = (parts.length < 1 ? '.' : parts.join('/')) + '/';\n\t\t\t\t}\n\n\t\t\t\tparseAsset();\n\t\t\t\tsetUpConversion();\n\t\t\t\timages = parseLib(\"library_images image\", _Image, \"image\");\n\t\t\t\tmaterials = parseLib(\"library_materials material\", Material, \"material\");\n\t\t\t\teffects = parseLib(\"library_effects effect\", Effect, \"effect\");\n\t\t\t\tgeometries = parseLib(\"library_geometries geometry\", Geometry, \"geometry\");\n\t\t\t\tcameras = parseLib(\"library_cameras camera\", Camera, \"camera\");\n\t\t\t\tlights = parseLib(\"library_lights light\", Light, \"light\");\n\t\t\t\tcontrollers = parseLib(\"library_controllers controller\", Controller, \"controller\");\n\t\t\t\tanimations = parseLib(\"library_animations animation\", Animation, \"animation\");\n\t\t\t\tvisualScenes = parseLib(\"library_visual_scenes visual_scene\", VisualScene, \"visual_scene\");\n\t\t\t\tkinematicsModels = parseLib(\"library_kinematics_models kinematics_model\", KinematicsModel, \"kinematics_model\");\n\n\t\t\t\tmorphs = [];\n\t\t\t\tskins = [];\n\n\t\t\t\tvisualScene = parseScene();\n\t\t\t\tscene = new __WEBPACK_IMPORTED_MODULE_1_three__[\"s\" /* Group */]();\n\n\t\t\t\tfor (var i = 0; i < visualScene.nodes.length; i++) {\n\n\t\t\t\t\t\tscene.add(createSceneGraph(visualScene.nodes[i]));\n\t\t\t\t}\n\n\t\t\t\tscene.scale.multiplyScalar(colladaUnit);\n\n\t\t\t\tcreateAnimations();\n\n\t\t\t\tkinematicsModel = parseKinematicsModel();\n\t\t\t\tcreateKinematics();\n\n\t\t\t\tvar result = {\n\n\t\t\t\t\t\tscene: scene,\n\t\t\t\t\t\tmorphs: morphs,\n\t\t\t\t\t\tskins: skins,\n\t\t\t\t\t\tanimations: animData,\n\t\t\t\t\t\tkinematics: kinematics,\n\t\t\t\t\t\tdae: {\n\t\t\t\t\t\t\t\timages: images,\n\t\t\t\t\t\t\t\tmaterials: materials,\n\t\t\t\t\t\t\t\tcameras: cameras,\n\t\t\t\t\t\t\t\tlights: lights,\n\t\t\t\t\t\t\t\teffects: effects,\n\t\t\t\t\t\t\t\tgeometries: geometries,\n\t\t\t\t\t\t\t\tcontrollers: controllers,\n\t\t\t\t\t\t\t\tanimations: animations,\n\t\t\t\t\t\t\t\tvisualScenes: visualScenes,\n\t\t\t\t\t\t\t\tvisualScene: visualScene,\n\t\t\t\t\t\t\t\tscene: visualScene,\n\t\t\t\t\t\t\t\tkinematicsModels: kinematicsModels,\n\t\t\t\t\t\t\t\tkinematicsModel: kinematicsModel\n\t\t\t\t\t\t}\n\n\t\t\t\t};\n\n\t\t\t\tif (callBack) {\n\n\t\t\t\t\t\tcallBack(result);\n\t\t\t\t}\n\n\t\t\t\treturn result;\n\t\t}\n\n\t\tfunction setPreferredShading(shading) {\n\n\t\t\t\tpreferredShading = shading;\n\t\t}\n\n\t\tfunction parseAsset() {\n\n\t\t\t\tvar elements = COLLADA.querySelectorAll('asset');\n\n\t\t\t\tvar element = elements[0];\n\n\t\t\t\tif (element && element.childNodes) {\n\n\t\t\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\t\t\tvar child = element.childNodes[i];\n\n\t\t\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\t\t\tcase 'unit':\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar meter = child.getAttribute('meter');\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (meter) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolladaUnit = parseFloat(meter);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\tcase 'up_axis':\n\n\t\t\t\t\t\t\t\t\t\t\t\tcolladaUp = child.textContent.charAt(0);\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t}\n\t\t}\n\n\t\tfunction parseLib(q, classSpec, prefix) {\n\n\t\t\t\tvar elements = COLLADA.querySelectorAll(q);\n\n\t\t\t\tvar lib = {};\n\n\t\t\t\tvar i = 0;\n\n\t\t\t\tvar elementsLength = elements.length;\n\n\t\t\t\tfor (var j = 0; j < elementsLength; j++) {\n\n\t\t\t\t\t\tvar element = elements[j];\n\t\t\t\t\t\tvar daeElement = new classSpec().parse(element);\n\n\t\t\t\t\t\tif (!daeElement.id || daeElement.id.length === 0) daeElement.id = prefix + i++;\n\t\t\t\t\t\tlib[daeElement.id] = daeElement;\n\t\t\t\t}\n\n\t\t\t\treturn lib;\n\t\t}\n\n\t\tfunction parseScene() {\n\n\t\t\t\tvar sceneElement = COLLADA.querySelectorAll('scene instance_visual_scene')[0];\n\n\t\t\t\tif (sceneElement) {\n\n\t\t\t\t\t\tvar url = sceneElement.getAttribute('url').replace(/^#/, '');\n\t\t\t\t\t\treturn visualScenes[url.length > 0 ? url : 'visual_scene0'];\n\t\t\t\t} else {\n\n\t\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t}\n\n\t\tfunction parseKinematicsModel() {\n\n\t\t\t\tvar kinematicsModelElement = COLLADA.querySelectorAll('instance_kinematics_model')[0];\n\n\t\t\t\tif (kinematicsModelElement) {\n\n\t\t\t\t\t\tvar url = kinematicsModelElement.getAttribute('url').replace(/^#/, '');\n\t\t\t\t\t\treturn kinematicsModels[url.length > 0 ? url : 'kinematics_model0'];\n\t\t\t\t} else {\n\n\t\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t}\n\n\t\tfunction createAnimations() {\n\n\t\t\t\tanimData = [];\n\n\t\t\t\trecurseHierarchy(scene);\n\t\t}\n\n\t\tfunction recurseHierarchy(node) {\n\n\t\t\t\tvar n = visualScene.getChildById(node.colladaId, true),\n\t\t\t\t    newData = null;\n\n\t\t\t\tif (n && n.keys) {\n\n\t\t\t\t\t\tnewData = {\n\t\t\t\t\t\t\t\tfps: 60,\n\t\t\t\t\t\t\t\thierarchy: [{\n\t\t\t\t\t\t\t\t\t\tnode: n,\n\t\t\t\t\t\t\t\t\t\tkeys: n.keys,\n\t\t\t\t\t\t\t\t\t\tsids: n.sids\n\t\t\t\t\t\t\t\t}],\n\t\t\t\t\t\t\t\tnode: node,\n\t\t\t\t\t\t\t\tname: 'animation_' + node.name,\n\t\t\t\t\t\t\t\tlength: 0\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tanimData.push(newData);\n\n\t\t\t\t\t\tfor (var i = 0, il = n.keys.length; i < il; i++) {\n\n\t\t\t\t\t\t\t\tnewData.length = Math.max(newData.length, n.keys[i].time);\n\t\t\t\t\t\t}\n\t\t\t\t} else {\n\n\t\t\t\t\t\tnewData = {\n\t\t\t\t\t\t\t\thierarchy: [{\n\t\t\t\t\t\t\t\t\t\tkeys: [],\n\t\t\t\t\t\t\t\t\t\tsids: []\n\t\t\t\t\t\t\t\t}]\n\t\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\tfor (var i = 0, il = node.children.length; i < il; i++) {\n\n\t\t\t\t\t\tvar d = recurseHierarchy(node.children[i]);\n\n\t\t\t\t\t\tfor (var j = 0, jl = d.hierarchy.length; j < jl; j++) {\n\n\t\t\t\t\t\t\t\tnewData.hierarchy.push({\n\t\t\t\t\t\t\t\t\t\tkeys: [],\n\t\t\t\t\t\t\t\t\t\tsids: []\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn newData;\n\t\t}\n\n\t\tfunction calcAnimationBounds() {\n\n\t\t\t\tvar start = 1000000;\n\t\t\t\tvar end = -start;\n\t\t\t\tvar frames = 0;\n\t\t\t\tvar ID;\n\t\t\t\tfor (var id in animations) {\n\n\t\t\t\t\t\tvar animation = animations[id];\n\t\t\t\t\t\tID = ID || animation.id;\n\t\t\t\t\t\tfor (var i = 0; i < animation.sampler.length; i++) {\n\n\t\t\t\t\t\t\t\tvar sampler = animation.sampler[i];\n\n\t\t\t\t\t\t\t\tsampler.create();\n\n\t\t\t\t\t\t\t\tstart = Math.min(start, sampler.startTime);\n\t\t\t\t\t\t\t\tend = Math.max(end, sampler.endTime);\n\t\t\t\t\t\t\t\tframes = Math.max(frames, sampler.input.length);\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn { start: start, end: end, frames: frames, ID: ID };\n\t\t}\n\n\t\tfunction createMorph(geometry, ctrl) {\n\n\t\t\t\tvar morphCtrl = ctrl instanceof InstanceController ? controllers[ctrl.url] : ctrl;\n\n\t\t\t\tif (!morphCtrl || !morphCtrl.morph) {\n\n\t\t\t\t\t\tconsole.log(\"could not find morph controller!\");\n\t\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar morph = morphCtrl.morph;\n\n\t\t\t\tfor (var i = 0; i < morph.targets.length; i++) {\n\n\t\t\t\t\t\tvar target_id = morph.targets[i];\n\t\t\t\t\t\tvar daeGeometry = geometries[target_id];\n\n\t\t\t\t\t\tif (!daeGeometry.mesh || !daeGeometry.mesh.primitives || !daeGeometry.mesh.primitives.length) {\n\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar target = daeGeometry.mesh.primitives[0].geometry;\n\n\t\t\t\t\t\tif (target.vertices.length === geometry.vertices.length) {\n\n\t\t\t\t\t\t\t\tgeometry.morphTargets.push({ name: \"target_1\", vertices: target.vertices });\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tgeometry.morphTargets.push({ name: \"target_Z\", vertices: geometry.vertices });\n\t\t}\n\n\t\tfunction createSkin(geometry, ctrl, applyBindShape) {\n\n\t\t\t\tvar skinCtrl = controllers[ctrl.url];\n\n\t\t\t\tif (!skinCtrl || !skinCtrl.skin) {\n\n\t\t\t\t\t\tconsole.log(\"could not find skin controller!\");\n\t\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (!ctrl.skeleton || !ctrl.skeleton.length) {\n\n\t\t\t\t\t\tconsole.log(\"could not find the skeleton for the skin!\");\n\t\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar skin = skinCtrl.skin;\n\t\t\t\tvar skeleton = visualScene.getChildById(ctrl.skeleton[0]);\n\t\t\t\tvar hierarchy = [];\n\n\t\t\t\tapplyBindShape = applyBindShape !== undefined ? applyBindShape : true;\n\n\t\t\t\tvar bones = [];\n\t\t\t\tgeometry.skinWeights = [];\n\t\t\t\tgeometry.skinIndices = [];\n\n\t\t\t\tif (applyBindShape) {\n\n\t\t\t\t\t\tfor (var i = 0; i < geometry.vertices.length; i++) {\n\n\t\t\t\t\t\t\t\tgeometry.vertices[i].applyMatrix4(skin.bindShapeMatrix);\n\t\t\t\t\t\t}\n\t\t\t\t}\n\t\t}\n\n\t\tfunction setupSkeleton(node, bones, frame, parent) {\n\n\t\t\t\tnode.world = node.world || new __WEBPACK_IMPORTED_MODULE_1_three__[\"L\" /* Matrix4 */]();\n\t\t\t\tnode.localworld = node.localworld || new __WEBPACK_IMPORTED_MODULE_1_three__[\"L\" /* Matrix4 */]();\n\t\t\t\tnode.world.copy(node.matrix);\n\t\t\t\tnode.localworld.copy(node.matrix);\n\n\t\t\t\tif (node.channels && node.channels.length) {\n\n\t\t\t\t\t\tvar channel = node.channels[0];\n\t\t\t\t\t\tvar m = channel.sampler.output[frame];\n\n\t\t\t\t\t\tif (m instanceof __WEBPACK_IMPORTED_MODULE_1_three__[\"L\" /* Matrix4 */]) {\n\n\t\t\t\t\t\t\t\tnode.world.copy(m);\n\t\t\t\t\t\t\t\tnode.localworld.copy(m);\n\t\t\t\t\t\t\t\tif (frame === 0) node.matrix.copy(m);\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (parent) {\n\n\t\t\t\t\t\tnode.world.multiplyMatrices(parent, node.world);\n\t\t\t\t}\n\n\t\t\t\tbones.push(node);\n\n\t\t\t\tfor (var i = 0; i < node.nodes.length; i++) {\n\n\t\t\t\t\t\tsetupSkeleton(node.nodes[i], bones, frame, node.world);\n\t\t\t\t}\n\t\t}\n\n\t\tfunction setupSkinningMatrices(bones, skin) {\n\n\t\t\t\tfor (var i = 0; i < bones.length; i++) {\n\n\t\t\t\t\t\tvar bone = bones[i];\n\t\t\t\t\t\tvar found = -1;\n\n\t\t\t\t\t\tif (bone.type != 'JOINT') continue;\n\n\t\t\t\t\t\tfor (var j = 0; j < skin.joints.length; j++) {\n\n\t\t\t\t\t\t\t\tif (bone.sid === skin.joints[j]) {\n\n\t\t\t\t\t\t\t\t\t\tfound = j;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (found >= 0) {\n\n\t\t\t\t\t\t\t\tvar inv = skin.invBindMatrices[found];\n\n\t\t\t\t\t\t\t\tbone.invBindMatrix = inv;\n\t\t\t\t\t\t\t\tbone.skinningMatrix = new __WEBPACK_IMPORTED_MODULE_1_three__[\"L\" /* Matrix4 */]();\n\t\t\t\t\t\t\t\tbone.skinningMatrix.multiplyMatrices(bone.world, inv);\n\t\t\t\t\t\t\t\tbone.animatrix = new __WEBPACK_IMPORTED_MODULE_1_three__[\"L\" /* Matrix4 */]();\n\n\t\t\t\t\t\t\t\tbone.animatrix.copy(bone.localworld);\n\t\t\t\t\t\t\t\tbone.weights = [];\n\n\t\t\t\t\t\t\t\tfor (var j = 0; j < skin.weights.length; j++) {\n\n\t\t\t\t\t\t\t\t\t\tfor (var k = 0; k < skin.weights[j].length; k++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar w = skin.weights[j][k];\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (w.joint === found) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbone.weights.push(w);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tconsole.warn(\"ColladaLoader: Could not find joint '\" + bone.sid + \"'.\");\n\n\t\t\t\t\t\t\t\tbone.skinningMatrix = new __WEBPACK_IMPORTED_MODULE_1_three__[\"L\" /* Matrix4 */]();\n\t\t\t\t\t\t\t\tbone.weights = [];\n\t\t\t\t\t\t}\n\t\t\t\t}\n\t\t}\n\n\t\tfunction flattenSkeleton(skeleton) {\n\n\t\t\t\tvar list = [];\n\t\t\t\tvar walk = function walk(parentid, node, list) {\n\n\t\t\t\t\t\tvar bone = {};\n\t\t\t\t\t\tbone.name = node.sid;\n\t\t\t\t\t\tbone.parent = parentid;\n\t\t\t\t\t\tbone.matrix = node.matrix;\n\t\t\t\t\t\tvar data = [new __WEBPACK_IMPORTED_MODULE_1_three__[\"b\" /* Vector3 */](), new __WEBPACK_IMPORTED_MODULE_1_three__[\"H\" /* Quaternion */](), new __WEBPACK_IMPORTED_MODULE_1_three__[\"b\" /* Vector3 */]()];\n\t\t\t\t\t\tbone.matrix.decompose(data[0], data[1], data[2]);\n\n\t\t\t\t\t\tbone.pos = [data[0].x, data[0].y, data[0].z];\n\n\t\t\t\t\t\tbone.scl = [data[2].x, data[2].y, data[2].z];\n\t\t\t\t\t\tbone.rotq = [data[1].x, data[1].y, data[1].z, data[1].w];\n\t\t\t\t\t\tlist.push(bone);\n\n\t\t\t\t\t\tfor (var i in node.nodes) {\n\n\t\t\t\t\t\t\t\twalk(node.sid, node.nodes[i], list);\n\t\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\twalk(-1, skeleton, list);\n\t\t\t\treturn list;\n\t\t}\n\n\t\tfunction skinToBindPose(geometry, skeleton, skinController) {\n\n\t\t\t\tvar bones = [];\n\t\t\t\tsetupSkeleton(skeleton, bones, -1);\n\t\t\t\tsetupSkinningMatrices(bones, skinController.skin);\n\t\t\t\tvar v = new __WEBPACK_IMPORTED_MODULE_1_three__[\"b\" /* Vector3 */]();\n\t\t\t\tvar skinned = [];\n\n\t\t\t\tfor (var i = 0; i < geometry.vertices.length; i++) {\n\n\t\t\t\t\t\tskinned.push(new __WEBPACK_IMPORTED_MODULE_1_three__[\"b\" /* Vector3 */]());\n\t\t\t\t}\n\n\t\t\t\tfor (i = 0; i < bones.length; i++) {\n\n\t\t\t\t\t\tif (bones[i].type != 'JOINT') continue;\n\n\t\t\t\t\t\tfor (var j = 0; j < bones[i].weights.length; j++) {\n\n\t\t\t\t\t\t\t\tvar w = bones[i].weights[j];\n\t\t\t\t\t\t\t\tvar vidx = w.index;\n\t\t\t\t\t\t\t\tvar weight = w.weight;\n\n\t\t\t\t\t\t\t\tvar o = geometry.vertices[vidx];\n\t\t\t\t\t\t\t\tvar s = skinned[vidx];\n\n\t\t\t\t\t\t\t\tv.x = o.x;\n\t\t\t\t\t\t\t\tv.y = o.y;\n\t\t\t\t\t\t\t\tv.z = o.z;\n\n\t\t\t\t\t\t\t\tv.applyMatrix4(bones[i].skinningMatrix);\n\n\t\t\t\t\t\t\t\ts.x += v.x * weight;\n\t\t\t\t\t\t\t\ts.y += v.y * weight;\n\t\t\t\t\t\t\t\ts.z += v.z * weight;\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfor (var i = 0; i < geometry.vertices.length; i++) {\n\n\t\t\t\t\t\tgeometry.vertices[i] = skinned[i];\n\t\t\t\t}\n\t\t}\n\n\t\tfunction applySkin(geometry, instanceCtrl, frame) {\n\n\t\t\t\tif (frame === undefined) frame = 40;\n\n\t\t\t\tvar skinController = controllers[instanceCtrl.url];\n\n\t\t\t\tif (!skinController || !skinController.skin) {\n\n\t\t\t\t\t\tconsole.log('ColladaLoader: Could not find skin controller.');\n\t\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (!instanceCtrl.skeleton || !instanceCtrl.skeleton.length) {\n\n\t\t\t\t\t\tconsole.log('ColladaLoader: Could not find the skeleton for the skin. ');\n\t\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar animationBounds = calcAnimationBounds();\n\t\t\t\tvar skeleton = visualScene.getChildById(instanceCtrl.skeleton[0], true) || visualScene.getChildBySid(instanceCtrl.skeleton[0], true);\n\n\t\t\t\tvar bonelist = flattenSkeleton(skeleton);\n\t\t\t\tvar joints = skinController.skin.joints;\n\n\t\t\t\tvar sortedbones = [];\n\t\t\t\tfor (var i = 0; i < joints.length; i++) {\n\n\t\t\t\t\t\tfor (var j = 0; j < bonelist.length; j++) {\n\n\t\t\t\t\t\t\t\tif (bonelist[j].name === joints[i]) {\n\n\t\t\t\t\t\t\t\t\t\tsortedbones[i] = bonelist[j];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfor (var i = 0; i < sortedbones.length; i++) {\n\n\t\t\t\t\t\tfor (var j = 0; j < sortedbones.length; j++) {\n\n\t\t\t\t\t\t\t\tif (sortedbones[i].parent === sortedbones[j].name) {\n\n\t\t\t\t\t\t\t\t\t\tsortedbones[i].parent = j;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvar i, j, w, vidx, weight;\n\t\t\t\tvar v = new __WEBPACK_IMPORTED_MODULE_1_three__[\"b\" /* Vector3 */](),\n\t\t\t\t    o,\n\t\t\t\t    s;\n\n\t\t\t\tfor (i = 0; i < geometry.vertices.length; i++) {\n\t\t\t\t\t\tgeometry.vertices[i].applyMatrix4(skinController.skin.bindShapeMatrix);\n\t\t\t\t}\n\n\t\t\t\tvar skinIndices = [];\n\t\t\t\tvar skinWeights = [];\n\t\t\t\tvar weights = skinController.skin.weights;\n\n\t\t\t\tfor (var i = 0; i < weights.length; i++) {\n\n\t\t\t\t\t\tvar indicies = new __WEBPACK_IMPORTED_MODULE_1_three__[\"M\" /* Vector4 */](weights[i][0] ? weights[i][0].joint : 0, weights[i][1] ? weights[i][1].joint : 0, weights[i][2] ? weights[i][2].joint : 0, weights[i][3] ? weights[i][3].joint : 0);\n\t\t\t\t\t\tvar weight = new __WEBPACK_IMPORTED_MODULE_1_three__[\"M\" /* Vector4 */](weights[i][0] ? weights[i][0].weight : 0, weights[i][1] ? weights[i][1].weight : 0, weights[i][2] ? weights[i][2].weight : 0, weights[i][3] ? weights[i][3].weight : 0);\n\n\t\t\t\t\t\tskinIndices.push(indicies);\n\t\t\t\t\t\tskinWeights.push(weight);\n\t\t\t\t}\n\n\t\t\t\tgeometry.skinIndices = skinIndices;\n\t\t\t\tgeometry.skinWeights = skinWeights;\n\t\t\t\tgeometry.bones = sortedbones;\n\n\t\t\t\tvar animationdata = { \"name\": animationBounds.ID, \"fps\": 30, \"length\": animationBounds.frames / 30, \"hierarchy\": [] };\n\n\t\t\t\tfor (var j = 0; j < sortedbones.length; j++) {\n\n\t\t\t\t\t\tanimationdata.hierarchy.push({ parent: sortedbones[j].parent, name: sortedbones[j].name, keys: [] });\n\t\t\t\t}\n\n\t\t\t\tconsole.log('ColladaLoader:', animationBounds.ID + ' has ' + sortedbones.length + ' bones.');\n\n\t\t\t\tskinToBindPose(geometry, skeleton, skinController);\n\n\t\t\t\tfor (frame = 0; frame < animationBounds.frames; frame++) {\n\n\t\t\t\t\t\tvar bones = [];\n\t\t\t\t\t\tvar skinned = [];\n\n\n\t\t\t\t\t\tsetupSkeleton(skeleton, bones, frame);\n\t\t\t\t\t\tsetupSkinningMatrices(bones, skinController.skin);\n\n\t\t\t\t\t\tfor (var i = 0; i < bones.length; i++) {\n\n\t\t\t\t\t\t\t\tfor (var j = 0; j < animationdata.hierarchy.length; j++) {\n\n\t\t\t\t\t\t\t\t\t\tif (animationdata.hierarchy[j].name === bones[i].sid) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar key = {};\n\t\t\t\t\t\t\t\t\t\t\t\tkey.time = frame / 30;\n\t\t\t\t\t\t\t\t\t\t\t\tkey.matrix = bones[i].animatrix;\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (frame === 0) bones[i].matrix = key.matrix;\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar data = [new __WEBPACK_IMPORTED_MODULE_1_three__[\"b\" /* Vector3 */](), new __WEBPACK_IMPORTED_MODULE_1_three__[\"H\" /* Quaternion */](), new __WEBPACK_IMPORTED_MODULE_1_three__[\"b\" /* Vector3 */]()];\n\t\t\t\t\t\t\t\t\t\t\t\tkey.matrix.decompose(data[0], data[1], data[2]);\n\n\t\t\t\t\t\t\t\t\t\t\t\tkey.pos = [data[0].x, data[0].y, data[0].z];\n\n\t\t\t\t\t\t\t\t\t\t\t\tkey.scl = [data[2].x, data[2].y, data[2].z];\n\t\t\t\t\t\t\t\t\t\t\t\tkey.rot = data[1];\n\n\t\t\t\t\t\t\t\t\t\t\t\tanimationdata.hierarchy[j].keys.push(key);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tgeometry.animation = animationdata;\n\t\t\t\t}\n\t\t}\n\n\t\tfunction createKinematics() {\n\n\t\t\t\tif (kinematicsModel && kinematicsModel.joints.length === 0) {\n\t\t\t\t\t\tkinematics = undefined;\n\t\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar jointMap = {};\n\n\t\t\t\tvar _addToMap = function _addToMap(jointIndex, parentVisualElement) {\n\n\t\t\t\t\t\tvar parentVisualElementId = parentVisualElement.getAttribute('id');\n\t\t\t\t\t\tvar colladaNode = visualScene.getChildById(parentVisualElementId, true);\n\t\t\t\t\t\tvar joint = kinematicsModel.joints[jointIndex];\n\n\t\t\t\t\t\tscene.traverse(function (node) {\n\n\t\t\t\t\t\t\t\tif (node.colladaId == parentVisualElementId) {\n\n\t\t\t\t\t\t\t\t\t\tjointMap[jointIndex] = {\n\t\t\t\t\t\t\t\t\t\t\t\tnode: node,\n\t\t\t\t\t\t\t\t\t\t\t\ttransforms: colladaNode.transforms,\n\t\t\t\t\t\t\t\t\t\t\t\tjoint: joint,\n\t\t\t\t\t\t\t\t\t\t\t\tposition: joint.zeroPosition\n\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t};\n\n\t\t\t\tkinematics = {\n\n\t\t\t\t\t\tjoints: kinematicsModel && kinematicsModel.joints,\n\n\t\t\t\t\t\tgetJointValue: function getJointValue(jointIndex) {\n\n\t\t\t\t\t\t\t\tvar jointData = jointMap[jointIndex];\n\n\t\t\t\t\t\t\t\tif (jointData) {\n\n\t\t\t\t\t\t\t\t\t\treturn jointData.position;\n\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\tconsole.log('getJointValue: joint ' + jointIndex + ' doesn\\'t exist');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\n\t\t\t\t\t\tsetJointValue: function setJointValue(jointIndex, value) {\n\n\t\t\t\t\t\t\t\tvar jointData = jointMap[jointIndex];\n\n\t\t\t\t\t\t\t\tif (jointData) {\n\n\t\t\t\t\t\t\t\t\t\tvar joint = jointData.joint;\n\n\t\t\t\t\t\t\t\t\t\tif (value > joint.limits.max || value < joint.limits.min) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('setJointValue: joint ' + jointIndex + ' value ' + value + ' outside of limits (min: ' + joint.limits.min + ', max: ' + joint.limits.max + ')');\n\t\t\t\t\t\t\t\t\t\t} else if (joint.static) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('setJointValue: joint ' + jointIndex + ' is static');\n\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar threejsNode = jointData.node;\n\t\t\t\t\t\t\t\t\t\t\t\tvar axis = joint.axis;\n\t\t\t\t\t\t\t\t\t\t\t\tvar transforms = jointData.transforms;\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar matrix = new __WEBPACK_IMPORTED_MODULE_1_three__[\"L\" /* Matrix4 */]();\n\t\t\t\t\t\t\t\t\t\t\t\tvar m1 = new __WEBPACK_IMPORTED_MODULE_1_three__[\"L\" /* Matrix4 */]();\n\n\t\t\t\t\t\t\t\t\t\t\t\tfor (i = 0; i < transforms.length; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar transform = transforms[i];\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (transform.sid && transform.sid.indexOf('joint' + jointIndex) !== -1) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tswitch (joint.type) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'revolute':\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmatrix.multiply(m1.makeRotationAxis(axis, __WEBPACK_IMPORTED_MODULE_1_three__[\"N\" /* Math */].degToRad(value)));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'prismatic':\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmatrix.multiply(m1.makeTranslation(axis.x * value, axis.y * value, axis.z * value));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.warn('setJointValue: unknown joint type: ' + joint.type);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tswitch (transform.type) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'matrix':\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmatrix.multiply(transform.obj);\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'translate':\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmatrix.multiply(m1.makeTranslation(transform.obj.x, transform.obj.y, transform.obj.z));\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'rotate':\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmatrix.multiply(m1.makeRotationAxis(transform.obj, transform.angle));\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar elementsFloat32Arr = matrix.elements;\n\t\t\t\t\t\t\t\t\t\t\t\tvar elements = Array.prototype.slice.call(elementsFloat32Arr);\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar elementsRowMajor = [elements[0], elements[4], elements[8], elements[12], elements[1], elements[5], elements[9], elements[13], elements[2], elements[6], elements[10], elements[14], elements[3], elements[7], elements[11], elements[15]];\n\n\t\t\t\t\t\t\t\t\t\t\t\tthreejsNode.matrix.set.apply(threejsNode.matrix, elementsRowMajor);\n\t\t\t\t\t\t\t\t\t\t\t\tthreejsNode.matrix.decompose(threejsNode.position, threejsNode.quaternion, threejsNode.scale);\n\n\t\t\t\t\t\t\t\t\t\t\t\tjointMap[jointIndex].position = value;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\tconsole.log('setJointValue: joint ' + jointIndex + ' doesn\\'t exist');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t};\n\n\t\t\t\tvar element = COLLADA.querySelector('scene instance_kinematics_scene');\n\n\t\t\t\tif (element) {\n\n\t\t\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\t\t\tvar child = element.childNodes[i];\n\n\t\t\t\t\t\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\t\t\tcase 'bind_joint_axis':\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar visualTarget = child.getAttribute('target').split('/').pop();\n\t\t\t\t\t\t\t\t\t\t\t\tvar axis = child.querySelector('axis param').textContent;\n\t\t\t\t\t\t\t\t\t\t\t\tvar jointIndex = parseInt(axis.split('joint').pop().split('.')[0]);\n\t\t\t\t\t\t\t\t\t\t\t\tvar visualTargetElement = COLLADA.querySelector('[sid=\"' + visualTarget + '\"]');\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (visualTargetElement) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar parentVisualElement = visualTargetElement.parentElement;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t_addToMap(jointIndex, parentVisualElement);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t}\n\t\t}\n\n\t\tfunction createSceneGraph(node, parent) {\n\n\t\t\t\tvar obj = new __WEBPACK_IMPORTED_MODULE_1_three__[\"O\" /* Object3D */]();\n\t\t\t\tvar skinned = false;\n\t\t\t\tvar skinController;\n\t\t\t\tvar morphController;\n\t\t\t\tvar i, j;\n\n\t\t\t\tfor (i = 0; i < node.controllers.length; i++) {\n\n\t\t\t\t\t\tvar controller = controllers[node.controllers[i].url];\n\n\t\t\t\t\t\tswitch (controller.type) {\n\n\t\t\t\t\t\t\t\tcase 'skin':\n\n\t\t\t\t\t\t\t\t\t\tif (geometries[controller.skin.source]) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar inst_geom = new InstanceGeometry();\n\n\t\t\t\t\t\t\t\t\t\t\t\tinst_geom.url = controller.skin.source;\n\t\t\t\t\t\t\t\t\t\t\t\tinst_geom.instance_material = node.controllers[i].instance_material;\n\n\t\t\t\t\t\t\t\t\t\t\t\tnode.geometries.push(inst_geom);\n\t\t\t\t\t\t\t\t\t\t\t\tskinned = true;\n\t\t\t\t\t\t\t\t\t\t\t\tskinController = node.controllers[i];\n\t\t\t\t\t\t\t\t\t\t} else if (controllers[controller.skin.source]) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar second = controllers[controller.skin.source];\n\t\t\t\t\t\t\t\t\t\t\t\tmorphController = second;\n\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (second.morph && geometries[second.morph.source]) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar inst_geom = new InstanceGeometry();\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tinst_geom.url = second.morph.source;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tinst_geom.instance_material = node.controllers[i].instance_material;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnode.geometries.push(inst_geom);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'morph':\n\n\t\t\t\t\t\t\t\t\t\tif (geometries[controller.morph.source]) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar inst_geom = new InstanceGeometry();\n\n\t\t\t\t\t\t\t\t\t\t\t\tinst_geom.url = controller.morph.source;\n\t\t\t\t\t\t\t\t\t\t\t\tinst_geom.instance_material = node.controllers[i].instance_material;\n\n\t\t\t\t\t\t\t\t\t\t\t\tnode.geometries.push(inst_geom);\n\t\t\t\t\t\t\t\t\t\t\t\tmorphController = node.controllers[i];\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tconsole.log('ColladaLoader: Morph-controller partially supported.');\n\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvar double_sided_materials = {};\n\n\t\t\t\tfor (i = 0; i < node.geometries.length; i++) {\n\n\t\t\t\t\t\tvar instance_geometry = node.geometries[i];\n\t\t\t\t\t\tvar instance_materials = instance_geometry.instance_material;\n\t\t\t\t\t\tvar geometry = geometries[instance_geometry.url];\n\t\t\t\t\t\tvar used_materials = {};\n\t\t\t\t\t\tvar used_materials_array = [];\n\t\t\t\t\t\tvar num_materials = 0;\n\t\t\t\t\t\tvar first_material;\n\n\t\t\t\t\t\tif (geometry) {\n\n\t\t\t\t\t\t\t\tif (!geometry.mesh || !geometry.mesh.primitives) continue;\n\n\t\t\t\t\t\t\t\tif (obj.name.length === 0) {\n\n\t\t\t\t\t\t\t\t\t\tobj.name = geometry.id;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (instance_materials) {\n\n\t\t\t\t\t\t\t\t\t\tfor (j = 0; j < instance_materials.length; j++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar instance_material = instance_materials[j];\n\t\t\t\t\t\t\t\t\t\t\t\tvar mat = materials[instance_material.target];\n\t\t\t\t\t\t\t\t\t\t\t\tvar effect_id = mat.instance_effect.url;\n\t\t\t\t\t\t\t\t\t\t\t\tvar shader = effects[effect_id].shader;\n\t\t\t\t\t\t\t\t\t\t\t\tvar material3js = shader.material;\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (geometry.doubleSided) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (!(instance_material.symbol in double_sided_materials)) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar _copied_material = material3js.clone();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t_copied_material.side = __WEBPACK_IMPORTED_MODULE_1_three__[\"P\" /* DoubleSide */];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdouble_sided_materials[instance_material.symbol] = _copied_material;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmaterial3js = double_sided_materials[instance_material.symbol];\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\tmaterial3js.opacity = !material3js.opacity ? 1 : material3js.opacity;\n\t\t\t\t\t\t\t\t\t\t\t\tused_materials[instance_material.symbol] = num_materials;\n\t\t\t\t\t\t\t\t\t\t\t\tused_materials_array.push(material3js);\n\t\t\t\t\t\t\t\t\t\t\t\tfirst_material = material3js;\n\t\t\t\t\t\t\t\t\t\t\t\tfirst_material.name = mat.name === null || mat.name === '' ? mat.id : mat.name;\n\t\t\t\t\t\t\t\t\t\t\t\tnum_materials++;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tvar mesh;\n\t\t\t\t\t\t\t\tvar material = first_material || new __WEBPACK_IMPORTED_MODULE_1_three__[\"Q\" /* MeshLambertMaterial */]({ color: 0xdddddd, side: geometry.doubleSided ? __WEBPACK_IMPORTED_MODULE_1_three__[\"P\" /* DoubleSide */] : __WEBPACK_IMPORTED_MODULE_1_three__[\"h\" /* FrontSide */] });\n\t\t\t\t\t\t\t\tvar geom = geometry.mesh.geometry3js;\n\n\t\t\t\t\t\t\t\tif (num_materials > 1) {\n\n\t\t\t\t\t\t\t\t\t\tmaterial = new __WEBPACK_IMPORTED_MODULE_1_three__[\"R\" /* MultiMaterial */](used_materials_array);\n\n\t\t\t\t\t\t\t\t\t\tfor (j = 0; j < geom.faces.length; j++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar face = geom.faces[j];\n\t\t\t\t\t\t\t\t\t\t\t\tface.materialIndex = used_materials[face.daeMaterial];\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (skinController !== undefined) {\n\n\t\t\t\t\t\t\t\t\t\tapplySkin(geom, skinController);\n\n\t\t\t\t\t\t\t\t\t\tif (geom.morphTargets.length > 0) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tmaterial.morphTargets = true;\n\t\t\t\t\t\t\t\t\t\t\t\tmaterial.skinning = false;\n\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t\tmaterial.morphTargets = false;\n\t\t\t\t\t\t\t\t\t\t\t\tmaterial.skinning = true;\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tmesh = new __WEBPACK_IMPORTED_MODULE_1_three__[\"S\" /* SkinnedMesh */](geom, material, false);\n\n\t\t\t\t\t\t\t\t\t\tmesh.name = 'skin_' + skins.length;\n\n\t\t\t\t\t\t\t\t\t\tskins.push(mesh);\n\t\t\t\t\t\t\t\t} else if (morphController !== undefined) {\n\n\t\t\t\t\t\t\t\t\t\tcreateMorph(geom, morphController);\n\n\t\t\t\t\t\t\t\t\t\tmaterial.morphTargets = true;\n\n\t\t\t\t\t\t\t\t\t\tmesh = new __WEBPACK_IMPORTED_MODULE_1_three__[\"x\" /* Mesh */](geom, material);\n\t\t\t\t\t\t\t\t\t\tmesh.name = 'morph_' + morphs.length;\n\n\t\t\t\t\t\t\t\t\t\tmorphs.push(mesh);\n\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\tif (geom.isLineStrip === true) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tmesh = new __WEBPACK_IMPORTED_MODULE_1_three__[\"T\" /* Line */](geom);\n\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t\tmesh = new __WEBPACK_IMPORTED_MODULE_1_three__[\"x\" /* Mesh */](geom, material);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tobj.add(mesh);\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfor (i = 0; i < node.cameras.length; i++) {\n\n\t\t\t\t\t\tvar instance_camera = node.cameras[i];\n\t\t\t\t\t\tvar cparams = cameras[instance_camera.url];\n\n\t\t\t\t\t\tvar cam = new __WEBPACK_IMPORTED_MODULE_1_three__[\"A\" /* PerspectiveCamera */](cparams.yfov, parseFloat(cparams.aspect_ratio), parseFloat(cparams.znear), parseFloat(cparams.zfar));\n\n\t\t\t\t\t\tobj.add(cam);\n\t\t\t\t}\n\n\t\t\t\tfor (i = 0; i < node.lights.length; i++) {\n\n\t\t\t\t\t\tvar light = null;\n\t\t\t\t\t\tvar instance_light = node.lights[i];\n\t\t\t\t\t\tvar lparams = lights[instance_light.url];\n\n\t\t\t\t\t\tif (lparams && lparams.technique) {\n\n\t\t\t\t\t\t\t\tvar color = lparams.color.getHex();\n\t\t\t\t\t\t\t\tvar intensity = lparams.intensity;\n\t\t\t\t\t\t\t\tvar distance = lparams.distance;\n\t\t\t\t\t\t\t\tvar angle = lparams.falloff_angle;\n\n\t\t\t\t\t\t\t\tswitch (lparams.technique) {\n\n\t\t\t\t\t\t\t\t\t\tcase 'directional':\n\n\t\t\t\t\t\t\t\t\t\t\t\tlight = new __WEBPACK_IMPORTED_MODULE_1_three__[\"E\" /* DirectionalLight */](color, intensity, distance);\n\t\t\t\t\t\t\t\t\t\t\t\tlight.position.set(0, 0, 1);\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\tcase 'point':\n\n\t\t\t\t\t\t\t\t\t\t\t\tlight = new __WEBPACK_IMPORTED_MODULE_1_three__[\"U\" /* PointLight */](color, intensity, distance);\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\tcase 'spot':\n\n\t\t\t\t\t\t\t\t\t\t\t\tlight = new __WEBPACK_IMPORTED_MODULE_1_three__[\"V\" /* SpotLight */](color, intensity, distance, angle);\n\t\t\t\t\t\t\t\t\t\t\t\tlight.position.set(0, 0, 1);\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\tcase 'ambient':\n\n\t\t\t\t\t\t\t\t\t\t\t\tlight = new __WEBPACK_IMPORTED_MODULE_1_three__[\"D\" /* AmbientLight */](color);\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (light) {\n\t\t\t\t\t\t\t\tobj.add(light);\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tobj.name = node.name || node.id || \"\";\n\t\t\t\tobj.colladaId = node.id || \"\";\n\t\t\t\tobj.layer = node.layer || \"\";\n\t\t\t\tobj.matrix = node.matrix;\n\t\t\t\tobj.matrix.decompose(obj.position, obj.quaternion, obj.scale);\n\n\t\t\t\tif (options.centerGeometry && obj.geometry) {\n\n\t\t\t\t\t\tvar delta = obj.geometry.center();\n\t\t\t\t\t\tdelta.multiply(obj.scale);\n\t\t\t\t\t\tdelta.applyQuaternion(obj.quaternion);\n\n\t\t\t\t\t\tobj.position.sub(delta);\n\t\t\t\t}\n\n\t\t\t\tfor (i = 0; i < node.nodes.length; i++) {\n\n\t\t\t\t\t\tobj.add(createSceneGraph(node.nodes[i], node));\n\t\t\t\t}\n\n\t\t\t\treturn obj;\n\t\t}\n\n\t\tfunction getJointId(skin, id) {\n\n\t\t\t\tfor (var i = 0; i < skin.joints.length; i++) {\n\n\t\t\t\t\t\tif (skin.joints[i] === id) {\n\n\t\t\t\t\t\t\t\treturn i;\n\t\t\t\t\t\t}\n\t\t\t\t}\n\t\t}\n\n\t\tfunction getLibraryNode(id) {\n\n\t\t\t\tvar nodes = COLLADA.querySelectorAll('library_nodes node');\n\n\t\t\t\tfor (var i = 0; i < nodes.length; i++) {\n\n\t\t\t\t\t\tvar attObj = nodes[i].attributes.getNamedItem('id');\n\n\t\t\t\t\t\tif (attObj && attObj.value === id) {\n\n\t\t\t\t\t\t\t\treturn nodes[i];\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn undefined;\n\t\t}\n\n\t\tfunction getChannelsForNode(node) {\n\n\t\t\t\tvar channels = [];\n\t\t\t\tvar startTime = 1000000;\n\t\t\t\tvar endTime = -1000000;\n\n\t\t\t\tfor (var id in animations) {\n\n\t\t\t\t\t\tvar animation = animations[id];\n\n\t\t\t\t\t\tfor (var i = 0; i < animation.channel.length; i++) {\n\n\t\t\t\t\t\t\t\tvar channel = animation.channel[i];\n\t\t\t\t\t\t\t\tvar sampler = animation.sampler[i];\n\t\t\t\t\t\t\t\tvar id = channel.target.split('/')[0];\n\n\t\t\t\t\t\t\t\tif (id == node.id) {\n\n\t\t\t\t\t\t\t\t\t\tsampler.create();\n\t\t\t\t\t\t\t\t\t\tchannel.sampler = sampler;\n\t\t\t\t\t\t\t\t\t\tstartTime = Math.min(startTime, sampler.startTime);\n\t\t\t\t\t\t\t\t\t\tendTime = Math.max(endTime, sampler.endTime);\n\t\t\t\t\t\t\t\t\t\tchannels.push(channel);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (channels.length) {\n\n\t\t\t\t\t\tnode.startTime = startTime;\n\t\t\t\t\t\tnode.endTime = endTime;\n\t\t\t\t}\n\n\t\t\t\treturn channels;\n\t\t}\n\n\t\tfunction calcFrameDuration(node) {\n\n\t\t\t\tvar minT = 10000000;\n\n\t\t\t\tfor (var i = 0; i < node.channels.length; i++) {\n\n\t\t\t\t\t\tvar sampler = node.channels[i].sampler;\n\n\t\t\t\t\t\tfor (var j = 0; j < sampler.input.length - 1; j++) {\n\n\t\t\t\t\t\t\t\tvar t0 = sampler.input[j];\n\t\t\t\t\t\t\t\tvar t1 = sampler.input[j + 1];\n\t\t\t\t\t\t\t\tminT = Math.min(minT, t1 - t0);\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn minT;\n\t\t}\n\n\t\tfunction calcMatrixAt(node, t) {\n\n\t\t\t\tvar animated = {};\n\n\t\t\t\tvar i, j;\n\n\t\t\t\tfor (i = 0; i < node.channels.length; i++) {\n\n\t\t\t\t\t\tvar channel = node.channels[i];\n\t\t\t\t\t\tanimated[channel.sid] = channel;\n\t\t\t\t}\n\n\t\t\t\tvar matrix = new __WEBPACK_IMPORTED_MODULE_1_three__[\"L\" /* Matrix4 */]();\n\n\t\t\t\tfor (i = 0; i < node.transforms.length; i++) {\n\n\t\t\t\t\t\tvar transform = node.transforms[i];\n\t\t\t\t\t\tvar channel = animated[transform.sid];\n\n\t\t\t\t\t\tif (channel !== undefined) {\n\n\t\t\t\t\t\t\t\tvar sampler = channel.sampler;\n\t\t\t\t\t\t\t\tvar value;\n\n\t\t\t\t\t\t\t\tfor (j = 0; j < sampler.input.length - 1; j++) {\n\n\t\t\t\t\t\t\t\t\t\tif (sampler.input[j + 1] > t) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvalue = sampler.output[j];\n\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (value !== undefined) {\n\n\t\t\t\t\t\t\t\t\t\tif (value instanceof __WEBPACK_IMPORTED_MODULE_1_three__[\"L\" /* Matrix4 */]) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tmatrix.multiplyMatrices(matrix, value);\n\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t\tmatrix.multiplyMatrices(matrix, transform.matrix);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\tmatrix.multiplyMatrices(matrix, transform.matrix);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tmatrix.multiplyMatrices(matrix, transform.matrix);\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn matrix;\n\t\t}\n\n\t\tfunction bakeAnimations(node) {\n\n\t\t\t\tif (node.channels && node.channels.length) {\n\n\t\t\t\t\t\tvar keys = [],\n\t\t\t\t\t\t    sids = [];\n\n\t\t\t\t\t\tfor (var i = 0, il = node.channels.length; i < il; i++) {\n\n\t\t\t\t\t\t\t\tvar channel = node.channels[i],\n\t\t\t\t\t\t\t\t    fullSid = channel.fullSid,\n\t\t\t\t\t\t\t\t    sampler = channel.sampler,\n\t\t\t\t\t\t\t\t    input = sampler.input,\n\t\t\t\t\t\t\t\t    transform = node.getTransformBySid(channel.sid),\n\t\t\t\t\t\t\t\t    member;\n\n\t\t\t\t\t\t\t\tif (channel.arrIndices) {\n\n\t\t\t\t\t\t\t\t\t\tmember = [];\n\n\t\t\t\t\t\t\t\t\t\tfor (var j = 0, jl = channel.arrIndices.length; j < jl; j++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tmember[j] = getConvertedIndex(channel.arrIndices[j]);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\tmember = getConvertedMember(channel.member);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (transform) {\n\n\t\t\t\t\t\t\t\t\t\tif (sids.indexOf(fullSid) === -1) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tsids.push(fullSid);\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tfor (var j = 0, jl = input.length; j < jl; j++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar time = input[j],\n\t\t\t\t\t\t\t\t\t\t\t\t    data = sampler.getData(transform.type, j, member),\n\t\t\t\t\t\t\t\t\t\t\t\t    key = findKey(keys, time);\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (!key) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey = new Key(time);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar timeNdx = findTimeNdx(keys, time);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tkeys.splice(timeNdx === -1 ? keys.length : timeNdx, 0, key);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\tkey.addTarget(fullSid, transform, member, data);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\tconsole.log('Could not find transform \"' + channel.sid + '\" in node ' + node.id);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfor (var i = 0; i < sids.length; i++) {\n\n\t\t\t\t\t\t\t\tvar sid = sids[i];\n\n\t\t\t\t\t\t\t\tfor (var j = 0; j < keys.length; j++) {\n\n\t\t\t\t\t\t\t\t\t\tvar key = keys[j];\n\n\t\t\t\t\t\t\t\t\t\tif (!key.hasTarget(sid)) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tinterpolateKeys(keys, key, j, sid);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tnode.keys = keys;\n\t\t\t\t\t\tnode.sids = sids;\n\t\t\t\t}\n\t\t}\n\n\t\tfunction findKey(keys, time) {\n\n\t\t\t\tvar retVal = null;\n\n\t\t\t\tfor (var i = 0, il = keys.length; i < il && retVal === null; i++) {\n\n\t\t\t\t\t\tvar key = keys[i];\n\n\t\t\t\t\t\tif (key.time === time) {\n\n\t\t\t\t\t\t\t\tretVal = key;\n\t\t\t\t\t\t} else if (key.time > time) {\n\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn retVal;\n\t\t}\n\n\t\tfunction findTimeNdx(keys, time) {\n\n\t\t\t\tvar ndx = -1;\n\n\t\t\t\tfor (var i = 0, il = keys.length; i < il && ndx === -1; i++) {\n\n\t\t\t\t\t\tvar key = keys[i];\n\n\t\t\t\t\t\tif (key.time >= time) {\n\n\t\t\t\t\t\t\t\tndx = i;\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn ndx;\n\t\t}\n\n\t\tfunction interpolateKeys(keys, key, ndx, fullSid) {\n\n\t\t\t\tvar prevKey = getPrevKeyWith(keys, fullSid, ndx ? ndx - 1 : 0),\n\t\t\t\t    nextKey = getNextKeyWith(keys, fullSid, ndx + 1);\n\n\t\t\t\tif (prevKey && nextKey) {\n\n\t\t\t\t\t\tvar scale = (key.time - prevKey.time) / (nextKey.time - prevKey.time),\n\t\t\t\t\t\t    prevTarget = prevKey.getTarget(fullSid),\n\t\t\t\t\t\t    nextData = nextKey.getTarget(fullSid).data,\n\t\t\t\t\t\t    prevData = prevTarget.data,\n\t\t\t\t\t\t    data;\n\n\t\t\t\t\t\tif (prevTarget.type === 'matrix') {\n\n\t\t\t\t\t\t\t\tdata = prevData;\n\t\t\t\t\t\t} else if (prevData.length) {\n\n\t\t\t\t\t\t\t\tdata = [];\n\n\t\t\t\t\t\t\t\tfor (var i = 0; i < prevData.length; ++i) {\n\n\t\t\t\t\t\t\t\t\t\tdata[i] = prevData[i] + (nextData[i] - prevData[i]) * scale;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tdata = prevData + (nextData - prevData) * scale;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tkey.addTarget(fullSid, prevTarget.transform, prevTarget.member, data);\n\t\t\t\t}\n\t\t}\n\n\t\tfunction getNextKeyWith(keys, fullSid, ndx) {\n\n\t\t\t\tfor (; ndx < keys.length; ndx++) {\n\n\t\t\t\t\t\tvar key = keys[ndx];\n\n\t\t\t\t\t\tif (key.hasTarget(fullSid)) {\n\n\t\t\t\t\t\t\t\treturn key;\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\t\t}\n\n\t\tfunction getPrevKeyWith(keys, fullSid, ndx) {\n\n\t\t\t\tndx = ndx >= 0 ? ndx : ndx + keys.length;\n\n\t\t\t\tfor (; ndx >= 0; ndx--) {\n\n\t\t\t\t\t\tvar key = keys[ndx];\n\n\t\t\t\t\t\tif (key.hasTarget(fullSid)) {\n\n\t\t\t\t\t\t\t\treturn key;\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\t\t}\n\n\t\tfunction _Image() {\n\n\t\t\t\tthis.id = \"\";\n\t\t\t\tthis.init_from = \"\";\n\t\t}\n\n\t\t_Image.prototype.parse = function (element) {\n\n\t\t\t\tthis.id = element.getAttribute('id');\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tvar child = element.childNodes[i];\n\n\t\t\t\t\t\tif (child.nodeName === 'init_from') {\n\n\t\t\t\t\t\t\t\tthis.init_from = child.textContent;\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn this;\n\t\t};\n\n\t\tfunction Controller() {\n\n\t\t\t\tthis.id = \"\";\n\t\t\t\tthis.name = \"\";\n\t\t\t\tthis.type = \"\";\n\t\t\t\tthis.skin = null;\n\t\t\t\tthis.morph = null;\n\t\t}\n\n\t\tController.prototype.parse = function (element) {\n\n\t\t\t\tthis.id = element.getAttribute('id');\n\t\t\t\tthis.name = element.getAttribute('name');\n\t\t\t\tthis.type = \"none\";\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tvar child = element.childNodes[i];\n\n\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\tcase 'skin':\n\n\t\t\t\t\t\t\t\t\t\tthis.skin = new Skin().parse(child);\n\t\t\t\t\t\t\t\t\t\tthis.type = child.nodeName;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'morph':\n\n\t\t\t\t\t\t\t\t\t\tthis.morph = new Morph().parse(child);\n\t\t\t\t\t\t\t\t\t\tthis.type = child.nodeName;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn this;\n\t\t};\n\n\t\tfunction Morph() {\n\n\t\t\t\tthis.method = null;\n\t\t\t\tthis.source = null;\n\t\t\t\tthis.targets = null;\n\t\t\t\tthis.weights = null;\n\t\t}\n\n\t\tMorph.prototype.parse = function (element) {\n\n\t\t\t\tvar sources = {};\n\t\t\t\tvar inputs = [];\n\t\t\t\tvar i;\n\n\t\t\t\tthis.method = element.getAttribute('method');\n\t\t\t\tthis.source = element.getAttribute('source').replace(/^#/, '');\n\n\t\t\t\tfor (i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tvar child = element.childNodes[i];\n\t\t\t\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\tcase 'source':\n\n\t\t\t\t\t\t\t\t\t\tvar source = new Source().parse(child);\n\t\t\t\t\t\t\t\t\t\tsources[source.id] = source;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'targets':\n\n\t\t\t\t\t\t\t\t\t\tinputs = this.parseInputs(child);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\t\t\t\tconsole.log(child.nodeName);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfor (i = 0; i < inputs.length; i++) {\n\n\t\t\t\t\t\tvar input = inputs[i];\n\t\t\t\t\t\tvar source = sources[input.source];\n\n\t\t\t\t\t\tswitch (input.semantic) {\n\n\t\t\t\t\t\t\t\tcase 'MORPH_TARGET':\n\n\t\t\t\t\t\t\t\t\t\tthis.targets = source.read();\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'MORPH_WEIGHT':\n\n\t\t\t\t\t\t\t\t\t\tthis.weights = source.read();\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn this;\n\t\t};\n\n\t\tMorph.prototype.parseInputs = function (element) {\n\n\t\t\t\tvar inputs = [];\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tvar child = element.childNodes[i];\n\t\t\t\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\tcase 'input':\n\n\t\t\t\t\t\t\t\t\t\tinputs.push(new Input().parse(child));\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn inputs;\n\t\t};\n\n\t\tfunction Skin() {\n\n\t\t\t\tthis.source = \"\";\n\t\t\t\tthis.bindShapeMatrix = null;\n\t\t\t\tthis.invBindMatrices = [];\n\t\t\t\tthis.joints = [];\n\t\t\t\tthis.weights = [];\n\t\t}\n\n\t\tSkin.prototype.parse = function (element) {\n\n\t\t\t\tvar sources = {};\n\t\t\t\tvar joints, weights;\n\n\t\t\t\tthis.source = element.getAttribute('source').replace(/^#/, '');\n\t\t\t\tthis.invBindMatrices = [];\n\t\t\t\tthis.joints = [];\n\t\t\t\tthis.weights = [];\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tvar child = element.childNodes[i];\n\t\t\t\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\tcase 'bind_shape_matrix':\n\n\t\t\t\t\t\t\t\t\t\tvar f = _floats(child.textContent);\n\t\t\t\t\t\t\t\t\t\tthis.bindShapeMatrix = getConvertedMat4(f);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'source':\n\n\t\t\t\t\t\t\t\t\t\tvar src = new Source().parse(child);\n\t\t\t\t\t\t\t\t\t\tsources[src.id] = src;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'joints':\n\n\t\t\t\t\t\t\t\t\t\tjoints = child;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'vertex_weights':\n\n\t\t\t\t\t\t\t\t\t\tweights = child;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\t\t\t\tconsole.log(child.nodeName);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.parseJoints(joints, sources);\n\t\t\t\tthis.parseWeights(weights, sources);\n\n\t\t\t\treturn this;\n\t\t};\n\n\t\tSkin.prototype.parseJoints = function (element, sources) {\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tvar child = element.childNodes[i];\n\t\t\t\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\tcase 'input':\n\n\t\t\t\t\t\t\t\t\t\tvar input = new Input().parse(child);\n\t\t\t\t\t\t\t\t\t\tvar source = sources[input.source];\n\n\t\t\t\t\t\t\t\t\t\tif (input.semantic === 'JOINT') {\n\n\t\t\t\t\t\t\t\t\t\t\t\tthis.joints = source.read();\n\t\t\t\t\t\t\t\t\t\t} else if (input.semantic === 'INV_BIND_MATRIX') {\n\n\t\t\t\t\t\t\t\t\t\t\t\tthis.invBindMatrices = source.read();\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t}\n\t\t};\n\n\t\tSkin.prototype.parseWeights = function (element, sources) {\n\n\t\t\t\tvar v,\n\t\t\t\t    vcount,\n\t\t\t\t    inputs = [];\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tvar child = element.childNodes[i];\n\t\t\t\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\tcase 'input':\n\n\t\t\t\t\t\t\t\t\t\tinputs.push(new Input().parse(child));\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'v':\n\n\t\t\t\t\t\t\t\t\t\tv = _ints(child.textContent);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'vcount':\n\n\t\t\t\t\t\t\t\t\t\tvcount = _ints(child.textContent);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvar index = 0;\n\n\t\t\t\tfor (var i = 0; i < vcount.length; i++) {\n\n\t\t\t\t\t\tvar numBones = vcount[i];\n\t\t\t\t\t\tvar vertex_weights = [];\n\n\t\t\t\t\t\tfor (var j = 0; j < numBones; j++) {\n\n\t\t\t\t\t\t\t\tvar influence = {};\n\n\t\t\t\t\t\t\t\tfor (var k = 0; k < inputs.length; k++) {\n\n\t\t\t\t\t\t\t\t\t\tvar input = inputs[k];\n\t\t\t\t\t\t\t\t\t\tvar value = v[index + input.offset];\n\n\t\t\t\t\t\t\t\t\t\tswitch (input.semantic) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tcase 'JOINT':\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tinfluence.joint = value;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\tcase 'WEIGHT':\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tinfluence.weight = sources[input.source].data[value];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tvertex_weights.push(influence);\n\t\t\t\t\t\t\t\tindex += inputs.length;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfor (var j = 0; j < vertex_weights.length; j++) {\n\n\t\t\t\t\t\t\t\tvertex_weights[j].index = i;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.weights.push(vertex_weights);\n\t\t\t\t}\n\t\t};\n\n\t\tfunction VisualScene() {\n\n\t\t\t\tthis.id = \"\";\n\t\t\t\tthis.name = \"\";\n\t\t\t\tthis.nodes = [];\n\t\t\t\tthis.scene = new __WEBPACK_IMPORTED_MODULE_1_three__[\"s\" /* Group */]();\n\t\t}\n\n\t\tVisualScene.prototype.getChildById = function (id, recursive) {\n\n\t\t\t\tfor (var i = 0; i < this.nodes.length; i++) {\n\n\t\t\t\t\t\tvar node = this.nodes[i].getChildById(id, recursive);\n\n\t\t\t\t\t\tif (node) {\n\n\t\t\t\t\t\t\t\treturn node;\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\t\t};\n\n\t\tVisualScene.prototype.getChildBySid = function (sid, recursive) {\n\n\t\t\t\tfor (var i = 0; i < this.nodes.length; i++) {\n\n\t\t\t\t\t\tvar node = this.nodes[i].getChildBySid(sid, recursive);\n\n\t\t\t\t\t\tif (node) {\n\n\t\t\t\t\t\t\t\treturn node;\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\t\t};\n\n\t\tVisualScene.prototype.parse = function (element) {\n\n\t\t\t\tthis.id = element.getAttribute('id');\n\t\t\t\tthis.name = element.getAttribute('name');\n\t\t\t\tthis.nodes = [];\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tvar child = element.childNodes[i];\n\t\t\t\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\tcase 'node':\n\n\t\t\t\t\t\t\t\t\t\tthis.nodes.push(new Node().parse(child));\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn this;\n\t\t};\n\n\t\tfunction Node() {\n\n\t\t\t\tthis.id = \"\";\n\t\t\t\tthis.name = \"\";\n\t\t\t\tthis.sid = \"\";\n\t\t\t\tthis.nodes = [];\n\t\t\t\tthis.controllers = [];\n\t\t\t\tthis.transforms = [];\n\t\t\t\tthis.geometries = [];\n\t\t\t\tthis.channels = [];\n\t\t\t\tthis.matrix = new __WEBPACK_IMPORTED_MODULE_1_three__[\"L\" /* Matrix4 */]();\n\t\t}\n\n\t\tNode.prototype.getChannelForTransform = function (transformSid) {\n\n\t\t\t\tfor (var i = 0; i < this.channels.length; i++) {\n\n\t\t\t\t\t\tvar channel = this.channels[i];\n\t\t\t\t\t\tvar parts = channel.target.split('/');\n\t\t\t\t\t\tvar id = parts.shift();\n\t\t\t\t\t\tvar sid = parts.shift();\n\t\t\t\t\t\tvar dotSyntax = sid.indexOf(\".\") >= 0;\n\t\t\t\t\t\tvar arrSyntax = sid.indexOf(\"(\") >= 0;\n\t\t\t\t\t\tvar arrIndices;\n\n\t\t\t\t\t\tif (dotSyntax) {\n\n\t\t\t\t\t\t\t\tparts = sid.split(\".\");\n\t\t\t\t\t\t\t\tsid = parts.shift();\n\t\t\t\t\t\t} else if (arrSyntax) {\n\n\t\t\t\t\t\t\t\tarrIndices = sid.split(\"(\");\n\t\t\t\t\t\t\t\tsid = arrIndices.shift();\n\n\t\t\t\t\t\t\t\tfor (var j = 0; j < arrIndices.length; j++) {\n\n\t\t\t\t\t\t\t\t\t\tarrIndices[j] = parseInt(arrIndices[j].replace(/\\)/, ''));\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (sid === transformSid) {\n\n\t\t\t\t\t\t\t\tchannel.info = { sid: sid, dotSyntax: dotSyntax, arrSyntax: arrSyntax, arrIndices: arrIndices };\n\t\t\t\t\t\t\t\treturn channel;\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\t\t};\n\n\t\tNode.prototype.getChildById = function (id, recursive) {\n\n\t\t\t\tif (this.id === id) {\n\n\t\t\t\t\t\treturn this;\n\t\t\t\t}\n\n\t\t\t\tif (recursive) {\n\n\t\t\t\t\t\tfor (var i = 0; i < this.nodes.length; i++) {\n\n\t\t\t\t\t\t\t\tvar n = this.nodes[i].getChildById(id, recursive);\n\n\t\t\t\t\t\t\t\tif (n) {\n\n\t\t\t\t\t\t\t\t\t\treturn n;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\t\t};\n\n\t\tNode.prototype.getChildBySid = function (sid, recursive) {\n\n\t\t\t\tif (this.sid === sid) {\n\n\t\t\t\t\t\treturn this;\n\t\t\t\t}\n\n\t\t\t\tif (recursive) {\n\n\t\t\t\t\t\tfor (var i = 0; i < this.nodes.length; i++) {\n\n\t\t\t\t\t\t\t\tvar n = this.nodes[i].getChildBySid(sid, recursive);\n\n\t\t\t\t\t\t\t\tif (n) {\n\n\t\t\t\t\t\t\t\t\t\treturn n;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\t\t};\n\n\t\tNode.prototype.getTransformBySid = function (sid) {\n\n\t\t\t\tfor (var i = 0; i < this.transforms.length; i++) {\n\n\t\t\t\t\t\tif (this.transforms[i].sid === sid) return this.transforms[i];\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\t\t};\n\n\t\tNode.prototype.parse = function (element) {\n\n\t\t\t\tvar url;\n\n\t\t\t\tthis.id = element.getAttribute('id');\n\t\t\t\tthis.sid = element.getAttribute('sid');\n\t\t\t\tthis.name = element.getAttribute('name');\n\t\t\t\tthis.type = element.getAttribute('type');\n\t\t\t\tthis.layer = element.getAttribute('layer');\n\n\t\t\t\tthis.type = this.type === 'JOINT' ? this.type : 'NODE';\n\n\t\t\t\tthis.nodes = [];\n\t\t\t\tthis.transforms = [];\n\t\t\t\tthis.geometries = [];\n\t\t\t\tthis.cameras = [];\n\t\t\t\tthis.lights = [];\n\t\t\t\tthis.controllers = [];\n\t\t\t\tthis.matrix = new __WEBPACK_IMPORTED_MODULE_1_three__[\"L\" /* Matrix4 */]();\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tvar child = element.childNodes[i];\n\t\t\t\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\tcase 'node':\n\n\t\t\t\t\t\t\t\t\t\tthis.nodes.push(new Node().parse(child));\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'instance_camera':\n\n\t\t\t\t\t\t\t\t\t\tthis.cameras.push(new InstanceCamera().parse(child));\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'instance_controller':\n\n\t\t\t\t\t\t\t\t\t\tthis.controllers.push(new InstanceController().parse(child));\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'instance_geometry':\n\n\t\t\t\t\t\t\t\t\t\tthis.geometries.push(new InstanceGeometry().parse(child));\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'instance_light':\n\n\t\t\t\t\t\t\t\t\t\tthis.lights.push(new InstanceLight().parse(child));\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'instance_node':\n\n\t\t\t\t\t\t\t\t\t\turl = child.getAttribute('url').replace(/^#/, '');\n\t\t\t\t\t\t\t\t\t\tvar iNode = getLibraryNode(url);\n\n\t\t\t\t\t\t\t\t\t\tif (iNode) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tthis.nodes.push(new Node().parse(iNode));\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'rotate':\n\t\t\t\t\t\t\t\tcase 'translate':\n\t\t\t\t\t\t\t\tcase 'scale':\n\t\t\t\t\t\t\t\tcase 'matrix':\n\t\t\t\t\t\t\t\tcase 'lookat':\n\t\t\t\t\t\t\t\tcase 'skew':\n\n\t\t\t\t\t\t\t\t\t\tthis.transforms.push(new Transform().parse(child));\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'extra':\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\t\t\t\tconsole.log(child.nodeName);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.channels = getChannelsForNode(this);\n\t\t\t\tbakeAnimations(this);\n\n\t\t\t\tthis.updateMatrix();\n\n\t\t\t\treturn this;\n\t\t};\n\n\t\tNode.prototype.updateMatrix = function () {\n\n\t\t\t\tthis.matrix.identity();\n\n\t\t\t\tfor (var i = 0; i < this.transforms.length; i++) {\n\n\t\t\t\t\t\tthis.transforms[i].apply(this.matrix);\n\t\t\t\t}\n\t\t};\n\n\t\tfunction Transform() {\n\n\t\t\t\tthis.sid = \"\";\n\t\t\t\tthis.type = \"\";\n\t\t\t\tthis.data = [];\n\t\t\t\tthis.obj = null;\n\t\t}\n\n\t\tTransform.prototype.parse = function (element) {\n\n\t\t\t\tthis.sid = element.getAttribute('sid');\n\t\t\t\tthis.type = element.nodeName;\n\t\t\t\tthis.data = _floats(element.textContent);\n\t\t\t\tthis.convert();\n\n\t\t\t\treturn this;\n\t\t};\n\n\t\tTransform.prototype.convert = function () {\n\n\t\t\t\tswitch (this.type) {\n\n\t\t\t\t\t\tcase 'matrix':\n\n\t\t\t\t\t\t\t\tthis.obj = getConvertedMat4(this.data);\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'rotate':\n\n\t\t\t\t\t\t\t\tthis.angle = __WEBPACK_IMPORTED_MODULE_1_three__[\"N\" /* Math */].degToRad(this.data[3]);\n\n\t\t\t\t\t\tcase 'translate':\n\n\t\t\t\t\t\t\t\tfixCoords(this.data, -1);\n\t\t\t\t\t\t\t\tthis.obj = new __WEBPACK_IMPORTED_MODULE_1_three__[\"b\" /* Vector3 */](this.data[0], this.data[1], this.data[2]);\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'scale':\n\n\t\t\t\t\t\t\t\tfixCoords(this.data, 1);\n\t\t\t\t\t\t\t\tthis.obj = new __WEBPACK_IMPORTED_MODULE_1_three__[\"b\" /* Vector3 */](this.data[0], this.data[1], this.data[2]);\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tconsole.log('Can not convert Transform of type ' + this.type);\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\t\t};\n\n\t\tTransform.prototype.apply = function () {\n\n\t\t\t\tvar m1 = new __WEBPACK_IMPORTED_MODULE_1_three__[\"L\" /* Matrix4 */]();\n\n\t\t\t\treturn function (matrix) {\n\n\t\t\t\t\t\tswitch (this.type) {\n\n\t\t\t\t\t\t\t\tcase 'matrix':\n\n\t\t\t\t\t\t\t\t\t\tmatrix.multiply(this.obj);\n\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'translate':\n\n\t\t\t\t\t\t\t\t\t\tmatrix.multiply(m1.makeTranslation(this.obj.x, this.obj.y, this.obj.z));\n\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'rotate':\n\n\t\t\t\t\t\t\t\t\t\tmatrix.multiply(m1.makeRotationAxis(this.obj, this.angle));\n\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'scale':\n\n\t\t\t\t\t\t\t\t\t\tmatrix.scale(this.obj);\n\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t};\n\t\t}();\n\n\t\tTransform.prototype.update = function (data, member) {\n\n\t\t\t\tvar members = ['X', 'Y', 'Z', 'ANGLE'];\n\n\t\t\t\tswitch (this.type) {\n\n\t\t\t\t\t\tcase 'matrix':\n\n\t\t\t\t\t\t\t\tif (!member) {\n\n\t\t\t\t\t\t\t\t\t\tthis.obj.copy(data);\n\t\t\t\t\t\t\t\t} else if (member.length === 1) {\n\n\t\t\t\t\t\t\t\t\t\tswitch (member[0]) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tcase 0:\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.obj.n11 = data[0];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.obj.n21 = data[1];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.obj.n31 = data[2];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.obj.n41 = data[3];\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\tcase 1:\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.obj.n12 = data[0];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.obj.n22 = data[1];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.obj.n32 = data[2];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.obj.n42 = data[3];\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\tcase 2:\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.obj.n13 = data[0];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.obj.n23 = data[1];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.obj.n33 = data[2];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.obj.n43 = data[3];\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\tcase 3:\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.obj.n14 = data[0];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.obj.n24 = data[1];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.obj.n34 = data[2];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.obj.n44 = data[3];\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else if (member.length === 2) {\n\n\t\t\t\t\t\t\t\t\t\tvar propName = 'n' + (member[0] + 1) + (member[1] + 1);\n\t\t\t\t\t\t\t\t\t\tthis.obj[propName] = data;\n\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\tconsole.log('Incorrect addressing of matrix in transform.');\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'translate':\n\t\t\t\t\t\tcase 'scale':\n\n\t\t\t\t\t\t\t\tif (Object.prototype.toString.call(member) === '[object Array]') {\n\n\t\t\t\t\t\t\t\t\t\tmember = members[member[0]];\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tswitch (member) {\n\n\t\t\t\t\t\t\t\t\t\tcase 'X':\n\n\t\t\t\t\t\t\t\t\t\t\t\tthis.obj.x = data;\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\tcase 'Y':\n\n\t\t\t\t\t\t\t\t\t\t\t\tthis.obj.y = data;\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\tcase 'Z':\n\n\t\t\t\t\t\t\t\t\t\t\t\tthis.obj.z = data;\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\t\t\t\t\t\tthis.obj.x = data[0];\n\t\t\t\t\t\t\t\t\t\t\t\tthis.obj.y = data[1];\n\t\t\t\t\t\t\t\t\t\t\t\tthis.obj.z = data[2];\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'rotate':\n\n\t\t\t\t\t\t\t\tif (Object.prototype.toString.call(member) === '[object Array]') {\n\n\t\t\t\t\t\t\t\t\t\tmember = members[member[0]];\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tswitch (member) {\n\n\t\t\t\t\t\t\t\t\t\tcase 'X':\n\n\t\t\t\t\t\t\t\t\t\t\t\tthis.obj.x = data;\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\tcase 'Y':\n\n\t\t\t\t\t\t\t\t\t\t\t\tthis.obj.y = data;\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\tcase 'Z':\n\n\t\t\t\t\t\t\t\t\t\t\t\tthis.obj.z = data;\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\tcase 'ANGLE':\n\n\t\t\t\t\t\t\t\t\t\t\t\tthis.angle = __WEBPACK_IMPORTED_MODULE_1_three__[\"N\" /* Math */].degToRad(data);\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\t\t\t\t\t\tthis.obj.x = data[0];\n\t\t\t\t\t\t\t\t\t\t\t\tthis.obj.y = data[1];\n\t\t\t\t\t\t\t\t\t\t\t\tthis.obj.z = data[2];\n\t\t\t\t\t\t\t\t\t\t\t\tthis.angle = __WEBPACK_IMPORTED_MODULE_1_three__[\"N\" /* Math */].degToRad(data[3]);\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\t\t};\n\n\t\tfunction InstanceController() {\n\n\t\t\t\tthis.url = \"\";\n\t\t\t\tthis.skeleton = [];\n\t\t\t\tthis.instance_material = [];\n\t\t}\n\n\t\tInstanceController.prototype.parse = function (element) {\n\n\t\t\t\tthis.url = element.getAttribute('url').replace(/^#/, '');\n\t\t\t\tthis.skeleton = [];\n\t\t\t\tthis.instance_material = [];\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tvar child = element.childNodes[i];\n\t\t\t\t\t\tif (child.nodeType !== 1) continue;\n\n\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\tcase 'skeleton':\n\n\t\t\t\t\t\t\t\t\t\tthis.skeleton.push(child.textContent.replace(/^#/, ''));\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'bind_material':\n\n\t\t\t\t\t\t\t\t\t\tvar instances = child.querySelectorAll('instance_material');\n\n\t\t\t\t\t\t\t\t\t\tfor (var j = 0; j < instances.length; j++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar instance = instances[j];\n\t\t\t\t\t\t\t\t\t\t\t\tthis.instance_material.push(new InstanceMaterial().parse(instance));\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'extra':\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn this;\n\t\t};\n\n\t\tfunction InstanceMaterial() {\n\n\t\t\t\tthis.symbol = \"\";\n\t\t\t\tthis.target = \"\";\n\t\t}\n\n\t\tInstanceMaterial.prototype.parse = function (element) {\n\n\t\t\t\tthis.symbol = element.getAttribute('symbol');\n\t\t\t\tthis.target = element.getAttribute('target').replace(/^#/, '');\n\t\t\t\treturn this;\n\t\t};\n\n\t\tfunction InstanceGeometry() {\n\n\t\t\t\tthis.url = \"\";\n\t\t\t\tthis.instance_material = [];\n\t\t}\n\n\t\tInstanceGeometry.prototype.parse = function (element) {\n\n\t\t\t\tthis.url = element.getAttribute('url').replace(/^#/, '');\n\t\t\t\tthis.instance_material = [];\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tvar child = element.childNodes[i];\n\t\t\t\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\t\t\t\tif (child.nodeName === 'bind_material') {\n\n\t\t\t\t\t\t\t\tvar instances = child.querySelectorAll('instance_material');\n\n\t\t\t\t\t\t\t\tfor (var j = 0; j < instances.length; j++) {\n\n\t\t\t\t\t\t\t\t\t\tvar instance = instances[j];\n\t\t\t\t\t\t\t\t\t\tthis.instance_material.push(new InstanceMaterial().parse(instance));\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn this;\n\t\t};\n\n\t\tfunction Geometry() {\n\n\t\t\t\tthis.id = \"\";\n\t\t\t\tthis.mesh = null;\n\t\t}\n\n\t\tGeometry.prototype.parse = function (element) {\n\n\t\t\t\tthis.id = element.getAttribute('id');\n\n\t\t\t\textractDoubleSided(this, element);\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tvar child = element.childNodes[i];\n\n\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\tcase 'mesh':\n\n\t\t\t\t\t\t\t\t\t\tthis.mesh = new Mesh(this).parse(child);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'extra':\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn this;\n\t\t};\n\n\t\tfunction Mesh(geometry) {\n\n\t\t\t\tthis.geometry = geometry.id;\n\t\t\t\tthis.primitives = [];\n\t\t\t\tthis.vertices = null;\n\t\t\t\tthis.geometry3js = null;\n\t\t}\n\n\t\tMesh.prototype.parse = function (element) {\n\n\t\t\t\tthis.primitives = [];\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tvar child = element.childNodes[i];\n\n\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\tcase 'source':\n\n\t\t\t\t\t\t\t\t\t\t_source(child);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'vertices':\n\n\t\t\t\t\t\t\t\t\t\tthis.vertices = new Vertices().parse(child);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'linestrips':\n\n\t\t\t\t\t\t\t\t\t\tthis.primitives.push(new LineStrips().parse(child));\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'triangles':\n\n\t\t\t\t\t\t\t\t\t\tthis.primitives.push(new Triangles().parse(child));\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'polygons':\n\n\t\t\t\t\t\t\t\t\t\tthis.primitives.push(new Polygons().parse(child));\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'polylist':\n\n\t\t\t\t\t\t\t\t\t\tthis.primitives.push(new Polylist().parse(child));\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.geometry3js = new __WEBPACK_IMPORTED_MODULE_1_three__[\"W\" /* Geometry */]();\n\n\t\t\t\tif (this.vertices === null) {\n\n\t\t\t\t\t\treturn this;\n\t\t\t\t}\n\n\t\t\t\tvar vertexData = sources[this.vertices.input['POSITION'].source].data;\n\n\t\t\t\tfor (var i = 0; i < vertexData.length; i += 3) {\n\n\t\t\t\t\t\tthis.geometry3js.vertices.push(getConvertedVec3(vertexData, i).clone());\n\t\t\t\t}\n\n\t\t\t\tfor (var i = 0; i < this.primitives.length; i++) {\n\n\t\t\t\t\t\tvar primitive = this.primitives[i];\n\t\t\t\t\t\tprimitive.setVertices(this.vertices);\n\t\t\t\t\t\tthis.handlePrimitive(primitive, this.geometry3js);\n\t\t\t\t}\n\n\t\t\t\tif (this.geometry3js.calcNormals) {\n\n\t\t\t\t\t\tthis.geometry3js.computeVertexNormals();\n\t\t\t\t\t\tdelete this.geometry3js.calcNormals;\n\t\t\t\t}\n\n\t\t\t\treturn this;\n\t\t};\n\n\t\tMesh.prototype.handlePrimitive = function (primitive, geom) {\n\n\t\t\t\tif (primitive instanceof LineStrips) {\n\n\t\t\t\t\t\tgeom.isLineStrip = true;\n\t\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar j,\n\t\t\t\t    k,\n\t\t\t\t    pList = primitive.p,\n\t\t\t\t    inputs = primitive.inputs;\n\t\t\t\tvar input, index, idx32;\n\t\t\t\tvar source, numParams;\n\t\t\t\tvar vcount,\n\t\t\t\t    vcIndex = 0,\n\t\t\t\t    maxOffset = 0;\n\t\t\t\tvar texture_sets = [];\n\n\t\t\t\tfor (j = 0; j < inputs.length; j++) {\n\n\t\t\t\t\t\tinput = inputs[j];\n\n\t\t\t\t\t\tvar offset = input.offset + 1;\n\t\t\t\t\t\tmaxOffset = maxOffset < offset ? offset : maxOffset;\n\n\t\t\t\t\t\tswitch (input.semantic) {\n\n\t\t\t\t\t\t\t\tcase 'TEXCOORD':\n\t\t\t\t\t\t\t\t\t\ttexture_sets.push(input.set);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfor (var pCount = 0; pCount < pList.length; ++pCount) {\n\n\t\t\t\t\t\tvar p = pList[pCount],\n\t\t\t\t\t\t    i = 0;\n\n\t\t\t\t\t\twhile (i < p.length) {\n\n\t\t\t\t\t\t\t\tvar vs = [];\n\t\t\t\t\t\t\t\tvar ns = [];\n\t\t\t\t\t\t\t\tvar ts = null;\n\t\t\t\t\t\t\t\tvar cs = [];\n\n\t\t\t\t\t\t\t\tif (primitive.vcount) {\n\n\t\t\t\t\t\t\t\t\t\tvcount = primitive.vcount.length ? primitive.vcount[vcIndex++] : primitive.vcount;\n\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\tvcount = p.length / maxOffset;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tfor (j = 0; j < vcount; j++) {\n\n\t\t\t\t\t\t\t\t\t\tfor (k = 0; k < inputs.length; k++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tinput = inputs[k];\n\t\t\t\t\t\t\t\t\t\t\t\tsource = sources[input.source];\n\n\t\t\t\t\t\t\t\t\t\t\t\tindex = p[i + j * maxOffset + input.offset];\n\t\t\t\t\t\t\t\t\t\t\t\tnumParams = source.accessor.params.length;\n\t\t\t\t\t\t\t\t\t\t\t\tidx32 = index * numParams;\n\n\t\t\t\t\t\t\t\t\t\t\t\tswitch (input.semantic) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'VERTEX':\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvs.push(index);\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'NORMAL':\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tns.push(getConvertedVec3(source.data, idx32));\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'TEXCOORD':\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tts = ts || {};\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (ts[input.set] === undefined) ts[input.set] = [];\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tts[input.set].push(new __WEBPACK_IMPORTED_MODULE_1_three__[\"c\" /* Vector2 */](source.data[idx32], source.data[idx32 + 1]));\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'COLOR':\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcs.push(new __WEBPACK_IMPORTED_MODULE_1_three__[\"j\" /* Color */]().setRGB(source.data[idx32], source.data[idx32 + 1], source.data[idx32 + 2]));\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (ns.length === 0) {\n\t\t\t\t\t\t\t\t\t\tinput = this.vertices.input.NORMAL;\n\n\t\t\t\t\t\t\t\t\t\tif (input) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tsource = sources[input.source];\n\t\t\t\t\t\t\t\t\t\t\t\tnumParams = source.accessor.params.length;\n\n\t\t\t\t\t\t\t\t\t\t\t\tfor (var ndx = 0, len = vs.length; ndx < len; ndx++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tns.push(getConvertedVec3(source.data, vs[ndx] * numParams));\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t\tgeom.calcNormals = true;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (!ts) {\n\n\t\t\t\t\t\t\t\t\t\tts = {};\n\n\t\t\t\t\t\t\t\t\t\tinput = this.vertices.input.TEXCOORD;\n\n\t\t\t\t\t\t\t\t\t\tif (input) {\n\n\t\t\t\t\t\t\t\t\t\t\t\ttexture_sets.push(input.set);\n\t\t\t\t\t\t\t\t\t\t\t\tsource = sources[input.source];\n\t\t\t\t\t\t\t\t\t\t\t\tnumParams = source.accessor.params.length;\n\n\t\t\t\t\t\t\t\t\t\t\t\tfor (var ndx = 0, len = vs.length; ndx < len; ndx++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tidx32 = vs[ndx] * numParams;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (ts[input.set] === undefined) ts[input.set] = [];\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tts[input.set].push(new __WEBPACK_IMPORTED_MODULE_1_three__[\"c\" /* Vector2 */](source.data[idx32], 1.0 - source.data[idx32 + 1]));\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (cs.length === 0) {\n\t\t\t\t\t\t\t\t\t\tinput = this.vertices.input.COLOR;\n\n\t\t\t\t\t\t\t\t\t\tif (input) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tsource = sources[input.source];\n\t\t\t\t\t\t\t\t\t\t\t\tnumParams = source.accessor.params.length;\n\n\t\t\t\t\t\t\t\t\t\t\t\tfor (var ndx = 0, len = vs.length; ndx < len; ndx++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tidx32 = vs[ndx] * numParams;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcs.push(new __WEBPACK_IMPORTED_MODULE_1_three__[\"j\" /* Color */]().setRGB(source.data[idx32], source.data[idx32 + 1], source.data[idx32 + 2]));\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tvar face = null,\n\t\t\t\t\t\t\t\t    faces = [],\n\t\t\t\t\t\t\t\t    uv,\n\t\t\t\t\t\t\t\t    uvArr;\n\n\t\t\t\t\t\t\t\tif (vcount === 3) {\n\n\t\t\t\t\t\t\t\t\t\tfaces.push(new __WEBPACK_IMPORTED_MODULE_1_three__[\"X\" /* Face3 */](vs[0], vs[1], vs[2], ns, cs.length ? cs : new __WEBPACK_IMPORTED_MODULE_1_three__[\"j\" /* Color */]()));\n\t\t\t\t\t\t\t\t} else if (vcount === 4) {\n\n\t\t\t\t\t\t\t\t\t\tfaces.push(new __WEBPACK_IMPORTED_MODULE_1_three__[\"X\" /* Face3 */](vs[0], vs[1], vs[3], ns.length ? [ns[0].clone(), ns[1].clone(), ns[3].clone()] : [], cs.length ? [cs[0], cs[1], cs[3]] : new __WEBPACK_IMPORTED_MODULE_1_three__[\"j\" /* Color */]()));\n\n\t\t\t\t\t\t\t\t\t\tfaces.push(new __WEBPACK_IMPORTED_MODULE_1_three__[\"X\" /* Face3 */](vs[1], vs[2], vs[3], ns.length ? [ns[1].clone(), ns[2].clone(), ns[3].clone()] : [], cs.length ? [cs[1], cs[2], cs[3]] : new __WEBPACK_IMPORTED_MODULE_1_three__[\"j\" /* Color */]()));\n\t\t\t\t\t\t\t\t} else if (vcount > 4 && options.subdivideFaces) {\n\n\t\t\t\t\t\t\t\t\t\tvar clr = cs.length ? cs : new __WEBPACK_IMPORTED_MODULE_1_three__[\"j\" /* Color */](),\n\t\t\t\t\t\t\t\t\t\t    vec1,\n\t\t\t\t\t\t\t\t\t\t    vec2,\n\t\t\t\t\t\t\t\t\t\t    vec3,\n\t\t\t\t\t\t\t\t\t\t    v1,\n\t\t\t\t\t\t\t\t\t\t    v2,\n\t\t\t\t\t\t\t\t\t\t    norm;\n\n\t\t\t\t\t\t\t\t\t\tfor (k = 1; k < vcount - 1;) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tfaces.push(new __WEBPACK_IMPORTED_MODULE_1_three__[\"X\" /* Face3 */](vs[0], vs[k], vs[k + 1], ns.length ? [ns[0].clone(), ns[k++].clone(), ns[k].clone()] : [], clr));\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (faces.length) {\n\n\t\t\t\t\t\t\t\t\t\tfor (var ndx = 0, len = faces.length; ndx < len; ndx++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tface = faces[ndx];\n\t\t\t\t\t\t\t\t\t\t\t\tface.daeMaterial = primitive.material;\n\t\t\t\t\t\t\t\t\t\t\t\tgeom.faces.push(face);\n\n\t\t\t\t\t\t\t\t\t\t\t\tfor (k = 0; k < texture_sets.length; k++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tuv = ts[texture_sets[k]];\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (vcount > 4) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuvArr = [uv[0], uv[ndx + 1], uv[ndx + 2]];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else if (vcount === 4) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (ndx === 0) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuvArr = [uv[0], uv[1], uv[3]];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuvArr = [uv[1].clone(), uv[2], uv[3].clone()];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuvArr = [uv[0], uv[1], uv[2]];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (geom.faceVertexUvs[k] === undefined) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgeom.faceVertexUvs[k] = [];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tgeom.faceVertexUvs[k].push(uvArr);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\tconsole.log('dropped face with vcount ' + vcount + ' for geometry with id: ' + geom.id);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\ti += maxOffset * vcount;\n\t\t\t\t\t\t}\n\t\t\t\t}\n\t\t};\n\n\t\tfunction Polygons() {\n\n\t\t\t\tthis.material = \"\";\n\t\t\t\tthis.count = 0;\n\t\t\t\tthis.inputs = [];\n\t\t\t\tthis.vcount = null;\n\t\t\t\tthis.p = [];\n\t\t\t\tthis.geometry = new __WEBPACK_IMPORTED_MODULE_1_three__[\"W\" /* Geometry */]();\n\t\t}\n\n\t\tPolygons.prototype.setVertices = function (vertices) {\n\n\t\t\t\tfor (var i = 0; i < this.inputs.length; i++) {\n\n\t\t\t\t\t\tif (this.inputs[i].source === vertices.id) {\n\n\t\t\t\t\t\t\t\tthis.inputs[i].source = vertices.input['POSITION'].source;\n\t\t\t\t\t\t}\n\t\t\t\t}\n\t\t};\n\n\t\tPolygons.prototype.parse = function (element) {\n\n\t\t\t\tthis.material = element.getAttribute('material');\n\t\t\t\tthis.count = _attr_as_int(element, 'count', 0);\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tvar child = element.childNodes[i];\n\n\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\tcase 'input':\n\n\t\t\t\t\t\t\t\t\t\tthis.inputs.push(new Input().parse(element.childNodes[i]));\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'vcount':\n\n\t\t\t\t\t\t\t\t\t\tthis.vcount = _ints(child.textContent);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'p':\n\n\t\t\t\t\t\t\t\t\t\tthis.p.push(_ints(child.textContent));\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'ph':\n\n\t\t\t\t\t\t\t\t\t\tconsole.warn('polygon holes not yet supported!');\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn this;\n\t\t};\n\n\t\tfunction Polylist() {\n\n\t\t\t\tPolygons.call(this);\n\n\t\t\t\tthis.vcount = [];\n\t\t}\n\n\t\tPolylist.prototype = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_create___default()(Polygons.prototype);\n\t\tPolylist.prototype.constructor = Polylist;\n\n\t\tfunction LineStrips() {\n\n\t\t\t\tPolygons.call(this);\n\n\t\t\t\tthis.vcount = 1;\n\t\t}\n\n\t\tLineStrips.prototype = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_create___default()(Polygons.prototype);\n\t\tLineStrips.prototype.constructor = LineStrips;\n\n\t\tfunction Triangles() {\n\n\t\t\t\tPolygons.call(this);\n\n\t\t\t\tthis.vcount = 3;\n\t\t}\n\n\t\tTriangles.prototype = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_create___default()(Polygons.prototype);\n\t\tTriangles.prototype.constructor = Triangles;\n\n\t\tfunction Accessor() {\n\n\t\t\t\tthis.source = \"\";\n\t\t\t\tthis.count = 0;\n\t\t\t\tthis.stride = 0;\n\t\t\t\tthis.params = [];\n\t\t}\n\n\t\tAccessor.prototype.parse = function (element) {\n\n\t\t\t\tthis.params = [];\n\t\t\t\tthis.source = element.getAttribute('source');\n\t\t\t\tthis.count = _attr_as_int(element, 'count', 0);\n\t\t\t\tthis.stride = _attr_as_int(element, 'stride', 0);\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tvar child = element.childNodes[i];\n\n\t\t\t\t\t\tif (child.nodeName === 'param') {\n\n\t\t\t\t\t\t\t\tvar param = {};\n\t\t\t\t\t\t\t\tparam['name'] = child.getAttribute('name');\n\t\t\t\t\t\t\t\tparam['type'] = child.getAttribute('type');\n\t\t\t\t\t\t\t\tthis.params.push(param);\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn this;\n\t\t};\n\n\t\tfunction Vertices() {\n\n\t\t\t\tthis.input = {};\n\t\t}\n\n\t\tVertices.prototype.parse = function (element) {\n\n\t\t\t\tthis.id = element.getAttribute('id');\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tif (element.childNodes[i].nodeName === 'input') {\n\n\t\t\t\t\t\t\t\tvar input = new Input().parse(element.childNodes[i]);\n\t\t\t\t\t\t\t\tthis.input[input.semantic] = input;\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn this;\n\t\t};\n\n\t\tfunction Input() {\n\n\t\t\t\tthis.semantic = \"\";\n\t\t\t\tthis.offset = 0;\n\t\t\t\tthis.source = \"\";\n\t\t\t\tthis.set = 0;\n\t\t}\n\n\t\tInput.prototype.parse = function (element) {\n\n\t\t\t\tthis.semantic = element.getAttribute('semantic');\n\t\t\t\tthis.source = element.getAttribute('source').replace(/^#/, '');\n\t\t\t\tthis.set = _attr_as_int(element, 'set', -1);\n\t\t\t\tthis.offset = _attr_as_int(element, 'offset', 0);\n\n\t\t\t\tif (this.semantic === 'TEXCOORD' && this.set < 0) {\n\n\t\t\t\t\t\tthis.set = 0;\n\t\t\t\t}\n\n\t\t\t\treturn this;\n\t\t};\n\n\t\tfunction Source(id) {\n\n\t\t\t\tthis.id = id;\n\t\t\t\tthis.type = null;\n\t\t}\n\n\t\tSource.prototype.parse = function (element) {\n\n\t\t\t\tthis.id = element.getAttribute('id');\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tvar child = element.childNodes[i];\n\n\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\tcase 'bool_array':\n\n\t\t\t\t\t\t\t\t\t\tthis.data = _bools(child.textContent);\n\t\t\t\t\t\t\t\t\t\tthis.type = child.nodeName;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'float_array':\n\n\t\t\t\t\t\t\t\t\t\tthis.data = _floats(child.textContent);\n\t\t\t\t\t\t\t\t\t\tthis.type = child.nodeName;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'int_array':\n\n\t\t\t\t\t\t\t\t\t\tthis.data = _ints(child.textContent);\n\t\t\t\t\t\t\t\t\t\tthis.type = child.nodeName;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'IDREF_array':\n\t\t\t\t\t\t\t\tcase 'Name_array':\n\n\t\t\t\t\t\t\t\t\t\tthis.data = _strings(child.textContent);\n\t\t\t\t\t\t\t\t\t\tthis.type = child.nodeName;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'technique_common':\n\n\t\t\t\t\t\t\t\t\t\tfor (var j = 0; j < child.childNodes.length; j++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (child.childNodes[j].nodeName === 'accessor') {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.accessor = new Accessor().parse(child.childNodes[j]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn this;\n\t\t};\n\n\t\tSource.prototype.read = function () {\n\n\t\t\t\tvar result = [];\n\n\t\t\t\tvar param = this.accessor.params[0];\n\n\t\t\t\tswitch (param.type) {\n\n\t\t\t\t\t\tcase 'IDREF':\n\t\t\t\t\t\tcase 'Name':case 'name':\n\t\t\t\t\t\tcase 'float':\n\n\t\t\t\t\t\t\t\treturn this.data;\n\n\t\t\t\t\t\tcase 'float4x4':\n\n\t\t\t\t\t\t\t\tfor (var j = 0; j < this.data.length; j += 16) {\n\n\t\t\t\t\t\t\t\t\t\tvar s = this.data.slice(j, j + 16);\n\t\t\t\t\t\t\t\t\t\tvar m = getConvertedMat4(s);\n\t\t\t\t\t\t\t\t\t\tresult.push(m);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\t\tconsole.log('ColladaLoader: Source: Read dont know how to read ' + param.type + '.');\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\treturn result;\n\t\t};\n\n\t\tfunction Material() {\n\n\t\t\t\tthis.id = \"\";\n\t\t\t\tthis.name = \"\";\n\t\t\t\tthis.instance_effect = null;\n\t\t}\n\n\t\tMaterial.prototype.parse = function (element) {\n\n\t\t\t\tthis.id = element.getAttribute('id');\n\t\t\t\tthis.name = element.getAttribute('name');\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tif (element.childNodes[i].nodeName === 'instance_effect') {\n\n\t\t\t\t\t\t\t\tthis.instance_effect = new InstanceEffect().parse(element.childNodes[i]);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn this;\n\t\t};\n\n\t\tfunction ColorOrTexture() {\n\n\t\t\t\tthis.color = new __WEBPACK_IMPORTED_MODULE_1_three__[\"j\" /* Color */]();\n\t\t\t\tthis.color.setRGB(Math.random(), Math.random(), Math.random());\n\t\t\t\tthis.color.a = 1.0;\n\n\t\t\t\tthis.texture = null;\n\t\t\t\tthis.texcoord = null;\n\t\t\t\tthis.texOpts = null;\n\t\t}\n\n\t\tColorOrTexture.prototype.isColor = function () {\n\n\t\t\t\treturn this.texture === null;\n\t\t};\n\n\t\tColorOrTexture.prototype.isTexture = function () {\n\n\t\t\t\treturn this.texture != null;\n\t\t};\n\n\t\tColorOrTexture.prototype.parse = function (element) {\n\n\t\t\t\tif (element.nodeName === 'transparent') {\n\n\t\t\t\t\t\tthis.opaque = element.getAttribute('opaque');\n\t\t\t\t}\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tvar child = element.childNodes[i];\n\t\t\t\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\tcase 'color':\n\n\t\t\t\t\t\t\t\t\t\tvar rgba = _floats(child.textContent);\n\t\t\t\t\t\t\t\t\t\tthis.color = new __WEBPACK_IMPORTED_MODULE_1_three__[\"j\" /* Color */]();\n\t\t\t\t\t\t\t\t\t\tthis.color.setRGB(rgba[0], rgba[1], rgba[2]);\n\t\t\t\t\t\t\t\t\t\tthis.color.a = rgba[3];\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'texture':\n\n\t\t\t\t\t\t\t\t\t\tthis.texture = child.getAttribute('texture');\n\t\t\t\t\t\t\t\t\t\tthis.texcoord = child.getAttribute('texcoord');\n\n\t\t\t\t\t\t\t\t\t\tthis.texOpts = {\n\t\t\t\t\t\t\t\t\t\t\t\toffsetU: 0,\n\t\t\t\t\t\t\t\t\t\t\t\toffsetV: 0,\n\t\t\t\t\t\t\t\t\t\t\t\trepeatU: 1,\n\t\t\t\t\t\t\t\t\t\t\t\trepeatV: 1,\n\t\t\t\t\t\t\t\t\t\t\t\twrapU: 1,\n\t\t\t\t\t\t\t\t\t\t\t\twrapV: 1\n\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\tthis.parseTexture(child);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn this;\n\t\t};\n\n\t\tColorOrTexture.prototype.parseTexture = function (element) {\n\n\t\t\t\tif (!element.childNodes) return this;\n\n\t\t\t\tif (element.childNodes[1] && element.childNodes[1].nodeName === 'extra') {\n\n\t\t\t\t\t\telement = element.childNodes[1];\n\n\t\t\t\t\t\tif (element.childNodes[1] && element.childNodes[1].nodeName === 'technique') {\n\n\t\t\t\t\t\t\t\telement = element.childNodes[1];\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tvar child = element.childNodes[i];\n\n\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\tcase 'offsetU':\n\t\t\t\t\t\t\t\tcase 'offsetV':\n\t\t\t\t\t\t\t\tcase 'repeatU':\n\t\t\t\t\t\t\t\tcase 'repeatV':\n\n\t\t\t\t\t\t\t\t\t\tthis.texOpts[child.nodeName] = parseFloat(child.textContent);\n\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'wrapU':\n\t\t\t\t\t\t\t\tcase 'wrapV':\n\n\t\t\t\t\t\t\t\t\t\tif (child.textContent.toUpperCase() === 'TRUE') {\n\n\t\t\t\t\t\t\t\t\t\t\t\tthis.texOpts[child.nodeName] = 1;\n\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t\tthis.texOpts[child.nodeName] = parseInt(child.textContent);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\t\t\t\tthis.texOpts[child.nodeName] = child.textContent;\n\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn this;\n\t\t};\n\n\t\tfunction Shader(type, effect) {\n\n\t\t\t\tthis.type = type;\n\t\t\t\tthis.effect = effect;\n\t\t\t\tthis.material = null;\n\t\t}\n\n\t\tShader.prototype.parse = function (element) {\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tvar child = element.childNodes[i];\n\t\t\t\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\tcase 'emission':\n\t\t\t\t\t\t\t\tcase 'diffuse':\n\t\t\t\t\t\t\t\tcase 'specular':\n\t\t\t\t\t\t\t\tcase 'transparent':\n\n\t\t\t\t\t\t\t\t\t\tthis[child.nodeName] = new ColorOrTexture().parse(child);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'bump':\n\t\t\t\t\t\t\t\t\t\tvar bumpType = child.getAttribute('bumptype');\n\t\t\t\t\t\t\t\t\t\tif (bumpType) {\n\t\t\t\t\t\t\t\t\t\t\t\tif (bumpType.toLowerCase() === \"heightfield\") {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis['bump'] = new ColorOrTexture().parse(child);\n\t\t\t\t\t\t\t\t\t\t\t\t} else if (bumpType.toLowerCase() === \"normalmap\") {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis['normal'] = new ColorOrTexture().parse(child);\n\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.error(\"Shader.prototype.parse: Invalid value for attribute 'bumptype' (\" + bumpType + \") - valid bumptypes are 'HEIGHTFIELD' and 'NORMALMAP' - defaulting to 'HEIGHTFIELD'\");\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis['bump'] = new ColorOrTexture().parse(child);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.warn(\"Shader.prototype.parse: Attribute 'bumptype' missing from bump node - defaulting to 'HEIGHTFIELD'\");\n\t\t\t\t\t\t\t\t\t\t\t\tthis['bump'] = new ColorOrTexture().parse(child);\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'shininess':\n\t\t\t\t\t\t\t\tcase 'reflectivity':\n\t\t\t\t\t\t\t\tcase 'index_of_refraction':\n\t\t\t\t\t\t\t\tcase 'transparency':\n\n\t\t\t\t\t\t\t\t\t\tvar f = child.querySelectorAll('float');\n\n\t\t\t\t\t\t\t\t\t\tif (f.length > 0) this[child.nodeName] = parseFloat(f[0].textContent);\n\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.create();\n\t\t\t\treturn this;\n\t\t};\n\n\t\tShader.prototype.create = function () {\n\n\t\t\t\tvar props = {};\n\n\t\t\t\tvar transparent = false;\n\n\t\t\t\tif (this['transparency'] !== undefined && this['transparent'] !== undefined) {\n\t\t\t\t\t\tvar transparentColor = this['transparent'];\n\t\t\t\t\t\tvar transparencyLevel = (this.transparent.color.r + this.transparent.color.g + this.transparent.color.b) / 3 * this.transparency;\n\n\t\t\t\t\t\tif (transparencyLevel > 0) {\n\t\t\t\t\t\t\t\ttransparent = true;\n\t\t\t\t\t\t\t\tprops['transparent'] = true;\n\t\t\t\t\t\t\t\tprops['opacity'] = 1 - transparencyLevel;\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvar keys = {\n\t\t\t\t\t\t'diffuse': 'map',\n\t\t\t\t\t\t'ambient': 'lightMap',\n\t\t\t\t\t\t'specular': 'specularMap',\n\t\t\t\t\t\t'emission': 'emissionMap',\n\t\t\t\t\t\t'bump': 'bumpMap',\n\t\t\t\t\t\t'normal': 'normalMap'\n\t\t\t\t};\n\n\t\t\t\tfor (var prop in this) {\n\n\t\t\t\t\t\tswitch (prop) {\n\n\t\t\t\t\t\t\t\tcase 'ambient':\n\t\t\t\t\t\t\t\tcase 'emission':\n\t\t\t\t\t\t\t\tcase 'diffuse':\n\t\t\t\t\t\t\t\tcase 'specular':\n\t\t\t\t\t\t\t\tcase 'bump':\n\t\t\t\t\t\t\t\tcase 'normal':\n\n\t\t\t\t\t\t\t\t\t\tvar cot = this[prop];\n\n\t\t\t\t\t\t\t\t\t\tif (cot instanceof ColorOrTexture) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (cot.isTexture()) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar samplerId = cot.texture;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar sampler = this.effect.sampler[samplerId];\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (sampler !== undefined && sampler.source !== undefined) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar surface = this.effect.surface[sampler.source];\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (surface !== undefined) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar image = images[surface.init_from];\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (image) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar url = baseUrl + image.init_from;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar texture;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar loader = __WEBPACK_IMPORTED_MODULE_1_three__[\"e\" /* Loader */].Handlers.get(url);\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (loader !== null) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttexture = loader.load(url);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttexture = new __WEBPACK_IMPORTED_MODULE_1_three__[\"Y\" /* Texture */]();\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tloadTextureImage(texture, url);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (sampler.wrap_s === \"MIRROR\") {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttexture.wrapS = __WEBPACK_IMPORTED_MODULE_1_three__[\"Z\" /* MirroredRepeatWrapping */];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else if (sampler.wrap_s === \"WRAP\" || cot.texOpts.wrapU) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttexture.wrapS = __WEBPACK_IMPORTED_MODULE_1_three__[\"i\" /* RepeatWrapping */];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttexture.wrapS = __WEBPACK_IMPORTED_MODULE_1_three__[\"_0\" /* ClampToEdgeWrapping */];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (sampler.wrap_t === \"MIRROR\") {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttexture.wrapT = __WEBPACK_IMPORTED_MODULE_1_three__[\"Z\" /* MirroredRepeatWrapping */];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else if (sampler.wrap_t === \"WRAP\" || cot.texOpts.wrapV) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttexture.wrapT = __WEBPACK_IMPORTED_MODULE_1_three__[\"i\" /* RepeatWrapping */];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttexture.wrapT = __WEBPACK_IMPORTED_MODULE_1_three__[\"_0\" /* ClampToEdgeWrapping */];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttexture.offset.x = cot.texOpts.offsetU;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttexture.offset.y = cot.texOpts.offsetV;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttexture.repeat.x = cot.texOpts.repeatU;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttexture.repeat.y = cot.texOpts.repeatV;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tprops[keys[prop]] = texture;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (prop === 'emission') props['emissive'] = 0xffffff;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t} else if (prop === 'diffuse' || !transparent) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (prop === 'emission') {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tprops['emissive'] = cot.color.getHex();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tprops[prop] = cot.color.getHex();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'shininess':\n\n\t\t\t\t\t\t\t\t\t\tprops[prop] = this[prop];\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'reflectivity':\n\n\t\t\t\t\t\t\t\t\t\tprops[prop] = this[prop];\n\t\t\t\t\t\t\t\t\t\tif (props[prop] > 0.0) props['envMap'] = options.defaultEnvMap;\n\t\t\t\t\t\t\t\t\t\tprops['combine'] = __WEBPACK_IMPORTED_MODULE_1_three__[\"_1\" /* MixOperation */];\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'index_of_refraction':\n\n\t\t\t\t\t\t\t\t\t\tprops['refractionRatio'] = this[prop];\n\t\t\t\t\t\t\t\t\t\tif (this[prop] !== 1.0) props['envMap'] = options.defaultEnvMap;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'transparency':\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tprops['shading'] = preferredShading;\n\t\t\t\tprops['side'] = this.effect.doubleSided ? __WEBPACK_IMPORTED_MODULE_1_three__[\"P\" /* DoubleSide */] : __WEBPACK_IMPORTED_MODULE_1_three__[\"h\" /* FrontSide */];\n\n\t\t\t\tif (props.diffuse !== undefined) {\n\n\t\t\t\t\t\tprops.color = props.diffuse;\n\t\t\t\t\t\tdelete props.diffuse;\n\t\t\t\t}\n\n\t\t\t\tswitch (this.type) {\n\n\t\t\t\t\t\tcase 'constant':\n\n\t\t\t\t\t\t\t\tif (props.emissive != undefined) props.color = props.emissive;\n\t\t\t\t\t\t\t\tthis.material = new __WEBPACK_IMPORTED_MODULE_1_three__[\"_2\" /* MeshBasicMaterial */](props);\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'phong':\n\t\t\t\t\t\tcase 'blinn':\n\n\t\t\t\t\t\t\t\tthis.material = new __WEBPACK_IMPORTED_MODULE_1_three__[\"k\" /* MeshPhongMaterial */](props);\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'lambert':\n\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\t\tthis.material = new __WEBPACK_IMPORTED_MODULE_1_three__[\"Q\" /* MeshLambertMaterial */](props);\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\treturn this.material;\n\t\t};\n\n\t\tfunction Surface(effect) {\n\n\t\t\t\tthis.effect = effect;\n\t\t\t\tthis.init_from = null;\n\t\t\t\tthis.format = null;\n\t\t}\n\n\t\tSurface.prototype.parse = function (element) {\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tvar child = element.childNodes[i];\n\t\t\t\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\tcase 'init_from':\n\n\t\t\t\t\t\t\t\t\t\tthis.init_from = child.textContent;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'format':\n\n\t\t\t\t\t\t\t\t\t\tthis.format = child.textContent;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\t\t\t\tconsole.log(\"unhandled Surface prop: \" + child.nodeName);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn this;\n\t\t};\n\n\t\tfunction Sampler2D(effect) {\n\n\t\t\t\tthis.effect = effect;\n\t\t\t\tthis.source = null;\n\t\t\t\tthis.wrap_s = null;\n\t\t\t\tthis.wrap_t = null;\n\t\t\t\tthis.minfilter = null;\n\t\t\t\tthis.magfilter = null;\n\t\t\t\tthis.mipfilter = null;\n\t\t}\n\n\t\tSampler2D.prototype.parse = function (element) {\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tvar child = element.childNodes[i];\n\t\t\t\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\tcase 'source':\n\n\t\t\t\t\t\t\t\t\t\tthis.source = child.textContent;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'minfilter':\n\n\t\t\t\t\t\t\t\t\t\tthis.minfilter = child.textContent;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'magfilter':\n\n\t\t\t\t\t\t\t\t\t\tthis.magfilter = child.textContent;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'mipfilter':\n\n\t\t\t\t\t\t\t\t\t\tthis.mipfilter = child.textContent;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'wrap_s':\n\n\t\t\t\t\t\t\t\t\t\tthis.wrap_s = child.textContent;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'wrap_t':\n\n\t\t\t\t\t\t\t\t\t\tthis.wrap_t = child.textContent;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\t\t\t\tconsole.log(\"unhandled Sampler2D prop: \" + child.nodeName);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn this;\n\t\t};\n\n\t\tfunction Effect() {\n\n\t\t\t\tthis.id = \"\";\n\t\t\t\tthis.name = \"\";\n\t\t\t\tthis.shader = null;\n\t\t\t\tthis.surface = {};\n\t\t\t\tthis.sampler = {};\n\t\t}\n\n\t\tEffect.prototype.create = function () {\n\n\t\t\t\tif (this.shader === null) {\n\n\t\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t};\n\n\t\tEffect.prototype.parse = function (element) {\n\n\t\t\t\tthis.id = element.getAttribute('id');\n\t\t\t\tthis.name = element.getAttribute('name');\n\n\t\t\t\textractDoubleSided(this, element);\n\n\t\t\t\tthis.shader = null;\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tvar child = element.childNodes[i];\n\t\t\t\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\tcase 'profile_COMMON':\n\n\t\t\t\t\t\t\t\t\t\tthis.parseTechnique(this.parseProfileCOMMON(child));\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn this;\n\t\t};\n\n\t\tEffect.prototype.parseNewparam = function (element) {\n\n\t\t\t\tvar sid = element.getAttribute('sid');\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tvar child = element.childNodes[i];\n\t\t\t\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\tcase 'surface':\n\n\t\t\t\t\t\t\t\t\t\tthis.surface[sid] = new Surface(this).parse(child);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'sampler2D':\n\n\t\t\t\t\t\t\t\t\t\tthis.sampler[sid] = new Sampler2D(this).parse(child);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'extra':\n\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\t\t\t\tconsole.log(child.nodeName);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\t\t};\n\n\t\tEffect.prototype.parseProfileCOMMON = function (element) {\n\n\t\t\t\tvar technique;\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tvar child = element.childNodes[i];\n\n\t\t\t\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\tcase 'profile_COMMON':\n\n\t\t\t\t\t\t\t\t\t\tthis.parseProfileCOMMON(child);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'technique':\n\n\t\t\t\t\t\t\t\t\t\ttechnique = child;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'newparam':\n\n\t\t\t\t\t\t\t\t\t\tthis.parseNewparam(child);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'image':\n\n\t\t\t\t\t\t\t\t\t\tvar _image = new _Image().parse(child);\n\t\t\t\t\t\t\t\t\t\timages[_image.id] = _image;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'extra':\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\t\t\t\tconsole.log(child.nodeName);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn technique;\n\t\t};\n\n\t\tEffect.prototype.parseTechnique = function (element) {\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tvar child = element.childNodes[i];\n\t\t\t\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\tcase 'constant':\n\t\t\t\t\t\t\t\tcase 'lambert':\n\t\t\t\t\t\t\t\tcase 'blinn':\n\t\t\t\t\t\t\t\tcase 'phong':\n\n\t\t\t\t\t\t\t\t\t\tthis.shader = new Shader(child.nodeName, this).parse(child);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase 'extra':\n\t\t\t\t\t\t\t\t\t\tthis.parseExtra(child);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\t\t};\n\n\t\tEffect.prototype.parseExtra = function (element) {\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tvar child = element.childNodes[i];\n\t\t\t\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\tcase 'technique':\n\t\t\t\t\t\t\t\t\t\tthis.parseExtraTechnique(child);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\t\t};\n\n\t\tEffect.prototype.parseExtraTechnique = function (element) {\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tvar child = element.childNodes[i];\n\t\t\t\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\tcase 'bump':\n\t\t\t\t\t\t\t\t\t\tthis.shader.parse(element);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\t\t};\n\n\t\tfunction InstanceEffect() {\n\n\t\t\t\tthis.url = \"\";\n\t\t}\n\n\t\tInstanceEffect.prototype.parse = function (element) {\n\n\t\t\t\tthis.url = element.getAttribute('url').replace(/^#/, '');\n\t\t\t\treturn this;\n\t\t};\n\n\t\tfunction Animation() {\n\n\t\t\t\tthis.id = \"\";\n\t\t\t\tthis.name = \"\";\n\t\t\t\tthis.source = {};\n\t\t\t\tthis.sampler = [];\n\t\t\t\tthis.channel = [];\n\t\t}\n\n\t\tAnimation.prototype.parse = function (element) {\n\n\t\t\t\tthis.id = element.getAttribute('id');\n\t\t\t\tthis.name = element.getAttribute('name');\n\t\t\t\tthis.source = {};\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tvar child = element.childNodes[i];\n\n\t\t\t\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\tcase 'animation':\n\n\t\t\t\t\t\t\t\t\t\tvar anim = new Animation().parse(child);\n\n\t\t\t\t\t\t\t\t\t\tfor (var src in anim.source) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tthis.source[src] = anim.source[src];\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tfor (var j = 0; j < anim.channel.length; j++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tthis.channel.push(anim.channel[j]);\n\t\t\t\t\t\t\t\t\t\t\t\tthis.sampler.push(anim.sampler[j]);\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'source':\n\n\t\t\t\t\t\t\t\t\t\tvar src = new Source().parse(child);\n\t\t\t\t\t\t\t\t\t\tthis.source[src.id] = src;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'sampler':\n\n\t\t\t\t\t\t\t\t\t\tthis.sampler.push(new Sampler(this).parse(child));\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'channel':\n\n\t\t\t\t\t\t\t\t\t\tthis.channel.push(new Channel(this).parse(child));\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn this;\n\t\t};\n\n\t\tfunction Channel(animation) {\n\n\t\t\t\tthis.animation = animation;\n\t\t\t\tthis.source = \"\";\n\t\t\t\tthis.target = \"\";\n\t\t\t\tthis.fullSid = null;\n\t\t\t\tthis.sid = null;\n\t\t\t\tthis.dotSyntax = null;\n\t\t\t\tthis.arrSyntax = null;\n\t\t\t\tthis.arrIndices = null;\n\t\t\t\tthis.member = null;\n\t\t}\n\n\t\tChannel.prototype.parse = function (element) {\n\n\t\t\t\tthis.source = element.getAttribute('source').replace(/^#/, '');\n\t\t\t\tthis.target = element.getAttribute('target');\n\n\t\t\t\tvar parts = this.target.split('/');\n\n\t\t\t\tvar id = parts.shift();\n\t\t\t\tvar sid = parts.shift();\n\n\t\t\t\tvar dotSyntax = sid.indexOf(\".\") >= 0;\n\t\t\t\tvar arrSyntax = sid.indexOf(\"(\") >= 0;\n\n\t\t\t\tif (dotSyntax) {\n\n\t\t\t\t\t\tparts = sid.split(\".\");\n\t\t\t\t\t\tthis.sid = parts.shift();\n\t\t\t\t\t\tthis.member = parts.shift();\n\t\t\t\t} else if (arrSyntax) {\n\n\t\t\t\t\t\tvar arrIndices = sid.split(\"(\");\n\t\t\t\t\t\tthis.sid = arrIndices.shift();\n\n\t\t\t\t\t\tfor (var j = 0; j < arrIndices.length; j++) {\n\n\t\t\t\t\t\t\t\tarrIndices[j] = parseInt(arrIndices[j].replace(/\\)/, ''));\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.arrIndices = arrIndices;\n\t\t\t\t} else {\n\n\t\t\t\t\t\tthis.sid = sid;\n\t\t\t\t}\n\n\t\t\t\tthis.fullSid = sid;\n\t\t\t\tthis.dotSyntax = dotSyntax;\n\t\t\t\tthis.arrSyntax = arrSyntax;\n\n\t\t\t\treturn this;\n\t\t};\n\n\t\tfunction Sampler(animation) {\n\n\t\t\t\tthis.id = \"\";\n\t\t\t\tthis.animation = animation;\n\t\t\t\tthis.inputs = [];\n\t\t\t\tthis.input = null;\n\t\t\t\tthis.output = null;\n\t\t\t\tthis.strideOut = null;\n\t\t\t\tthis.interpolation = null;\n\t\t\t\tthis.startTime = null;\n\t\t\t\tthis.endTime = null;\n\t\t\t\tthis.duration = 0;\n\t\t}\n\n\t\tSampler.prototype.parse = function (element) {\n\n\t\t\t\tthis.id = element.getAttribute('id');\n\t\t\t\tthis.inputs = [];\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tvar child = element.childNodes[i];\n\t\t\t\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\tcase 'input':\n\n\t\t\t\t\t\t\t\t\t\tthis.inputs.push(new Input().parse(child));\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn this;\n\t\t};\n\n\t\tSampler.prototype.create = function () {\n\n\t\t\t\tfor (var i = 0; i < this.inputs.length; i++) {\n\n\t\t\t\t\t\tvar input = this.inputs[i];\n\t\t\t\t\t\tvar source = this.animation.source[input.source];\n\n\t\t\t\t\t\tswitch (input.semantic) {\n\n\t\t\t\t\t\t\t\tcase 'INPUT':\n\n\t\t\t\t\t\t\t\t\t\tthis.input = source.read();\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'OUTPUT':\n\n\t\t\t\t\t\t\t\t\t\tthis.output = source.read();\n\t\t\t\t\t\t\t\t\t\tthis.strideOut = source.accessor.stride;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'INTERPOLATION':\n\n\t\t\t\t\t\t\t\t\t\tthis.interpolation = source.read();\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'IN_TANGENT':\n\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'OUT_TANGENT':\n\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\t\t\t\tconsole.log(input.semantic);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.startTime = 0;\n\t\t\t\tthis.endTime = 0;\n\t\t\t\tthis.duration = 0;\n\n\t\t\t\tif (this.input.length) {\n\n\t\t\t\t\t\tthis.startTime = 100000000;\n\t\t\t\t\t\tthis.endTime = -100000000;\n\n\t\t\t\t\t\tfor (var i = 0; i < this.input.length; i++) {\n\n\t\t\t\t\t\t\t\tthis.startTime = Math.min(this.startTime, this.input[i]);\n\t\t\t\t\t\t\t\tthis.endTime = Math.max(this.endTime, this.input[i]);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.duration = this.endTime - this.startTime;\n\t\t\t\t}\n\t\t};\n\n\t\tSampler.prototype.getData = function (type, ndx, member) {\n\n\t\t\t\tvar data;\n\n\t\t\t\tif (type === 'matrix' && this.strideOut === 16) {\n\n\t\t\t\t\t\tdata = this.output[ndx];\n\t\t\t\t} else if (this.strideOut > 1) {\n\n\t\t\t\t\t\tdata = [];\n\t\t\t\t\t\tndx *= this.strideOut;\n\n\t\t\t\t\t\tfor (var i = 0; i < this.strideOut; ++i) {\n\n\t\t\t\t\t\t\t\tdata[i] = this.output[ndx + i];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (this.strideOut === 3) {\n\n\t\t\t\t\t\t\t\tswitch (type) {\n\n\t\t\t\t\t\t\t\t\t\tcase 'rotate':\n\t\t\t\t\t\t\t\t\t\tcase 'translate':\n\n\t\t\t\t\t\t\t\t\t\t\t\tfixCoords(data, -1);\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\tcase 'scale':\n\n\t\t\t\t\t\t\t\t\t\t\t\tfixCoords(data, 1);\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (this.strideOut === 4 && type === 'matrix') {\n\n\t\t\t\t\t\t\t\tfixCoords(data, -1);\n\t\t\t\t\t\t}\n\t\t\t\t} else {\n\n\t\t\t\t\t\tdata = this.output[ndx];\n\n\t\t\t\t\t\tif (member && type === 'translate') {\n\t\t\t\t\t\t\t\tdata = getConvertedTranslation(member, data);\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn data;\n\t\t};\n\n\t\tfunction Key(time) {\n\n\t\t\t\tthis.targets = [];\n\t\t\t\tthis.time = time;\n\t\t}\n\n\t\tKey.prototype.addTarget = function (fullSid, transform, member, data) {\n\n\t\t\t\tthis.targets.push({\n\t\t\t\t\t\tsid: fullSid,\n\t\t\t\t\t\tmember: member,\n\t\t\t\t\t\ttransform: transform,\n\t\t\t\t\t\tdata: data\n\t\t\t\t});\n\t\t};\n\n\t\tKey.prototype.apply = function (opt_sid) {\n\n\t\t\t\tfor (var i = 0; i < this.targets.length; ++i) {\n\n\t\t\t\t\t\tvar target = this.targets[i];\n\n\t\t\t\t\t\tif (!opt_sid || target.sid === opt_sid) {\n\n\t\t\t\t\t\t\t\ttarget.transform.update(target.data, target.member);\n\t\t\t\t\t\t}\n\t\t\t\t}\n\t\t};\n\n\t\tKey.prototype.getTarget = function (fullSid) {\n\n\t\t\t\tfor (var i = 0; i < this.targets.length; ++i) {\n\n\t\t\t\t\t\tif (this.targets[i].sid === fullSid) {\n\n\t\t\t\t\t\t\t\treturn this.targets[i];\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\t\t};\n\n\t\tKey.prototype.hasTarget = function (fullSid) {\n\n\t\t\t\tfor (var i = 0; i < this.targets.length; ++i) {\n\n\t\t\t\t\t\tif (this.targets[i].sid === fullSid) {\n\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t};\n\n\t\tKey.prototype.interpolate = function (nextKey, time) {\n\n\t\t\t\tfor (var i = 0, l = this.targets.length; i < l; i++) {\n\n\t\t\t\t\t\tvar target = this.targets[i],\n\t\t\t\t\t\t    nextTarget = nextKey.getTarget(target.sid),\n\t\t\t\t\t\t    data;\n\n\t\t\t\t\t\tif (target.transform.type !== 'matrix' && nextTarget) {\n\n\t\t\t\t\t\t\t\tvar scale = (time - this.time) / (nextKey.time - this.time),\n\t\t\t\t\t\t\t\t    nextData = nextTarget.data,\n\t\t\t\t\t\t\t\t    prevData = target.data;\n\n\t\t\t\t\t\t\t\tif (scale < 0) scale = 0;\n\t\t\t\t\t\t\t\tif (scale > 1) scale = 1;\n\n\t\t\t\t\t\t\t\tif (prevData.length) {\n\n\t\t\t\t\t\t\t\t\t\tdata = [];\n\n\t\t\t\t\t\t\t\t\t\tfor (var j = 0; j < prevData.length; ++j) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tdata[j] = prevData[j] + (nextData[j] - prevData[j]) * scale;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\tdata = prevData + (nextData - prevData) * scale;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tdata = target.data;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ttarget.transform.update(data, target.member);\n\t\t\t\t}\n\t\t};\n\n\t\tfunction Camera() {\n\n\t\t\t\tthis.id = \"\";\n\t\t\t\tthis.name = \"\";\n\t\t\t\tthis.technique = \"\";\n\t\t}\n\n\t\tCamera.prototype.parse = function (element) {\n\n\t\t\t\tthis.id = element.getAttribute('id');\n\t\t\t\tthis.name = element.getAttribute('name');\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tvar child = element.childNodes[i];\n\t\t\t\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\tcase 'optics':\n\n\t\t\t\t\t\t\t\t\t\tthis.parseOptics(child);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn this;\n\t\t};\n\n\t\tCamera.prototype.parseOptics = function (element) {\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tif (element.childNodes[i].nodeName === 'technique_common') {\n\n\t\t\t\t\t\t\t\tvar technique = element.childNodes[i];\n\n\t\t\t\t\t\t\t\tfor (var j = 0; j < technique.childNodes.length; j++) {\n\n\t\t\t\t\t\t\t\t\t\tthis.technique = technique.childNodes[j].nodeName;\n\n\t\t\t\t\t\t\t\t\t\tif (this.technique === 'perspective') {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar perspective = technique.childNodes[j];\n\n\t\t\t\t\t\t\t\t\t\t\t\tfor (var k = 0; k < perspective.childNodes.length; k++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar param = perspective.childNodes[k];\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tswitch (param.nodeName) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'yfov':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.yfov = param.textContent;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'xfov':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.xfov = param.textContent;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'znear':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.znear = param.textContent;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'zfar':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.zfar = param.textContent;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'aspect_ratio':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.aspect_ratio = param.textContent;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t} else if (this.technique === 'orthographic') {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar orthographic = technique.childNodes[j];\n\n\t\t\t\t\t\t\t\t\t\t\t\tfor (var k = 0; k < orthographic.childNodes.length; k++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar param = orthographic.childNodes[k];\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tswitch (param.nodeName) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'xmag':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.xmag = param.textContent;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'ymag':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.ymag = param.textContent;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'znear':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.znear = param.textContent;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'zfar':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.zfar = param.textContent;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'aspect_ratio':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.aspect_ratio = param.textContent;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn this;\n\t\t};\n\n\t\tfunction InstanceCamera() {\n\n\t\t\t\tthis.url = \"\";\n\t\t}\n\n\t\tInstanceCamera.prototype.parse = function (element) {\n\n\t\t\t\tthis.url = element.getAttribute('url').replace(/^#/, '');\n\n\t\t\t\treturn this;\n\t\t};\n\n\t\tfunction Light() {\n\n\t\t\t\tthis.id = \"\";\n\t\t\t\tthis.name = \"\";\n\t\t\t\tthis.technique = \"\";\n\t\t}\n\n\t\tLight.prototype.parse = function (element) {\n\n\t\t\t\tthis.id = element.getAttribute('id');\n\t\t\t\tthis.name = element.getAttribute('name');\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tvar child = element.childNodes[i];\n\t\t\t\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\tcase 'technique_common':\n\n\t\t\t\t\t\t\t\t\t\tthis.parseCommon(child);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'technique':\n\n\t\t\t\t\t\t\t\t\t\tthis.parseTechnique(child);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn this;\n\t\t};\n\n\t\tLight.prototype.parseCommon = function (element) {\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tswitch (element.childNodes[i].nodeName) {\n\n\t\t\t\t\t\t\t\tcase 'directional':\n\t\t\t\t\t\t\t\tcase 'point':\n\t\t\t\t\t\t\t\tcase 'spot':\n\t\t\t\t\t\t\t\tcase 'ambient':\n\n\t\t\t\t\t\t\t\t\t\tthis.technique = element.childNodes[i].nodeName;\n\n\t\t\t\t\t\t\t\t\t\tvar light = element.childNodes[i];\n\n\t\t\t\t\t\t\t\t\t\tfor (var j = 0; j < light.childNodes.length; j++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar child = light.childNodes[j];\n\n\t\t\t\t\t\t\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'color':\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar rgba = _floats(child.textContent);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.color = new __WEBPACK_IMPORTED_MODULE_1_three__[\"j\" /* Color */](0);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.color.setRGB(rgba[0], rgba[1], rgba[2]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.color.a = rgba[3];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'falloff_angle':\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.falloff_angle = parseFloat(child.textContent);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'quadratic_attenuation':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar f = parseFloat(child.textContent);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.distance = f ? Math.sqrt(1 / f) : 0;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn this;\n\t\t};\n\n\t\tLight.prototype.parseTechnique = function (element) {\n\n\t\t\t\tthis.profile = element.getAttribute('profile');\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tvar child = element.childNodes[i];\n\n\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\tcase 'intensity':\n\n\t\t\t\t\t\t\t\t\t\tthis.intensity = parseFloat(child.textContent);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn this;\n\t\t};\n\n\t\tfunction InstanceLight() {\n\n\t\t\t\tthis.url = \"\";\n\t\t}\n\n\t\tInstanceLight.prototype.parse = function (element) {\n\n\t\t\t\tthis.url = element.getAttribute('url').replace(/^#/, '');\n\n\t\t\t\treturn this;\n\t\t};\n\n\t\tfunction KinematicsModel() {\n\n\t\t\t\tthis.id = '';\n\t\t\t\tthis.name = '';\n\t\t\t\tthis.joints = [];\n\t\t\t\tthis.links = [];\n\t\t}\n\n\t\tKinematicsModel.prototype.parse = function (element) {\n\n\t\t\t\tthis.id = element.getAttribute('id');\n\t\t\t\tthis.name = element.getAttribute('name');\n\t\t\t\tthis.joints = [];\n\t\t\t\tthis.links = [];\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tvar child = element.childNodes[i];\n\t\t\t\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\tcase 'technique_common':\n\n\t\t\t\t\t\t\t\t\t\tthis.parseCommon(child);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn this;\n\t\t};\n\n\t\tKinematicsModel.prototype.parseCommon = function (element) {\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tvar child = element.childNodes[i];\n\t\t\t\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\t\t\t\tswitch (element.childNodes[i].nodeName) {\n\n\t\t\t\t\t\t\t\tcase 'joint':\n\t\t\t\t\t\t\t\t\t\tthis.joints.push(new Joint().parse(child));\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'link':\n\t\t\t\t\t\t\t\t\t\tthis.links.push(new Link().parse(child));\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn this;\n\t\t};\n\n\t\tfunction Joint() {\n\n\t\t\t\tthis.sid = '';\n\t\t\t\tthis.name = '';\n\t\t\t\tthis.axis = new __WEBPACK_IMPORTED_MODULE_1_three__[\"b\" /* Vector3 */]();\n\t\t\t\tthis.limits = {\n\t\t\t\t\t\tmin: 0,\n\t\t\t\t\t\tmax: 0\n\t\t\t\t};\n\t\t\t\tthis.type = '';\n\t\t\t\tthis.static = false;\n\t\t\t\tthis.zeroPosition = 0.0;\n\t\t\t\tthis.middlePosition = 0.0;\n\t\t}\n\n\t\tJoint.prototype.parse = function (element) {\n\n\t\t\t\tthis.sid = element.getAttribute('sid');\n\t\t\t\tthis.name = element.getAttribute('name');\n\t\t\t\tthis.axis = new __WEBPACK_IMPORTED_MODULE_1_three__[\"b\" /* Vector3 */]();\n\t\t\t\tthis.limits = {\n\t\t\t\t\t\tmin: 0,\n\t\t\t\t\t\tmax: 0\n\t\t\t\t};\n\t\t\t\tthis.type = '';\n\t\t\t\tthis.static = false;\n\t\t\t\tthis.zeroPosition = 0.0;\n\t\t\t\tthis.middlePosition = 0.0;\n\n\t\t\t\tvar axisElement = element.querySelector('axis');\n\t\t\t\tvar _axis = _floats(axisElement.textContent);\n\t\t\t\tthis.axis = getConvertedVec3(_axis, 0);\n\n\t\t\t\tvar min = element.querySelector('limits min') ? parseFloat(element.querySelector('limits min').textContent) : -360;\n\t\t\t\tvar max = element.querySelector('limits max') ? parseFloat(element.querySelector('limits max').textContent) : 360;\n\n\t\t\t\tthis.limits = {\n\t\t\t\t\t\tmin: min,\n\t\t\t\t\t\tmax: max\n\t\t\t\t};\n\n\t\t\t\tvar jointTypes = ['prismatic', 'revolute'];\n\t\t\t\tfor (var i = 0; i < jointTypes.length; i++) {\n\n\t\t\t\t\t\tvar type = jointTypes[i];\n\n\t\t\t\t\t\tvar jointElement = element.querySelector(type);\n\n\t\t\t\t\t\tif (jointElement) {\n\n\t\t\t\t\t\t\t\tthis.type = type;\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (this.limits.min >= this.limits.max) {\n\n\t\t\t\t\t\tthis.static = true;\n\t\t\t\t}\n\n\t\t\t\tthis.middlePosition = (this.limits.min + this.limits.max) / 2.0;\n\t\t\t\treturn this;\n\t\t};\n\n\t\tfunction Link() {\n\n\t\t\t\tthis.sid = '';\n\t\t\t\tthis.name = '';\n\t\t\t\tthis.transforms = [];\n\t\t\t\tthis.attachments = [];\n\t\t}\n\n\t\tLink.prototype.parse = function (element) {\n\n\t\t\t\tthis.sid = element.getAttribute('sid');\n\t\t\t\tthis.name = element.getAttribute('name');\n\t\t\t\tthis.transforms = [];\n\t\t\t\tthis.attachments = [];\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tvar child = element.childNodes[i];\n\t\t\t\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\tcase 'attachment_full':\n\t\t\t\t\t\t\t\t\t\tthis.attachments.push(new Attachment().parse(child));\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'rotate':\n\t\t\t\t\t\t\t\tcase 'translate':\n\t\t\t\t\t\t\t\tcase 'matrix':\n\n\t\t\t\t\t\t\t\t\t\tthis.transforms.push(new Transform().parse(child));\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn this;\n\t\t};\n\n\t\tfunction Attachment() {\n\n\t\t\t\tthis.joint = '';\n\t\t\t\tthis.transforms = [];\n\t\t\t\tthis.links = [];\n\t\t}\n\n\t\tAttachment.prototype.parse = function (element) {\n\n\t\t\t\tthis.joint = element.getAttribute('joint').split('/').pop();\n\t\t\t\tthis.links = [];\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tvar child = element.childNodes[i];\n\t\t\t\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\tcase 'link':\n\t\t\t\t\t\t\t\t\t\tthis.links.push(new Link().parse(child));\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'rotate':\n\t\t\t\t\t\t\t\tcase 'translate':\n\t\t\t\t\t\t\t\tcase 'matrix':\n\n\t\t\t\t\t\t\t\t\t\tthis.transforms.push(new Transform().parse(child));\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn this;\n\t\t};\n\n\t\tfunction _source(element) {\n\n\t\t\t\tvar id = element.getAttribute('id');\n\n\t\t\t\tif (sources[id] != undefined) {\n\n\t\t\t\t\t\treturn sources[id];\n\t\t\t\t}\n\n\t\t\t\tsources[id] = new Source(id).parse(element);\n\t\t\t\treturn sources[id];\n\t\t}\n\n\t\tfunction _nsResolver(nsPrefix) {\n\n\t\t\t\tif (nsPrefix === \"dae\") {\n\n\t\t\t\t\t\treturn \"http://www.collada.org/2005/11/COLLADASchema\";\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\t\t}\n\n\t\tfunction _bools(str) {\n\n\t\t\t\tvar raw = _strings(str);\n\t\t\t\tvar data = [];\n\n\t\t\t\tfor (var i = 0, l = raw.length; i < l; i++) {\n\n\t\t\t\t\t\tdata.push(raw[i] === 'true' || raw[i] === '1' ? true : false);\n\t\t\t\t}\n\n\t\t\t\treturn data;\n\t\t}\n\n\t\tfunction _floats(str) {\n\n\t\t\t\tvar raw = _strings(str);\n\t\t\t\tvar data = [];\n\n\t\t\t\tfor (var i = 0, l = raw.length; i < l; i++) {\n\n\t\t\t\t\t\tdata.push(parseFloat(raw[i]));\n\t\t\t\t}\n\n\t\t\t\treturn data;\n\t\t}\n\n\t\tfunction _ints(str) {\n\n\t\t\t\tvar raw = _strings(str);\n\t\t\t\tvar data = [];\n\n\t\t\t\tfor (var i = 0, l = raw.length; i < l; i++) {\n\n\t\t\t\t\t\tdata.push(parseInt(raw[i], 10));\n\t\t\t\t}\n\n\t\t\t\treturn data;\n\t\t}\n\n\t\tfunction _strings(str) {\n\n\t\t\t\treturn str.length > 0 ? _trimString(str).split(/\\s+/) : [];\n\t\t}\n\n\t\tfunction _trimString(str) {\n\n\t\t\t\treturn str.replace(/^\\s+/, \"\").replace(/\\s+$/, \"\");\n\t\t}\n\n\t\tfunction _attr_as_float(element, name, defaultValue) {\n\n\t\t\t\tif (element.hasAttribute(name)) {\n\n\t\t\t\t\t\treturn parseFloat(element.getAttribute(name));\n\t\t\t\t} else {\n\n\t\t\t\t\t\treturn defaultValue;\n\t\t\t\t}\n\t\t}\n\n\t\tfunction _attr_as_int(element, name, defaultValue) {\n\n\t\t\t\tif (element.hasAttribute(name)) {\n\n\t\t\t\t\t\treturn parseInt(element.getAttribute(name), 10);\n\t\t\t\t} else {\n\n\t\t\t\t\t\treturn defaultValue;\n\t\t\t\t}\n\t\t}\n\n\t\tfunction _attr_as_string(element, name, defaultValue) {\n\n\t\t\t\tif (element.hasAttribute(name)) {\n\n\t\t\t\t\t\treturn element.getAttribute(name);\n\t\t\t\t} else {\n\n\t\t\t\t\t\treturn defaultValue;\n\t\t\t\t}\n\t\t}\n\n\t\tfunction _format_float(f, num) {\n\n\t\t\t\tif (f === undefined) {\n\n\t\t\t\t\t\tvar s = '0.';\n\n\t\t\t\t\t\twhile (s.length < num + 2) {\n\n\t\t\t\t\t\t\t\ts += '0';\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn s;\n\t\t\t\t}\n\n\t\t\t\tnum = num || 2;\n\n\t\t\t\tvar parts = f.toString().split('.');\n\t\t\t\tparts[1] = parts.length > 1 ? parts[1].substr(0, num) : \"0\";\n\n\t\t\t\twhile (parts[1].length < num) {\n\n\t\t\t\t\t\tparts[1] += '0';\n\t\t\t\t}\n\n\t\t\t\treturn parts.join('.');\n\t\t}\n\n\t\tfunction loadTextureImage(texture, url) {\n\n\t\t\t\tvar loader = new __WEBPACK_IMPORTED_MODULE_1_three__[\"_3\" /* ImageLoader */]();\n\n\t\t\t\tloader.load(url, function (image) {\n\n\t\t\t\t\t\ttexture.image = image;\n\t\t\t\t\t\ttexture.needsUpdate = true;\n\t\t\t\t});\n\t\t}\n\n\t\tfunction extractDoubleSided(obj, element) {\n\n\t\t\t\tobj.doubleSided = false;\n\n\t\t\t\tvar node = element.querySelectorAll('extra double_sided')[0];\n\n\t\t\t\tif (node) {\n\n\t\t\t\t\t\tif (node && parseInt(node.textContent, 10) === 1) {\n\n\t\t\t\t\t\t\t\tobj.doubleSided = true;\n\t\t\t\t\t\t}\n\t\t\t\t}\n\t\t}\n\n\t\tfunction setUpConversion() {\n\n\t\t\t\tif (options.convertUpAxis !== true || colladaUp === options.upAxis) {\n\n\t\t\t\t\t\tupConversion = null;\n\t\t\t\t} else {\n\n\t\t\t\t\t\tswitch (colladaUp) {\n\n\t\t\t\t\t\t\t\tcase 'X':\n\n\t\t\t\t\t\t\t\t\t\tupConversion = options.upAxis === 'Y' ? 'XtoY' : 'XtoZ';\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'Y':\n\n\t\t\t\t\t\t\t\t\t\tupConversion = options.upAxis === 'X' ? 'YtoX' : 'YtoZ';\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'Z':\n\n\t\t\t\t\t\t\t\t\t\tupConversion = options.upAxis === 'X' ? 'ZtoX' : 'ZtoY';\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\t\t}\n\n\t\tfunction fixCoords(data, sign) {\n\n\t\t\t\tif (options.convertUpAxis !== true || colladaUp === options.upAxis) {\n\n\t\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tswitch (upConversion) {\n\n\t\t\t\t\t\tcase 'XtoY':\n\n\t\t\t\t\t\t\t\tvar tmp = data[0];\n\t\t\t\t\t\t\t\tdata[0] = sign * data[1];\n\t\t\t\t\t\t\t\tdata[1] = tmp;\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'XtoZ':\n\n\t\t\t\t\t\t\t\tvar tmp = data[2];\n\t\t\t\t\t\t\t\tdata[2] = data[1];\n\t\t\t\t\t\t\t\tdata[1] = data[0];\n\t\t\t\t\t\t\t\tdata[0] = tmp;\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'YtoX':\n\n\t\t\t\t\t\t\t\tvar tmp = data[0];\n\t\t\t\t\t\t\t\tdata[0] = data[1];\n\t\t\t\t\t\t\t\tdata[1] = sign * tmp;\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'YtoZ':\n\n\t\t\t\t\t\t\t\tvar tmp = data[1];\n\t\t\t\t\t\t\t\tdata[1] = sign * data[2];\n\t\t\t\t\t\t\t\tdata[2] = tmp;\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'ZtoX':\n\n\t\t\t\t\t\t\t\tvar tmp = data[0];\n\t\t\t\t\t\t\t\tdata[0] = data[1];\n\t\t\t\t\t\t\t\tdata[1] = data[2];\n\t\t\t\t\t\t\t\tdata[2] = tmp;\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'ZtoY':\n\n\t\t\t\t\t\t\t\tvar tmp = data[1];\n\t\t\t\t\t\t\t\tdata[1] = data[2];\n\t\t\t\t\t\t\t\tdata[2] = sign * tmp;\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\t\t}\n\n\t\tfunction getConvertedTranslation(axis, data) {\n\n\t\t\t\tif (options.convertUpAxis !== true || colladaUp === options.upAxis) {\n\n\t\t\t\t\t\treturn data;\n\t\t\t\t}\n\n\t\t\t\tswitch (axis) {\n\t\t\t\t\t\tcase 'X':\n\t\t\t\t\t\t\t\tdata = upConversion === 'XtoY' ? data * -1 : data;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'Y':\n\t\t\t\t\t\t\t\tdata = upConversion === 'YtoZ' || upConversion === 'YtoX' ? data * -1 : data;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'Z':\n\t\t\t\t\t\t\t\tdata = upConversion === 'ZtoY' ? data * -1 : data;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\treturn data;\n\t\t}\n\n\t\tfunction getConvertedVec3(data, offset) {\n\n\t\t\t\tvar arr = [data[offset], data[offset + 1], data[offset + 2]];\n\t\t\t\tfixCoords(arr, -1);\n\t\t\t\treturn new __WEBPACK_IMPORTED_MODULE_1_three__[\"b\" /* Vector3 */](arr[0], arr[1], arr[2]);\n\t\t}\n\n\t\tfunction getConvertedMat4(data) {\n\n\t\t\t\tif (options.convertUpAxis) {\n\t\t\t\t\t\tvar arr = [data[0], data[4], data[8]];\n\t\t\t\t\t\tfixCoords(arr, -1);\n\t\t\t\t\t\tdata[0] = arr[0];\n\t\t\t\t\t\tdata[4] = arr[1];\n\t\t\t\t\t\tdata[8] = arr[2];\n\t\t\t\t\t\tarr = [data[1], data[5], data[9]];\n\t\t\t\t\t\tfixCoords(arr, -1);\n\t\t\t\t\t\tdata[1] = arr[0];\n\t\t\t\t\t\tdata[5] = arr[1];\n\t\t\t\t\t\tdata[9] = arr[2];\n\t\t\t\t\t\tarr = [data[2], data[6], data[10]];\n\t\t\t\t\t\tfixCoords(arr, -1);\n\t\t\t\t\t\tdata[2] = arr[0];\n\t\t\t\t\t\tdata[6] = arr[1];\n\t\t\t\t\t\tdata[10] = arr[2];\n\n\t\t\t\t\t\tarr = [data[0], data[1], data[2]];\n\t\t\t\t\t\tfixCoords(arr, -1);\n\t\t\t\t\t\tdata[0] = arr[0];\n\t\t\t\t\t\tdata[1] = arr[1];\n\t\t\t\t\t\tdata[2] = arr[2];\n\t\t\t\t\t\tarr = [data[4], data[5], data[6]];\n\t\t\t\t\t\tfixCoords(arr, -1);\n\t\t\t\t\t\tdata[4] = arr[0];\n\t\t\t\t\t\tdata[5] = arr[1];\n\t\t\t\t\t\tdata[6] = arr[2];\n\t\t\t\t\t\tarr = [data[8], data[9], data[10]];\n\t\t\t\t\t\tfixCoords(arr, -1);\n\t\t\t\t\t\tdata[8] = arr[0];\n\t\t\t\t\t\tdata[9] = arr[1];\n\t\t\t\t\t\tdata[10] = arr[2];\n\n\t\t\t\t\t\tarr = [data[3], data[7], data[11]];\n\t\t\t\t\t\tfixCoords(arr, -1);\n\t\t\t\t\t\tdata[3] = arr[0];\n\t\t\t\t\t\tdata[7] = arr[1];\n\t\t\t\t\t\tdata[11] = arr[2];\n\t\t\t\t}\n\n\t\t\t\treturn new __WEBPACK_IMPORTED_MODULE_1_three__[\"L\" /* Matrix4 */]().set(data[0], data[1], data[2], data[3], data[4], data[5], data[6], data[7], data[8], data[9], data[10], data[11], data[12], data[13], data[14], data[15]);\n\t\t}\n\n\t\tfunction getConvertedIndex(index) {\n\n\t\t\t\tif (index > -1 && index < 3) {\n\n\t\t\t\t\t\tvar members = ['X', 'Y', 'Z'],\n\t\t\t\t\t\t    indices = { X: 0, Y: 1, Z: 2 };\n\n\t\t\t\t\t\tindex = getConvertedMember(members[index]);\n\t\t\t\t\t\tindex = indices[index];\n\t\t\t\t}\n\n\t\t\t\treturn index;\n\t\t}\n\n\t\tfunction getConvertedMember(member) {\n\n\t\t\t\tif (options.convertUpAxis) {\n\n\t\t\t\t\t\tswitch (member) {\n\n\t\t\t\t\t\t\t\tcase 'X':\n\n\t\t\t\t\t\t\t\t\t\tswitch (upConversion) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tcase 'XtoY':\n\t\t\t\t\t\t\t\t\t\t\t\tcase 'XtoZ':\n\t\t\t\t\t\t\t\t\t\t\t\tcase 'YtoX':\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmember = 'Y';\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\tcase 'ZtoX':\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmember = 'Z';\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'Y':\n\n\t\t\t\t\t\t\t\t\t\tswitch (upConversion) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tcase 'XtoY':\n\t\t\t\t\t\t\t\t\t\t\t\tcase 'YtoX':\n\t\t\t\t\t\t\t\t\t\t\t\tcase 'ZtoX':\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmember = 'X';\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\tcase 'XtoZ':\n\t\t\t\t\t\t\t\t\t\t\t\tcase 'YtoZ':\n\t\t\t\t\t\t\t\t\t\t\t\tcase 'ZtoY':\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmember = 'Z';\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'Z':\n\n\t\t\t\t\t\t\t\t\t\tswitch (upConversion) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tcase 'XtoZ':\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmember = 'X';\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\tcase 'YtoZ':\n\t\t\t\t\t\t\t\t\t\t\t\tcase 'ZtoX':\n\t\t\t\t\t\t\t\t\t\t\t\tcase 'ZtoY':\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmember = 'Y';\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn member;\n\t\t}\n\n\t\treturn {\n\n\t\t\t\tload: load,\n\t\t\t\tparse: parse,\n\t\t\t\tsetPreferredShading: setPreferredShading,\n\t\t\t\tapplySkin: applySkin,\n\t\t\t\tgeometries: geometries,\n\t\t\t\toptions: options\n\n\t\t};\n};\n\n\n\n/***/ }),\n\n/***/ 45:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return DDSLoader; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_create__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_create___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_create__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_three__ = __webpack_require__(1);\n\n\n\nvar DDSLoader = function DDSLoader() {\n\n\tthis._parser = DDSLoader.parse;\n};\n\nDDSLoader.prototype = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_create___default()(__WEBPACK_IMPORTED_MODULE_1_three__[\"m\" /* CompressedTextureLoader */].prototype);\nDDSLoader.prototype.constructor = DDSLoader;\n\nDDSLoader.parse = function (buffer, loadMipmaps) {\n\n\tvar dds = { mipmaps: [], width: 0, height: 0, format: null, mipmapCount: 1 };\n\n\tvar DDS_MAGIC = 0x20534444;\n\n\tvar DDSD_CAPS = 0x1,\n\t    DDSD_HEIGHT = 0x2,\n\t    DDSD_WIDTH = 0x4,\n\t    DDSD_PITCH = 0x8,\n\t    DDSD_PIXELFORMAT = 0x1000,\n\t    DDSD_MIPMAPCOUNT = 0x20000,\n\t    DDSD_LINEARSIZE = 0x80000,\n\t    DDSD_DEPTH = 0x800000;\n\n\tvar DDSCAPS_COMPLEX = 0x8,\n\t    DDSCAPS_MIPMAP = 0x400000,\n\t    DDSCAPS_TEXTURE = 0x1000;\n\n\tvar DDSCAPS2_CUBEMAP = 0x200,\n\t    DDSCAPS2_CUBEMAP_POSITIVEX = 0x400,\n\t    DDSCAPS2_CUBEMAP_NEGATIVEX = 0x800,\n\t    DDSCAPS2_CUBEMAP_POSITIVEY = 0x1000,\n\t    DDSCAPS2_CUBEMAP_NEGATIVEY = 0x2000,\n\t    DDSCAPS2_CUBEMAP_POSITIVEZ = 0x4000,\n\t    DDSCAPS2_CUBEMAP_NEGATIVEZ = 0x8000,\n\t    DDSCAPS2_VOLUME = 0x200000;\n\n\tvar DDPF_ALPHAPIXELS = 0x1,\n\t    DDPF_ALPHA = 0x2,\n\t    DDPF_FOURCC = 0x4,\n\t    DDPF_RGB = 0x40,\n\t    DDPF_YUV = 0x200,\n\t    DDPF_LUMINANCE = 0x20000;\n\n\tfunction fourCCToInt32(value) {\n\n\t\treturn value.charCodeAt(0) + (value.charCodeAt(1) << 8) + (value.charCodeAt(2) << 16) + (value.charCodeAt(3) << 24);\n\t}\n\n\tfunction int32ToFourCC(value) {\n\n\t\treturn String.fromCharCode(value & 0xff, value >> 8 & 0xff, value >> 16 & 0xff, value >> 24 & 0xff);\n\t}\n\n\tfunction loadARGBMip(buffer, dataOffset, width, height) {\n\n\t\tvar dataLength = width * height * 4;\n\t\tvar srcBuffer = new Uint8Array(buffer, dataOffset, dataLength);\n\t\tvar byteArray = new Uint8Array(dataLength);\n\t\tvar dst = 0;\n\t\tvar src = 0;\n\t\tfor (var y = 0; y < height; y++) {\n\n\t\t\tfor (var x = 0; x < width; x++) {\n\n\t\t\t\tvar b = srcBuffer[src];src++;\n\t\t\t\tvar g = srcBuffer[src];src++;\n\t\t\t\tvar r = srcBuffer[src];src++;\n\t\t\t\tvar a = srcBuffer[src];src++;\n\t\t\t\tbyteArray[dst] = r;dst++;\n\t\t\t\tbyteArray[dst] = g;dst++;\n\t\t\t\tbyteArray[dst] = b;dst++;\n\t\t\t\tbyteArray[dst] = a;dst++;\n\t\t\t}\n\t\t}\n\t\treturn byteArray;\n\t}\n\n\tvar FOURCC_DXT1 = fourCCToInt32(\"DXT1\");\n\tvar FOURCC_DXT3 = fourCCToInt32(\"DXT3\");\n\tvar FOURCC_DXT5 = fourCCToInt32(\"DXT5\");\n\tvar FOURCC_ETC1 = fourCCToInt32(\"ETC1\");\n\n\tvar headerLengthInt = 31;\n\n\tvar off_magic = 0;\n\n\tvar off_size = 1;\n\tvar off_flags = 2;\n\tvar off_height = 3;\n\tvar off_width = 4;\n\n\tvar off_mipmapCount = 7;\n\n\tvar off_pfFlags = 20;\n\tvar off_pfFourCC = 21;\n\tvar off_RGBBitCount = 22;\n\tvar off_RBitMask = 23;\n\tvar off_GBitMask = 24;\n\tvar off_BBitMask = 25;\n\tvar off_ABitMask = 26;\n\n\tvar off_caps = 27;\n\tvar off_caps2 = 28;\n\tvar off_caps3 = 29;\n\tvar off_caps4 = 30;\n\n\tvar header = new Int32Array(buffer, 0, headerLengthInt);\n\n\tif (header[off_magic] !== DDS_MAGIC) {\n\n\t\tconsole.error('DDSLoader.parse: Invalid magic number in DDS header.');\n\t\treturn dds;\n\t}\n\n\tif (!header[off_pfFlags] & DDPF_FOURCC) {\n\n\t\tconsole.error('DDSLoader.parse: Unsupported format, must contain a FourCC code.');\n\t\treturn dds;\n\t}\n\n\tvar blockBytes;\n\n\tvar fourCC = header[off_pfFourCC];\n\n\tvar isRGBAUncompressed = false;\n\n\tswitch (fourCC) {\n\n\t\tcase FOURCC_DXT1:\n\n\t\t\tblockBytes = 8;\n\t\t\tdds.format = __WEBPACK_IMPORTED_MODULE_1_three__[\"n\" /* RGB_S3TC_DXT1_Format */];\n\t\t\tbreak;\n\n\t\tcase FOURCC_DXT3:\n\n\t\t\tblockBytes = 16;\n\t\t\tdds.format = __WEBPACK_IMPORTED_MODULE_1_three__[\"o\" /* RGBA_S3TC_DXT3_Format */];\n\t\t\tbreak;\n\n\t\tcase FOURCC_DXT5:\n\n\t\t\tblockBytes = 16;\n\t\t\tdds.format = __WEBPACK_IMPORTED_MODULE_1_three__[\"p\" /* RGBA_S3TC_DXT5_Format */];\n\t\t\tbreak;\n\n\t\tcase FOURCC_ETC1:\n\n\t\t\tblockBytes = 8;\n\t\t\tdds.format = __WEBPACK_IMPORTED_MODULE_1_three__[\"q\" /* RGB_ETC1_Format */];\n\t\t\tbreak;\n\n\t\tdefault:\n\n\t\t\tif (header[off_RGBBitCount] === 32 && header[off_RBitMask] & 0xff0000 && header[off_GBitMask] & 0xff00 && header[off_BBitMask] & 0xff && header[off_ABitMask] & 0xff000000) {\n\n\t\t\t\tisRGBAUncompressed = true;\n\t\t\t\tblockBytes = 64;\n\t\t\t\tdds.format = __WEBPACK_IMPORTED_MODULE_1_three__[\"r\" /* RGBAFormat */];\n\t\t\t} else {\n\n\t\t\t\tconsole.error('DDSLoader.parse: Unsupported FourCC code ', int32ToFourCC(fourCC));\n\t\t\t\treturn dds;\n\t\t\t}\n\t}\n\n\tdds.mipmapCount = 1;\n\n\tif (header[off_flags] & DDSD_MIPMAPCOUNT && loadMipmaps !== false) {\n\n\t\tdds.mipmapCount = Math.max(1, header[off_mipmapCount]);\n\t}\n\n\tvar caps2 = header[off_caps2];\n\tdds.isCubemap = caps2 & DDSCAPS2_CUBEMAP ? true : false;\n\tif (dds.isCubemap && (!(caps2 & DDSCAPS2_CUBEMAP_POSITIVEX) || !(caps2 & DDSCAPS2_CUBEMAP_NEGATIVEX) || !(caps2 & DDSCAPS2_CUBEMAP_POSITIVEY) || !(caps2 & DDSCAPS2_CUBEMAP_NEGATIVEY) || !(caps2 & DDSCAPS2_CUBEMAP_POSITIVEZ) || !(caps2 & DDSCAPS2_CUBEMAP_NEGATIVEZ))) {\n\n\t\tconsole.error('DDSLoader.parse: Incomplete cubemap faces');\n\t\treturn dds;\n\t}\n\n\tdds.width = header[off_width];\n\tdds.height = header[off_height];\n\n\tvar dataOffset = header[off_size] + 4;\n\n\tvar faces = dds.isCubemap ? 6 : 1;\n\n\tfor (var face = 0; face < faces; face++) {\n\n\t\tvar width = dds.width;\n\t\tvar height = dds.height;\n\n\t\tfor (var i = 0; i < dds.mipmapCount; i++) {\n\n\t\t\tif (isRGBAUncompressed) {\n\n\t\t\t\tvar byteArray = loadARGBMip(buffer, dataOffset, width, height);\n\t\t\t\tvar dataLength = byteArray.length;\n\t\t\t} else {\n\n\t\t\t\tvar dataLength = Math.max(4, width) / 4 * Math.max(4, height) / 4 * blockBytes;\n\t\t\t\tvar byteArray = new Uint8Array(buffer, dataOffset, dataLength);\n\t\t\t}\n\n\t\t\tvar mipmap = { \"data\": byteArray, \"width\": width, \"height\": height };\n\t\t\tdds.mipmaps.push(mipmap);\n\n\t\t\tdataOffset += dataLength;\n\n\t\t\twidth = Math.max(width >> 1, 1);\n\t\t\theight = Math.max(height >> 1, 1);\n\t\t}\n\t}\n\n\treturn dds;\n};\n\n\n\n/***/ }),\n\n/***/ 46:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return MTLLoader; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_three__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__DDSLoader__ = __webpack_require__(45);\n\n\n\nvar LoaderHandlers = __WEBPACK_IMPORTED_MODULE_0_three__[\"e\" /* Loader */].Handlers;\nLoaderHandlers.add(/\\.dds$/i, new __WEBPACK_IMPORTED_MODULE_1__DDSLoader__[\"a\" /* DDSLoader */]());\n\nvar MTLLoader = function MTLLoader(manager) {\n\n\t\tthis.manager = manager !== undefined ? manager : __WEBPACK_IMPORTED_MODULE_0_three__[\"f\" /* DefaultLoadingManager */];\n};\n\nMTLLoader.prototype = {\n\n\t\tconstructor: MTLLoader,\n\n\t\tload: function load(url, onLoad, onProgress, onError) {\n\n\t\t\t\tvar scope = this;\n\n\t\t\t\tvar loader = new __WEBPACK_IMPORTED_MODULE_0_three__[\"g\" /* FileLoader */](this.manager);\n\t\t\t\tloader.setPath(this.path);\n\t\t\t\tloader.load(url, function (text) {\n\n\t\t\t\t\t\tonLoad(scope.parse(text));\n\t\t\t\t}, onProgress, onError);\n\t\t},\n\n\t\tsetPath: function setPath(path) {\n\n\t\t\t\tthis.path = path;\n\t\t},\n\n\t\tsetTexturePath: function setTexturePath(path) {\n\n\t\t\t\tthis.texturePath = path;\n\t\t},\n\n\t\tsetBaseUrl: function setBaseUrl(path) {\n\n\t\t\t\tconsole.warn('MTLLoader: .setBaseUrl() is deprecated. Use .setTexturePath( path ) for texture path or .setPath( path ) for general base path instead.');\n\n\t\t\t\tthis.setTexturePath(path);\n\t\t},\n\n\t\tsetCrossOrigin: function setCrossOrigin(value) {\n\n\t\t\t\tthis.crossOrigin = value;\n\t\t},\n\n\t\tsetMaterialOptions: function setMaterialOptions(value) {\n\n\t\t\t\tthis.materialOptions = value;\n\t\t},\n\n\t\tparse: function parse(text) {\n\n\t\t\t\tvar lines = text.split('\\n');\n\t\t\t\tvar info = {};\n\t\t\t\tvar delimiter_pattern = /\\s+/;\n\t\t\t\tvar materialsInfo = {};\n\n\t\t\t\tfor (var i = 0; i < lines.length; i++) {\n\n\t\t\t\t\t\tvar line = lines[i];\n\t\t\t\t\t\tline = line.trim();\n\n\t\t\t\t\t\tif (line.length === 0 || line.charAt(0) === '#') {\n\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar pos = line.indexOf(' ');\n\n\t\t\t\t\t\tvar key = pos >= 0 ? line.substring(0, pos) : line;\n\t\t\t\t\t\tkey = key.toLowerCase();\n\n\t\t\t\t\t\tvar value = pos >= 0 ? line.substring(pos + 1) : '';\n\t\t\t\t\t\tvalue = value.trim();\n\n\t\t\t\t\t\tif (key === 'newmtl') {\n\n\t\t\t\t\t\t\t\tinfo = { name: value };\n\t\t\t\t\t\t\t\tmaterialsInfo[value] = info;\n\t\t\t\t\t\t} else if (info) {\n\n\t\t\t\t\t\t\t\tif (key === 'ka' || key === 'kd' || key === 'ks') {\n\n\t\t\t\t\t\t\t\t\t\tvar ss = value.split(delimiter_pattern, 3);\n\t\t\t\t\t\t\t\t\t\tinfo[key] = [parseFloat(ss[0]), parseFloat(ss[1]), parseFloat(ss[2])];\n\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\tinfo[key] = value;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvar materialCreator = new MTLLoader.MaterialCreator(this.texturePath || this.path, this.materialOptions);\n\t\t\t\tmaterialCreator.setCrossOrigin(this.crossOrigin);\n\t\t\t\tmaterialCreator.setManager(this.manager);\n\t\t\t\tmaterialCreator.setMaterials(materialsInfo);\n\t\t\t\treturn materialCreator;\n\t\t}\n\n};\n\nMTLLoader.MaterialCreator = function (baseUrl, options) {\n\n\t\tthis.baseUrl = baseUrl || '';\n\t\tthis.options = options;\n\t\tthis.materialsInfo = {};\n\t\tthis.materials = {};\n\t\tthis.materialsArray = [];\n\t\tthis.nameLookup = {};\n\n\t\tthis.side = this.options && this.options.side ? this.options.side : __WEBPACK_IMPORTED_MODULE_0_three__[\"h\" /* FrontSide */];\n\t\tthis.wrap = this.options && this.options.wrap ? this.options.wrap : __WEBPACK_IMPORTED_MODULE_0_three__[\"i\" /* RepeatWrapping */];\n};\n\nMTLLoader.MaterialCreator.prototype = {\n\n\t\tconstructor: MTLLoader.MaterialCreator,\n\n\t\tcrossOrigin: 'Anonymous',\n\n\t\tsetCrossOrigin: function setCrossOrigin(value) {\n\n\t\t\t\tthis.crossOrigin = value;\n\t\t},\n\n\t\tsetManager: function setManager(value) {\n\n\t\t\t\tthis.manager = value;\n\t\t},\n\n\t\tsetMaterials: function setMaterials(materialsInfo) {\n\n\t\t\t\tthis.materialsInfo = this.convert(materialsInfo);\n\t\t\t\tthis.materials = {};\n\t\t\t\tthis.materialsArray = [];\n\t\t\t\tthis.nameLookup = {};\n\t\t},\n\n\t\tconvert: function convert(materialsInfo) {\n\n\t\t\t\tif (!this.options) return materialsInfo;\n\n\t\t\t\tvar converted = {};\n\n\t\t\t\tfor (var mn in materialsInfo) {\n\n\t\t\t\t\t\tvar mat = materialsInfo[mn];\n\n\t\t\t\t\t\tvar covmat = {};\n\n\t\t\t\t\t\tconverted[mn] = covmat;\n\n\t\t\t\t\t\tfor (var prop in mat) {\n\n\t\t\t\t\t\t\t\tvar save = true;\n\t\t\t\t\t\t\t\tvar value = mat[prop];\n\t\t\t\t\t\t\t\tvar lprop = prop.toLowerCase();\n\n\t\t\t\t\t\t\t\tswitch (lprop) {\n\n\t\t\t\t\t\t\t\t\t\tcase 'kd':\n\t\t\t\t\t\t\t\t\t\tcase 'ka':\n\t\t\t\t\t\t\t\t\t\tcase 'ks':\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (this.options && this.options.normalizeRGB) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue = [value[0] / 255, value[1] / 255, value[2] / 255];\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (this.options && this.options.ignoreZeroRGBs) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (value[0] === 0 && value[1] === 0 && value[2] === 0) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsave = false;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (save) {\n\n\t\t\t\t\t\t\t\t\t\tcovmat[lprop] = value;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn converted;\n\t\t},\n\n\t\tpreload: function preload() {\n\n\t\t\t\tfor (var mn in this.materialsInfo) {\n\n\t\t\t\t\t\tthis.create(mn);\n\t\t\t\t}\n\t\t},\n\n\t\tgetIndex: function getIndex(materialName) {\n\n\t\t\t\treturn this.nameLookup[materialName];\n\t\t},\n\n\t\tgetAsArray: function getAsArray() {\n\n\t\t\t\tvar index = 0;\n\n\t\t\t\tfor (var mn in this.materialsInfo) {\n\n\t\t\t\t\t\tthis.materialsArray[index] = this.create(mn);\n\t\t\t\t\t\tthis.nameLookup[mn] = index;\n\t\t\t\t\t\tindex++;\n\t\t\t\t}\n\n\t\t\t\treturn this.materialsArray;\n\t\t},\n\n\t\tcreate: function create(materialName) {\n\n\t\t\t\tif (this.materials[materialName] === undefined) {\n\n\t\t\t\t\t\tthis.createMaterial_(materialName);\n\t\t\t\t}\n\n\t\t\t\treturn this.materials[materialName];\n\t\t},\n\n\t\tcreateMaterial_: function createMaterial_(materialName) {\n\n\t\t\t\tvar scope = this;\n\t\t\t\tvar mat = this.materialsInfo[materialName];\n\t\t\t\tvar params = {\n\n\t\t\t\t\t\tname: materialName,\n\t\t\t\t\t\tside: this.side\n\n\t\t\t\t};\n\n\t\t\t\tfunction resolveURL(baseUrl, url) {\n\n\t\t\t\t\t\tif (typeof url !== 'string' || url === '') return '';\n\n\t\t\t\t\t\tif (/^https?:\\/\\//i.test(url)) return url;\n\n\t\t\t\t\t\treturn baseUrl + url;\n\t\t\t\t}\n\n\t\t\t\tfunction setMapForType(mapType, value) {\n\n\t\t\t\t\t\tif (params[mapType]) return;\n\n\t\t\t\t\t\tvar texParams = scope.getTextureParams(value, params);\n\t\t\t\t\t\tvar map = scope.loadTexture(resolveURL(scope.baseUrl, texParams.url));\n\n\t\t\t\t\t\tmap.repeat.copy(texParams.scale);\n\t\t\t\t\t\tmap.offset.copy(texParams.offset);\n\n\t\t\t\t\t\tmap.wrapS = scope.wrap;\n\t\t\t\t\t\tmap.wrapT = scope.wrap;\n\n\t\t\t\t\t\tparams[mapType] = map;\n\t\t\t\t}\n\n\t\t\t\tfor (var prop in mat) {\n\n\t\t\t\t\t\tvar value = mat[prop];\n\t\t\t\t\t\tvar n;\n\n\t\t\t\t\t\tif (value === '') continue;\n\n\t\t\t\t\t\tswitch (prop.toLowerCase()) {\n\n\t\t\t\t\t\t\t\tcase 'kd':\n\n\t\t\t\t\t\t\t\t\t\tparams.color = new __WEBPACK_IMPORTED_MODULE_0_three__[\"j\" /* Color */]().fromArray(value);\n\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'ks':\n\t\t\t\t\t\t\t\t\t\tparams.specular = new __WEBPACK_IMPORTED_MODULE_0_three__[\"j\" /* Color */]().fromArray(value);\n\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'map_kd':\n\n\t\t\t\t\t\t\t\t\t\tsetMapForType(\"map\", value);\n\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'map_ks':\n\n\t\t\t\t\t\t\t\t\t\tsetMapForType(\"specularMap\", value);\n\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'norm':\n\n\t\t\t\t\t\t\t\t\t\tsetMapForType(\"normalMap\", value);\n\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'map_bump':\n\t\t\t\t\t\t\t\tcase 'bump':\n\n\t\t\t\t\t\t\t\t\t\tsetMapForType(\"bumpMap\", value);\n\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'ns':\n\n\t\t\t\t\t\t\t\t\t\tparams.shininess = parseFloat(value);\n\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'd':\n\t\t\t\t\t\t\t\t\t\tn = parseFloat(value);\n\n\t\t\t\t\t\t\t\t\t\tif (n < 1) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tparams.opacity = n;\n\t\t\t\t\t\t\t\t\t\t\t\tparams.transparent = true;\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'tr':\n\t\t\t\t\t\t\t\t\t\tn = parseFloat(value);\n\n\t\t\t\t\t\t\t\t\t\tif (n > 0) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tparams.opacity = 1 - n;\n\t\t\t\t\t\t\t\t\t\t\t\tparams.transparent = true;\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.materials[materialName] = new __WEBPACK_IMPORTED_MODULE_0_three__[\"k\" /* MeshPhongMaterial */](params);\n\t\t\t\treturn this.materials[materialName];\n\t\t},\n\n\t\tgetTextureParams: function getTextureParams(value, matParams) {\n\n\t\t\t\tvar texParams = {\n\n\t\t\t\t\t\tscale: new __WEBPACK_IMPORTED_MODULE_0_three__[\"c\" /* Vector2 */](1, 1),\n\t\t\t\t\t\toffset: new __WEBPACK_IMPORTED_MODULE_0_three__[\"c\" /* Vector2 */](0, 0)\n\n\t\t\t\t};\n\n\t\t\t\tvar items = value.split(/\\s+/);\n\t\t\t\tvar pos;\n\n\t\t\t\tpos = items.indexOf('-bm');\n\n\t\t\t\tif (pos >= 0) {\n\n\t\t\t\t\t\tmatParams.bumpScale = parseFloat(items[pos + 1]);\n\t\t\t\t\t\titems.splice(pos, 2);\n\t\t\t\t}\n\n\t\t\t\tpos = items.indexOf('-s');\n\n\t\t\t\tif (pos >= 0) {\n\n\t\t\t\t\t\ttexParams.scale.set(parseFloat(items[pos + 1]), parseFloat(items[pos + 2]));\n\t\t\t\t\t\titems.splice(pos, 4);\n\t\t\t\t}\n\n\t\t\t\tpos = items.indexOf('-o');\n\n\t\t\t\tif (pos >= 0) {\n\n\t\t\t\t\t\ttexParams.offset.set(parseFloat(items[pos + 1]), parseFloat(items[pos + 2]));\n\t\t\t\t\t\titems.splice(pos, 4);\n\t\t\t\t}\n\n\t\t\t\ttexParams.url = items.join(' ').trim();\n\t\t\t\treturn texParams;\n\t\t},\n\n\t\tloadTexture: function loadTexture(url, mapping, onLoad, onProgress, onError) {\n\n\t\t\t\tvar texture;\n\t\t\t\tvar loader = LoaderHandlers.get(url);\n\t\t\t\tvar manager = this.manager !== undefined ? this.manager : __WEBPACK_IMPORTED_MODULE_0_three__[\"f\" /* DefaultLoadingManager */];\n\n\t\t\t\tif (loader === null) {\n\n\t\t\t\t\t\tloader = new __WEBPACK_IMPORTED_MODULE_0_three__[\"l\" /* TextureLoader */](manager);\n\t\t\t\t}\n\n\t\t\t\tif (loader.setCrossOrigin) loader.setCrossOrigin(this.crossOrigin);\n\t\t\t\ttexture = loader.load(url, onLoad, onProgress, onError);\n\n\t\t\t\tif (mapping !== undefined) texture.mapping = mapping;\n\n\t\t\t\treturn texture;\n\t\t}\n\n};\n\n\n\n/***/ }),\n\n/***/ 47:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return OBJLoader; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_three__ = __webpack_require__(1);\n\n\nvar OBJLoader = function OBJLoader(manager) {\n\n\t\t\t\tthis.manager = manager !== undefined ? manager : __WEBPACK_IMPORTED_MODULE_0_three__[\"f\" /* DefaultLoadingManager */];\n\n\t\t\t\tthis.materials = null;\n\n\t\t\t\tthis.regexp = {\n\t\t\t\t\t\t\t\tvertex_pattern: /^v\\s+([\\d|\\.|\\+|\\-|e|E]+)\\s+([\\d|\\.|\\+|\\-|e|E]+)\\s+([\\d|\\.|\\+|\\-|e|E]+)/,\n\n\t\t\t\t\t\t\t\tnormal_pattern: /^vn\\s+([\\d|\\.|\\+|\\-|e|E]+)\\s+([\\d|\\.|\\+|\\-|e|E]+)\\s+([\\d|\\.|\\+|\\-|e|E]+)/,\n\n\t\t\t\t\t\t\t\tuv_pattern: /^vt\\s+([\\d|\\.|\\+|\\-|e|E]+)\\s+([\\d|\\.|\\+|\\-|e|E]+)/,\n\n\t\t\t\t\t\t\t\tface_vertex: /^f\\s+(-?\\d+)\\s+(-?\\d+)\\s+(-?\\d+)(?:\\s+(-?\\d+))?/,\n\n\t\t\t\t\t\t\t\tface_vertex_uv: /^f\\s+(-?\\d+)\\/(-?\\d+)\\s+(-?\\d+)\\/(-?\\d+)\\s+(-?\\d+)\\/(-?\\d+)(?:\\s+(-?\\d+)\\/(-?\\d+))?/,\n\n\t\t\t\t\t\t\t\tface_vertex_uv_normal: /^f\\s+(-?\\d+)\\/(-?\\d+)\\/(-?\\d+)\\s+(-?\\d+)\\/(-?\\d+)\\/(-?\\d+)\\s+(-?\\d+)\\/(-?\\d+)\\/(-?\\d+)(?:\\s+(-?\\d+)\\/(-?\\d+)\\/(-?\\d+))?/,\n\n\t\t\t\t\t\t\t\tface_vertex_normal: /^f\\s+(-?\\d+)\\/\\/(-?\\d+)\\s+(-?\\d+)\\/\\/(-?\\d+)\\s+(-?\\d+)\\/\\/(-?\\d+)(?:\\s+(-?\\d+)\\/\\/(-?\\d+))?/,\n\n\t\t\t\t\t\t\t\tobject_pattern: /^[og]\\s*(.+)?/,\n\n\t\t\t\t\t\t\t\tsmoothing_pattern: /^s\\s+(\\d+|on|off)/,\n\n\t\t\t\t\t\t\t\tmaterial_library_pattern: /^mtllib /,\n\n\t\t\t\t\t\t\t\tmaterial_use_pattern: /^usemtl /\n\t\t\t\t};\n};\n\nOBJLoader.prototype = {\n\n\t\t\t\tconstructor: OBJLoader,\n\n\t\t\t\tload: function load(url, onLoad, onProgress, onError) {\n\n\t\t\t\t\t\t\t\tvar scope = this;\n\n\t\t\t\t\t\t\t\tvar loader = new __WEBPACK_IMPORTED_MODULE_0_three__[\"g\" /* FileLoader */](scope.manager);\n\t\t\t\t\t\t\t\tloader.setPath(this.path);\n\t\t\t\t\t\t\t\tloader.load(url, function (text) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tonLoad(scope.parse(text));\n\t\t\t\t\t\t\t\t}, onProgress, onError);\n\t\t\t\t},\n\n\t\t\t\tsetPath: function setPath(value) {\n\n\t\t\t\t\t\t\t\tthis.path = value;\n\t\t\t\t},\n\n\t\t\t\tsetMaterials: function setMaterials(materials) {\n\n\t\t\t\t\t\t\t\tthis.materials = materials;\n\t\t\t\t},\n\n\t\t\t\t_createParserState: function _createParserState() {\n\n\t\t\t\t\t\t\t\tvar state = {\n\t\t\t\t\t\t\t\t\t\t\t\tobjects: [],\n\t\t\t\t\t\t\t\t\t\t\t\tobject: {},\n\n\t\t\t\t\t\t\t\t\t\t\t\tvertices: [],\n\t\t\t\t\t\t\t\t\t\t\t\tnormals: [],\n\t\t\t\t\t\t\t\t\t\t\t\tuvs: [],\n\n\t\t\t\t\t\t\t\t\t\t\t\tmaterialLibraries: [],\n\n\t\t\t\t\t\t\t\t\t\t\t\tstartObject: function startObject(name, fromDeclaration) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (this.object && this.object.fromDeclaration === false) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.object.name = name;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.object.fromDeclaration = fromDeclaration !== false;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar previousMaterial = this.object && typeof this.object.currentMaterial === 'function' ? this.object.currentMaterial() : undefined;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (this.object && typeof this.object._finalize === 'function') {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.object._finalize(true);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.object = {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname: name || '',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfromDeclaration: fromDeclaration !== false,\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgeometry: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvertices: [],\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tnormals: [],\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuvs: []\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmaterials: [],\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsmooth: true,\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstartMaterial: function startMaterial(name, libraries) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar previous = this._finalize(false);\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (previous && (previous.inherited || previous.groupCount <= 0)) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.materials.splice(previous.index, 1);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar material = {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tindex: this.materials.length,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname: name || '',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmtllib: Array.isArray(libraries) && libraries.length > 0 ? libraries[libraries.length - 1] : '',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsmooth: previous !== undefined ? previous.smooth : this.smooth,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgroupStart: previous !== undefined ? previous.groupEnd : 0,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgroupEnd: -1,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgroupCount: -1,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tinherited: false,\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclone: function clone(index) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar cloned = {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tindex: typeof index === 'number' ? index : this.index,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname: this.name,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmtllib: this.mtllib,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsmooth: this.smooth,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgroupStart: 0,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgroupEnd: -1,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgroupCount: -1,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tinherited: false\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcloned.clone = this.clone.bind(cloned);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn cloned;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.materials.push(material);\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn material;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcurrentMaterial: function currentMaterial() {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (this.materials.length > 0) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn this.materials[this.materials.length - 1];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t_finalize: function _finalize(end) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar lastMultiMaterial = this.currentMaterial();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (lastMultiMaterial && lastMultiMaterial.groupEnd === -1) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlastMultiMaterial.groupEnd = this.geometry.vertices.length / 3;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlastMultiMaterial.groupCount = lastMultiMaterial.groupEnd - lastMultiMaterial.groupStart;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlastMultiMaterial.inherited = false;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (end && this.materials.length > 1) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfor (var mi = this.materials.length - 1; mi >= 0; mi--) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (this.materials[mi].groupCount <= 0) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.materials.splice(mi, 1);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (end && this.materials.length === 0) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.materials.push({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname: '',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsmooth: this.smooth\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn lastMultiMaterial;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (previousMaterial && previousMaterial.name && typeof previousMaterial.clone === \"function\") {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar declared = previousMaterial.clone(0);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdeclared.inherited = true;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.object.materials.push(declared);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.objects.push(this.object);\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\n\t\t\t\t\t\t\t\t\t\t\t\tfinalize: function finalize() {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (this.object && typeof this.object._finalize === 'function') {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.object._finalize(true);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\n\t\t\t\t\t\t\t\t\t\t\t\tparseVertexIndex: function parseVertexIndex(value, len) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar index = parseInt(value, 10);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (index >= 0 ? index - 1 : index + len / 3) * 3;\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\n\t\t\t\t\t\t\t\t\t\t\t\tparseNormalIndex: function parseNormalIndex(value, len) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar index = parseInt(value, 10);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (index >= 0 ? index - 1 : index + len / 3) * 3;\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\n\t\t\t\t\t\t\t\t\t\t\t\tparseUVIndex: function parseUVIndex(value, len) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar index = parseInt(value, 10);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (index >= 0 ? index - 1 : index + len / 2) * 2;\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\n\t\t\t\t\t\t\t\t\t\t\t\taddVertex: function addVertex(a, b, c) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar src = this.vertices;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar dst = this.object.geometry.vertices;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdst.push(src[a + 0]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdst.push(src[a + 1]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdst.push(src[a + 2]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdst.push(src[b + 0]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdst.push(src[b + 1]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdst.push(src[b + 2]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdst.push(src[c + 0]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdst.push(src[c + 1]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdst.push(src[c + 2]);\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\n\t\t\t\t\t\t\t\t\t\t\t\taddVertexLine: function addVertexLine(a) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar src = this.vertices;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar dst = this.object.geometry.vertices;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdst.push(src[a + 0]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdst.push(src[a + 1]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdst.push(src[a + 2]);\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\n\t\t\t\t\t\t\t\t\t\t\t\taddNormal: function addNormal(a, b, c) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar src = this.normals;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar dst = this.object.geometry.normals;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdst.push(src[a + 0]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdst.push(src[a + 1]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdst.push(src[a + 2]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdst.push(src[b + 0]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdst.push(src[b + 1]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdst.push(src[b + 2]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdst.push(src[c + 0]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdst.push(src[c + 1]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdst.push(src[c + 2]);\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\n\t\t\t\t\t\t\t\t\t\t\t\taddUV: function addUV(a, b, c) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar src = this.uvs;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar dst = this.object.geometry.uvs;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdst.push(src[a + 0]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdst.push(src[a + 1]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdst.push(src[b + 0]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdst.push(src[b + 1]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdst.push(src[c + 0]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdst.push(src[c + 1]);\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\n\t\t\t\t\t\t\t\t\t\t\t\taddUVLine: function addUVLine(a) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar src = this.uvs;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar dst = this.object.geometry.uvs;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdst.push(src[a + 0]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdst.push(src[a + 1]);\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\n\t\t\t\t\t\t\t\t\t\t\t\taddFace: function addFace(a, b, c, d, ua, ub, uc, ud, na, nb, nc, nd) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar vLen = this.vertices.length;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar ia = this.parseVertexIndex(a, vLen);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar ib = this.parseVertexIndex(b, vLen);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar ic = this.parseVertexIndex(c, vLen);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar id;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (d === undefined) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.addVertex(ia, ib, ic);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid = this.parseVertexIndex(d, vLen);\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.addVertex(ia, ib, id);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.addVertex(ib, ic, id);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (ua !== undefined) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar uvLen = this.uvs.length;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tia = this.parseUVIndex(ua, uvLen);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tib = this.parseUVIndex(ub, uvLen);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tic = this.parseUVIndex(uc, uvLen);\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (d === undefined) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.addUV(ia, ib, ic);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid = this.parseUVIndex(ud, uvLen);\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.addUV(ia, ib, id);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.addUV(ib, ic, id);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (na !== undefined) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar nLen = this.normals.length;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tia = this.parseNormalIndex(na, nLen);\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tib = na === nb ? ia : this.parseNormalIndex(nb, nLen);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tic = na === nc ? ia : this.parseNormalIndex(nc, nLen);\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (d === undefined) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.addNormal(ia, ib, ic);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid = this.parseNormalIndex(nd, nLen);\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.addNormal(ia, ib, id);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.addNormal(ib, ic, id);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\n\t\t\t\t\t\t\t\t\t\t\t\taddLineGeometry: function addLineGeometry(vertices, uvs) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.object.geometry.type = 'Line';\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar vLen = this.vertices.length;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar uvLen = this.uvs.length;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfor (var vi = 0, l = vertices.length; vi < l; vi++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.addVertexLine(this.parseVertexIndex(vertices[vi], vLen));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfor (var uvi = 0, l = uvs.length; uvi < l; uvi++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.addUVLine(this.parseUVIndex(uvs[uvi], uvLen));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\tstate.startObject('', false);\n\n\t\t\t\t\t\t\t\treturn state;\n\t\t\t\t},\n\n\t\t\t\tparse: function parse(text) {\n\n\t\t\t\t\t\t\t\tconsole.time('OBJLoader');\n\n\t\t\t\t\t\t\t\tvar state = this._createParserState();\n\n\t\t\t\t\t\t\t\tif (text.indexOf('\\r\\n') !== -1) {\n\t\t\t\t\t\t\t\t\t\t\t\ttext = text.replace(/\\r\\n/g, '\\n');\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (text.indexOf('\\\\\\n') !== -1) {\n\t\t\t\t\t\t\t\t\t\t\t\ttext = text.replace(/\\\\\\n/g, '');\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tvar lines = text.split('\\n');\n\t\t\t\t\t\t\t\tvar line = '',\n\t\t\t\t\t\t\t\t    lineFirstChar = '',\n\t\t\t\t\t\t\t\t    lineSecondChar = '';\n\t\t\t\t\t\t\t\tvar lineLength = 0;\n\t\t\t\t\t\t\t\tvar result = [];\n\n\t\t\t\t\t\t\t\tvar trimLeft = typeof ''.trimLeft === 'function';\n\n\t\t\t\t\t\t\t\tfor (var i = 0, l = lines.length; i < l; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tline = lines[i];\n\n\t\t\t\t\t\t\t\t\t\t\t\tline = trimLeft ? line.trimLeft() : line.trim();\n\n\t\t\t\t\t\t\t\t\t\t\t\tlineLength = line.length;\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (lineLength === 0) continue;\n\n\t\t\t\t\t\t\t\t\t\t\t\tlineFirstChar = line.charAt(0);\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (lineFirstChar === '#') continue;\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (lineFirstChar === 'v') {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlineSecondChar = line.charAt(1);\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (lineSecondChar === ' ' && (result = this.regexp.vertex_pattern.exec(line)) !== null) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstate.vertices.push(parseFloat(result[1]), parseFloat(result[2]), parseFloat(result[3]));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else if (lineSecondChar === 'n' && (result = this.regexp.normal_pattern.exec(line)) !== null) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstate.normals.push(parseFloat(result[1]), parseFloat(result[2]), parseFloat(result[3]));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else if (lineSecondChar === 't' && (result = this.regexp.uv_pattern.exec(line)) !== null) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstate.uvs.push(parseFloat(result[1]), parseFloat(result[2]));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthrow new Error(\"Unexpected vertex/normal/uv line: '\" + line + \"'\");\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t} else if (lineFirstChar === \"f\") {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif ((result = this.regexp.face_vertex_uv_normal.exec(line)) !== null) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstate.addFace(result[1], result[4], result[7], result[10], result[2], result[5], result[8], result[11], result[3], result[6], result[9], result[12]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else if ((result = this.regexp.face_vertex_uv.exec(line)) !== null) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstate.addFace(result[1], result[3], result[5], result[7], result[2], result[4], result[6], result[8]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else if ((result = this.regexp.face_vertex_normal.exec(line)) !== null) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstate.addFace(result[1], result[3], result[5], result[7], undefined, undefined, undefined, undefined, result[2], result[4], result[6], result[8]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else if ((result = this.regexp.face_vertex.exec(line)) !== null) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstate.addFace(result[1], result[2], result[3], result[4]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthrow new Error(\"Unexpected face line: '\" + line + \"'\");\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t} else if (lineFirstChar === \"l\") {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar lineParts = line.substring(1).trim().split(\" \");\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar lineVertices = [],\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    lineUVs = [];\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (line.indexOf(\"/\") === -1) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlineVertices = lineParts;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfor (var li = 0, llen = lineParts.length; li < llen; li++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar parts = lineParts[li].split(\"/\");\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (parts[0] !== \"\") lineVertices.push(parts[0]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (parts[1] !== \"\") lineUVs.push(parts[1]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstate.addLineGeometry(lineVertices, lineUVs);\n\t\t\t\t\t\t\t\t\t\t\t\t} else if ((result = this.regexp.object_pattern.exec(line)) !== null) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar name = (\" \" + result[0].substr(1).trim()).substr(1);\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstate.startObject(name);\n\t\t\t\t\t\t\t\t\t\t\t\t} else if (this.regexp.material_use_pattern.test(line)) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstate.object.startMaterial(line.substring(7).trim(), state.materialLibraries);\n\t\t\t\t\t\t\t\t\t\t\t\t} else if (this.regexp.material_library_pattern.test(line)) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstate.materialLibraries.push(line.substring(7).trim());\n\t\t\t\t\t\t\t\t\t\t\t\t} else if ((result = this.regexp.smoothing_pattern.exec(line)) !== null) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar value = result[1].trim().toLowerCase();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstate.object.smooth = value === '1' || value === 'on';\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar material = state.object.currentMaterial();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (material) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmaterial.smooth = state.object.smooth;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (line === '\\0') continue;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthrow new Error(\"Unexpected line: '\" + line + \"'\");\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tstate.finalize();\n\n\t\t\t\t\t\t\t\tvar container = new __WEBPACK_IMPORTED_MODULE_0_three__[\"s\" /* Group */]();\n\t\t\t\t\t\t\t\tcontainer.materialLibraries = [].concat(state.materialLibraries);\n\n\t\t\t\t\t\t\t\tfor (var i = 0, l = state.objects.length; i < l; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar object = state.objects[i];\n\t\t\t\t\t\t\t\t\t\t\t\tvar geometry = object.geometry;\n\t\t\t\t\t\t\t\t\t\t\t\tvar materials = object.materials;\n\t\t\t\t\t\t\t\t\t\t\t\tvar isLine = geometry.type === 'Line';\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (geometry.vertices.length === 0) continue;\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar buffergeometry = new __WEBPACK_IMPORTED_MODULE_0_three__[\"t\" /* BufferGeometry */]();\n\n\t\t\t\t\t\t\t\t\t\t\t\tbuffergeometry.addAttribute('position', new __WEBPACK_IMPORTED_MODULE_0_three__[\"d\" /* BufferAttribute */](new Float32Array(geometry.vertices), 3));\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (geometry.normals.length > 0) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbuffergeometry.addAttribute('normal', new __WEBPACK_IMPORTED_MODULE_0_three__[\"d\" /* BufferAttribute */](new Float32Array(geometry.normals), 3));\n\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbuffergeometry.computeVertexNormals();\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (geometry.uvs.length > 0) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbuffergeometry.addAttribute('uv', new __WEBPACK_IMPORTED_MODULE_0_three__[\"d\" /* BufferAttribute */](new Float32Array(geometry.uvs), 2));\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar createdMaterials = [];\n\n\t\t\t\t\t\t\t\t\t\t\t\tfor (var mi = 0, miLen = materials.length; mi < miLen; mi++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar sourceMaterial = materials[mi];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar material = undefined;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (this.materials !== null) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmaterial = this.materials.create(sourceMaterial.name);\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (isLine && material && !(material instanceof __WEBPACK_IMPORTED_MODULE_0_three__[\"u\" /* LineBasicMaterial */])) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar materialLine = new __WEBPACK_IMPORTED_MODULE_0_three__[\"u\" /* LineBasicMaterial */]();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmaterialLine.copy(material);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmaterial = materialLine;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (!material) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmaterial = !isLine ? new __WEBPACK_IMPORTED_MODULE_0_three__[\"k\" /* MeshPhongMaterial */]() : new __WEBPACK_IMPORTED_MODULE_0_three__[\"u\" /* LineBasicMaterial */]();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmaterial.name = sourceMaterial.name;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmaterial.shading = sourceMaterial.smooth ? __WEBPACK_IMPORTED_MODULE_0_three__[\"v\" /* SmoothShading */] : __WEBPACK_IMPORTED_MODULE_0_three__[\"w\" /* FlatShading */];\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcreatedMaterials.push(material);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar mesh;\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (createdMaterials.length > 1) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfor (var mi = 0, miLen = materials.length; mi < miLen; mi++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar sourceMaterial = materials[mi];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbuffergeometry.addGroup(sourceMaterial.groupStart, sourceMaterial.groupCount, mi);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmesh = !isLine ? new __WEBPACK_IMPORTED_MODULE_0_three__[\"x\" /* Mesh */](buffergeometry, createdMaterials) : new __WEBPACK_IMPORTED_MODULE_0_three__[\"y\" /* LineSegments */](buffergeometry, createdMaterials);\n\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmesh = !isLine ? new __WEBPACK_IMPORTED_MODULE_0_three__[\"x\" /* Mesh */](buffergeometry, createdMaterials[0]) : new __WEBPACK_IMPORTED_MODULE_0_three__[\"y\" /* LineSegments */](buffergeometry, createdMaterials[0]);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\tmesh.name = object.name;\n\n\t\t\t\t\t\t\t\t\t\t\t\tcontainer.add(mesh);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tconsole.timeEnd('OBJLoader');\n\n\t\t\t\t\t\t\t\treturn container;\n\t\t\t\t}\n\n};\n\n\n\n/***/ }),\n\n/***/ 48:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return STLLoader; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_three__ = __webpack_require__(1);\n\n\nvar STLLoader = function STLLoader(manager) {\n\n\t\tthis.manager = manager !== undefined ? manager : __WEBPACK_IMPORTED_MODULE_0_three__[\"f\" /* DefaultLoadingManager */];\n};\n\nSTLLoader.prototype = {\n\n\t\tconstructor: STLLoader,\n\n\t\tload: function load(url, onLoad, onProgress, onError) {\n\n\t\t\t\tvar scope = this;\n\n\t\t\t\tvar loader = new __WEBPACK_IMPORTED_MODULE_0_three__[\"g\" /* FileLoader */](scope.manager);\n\t\t\t\tloader.setResponseType('arraybuffer');\n\t\t\t\tloader.load(url, function (text) {\n\n\t\t\t\t\t\tonLoad(scope.parse(text));\n\t\t\t\t}, onProgress, onError);\n\t\t},\n\n\t\tparse: function parse(data) {\n\n\t\t\t\tvar isBinary = function isBinary() {\n\n\t\t\t\t\t\tvar expect, face_size, n_faces, reader;\n\t\t\t\t\t\treader = new DataView(binData);\n\t\t\t\t\t\tface_size = 32 / 8 * 3 + 32 / 8 * 3 * 3 + 16 / 8;\n\t\t\t\t\t\tn_faces = reader.getUint32(80, true);\n\t\t\t\t\t\texpect = 80 + 32 / 8 + n_faces * face_size;\n\n\t\t\t\t\t\tif (expect === reader.byteLength) {\n\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar solid = [115, 111, 108, 105, 100];\n\n\t\t\t\t\t\tfor (var i = 0; i < 5; i++) {\n\n\t\t\t\t\t\t\t\tif (solid[i] != reader.getUint8(i, false)) return true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn false;\n\t\t\t\t};\n\n\t\t\t\tvar binData = this.ensureBinary(data);\n\n\t\t\t\treturn isBinary() ? this.parseBinary(binData) : this.parseASCII(this.ensureString(data));\n\t\t},\n\n\t\tparseBinary: function parseBinary(data) {\n\n\t\t\t\tvar reader = new DataView(data);\n\t\t\t\tvar faces = reader.getUint32(80, true);\n\n\t\t\t\tvar r,\n\t\t\t\t    g,\n\t\t\t\t    b,\n\t\t\t\t    hasColors = false,\n\t\t\t\t    colors;\n\t\t\t\tvar defaultR, defaultG, defaultB, alpha;\n\n\t\t\t\tfor (var index = 0; index < 80 - 10; index++) {\n\n\t\t\t\t\t\tif (reader.getUint32(index, false) == 0x434F4C4F && reader.getUint8(index + 4) == 0x52 && reader.getUint8(index + 5) == 0x3D) {\n\n\t\t\t\t\t\t\t\thasColors = true;\n\t\t\t\t\t\t\t\tcolors = [];\n\n\t\t\t\t\t\t\t\tdefaultR = reader.getUint8(index + 6) / 255;\n\t\t\t\t\t\t\t\tdefaultG = reader.getUint8(index + 7) / 255;\n\t\t\t\t\t\t\t\tdefaultB = reader.getUint8(index + 8) / 255;\n\t\t\t\t\t\t\t\talpha = reader.getUint8(index + 9) / 255;\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvar dataOffset = 84;\n\t\t\t\tvar faceLength = 12 * 4 + 2;\n\n\t\t\t\tvar geometry = new __WEBPACK_IMPORTED_MODULE_0_three__[\"t\" /* BufferGeometry */]();\n\n\t\t\t\tvar vertices = [];\n\t\t\t\tvar normals = [];\n\n\t\t\t\tfor (var face = 0; face < faces; face++) {\n\n\t\t\t\t\t\tvar start = dataOffset + face * faceLength;\n\t\t\t\t\t\tvar normalX = reader.getFloat32(start, true);\n\t\t\t\t\t\tvar normalY = reader.getFloat32(start + 4, true);\n\t\t\t\t\t\tvar normalZ = reader.getFloat32(start + 8, true);\n\n\t\t\t\t\t\tif (hasColors) {\n\n\t\t\t\t\t\t\t\tvar packedColor = reader.getUint16(start + 48, true);\n\n\t\t\t\t\t\t\t\tif ((packedColor & 0x8000) === 0) {\n\n\t\t\t\t\t\t\t\t\t\tr = (packedColor & 0x1F) / 31;\n\t\t\t\t\t\t\t\t\t\tg = (packedColor >> 5 & 0x1F) / 31;\n\t\t\t\t\t\t\t\t\t\tb = (packedColor >> 10 & 0x1F) / 31;\n\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\tr = defaultR;\n\t\t\t\t\t\t\t\t\t\tg = defaultG;\n\t\t\t\t\t\t\t\t\t\tb = defaultB;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfor (var i = 1; i <= 3; i++) {\n\n\t\t\t\t\t\t\t\tvar vertexstart = start + i * 12;\n\n\t\t\t\t\t\t\t\tvertices.push(reader.getFloat32(vertexstart, true));\n\t\t\t\t\t\t\t\tvertices.push(reader.getFloat32(vertexstart + 4, true));\n\t\t\t\t\t\t\t\tvertices.push(reader.getFloat32(vertexstart + 8, true));\n\n\t\t\t\t\t\t\t\tnormals.push(normalX, normalY, normalZ);\n\n\t\t\t\t\t\t\t\tif (hasColors) {\n\n\t\t\t\t\t\t\t\t\t\tcolors.push(r, g, b);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tgeometry.addAttribute('position', new __WEBPACK_IMPORTED_MODULE_0_three__[\"d\" /* BufferAttribute */](new Float32Array(vertices), 3));\n\t\t\t\tgeometry.addAttribute('normal', new __WEBPACK_IMPORTED_MODULE_0_three__[\"d\" /* BufferAttribute */](new Float32Array(normals), 3));\n\n\t\t\t\tif (hasColors) {\n\n\t\t\t\t\t\tgeometry.addAttribute('color', new __WEBPACK_IMPORTED_MODULE_0_three__[\"d\" /* BufferAttribute */](new Float32Array(colors), 3));\n\t\t\t\t\t\tgeometry.hasColors = true;\n\t\t\t\t\t\tgeometry.alpha = alpha;\n\t\t\t\t}\n\n\t\t\t\treturn geometry;\n\t\t},\n\n\t\tparseASCII: function parseASCII(data) {\n\n\t\t\t\tvar geometry, length, patternFace, patternNormal, patternVertex, result, text;\n\t\t\t\tgeometry = new __WEBPACK_IMPORTED_MODULE_0_three__[\"t\" /* BufferGeometry */]();\n\t\t\t\tpatternFace = /facet([\\s\\S]*?)endfacet/g;\n\n\t\t\t\tvar vertices = [];\n\t\t\t\tvar normals = [];\n\n\t\t\t\tvar normal = new __WEBPACK_IMPORTED_MODULE_0_three__[\"b\" /* Vector3 */]();\n\n\t\t\t\twhile ((result = patternFace.exec(data)) !== null) {\n\n\t\t\t\t\t\ttext = result[0];\n\t\t\t\t\t\tpatternNormal = /normal[\\s]+([\\-+]?[0-9]+\\.?[0-9]*([eE][\\-+]?[0-9]+)?)+[\\s]+([\\-+]?[0-9]*\\.?[0-9]+([eE][\\-+]?[0-9]+)?)+[\\s]+([\\-+]?[0-9]*\\.?[0-9]+([eE][\\-+]?[0-9]+)?)+/g;\n\n\t\t\t\t\t\twhile ((result = patternNormal.exec(text)) !== null) {\n\n\t\t\t\t\t\t\t\tnormal.x = parseFloat(result[1]);\n\t\t\t\t\t\t\t\tnormal.y = parseFloat(result[3]);\n\t\t\t\t\t\t\t\tnormal.z = parseFloat(result[5]);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tpatternVertex = /vertex[\\s]+([\\-+]?[0-9]+\\.?[0-9]*([eE][\\-+]?[0-9]+)?)+[\\s]+([\\-+]?[0-9]*\\.?[0-9]+([eE][\\-+]?[0-9]+)?)+[\\s]+([\\-+]?[0-9]*\\.?[0-9]+([eE][\\-+]?[0-9]+)?)+/g;\n\n\t\t\t\t\t\twhile ((result = patternVertex.exec(text)) !== null) {\n\n\t\t\t\t\t\t\t\tvertices.push(parseFloat(result[1]), parseFloat(result[3]), parseFloat(result[5]));\n\t\t\t\t\t\t\t\tnormals.push(normal.x, normal.y, normal.z);\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tgeometry.addAttribute('position', new __WEBPACK_IMPORTED_MODULE_0_three__[\"d\" /* BufferAttribute */](new Float32Array(vertices), 3));\n\t\t\t\tgeometry.addAttribute('normal', new __WEBPACK_IMPORTED_MODULE_0_three__[\"d\" /* BufferAttribute */](new Float32Array(normals), 3));\n\n\t\t\t\treturn geometry;\n\t\t},\n\n\t\tensureString: function ensureString(buf) {\n\n\t\t\t\tif (typeof buf !== \"string\") {\n\n\t\t\t\t\t\tvar array_buffer = new Uint8Array(buf);\n\t\t\t\t\t\tvar strArray = [];\n\t\t\t\t\t\tfor (var i = 0; i < buf.byteLength; i++) {\n\n\t\t\t\t\t\t\t\tstrArray.push(String.fromCharCode(array_buffer[i]));\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn strArray.join('');\n\t\t\t\t} else {\n\n\t\t\t\t\t\treturn buf;\n\t\t\t\t}\n\t\t},\n\n\t\tensureBinary: function ensureBinary(buf) {\n\n\t\t\t\tif (typeof buf === \"string\") {\n\n\t\t\t\t\t\tvar array_buffer = new Uint8Array(buf.length);\n\t\t\t\t\t\tfor (var i = 0; i < buf.length; i++) {\n\n\t\t\t\t\t\t\t\tarray_buffer[i] = buf.charCodeAt(i) & 0xff;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn array_buffer.buffer || array_buffer;\n\t\t\t\t} else {\n\n\t\t\t\t\t\treturn buf;\n\t\t\t\t}\n\t\t}\n\n};\n\n\n\n/***/ }),\n\n/***/ 6:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(39),\n  /* template */\n  __webpack_require__(275),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 7:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return getSize; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return getCenter; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return toIndexed; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_three__ = __webpack_require__(1);\n\n\nvar box = new __WEBPACK_IMPORTED_MODULE_0_three__[\"a\" /* Box3 */]();\n\nfunction getSize(object) {\n\n    box.setFromObject(object);\n\n    return box.getSize();\n}\n\nfunction getCenter(object) {\n\n    box.setFromObject(object);\n\n    return box.getCenter();\n}\n\nfunction lightsDiff(lights, oldLights) {}\n\nfunction toIndexed(bufferGeometry) {\n\n    var raw_positions = bufferGeometry.getAttribute('position').array;\n\n    var raw_uvs;\n    var hasUV = bufferGeometry.getAttribute('uv') !== undefined;\n    if (hasUV) raw_uvs = bufferGeometry.getAttribute('uv').array;\n\n    var raw_normals;\n    var hasNormal = bufferGeometry.getAttribute('normal') !== undefined;\n    if (hasNormal) raw_normals = bufferGeometry.getAttribute('normal').array;\n\n    var indices = [];\n    var vertices = [];\n    var normals = [];\n    var uvs = [];\n\n    var face, face_normalss, face_uvs, tmp_indices;\n\n    var v0 = new __WEBPACK_IMPORTED_MODULE_0_three__[\"b\" /* Vector3 */]();\n    var v1 = new __WEBPACK_IMPORTED_MODULE_0_three__[\"b\" /* Vector3 */]();\n    var v2 = new __WEBPACK_IMPORTED_MODULE_0_three__[\"b\" /* Vector3 */]();\n\n    var n0 = new __WEBPACK_IMPORTED_MODULE_0_three__[\"b\" /* Vector3 */]();\n    var n1 = new __WEBPACK_IMPORTED_MODULE_0_three__[\"b\" /* Vector3 */]();\n    var n2 = new __WEBPACK_IMPORTED_MODULE_0_three__[\"b\" /* Vector3 */]();\n\n    var uv0 = new __WEBPACK_IMPORTED_MODULE_0_three__[\"c\" /* Vector2 */]();\n    var uv1 = new __WEBPACK_IMPORTED_MODULE_0_three__[\"c\" /* Vector2 */]();\n    var uv2 = new __WEBPACK_IMPORTED_MODULE_0_three__[\"c\" /* Vector2 */]();\n\n    for (var i = 0; i < raw_positions.length; i += 9) {\n\n        v0.x = raw_positions[i];\n        v0.y = raw_positions[i + 1];\n        v0.z = raw_positions[i + 2];\n\n        v1.x = raw_positions[i + 3];\n        v1.y = raw_positions[i + 4];\n        v1.z = raw_positions[i + 5];\n\n        v2.x = raw_positions[i + 6];\n        v2.y = raw_positions[i + 7];\n        v2.z = raw_positions[i + 8];\n\n        face = [v0, v1, v2];\n\n        if (hasNormal) {\n\n            n0.x = raw_normals[i];\n            n0.y = raw_normals[i + 1];\n            n0.z = raw_normals[i + 2];\n\n            n1.x = raw_normals[i + 3];\n            n1.y = raw_normals[i + 4];\n            n1.z = raw_normals[i + 5];\n\n            n2.x = raw_normals[i + 6];\n            n2.y = raw_normals[i + 7];\n            n2.z = raw_normals[i + 8];\n\n            face_normalss = [n0, n1, n2];\n        }\n\n        if (hasUV) {\n\n            uv0.x = raw_uvs[i];\n            uv0.y = raw_uvs[i + 1];\n\n            uv1.x = raw_uvs[i + 2];\n            uv1.y = raw_uvs[i + 3];\n\n            uv2.x = raw_uvs[i + 4];\n            uv2.y = raw_uvs[i + 5];\n\n            face_uvs = [uv0, uv1, uv2];\n        }\n\n        tmp_indices = [];\n\n        face.forEach(function (v, i) {\n\n            var id = exists(v, vertices);\n            if (id == -1) {\n\n                id = vertices.length;\n                vertices.push(v.clone());\n\n                if (hasNormal) normals.push(face_normalss[i].clone());\n                if (hasUV) uvs.push(face_uvs[i].clone());\n            }\n            tmp_indices.push(id);\n        });\n\n        indices.push(tmp_indices[0], tmp_indices[1], tmp_indices[2]);\n    }\n\n    var positionBuffer = new Float32Array(vertices.length * 3);\n    if (hasNormal) var normalBuffer = new Float32Array(vertices.length * 3);\n    if (hasUV) var uvBuffer = new Float32Array(vertices.length * 2);\n\n    var i2 = 0;\n    var i3 = 0;\n    for (i = 0; i < vertices.length; i++) {\n\n        i3 = i * 3;\n\n        positionBuffer[i3] = vertices[i].x;\n        positionBuffer[i3 + 1] = vertices[i].y;\n        positionBuffer[i3 + 2] = vertices[i].z;\n\n        if (hasNormal) {\n\n            normalBuffer[i3] = normals[i].x;\n            normalBuffer[i3 + 1] = normals[i].y;\n            normalBuffer[i3 + 2] = normals[i].z;\n        }\n\n        if (hasUV) {\n\n            i2 = i * 2;\n            uvBuffer[i2] = uvs[i].x;\n            uvBuffer[i2 + 1] = uvs[i].y;\n        }\n    }\n\n    bufferGeometry.addAttribute('position', new __WEBPACK_IMPORTED_MODULE_0_three__[\"d\" /* BufferAttribute */](positionBuffer, 3));\n    if (hasNormal) bufferGeometry.addAttribute('normal', new __WEBPACK_IMPORTED_MODULE_0_three__[\"d\" /* BufferAttribute */](normalBuffer, 3));\n    if (hasUV) bufferGeometry.addAttribute('uv', new __WEBPACK_IMPORTED_MODULE_0_three__[\"d\" /* BufferAttribute */](uvBuffer, 2));\n    bufferGeometry.setIndex(new __WEBPACK_IMPORTED_MODULE_0_three__[\"d\" /* BufferAttribute */](new Uint32Array(indices), 1));\n    return bufferGeometry;\n\n    function exists(v, vertices) {\n        for (var i = 0; i < vertices.length; i++) {\n            if (v.equals(vertices[i])) return i;\n        }\n        return -1;\n    }\n}\n\n\n\n/***/ }),\n\n/***/ 72:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(11)(undefined);\n// imports\n\n\n// module\nexports.push([module.i, \".background-text{position:absolute;top:50%;left:0;z-index:1;width:100%;-webkit-transform:translateY(-50%);transform:translateY(-50%);text-align:center;font-size:60px}.background-buttons{position:absolute;top:0;left:10px;z-index:3}.background-buttons>p{margin-top:15px;color:#000}.background-buttons>button{background:#fff;padding:4px 6px;margin-top:5px;outline:none;border:1px solid #c4c4c4}.model-box{position:relative;z-index:2}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 73:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(11)(undefined);\n// imports\n\n\n// module\nexports.push([module.i, \".demo-block{width:100%;height:100%;background-color:#fff;border-radius:3px}.demo-block .demo-block-preview{width:50%;height:100%;float:left;position:relative}.demo-block .demo-block-code{width:50%;height:100%;background:#f9fafc;border-left:1px solid #dfe2e7;font-size:13px;float:left}.demo-block .demo-block-code pre code{font:normal 10pt Consolas,Monaco,monospace}.demo-block .demo-block-code .demo-block-code-box{width:100%;height:50%;position:relative;overflow:hidden}.demo-block .demo-block-code-box:after{content:\\\"\\\";display:block;position:absolute;bottom:0;left:0;width:90%;height:1px;background:-webkit-linear-gradient(left,#dfe2e7 80%,rgba(223,226,231,0))}.demo-block .demo-block-code-box h3{width:100%;padding:10px 20px;font-size:16px;font-weight:700;position:absolute}.demo-block .demo-block-code-box-content{position:absolute;top:40px;bottom:10px;left:20px;right:20px;overflow:auto}.demo-block .demo-block-code code{position:absolute;top:0;left:0}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 74:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(11)(undefined);\n// imports\n\n\n// module\nexports.push([module.i, \"*{margin:0;border:0;padding:0;box-sizing:border-box}li,ol,ul{list-style:none}a{color:#657180;text-decoration:none}.examples,body,html{width:100%;height:100%;color:#657180}body{background:#eee;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Helvetica,PingFang SC,Hiragino Sans GB,Microsoft YaHei,SimSun,sans-serif;background:#fff}.examples-header{position:absolute;top:0;width:100%;background:#f3f6fb;text-shadow:0 1px 0 hsla(0,0%,100%,.5);border-bottom:1px solid #dfe2e7;padding:15px 15px 15px 30px;line-height:20px}.examples-header .title{font-weight:700;font-size:18px;display:inline-block}.examples-header .github{color:#39f;display:inline-block;font-size:12px;float:right}.examples-content{width:100%;height:100%;padding-top:52px;overflow:hidden}.examples-menu{float:left;width:230px;height:100%;border-right:1px solid #dfe2e7;padding:10px 30px}.examples-menu .examples-menu-item{display:block;width:100%;height:30px;line-height:30px;font-size:14px;cursor:pointer}.examples-menu .examples-menu-item>a{display:block;width:100%;height:100%}.examples-menu .examples-menu-title{display:block;width:100%;padding:6px 0;margin-top:10px;font-size:14px;font-weight:700}.examples-menu .examples-menu-item:hover>a{color:#39f}.examples-pages{height:100%;overflow:hidden}.example-loading{position:absolute;top:0;left:0;width:100%;height:100%;text-align:center}.example-loading:before{border-radius:100%;margin:2px;border:3px solid #20a0ff;border-bottom-color:transparent;height:36px;width:36px;-webkit-animation:loading-rotate .75s 0s linear infinite;animation:loading-rotate .75s 0s linear infinite}.example-loading:after,.example-loading:before{content:\\\"\\\";display:inline-block;vertical-align:middle}.example-loading:after{height:100%;width:0}@-webkit-keyframes loading-rotate{0%{-webkit-transform:rotate(0) scale(1);transform:rotate(0) scale(1)}50%{-webkit-transform:rotate(180deg) scale(.6);transform:rotate(180deg) scale(.6)}to{-webkit-transform:rotate(1turn) scale(1);transform:rotate(1turn) scale(1)}}@keyframes loading-rotate{0%{-webkit-transform:rotate(0) scale(1);transform:rotate(0) scale(1)}50%{-webkit-transform:rotate(180deg) scale(.6);transform:rotate(180deg) scale(.6)}to{-webkit-transform:rotate(1turn) scale(1);transform:rotate(1turn) scale(1)}}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 75:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ })\n\n},[25]);\n\n\n// WEBPACK FOOTER //\n// static/js/app.3abf6a1216817295293e.js","\n/* styles */\nrequire(\"!!vue-style-loader!css-loader?{\\\"minimize\\\":true}!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-5d8f5ef3\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=styles&index=0!./demo-block.vue\")\n\nvar Component = require(\"!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=script&index=0!./demo-block.vue\"),\n  /* template */\n  require(\"!!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5d8f5ef3\\\"}!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=template&index=0!./demo-block.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./examples/components/demo-block.vue\n// module id = 2\n// module chunks = 1","var Component = require(\"!../node_modules/_vue-loader@11.3.4@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=script&index=0!./model-collada.vue\"),\n  /* template */\n  null,\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/model-collada.vue\n// module id = 22\n// module chunks = 1","import Vue from 'vue'\r\nimport Router from 'vue-router'\r\n// import DemoBasic from '../pages/demo-basic'\r\n// import DemoEvent from '../pages/demo-event'\r\n// import DemoBackground from '../pages/demo-background'\r\n// import DemoRotate from '../pages/demo-rotate'\r\n// import DemoObj from '../pages/demo-obj'\r\n// // import DemoGltf from '../pages/demo-gltf'\r\n// import DemoStl from '../pages/demo-stl'\r\n// import DemoCollada from '../pages/demo-collada'\r\n// // import DemoSea3d from '../pages/demo-sea3d'\r\n// import DemoJson from '../pages/demo-json'\r\n\r\nimport { pages } from '../pages'\r\n\r\nVue.use( Router )\r\n\r\nconst routes = pages.map( page => {\r\n    \r\n    const name = page.name;\r\n\r\n    return {\r\n        path: `/${ name }`,\r\n        name,\r\n        component: page\r\n    }\r\n} )\r\n\r\nroutes.push( {\r\n    path: '*',\r\n    redirect: '/demo-basic'\r\n} )\r\n\r\nexport default new Router( { routes } )\n\n\n// WEBPACK FOOTER //\n// ./examples/router/index.js","\n/* styles */\nrequire(\"!!vue-style-loader!css-loader?{\\\"minimize\\\":true}!../node_modules/_vue-loader@11.3.4@vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-7a736b78\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n\nvar Component = require(\"!../node_modules/_vue-loader@11.3.4@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=script&index=0!./App.vue\"),\n  /* template */\n  require(\"!!../node_modules/_vue-loader@11.3.4@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7a736b78\\\"}!../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=template&index=0!./App.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./examples/App.vue\n// module id = 24\n// module chunks = 1","import Vue from 'vue'\r\nimport App from './App.vue'\r\nimport router from './router'\r\n\r\nnew Vue({\r\n  el: '#app',\r\n  router,\r\n  render: h => h(App)\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./examples/index.js","\n/* styles */\nrequire(\"!!vue-style-loader!css-loader?{\\\"minimize\\\":true}!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-4d9d1678\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=styles&index=0!./demo-background.vue\")\n\nvar Component = require(\"!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=script&index=0!./demo-background.vue\"),\n  /* template */\n  require(\"!!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4d9d1678\\\"}!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=template&index=0!./demo-background.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./examples/pages/demo-background.vue\n// module id = 254\n// module chunks = 1","var Component = require(\"!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=script&index=0!./demo-basic.vue\"),\n  /* template */\n  require(\"!!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-333e0508\\\"}!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=template&index=0!./demo-basic.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./examples/pages/demo-basic.vue\n// module id = 255\n// module chunks = 1","var Component = require(\"!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=script&index=0!./demo-collada.vue\"),\n  /* template */\n  require(\"!!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-678f988c\\\"}!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=template&index=0!./demo-collada.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./examples/pages/demo-collada.vue\n// module id = 256\n// module chunks = 1","var Component = require(\"!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=script&index=0!./demo-event.vue\"),\n  /* template */\n  require(\"!!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-cb36e518\\\"}!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=template&index=0!./demo-event.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./examples/pages/demo-event.vue\n// module id = 257\n// module chunks = 1","var Component = require(\"!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=script&index=0!./demo-json.vue\"),\n  /* template */\n  require(\"!!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0b02f5fe\\\"}!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=template&index=0!./demo-json.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./examples/pages/demo-json.vue\n// module id = 258\n// module chunks = 1","var Component = require(\"!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=script&index=0!./demo-obj-mtl.vue\"),\n  /* template */\n  require(\"!!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4f64b4ae\\\"}!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=template&index=0!./demo-obj-mtl.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./examples/pages/demo-obj-mtl.vue\n// module id = 259\n// module chunks = 1","import DemoBasic from './demo-basic'\r\nimport DemoEvent from './demo-event'\r\nimport DemoBackground from './demo-background'\r\nimport DemoRotate from './demo-rotate'\r\nimport DemoObj from './demo-obj'\r\nimport DemoObjMtl from './demo-obj-mtl'\r\n// import DemoGltf from './demo-gltf'\r\nimport DemoStl from './demo-stl'\r\nimport DemoCollada from './demo-collada'\r\n// import DemoSea3d from './demo-sea3d'\r\nimport DemoJson from './demo-json'\r\n\r\nconst pages = [\r\n    DemoBasic,\r\n    DemoEvent,\r\n    DemoBackground,\r\n    DemoRotate,\r\n    DemoObj,\r\n    DemoObjMtl,\r\n    DemoStl,\r\n    DemoCollada,\r\n    DemoJson\r\n]\r\n\r\nexport { pages };\r\n\n\n\n// WEBPACK FOOTER //\n// ./examples/pages/index.js","var Component = require(\"!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=script&index=0!./demo-obj.vue\"),\n  /* template */\n  require(\"!!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2d85b9d1\\\"}!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=template&index=0!./demo-obj.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./examples/pages/demo-obj.vue\n// module id = 260\n// module chunks = 1","var Component = require(\"!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=script&index=0!./demo-rotate.vue\"),\n  /* template */\n  require(\"!!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-756fcd71\\\"}!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=template&index=0!./demo-rotate.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./examples/pages/demo-rotate.vue\n// module id = 261\n// module chunks = 1","var Component = require(\"!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=script&index=0!./demo-stl.vue\"),\n  /* template */\n  require(\"!!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1ff21105\\\"}!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=template&index=0!./demo-stl.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./examples/pages/demo-stl.vue\n// module id = 262\n// module chunks = 1","var Component = require(\"!../node_modules/_vue-loader@11.3.4@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=script&index=0!./model-stl.vue\"),\n  /* template */\n  null,\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/model-stl.vue\n// module id = 263\n// module chunks = 1","var Component = require(\"!../node_modules/_vue-loader@11.3.4@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=script&index=0!./model-three.vue\"),\n  /* template */\n  null,\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/model-three.vue\n// module id = 264\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('model-obj', {\n    attrs: {\n      \"backgroundAlpha\": 0,\n      \"src\": \"static/models/obj/tree.obj\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"example-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_vue-loader@11.3.4@vue-loader/lib/template-compiler?{\"id\":\"data-v-0b02f5fe\"}!./~/_vue-loader@11.3.4@vue-loader/lib/selector.js?type=template&index=0!./examples/pages/demo-json.vue\n// module id = 265\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('model-stl', {\n    attrs: {\n      \"backgroundAlpha\": 0,\n      \"src\": \"static/models/stl/gear.stl\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"example-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_vue-loader@11.3.4@vue-loader/lib/template-compiler?{\"id\":\"data-v-1ff21105\"}!./~/_vue-loader@11.3.4@vue-loader/lib/selector.js?type=template&index=0!./examples/pages/demo-stl.vue\n// module id = 266\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('model-obj', {\n    attrs: {\n      \"backgroundAlpha\": 0,\n      \"src\": \"static/models/obj/tree.obj\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"example-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_vue-loader@11.3.4@vue-loader/lib/template-compiler?{\"id\":\"data-v-2d85b9d1\"}!./~/_vue-loader@11.3.4@vue-loader/lib/selector.js?type=template&index=0!./examples/pages/demo-obj.vue\n// module id = 267\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('model-three', {\n    attrs: {\n      \"backgroundAlpha\": 0,\n      \"src\": \"static/models/json/scene.json\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"example-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_vue-loader@11.3.4@vue-loader/lib/template-compiler?{\"id\":\"data-v-333e0508\"}!./~/_vue-loader@11.3.4@vue-loader/lib/selector.js?type=template&index=0!./examples/pages/demo-basic.vue\n// module id = 268\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('p', {\n    staticClass: \"background-text\"\n  }, [_vm._v(\"\\n            Vue\"), _c('br'), _vm._v(\"3D\"), _c('br'), _vm._v(\"Model\"), _c('br'), _vm._v(\"Background\\n        \")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"background-buttons\"\n  }, [_c('p', [_vm._v(\"Color\")]), _vm._v(\" \"), _c('button', {\n    on: {\n      \"click\": function($event) {\n        _vm.bgColor = '#ff0'\n      }\n    }\n  }, [_vm._v(\"#ff0\")]), _vm._v(\" \"), _c('button', {\n    on: {\n      \"click\": function($event) {\n        _vm.bgColor = '#f00'\n      }\n    }\n  }, [_vm._v(\"#f00\")]), _vm._v(\" \"), _c('button', {\n    on: {\n      \"click\": function($event) {\n        _vm.bgColor = '#13ce66'\n      }\n    }\n  }, [_vm._v(\"#13ce66\")]), _vm._v(\" \"), _c('p', [_vm._v(\"Alpha\")]), _vm._v(\" \"), _c('button', {\n    on: {\n      \"click\": function($event) {\n        _vm.bgAlpha = 0.5\n      }\n    }\n  }, [_vm._v(\"0.5\")]), _vm._v(\" \"), _c('button', {\n    on: {\n      \"click\": function($event) {\n        _vm.bgAlpha = 1\n      }\n    }\n  }, [_vm._v(\"1\")]), _vm._v(\" \"), _c('button', {\n    on: {\n      \"click\": function($event) {\n        _vm.bgAlpha = 0\n      }\n    }\n  }, [_vm._v(\"0\")])]), _vm._v(\" \"), _c('model-obj', {\n    staticClass: \"model-box\",\n    attrs: {\n      \"backgroundAlpha\": _vm.bgAlpha,\n      \"backgroundColor\": _vm.bgColor,\n      \"src\": \"static/models/obj/tree.obj\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"example-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_vue-loader@11.3.4@vue-loader/lib/template-compiler?{\"id\":\"data-v-4d9d1678\"}!./~/_vue-loader@11.3.4@vue-loader/lib/selector.js?type=template&index=0!./examples/pages/demo-background.vue\n// module id = 269\n// module chunks = 1","<template>\r\n    <div class=\"examples\">\r\n        <div class=\"examples-header\">\r\n            <a href=\"https://github.com/hujiulong/vue-3d-model\" class=\"title\">Vue3DModel</a>\r\n            <a href=\"https://github.com/hujiulong/vue-3d-model\" class=\"github\">View on GitHub</a>\r\n        </div>\r\n        <div class=\"examples-content\">\r\n            <ul class=\"examples-menu\">\r\n                <li class=\"examples-menu-title\">Examples</li>\r\n                <li class=\"examples-menu-item\">\r\n                    <router-link to=\"demo-basic\">basic</router-link>\r\n                </li>\r\n                <li class=\"examples-menu-item\">\r\n                    <router-link to=\"demo-rotate\">rotate</router-link>\r\n                </li>\r\n                <li class=\"examples-menu-item\">\r\n                    <router-link to=\"demo-background\">background</router-link>\r\n                </li>\r\n                <li class=\"examples-menu-title\">Events</li>\r\n                <li class=\"examples-menu-item\">\r\n                    <router-link to=\"demo-event\">mousemove</router-link>\r\n                </li>\r\n                <li class=\"examples-menu-title\">Model Formats</li>\r\n                <li class=\"examples-menu-item\">\r\n                    <router-link to=\"demo-basic\">JSON Model (.json)</router-link>\r\n                </li>\r\n                <li class=\"examples-menu-item\">\r\n                    <router-link to=\"demo-obj\">OBJ Model (.obj)</router-link>\r\n                </li>\r\n                <li class=\"examples-menu-item\">\r\n                    <router-link to=\"demo-obj-mtl\">OBJ + MTL (.obj + .mtl)</router-link>\r\n                </li>\r\n                <li class=\"examples-menu-item\">\r\n                    <router-link to=\"demo-stl\">STL Model (.stl)</router-link>\r\n                </li>\r\n                <li class=\"examples-menu-item\">\r\n                    <router-link to=\"demo-collada\">Collada Model (.dae)</router-link>\r\n                </li>\r\n            </ul>\r\n            <div class=\"examples-pages\">\r\n                <router-view></router-view>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n\r\nexport default {\r\n    name: 'app'\r\n}\r\n</script>\r\n<style>\r\n* {\r\n    margin: 0;\r\n    border: 0;\r\n    padding: 0;\r\n    box-sizing: border-box;\r\n}\r\n\r\nul, ol, li {\r\n    list-style: none;\r\n}\r\n\r\na {\r\n    color: #657180;\r\n    text-decoration: none;\r\n}\r\n\r\nhtml, body, .examples {\r\n    width: 100%;\r\n    height: 100%;\r\n    color: #657180;\r\n}\r\n\r\nbody {\r\n    background: #eee;\r\n    font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto,\r\n                 \"Helvetica Neue\", Helvetica, \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\",\r\n                 SimSun, sans-serif;\r\n    background: #fff;\r\n}\r\n\r\n.examples-header {\r\n    position: absolute;\r\n    top: 0;\r\n    width: 100%;\r\n    background: #f3f6fb;\r\n    text-shadow: 0 1px 0 rgba(255,255,255,0.5);\r\n    border-bottom: solid 1px #dfe2e7;\r\n    padding: 15px 15px 15px 30px;\r\n    line-height: 20px;\r\n}\r\n\r\n.examples-header .title {\r\n    font-weight: bold;\r\n    font-size: 18px;\r\n    display: inline-block;\r\n}\r\n\r\n.examples-header .github {\r\n    color: #39f;\r\n    display: inline-block;\r\n    font-size: 12px;\r\n    float: right;\r\n}\r\n\r\n.examples-content {\r\n    width: 100%;\r\n    height: 100%;\r\n    padding-top: 52px;\r\n    overflow: hidden;\r\n}\r\n\r\n.examples-menu {\r\n    float: left;\r\n    width: 230px;\r\n    height: 100%;\r\n    border-right: solid 1px #dfe2e7;\r\n    padding: 10px 30px;\r\n}\r\n\r\n.examples-menu .examples-menu-item {\r\n    display: block;\r\n    width: 100%;\r\n    height: 30px;\r\n    line-height: 30px;\r\n    font-size: 14px;\r\n    cursor: pointer;\r\n}\r\n\r\n.examples-menu .examples-menu-item > a {\r\n    display: block;\r\n    width: 100%;\r\n    height: 100%;\r\n}\r\n\r\n.examples-menu .examples-menu-title {\r\n    display: block;\r\n    width: 100%;\r\n    padding: 6px 0;\r\n    margin-top: 10px;\r\n    font-size: 14px;\r\n    font-weight: bold;\r\n}\r\n\r\n.examples-menu .examples-menu-item:hover > a {\r\n    color: #39f;\r\n}\r\n\r\n.examples-pages {\r\n    height: 100%;\r\n    overflow: hidden;\r\n}\r\n\r\n.example-loading {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    text-align: center;\r\n}\r\n.example-loading::before {\r\n    content: '';\r\n    border-radius: 100%;\r\n    margin: 2px;\r\n    border: 3px solid #20a0ff;\r\n    border-bottom-color: transparent;\r\n    height: 36px;\r\n    width: 36px;\r\n    display: inline-block;\r\n    animation: loading-rotate .75s 0s linear infinite;\r\n    vertical-align: middle;\r\n}\r\n\r\n.example-loading::after {\r\n    content: '';\r\n    display: inline-block;\r\n    height: 100%;\r\n    width: 0;\r\n    vertical-align: middle;\r\n}\r\n\r\n@keyframes loading-rotate{\r\n    0% {\r\n        transform: rotate(0) scale(1);\r\n    }\r\n    50% {\r\n        transform: rotate(180deg) scale(.6);\r\n    }\r\n    100% {\r\n        transform: rotate(360deg) scale(1);\r\n    }\r\n}\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// App.vue?7b31da8a","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('model-obj', {\n    attrs: {\n      \"backgroundAlpha\": 0,\n      \"src\": \"static/models/obj/male02/male02.obj\",\n      \"mtl\": \"static/models/obj/male02/male02.mtl\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"example-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_vue-loader@11.3.4@vue-loader/lib/template-compiler?{\"id\":\"data-v-4f64b4ae\"}!./~/_vue-loader@11.3.4@vue-loader/lib/selector.js?type=template&index=0!./examples/pages/demo-obj-mtl.vue\n// module id = 270\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"demo-block\"\n  }, [_c('div', {\n    staticClass: \"demo-block-preview\"\n  }, [_vm._t(\"preview\")], 2), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code\"\n  }, [_c('div', {\n    staticClass: \"demo-block-code-box\"\n  }, [_c('h3', [_vm._v(\"Vue Component & Webpack\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code-box-content\"\n  }, [_c('pre', [_vm._v(\"                    \"), _c('code', {\n    ref: \"vueCode\",\n    staticClass: \"html\"\n  }, [_vm._v(_vm._s(_vm._f(\"code\")(_vm.vueCode)))]), _vm._v(\"\\n                \")])])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code-box\"\n  }, [_c('h3', [_vm._v(\"HTML & JS\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code-box-content\"\n  }, [_c('pre', [_vm._v(\"                    \"), _c('code', {\n    ref: \"htmlCode\",\n    staticClass: \"html\"\n  }, [_vm._v(_vm._s(_vm._f(\"code\")(_vm.htmlCode)))]), _vm._v(\"\\n                \")])])])])])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_vue-loader@11.3.4@vue-loader/lib/template-compiler?{\"id\":\"data-v-5d8f5ef3\"}!./~/_vue-loader@11.3.4@vue-loader/lib/selector.js?type=template&index=0!./examples/components/demo-block.vue\n// module id = 271\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('model-collada', {\n    attrs: {\n      \"backgroundAlpha\": 0,\n      \"src\": \"static/models/collada/elf/elf.dae\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"example-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_vue-loader@11.3.4@vue-loader/lib/template-compiler?{\"id\":\"data-v-678f988c\"}!./~/_vue-loader@11.3.4@vue-loader/lib/selector.js?type=template&index=0!./examples/pages/demo-collada.vue\n// module id = 272\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('model-collada', {\n    ref: \"collada\",\n    attrs: {\n      \"rotation\": _vm.rotation,\n      \"src\": \"static/models/collada/elf/elf.dae\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"example-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_vue-loader@11.3.4@vue-loader/lib/template-compiler?{\"id\":\"data-v-756fcd71\"}!./~/_vue-loader@11.3.4@vue-loader/lib/selector.js?type=template&index=0!./examples/pages/demo-rotate.vue\n// module id = 273\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"examples\"\n  }, [_vm._m(0), _vm._v(\" \"), _c('div', {\n    staticClass: \"examples-content\"\n  }, [_c('ul', {\n    staticClass: \"examples-menu\"\n  }, [_c('li', {\n    staticClass: \"examples-menu-title\"\n  }, [_vm._v(\"Examples\")]), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-basic\"\n    }\n  }, [_vm._v(\"basic\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-rotate\"\n    }\n  }, [_vm._v(\"rotate\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-background\"\n    }\n  }, [_vm._v(\"background\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-title\"\n  }, [_vm._v(\"Events\")]), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-event\"\n    }\n  }, [_vm._v(\"mousemove\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-title\"\n  }, [_vm._v(\"Model Formats\")]), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-basic\"\n    }\n  }, [_vm._v(\"JSON Model (.json)\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-obj\"\n    }\n  }, [_vm._v(\"OBJ Model (.obj)\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-obj-mtl\"\n    }\n  }, [_vm._v(\"OBJ + MTL (.obj + .mtl)\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-stl\"\n    }\n  }, [_vm._v(\"STL Model (.stl)\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-collada\"\n    }\n  }, [_vm._v(\"Collada Model (.dae)\")])], 1)]), _vm._v(\" \"), _c('div', {\n    staticClass: \"examples-pages\"\n  }, [_c('router-view')], 1)])])\n},staticRenderFns: [function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"examples-header\"\n  }, [_c('a', {\n    staticClass: \"title\",\n    attrs: {\n      \"href\": \"https://github.com/hujiulong/vue-3d-model\"\n    }\n  }, [_vm._v(\"Vue3DModel\")]), _vm._v(\" \"), _c('a', {\n    staticClass: \"github\",\n    attrs: {\n      \"href\": \"https://github.com/hujiulong/vue-3d-model\"\n    }\n  }, [_vm._v(\"View on GitHub\")])])\n}]}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_vue-loader@11.3.4@vue-loader/lib/template-compiler?{\"id\":\"data-v-7a736b78\"}!./~/_vue-loader@11.3.4@vue-loader/lib/selector.js?type=template&index=0!./examples/App.vue\n// module id = 274\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticStyle: {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"border\": \"0\",\n      \"padding\": \"0\"\n    }\n  }, [(_vm.suportWebGL) ? _c('canvas', {\n    ref: \"canvas\",\n    staticStyle: {\n      \"width\": \"100%\",\n      \"height\": \"100%\"\n    }\n  }) : _c('div', [_vm._t(\"default\", [_vm._v(\"\\n            Your browser does not seem to support \"), _c('a', {\n    staticStyle: {\n      \"color\": \"#000\"\n    },\n    attrs: {\n      \"href\": \"http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation\"\n    }\n  }, [_vm._v(\"WebGL\")]), _vm._v(\".\"), _c('br'), _vm._v(\"'\\n        \")])], 2)])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_vue-loader@11.3.4@vue-loader/lib/template-compiler?{\"id\":\"data-v-b82a4cf6\"}!./~/_vue-loader@11.3.4@vue-loader/lib/selector.js?type=template&index=0!./src/model-mixin.vue\n// module id = 275\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('model-obj', {\n    ref: \"model\",\n    attrs: {\n      \"backgroundAlpha\": 0,\n      \"src\": \"static/models/obj/tree.obj\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad,\n      \"on-mousemove\": _vm.onMouseMove\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"example-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_vue-loader@11.3.4@vue-loader/lib/template-compiler?{\"id\":\"data-v-cb36e518\"}!./~/_vue-loader@11.3.4@vue-loader/lib/selector.js?type=template&index=0!./examples/pages/demo-event.vue\n// module id = 276\n// module chunks = 1","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/_css-loader@0.28.4@css-loader/index.js?{\\\"minimize\\\":true}!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/style-compiler/index.js?{\\\"id\\\":\\\"data-v-4d9d1678\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector.js?type=styles&index=0!./demo-background.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/_vue-style-loader@2.0.5@vue-style-loader/lib/addStylesClient.js\")(\"7ef4e056\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_vue-style-loader@2.0.5@vue-style-loader!./~/_css-loader@0.28.4@css-loader?{\"minimize\":true}!./~/_vue-loader@11.3.4@vue-loader/lib/style-compiler?{\"id\":\"data-v-4d9d1678\",\"scoped\":false,\"hasInlineConfig\":false}!./~/_vue-loader@11.3.4@vue-loader/lib/selector.js?type=styles&index=0!./examples/pages/demo-background.vue\n// module id = 278\n// module chunks = 1","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/_css-loader@0.28.4@css-loader/index.js?{\\\"minimize\\\":true}!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/style-compiler/index.js?{\\\"id\\\":\\\"data-v-5d8f5ef3\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector.js?type=styles&index=0!./demo-block.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/_vue-style-loader@2.0.5@vue-style-loader/lib/addStylesClient.js\")(\"ef4a88ea\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_vue-style-loader@2.0.5@vue-style-loader!./~/_css-loader@0.28.4@css-loader?{\"minimize\":true}!./~/_vue-loader@11.3.4@vue-loader/lib/style-compiler?{\"id\":\"data-v-5d8f5ef3\",\"scoped\":false,\"hasInlineConfig\":false}!./~/_vue-loader@11.3.4@vue-loader/lib/selector.js?type=styles&index=0!./examples/components/demo-block.vue\n// module id = 279\n// module chunks = 1","<template>\r\n    <div class=\"demo-block\">\r\n        <div class=\"demo-block-preview\">\r\n            <slot name=\"preview\"></slot>\r\n        </div>\r\n        <div class=\"demo-block-code\">\r\n            <div class=\"demo-block-code-box\">\r\n                <h3>Vue Component & Webpack</h3>\r\n                <div class=\"demo-block-code-box-content\">\r\n                    <pre>\r\n                        <code ref=\"vueCode\" class=\"html\">{{ vueCode | code }}</code>\r\n                    </pre>\r\n                </div>\r\n            </div>\r\n            <div class=\"demo-block-code-box\">\r\n                <h3>HTML & JS</h3>\r\n                <div class=\"demo-block-code-box-content\">\r\n                    <pre>\r\n                        <code ref=\"htmlCode\" class=\"html\">{{ htmlCode | code }}</code>\r\n                    </pre>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport 'highlight.js/styles/github.css';\r\nimport hljs from 'highlight.js'\r\n\r\nconst codeHandler = code => {\r\n    const scripts = `<script src=\"vue.js\"><\\/script>\r\n    <script src=\"vue-3d-model.min.js\"><\\/script>`;\r\n\r\n    return code.replace( /#scripts#/ig, scripts );\r\n}\r\n\r\nexport default {\r\n    name: 'app',\r\n    props: {\r\n        vueCode: String,\r\n        htmlCode: {\r\n            type: String,\r\n            default: '// TODO'\r\n        }\r\n    },\r\n    mounted () {\r\n        hljs.highlightBlock( this.$refs.vueCode );\r\n        hljs.highlightBlock( this.$refs.htmlCode );\r\n    },\r\n    data () {\r\n    \treturn {}\r\n    },\r\n    filters: {\r\n        code ( val ) {\r\n            return codeHandler( val );\r\n        }\r\n    },\r\n    components: {\r\n\r\n    }\r\n}\r\n</script>\r\n<style>\r\n    .demo-block {\r\n        width: 100%;\r\n        height: 100%;\r\n        background-color: #fff;\r\n        border-radius: 3px;\r\n    }\r\n\r\n    .demo-block .demo-block-preview {\r\n        width: 50%;\r\n        height: 100%;\r\n        float: left;\r\n        position: relative;\r\n    }\r\n\r\n    .demo-block .demo-block-code {\r\n        width: 50%;\r\n        height: 100%;\r\n        background: #f9fafc;\r\n        border-left: solid 1px #dfe2e7;\r\n        font-size: 13px;\r\n        float: left;\r\n    }\r\n    \r\n\r\n    .demo-block .demo-block-code pre code {\r\n        font: normal 10pt Consolas, Monaco, monospace;\r\n    }\r\n\r\n\r\n    .demo-block .demo-block-code .demo-block-code-box {\r\n        width: 100%;\r\n        height: 50%;\r\n        position: relative;\r\n        overflow: hidden;\r\n    }\r\n\r\n    .demo-block .demo-block-code-box::after {\r\n        content: '';\r\n        display: block;\r\n        position: absolute;\r\n        bottom: 0;\r\n        left: 0;\r\n        width: 90%;\r\n        height: 1px;\r\n        background: -webkit-linear-gradient(left, #dfe2e7 80%, rgba(223,226,231,0) 100%);\r\n    }\r\n\r\n    .demo-block .demo-block-code-box h3 {\r\n        width: 100%;\r\n        padding: 10px 20px;\r\n        font-size: 16px;\r\n        font-weight: bold;\r\n        position: absolute;\r\n    }\r\n\r\n    .demo-block .demo-block-code-box-content {\r\n        position: absolute;\r\n        top: 40px;\r\n        bottom: 10px;\r\n        left: 20px;\r\n        right: 20px;\r\n        overflow: auto;\r\n    }\r\n\r\n    .demo-block .demo-block-code code {\r\n        position: absolute;\r\n        top: 0;\r\n        left: 0;\r\n    }\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// demo-block.vue?efc057b8","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../node_modules/_css-loader@0.28.4@css-loader/index.js?{\\\"minimize\\\":true}!../node_modules/_vue-loader@11.3.4@vue-loader/lib/style-compiler/index.js?{\\\"id\\\":\\\"data-v-7a736b78\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector.js?type=styles&index=0!./App.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../node_modules/_vue-style-loader@2.0.5@vue-style-loader/lib/addStylesClient.js\")(\"c86a7b1a\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_vue-style-loader@2.0.5@vue-style-loader!./~/_css-loader@0.28.4@css-loader?{\"minimize\":true}!./~/_vue-loader@11.3.4@vue-loader/lib/style-compiler?{\"id\":\"data-v-7a736b78\",\"scoped\":false,\"hasInlineConfig\":false}!./~/_vue-loader@11.3.4@vue-loader/lib/selector.js?type=styles&index=0!./examples/App.vue\n// module id = 280\n// module chunks = 1","<template>\r\n    <demo-block :vue-code=\"code\" :html-code=\"htmlCode\">\r\n        <template slot=\"preview\">\r\n            <p class=\"background-text\">\r\n                Vue<br>3D<br>Model<br>Background\r\n            </p>\r\n            <div class=\"background-buttons\">\r\n                <p>Color</p>\r\n                <button @click=\"bgColor = '#ff0'\">#ff0</button>\r\n                <button @click=\"bgColor = '#f00'\">#f00</button>\r\n                <button @click=\"bgColor = '#13ce66'\">#13ce66</button>\r\n                <p>Alpha</p>\r\n                <button @click=\"bgAlpha = 0.5\">0.5</button>\r\n                <button @click=\"bgAlpha = 1\">1</button>\r\n                <button @click=\"bgAlpha = 0\">0</button>\r\n            </div>\r\n            <model-obj\r\n                class=\"model-box\"\r\n                :backgroundAlpha=\"bgAlpha\"\r\n                :backgroundColor=\"bgColor\"\r\n                @on-load=\"onLoad\"\r\n                src=\"static/models/obj/tree.obj\"></model-obj>\r\n            <div class=\"example-loading\" v-show=\"loading\"></div>\r\n        </template>\r\n    </demo-block>\r\n</template>\r\n<style>\r\n    .background-text {\r\n        position: absolute;\r\n        top: 50%;\r\n        left: 0;\r\n        z-index: 1;\r\n        width: 100%;\r\n        transform: translateY(-50%);\r\n        text-align: center; \r\n        font-size: 60px;\r\n    }\r\n    .background-buttons {\r\n        position: absolute;\r\n        top: 0;\r\n        left: 10px;\r\n        z-index: 3;\r\n    }\r\n\r\n    .background-buttons > p {\r\n        margin-top: 15px;\r\n        color: #000;\r\n    }\r\n\r\n    .background-buttons > button {\r\n        background: #fff;\r\n        padding: 4px 6px;\r\n        margin-top: 5px;\r\n        outline: none;\r\n        border: 1px solid #c4c4c4;\r\n    }\r\n\r\n    .model-box {\r\n        position: relative;\r\n        z-index: 2;\r\n    }\r\n</style>\r\n\r\n<script>\r\nimport DemoBlock from '../components/demo-block';\r\nimport ModelObj from '../../src/model-obj.vue'\r\n\r\nconst code = `\r\n<template>\r\n    <p class=\"background-text\">\r\n        Vue<br>3D<br>Model<br>Background\r\n    </p>\r\n    <div class=\"background-buttons\">\r\n        <p>Color</p>\r\n        <button @click=\"bgColor = '#ff0'\">#ff0</button>\r\n        <button @click=\"bgColor = '#f00'\">#f00</button>\r\n        <button @click=\"bgColor = '#13ce66'\">#13ce66</button>\r\n        <p>Alpha</p>\r\n        <button @click=\"bgAlpha = 0.5\">0.5</button>\r\n        <button @click=\"bgAlpha = 1\">1</button>\r\n        <button @click=\"bgAlpha = 0\">0</button>\r\n    </div>\r\n    <model-obj\r\n        :backgroundAlpha=\"bgAlpha\"\r\n        :backgroundColor=\"bgColor\"\r\n        src=\"static/models/obj/tree.obj\"></model-obj>\r\n</template>\r\n\r\n<script>\r\n    import { ModelObj } from 'vue-3d-model'\r\n\r\n    export default {\r\n        data () {\r\n            return {\r\n                bgColor: '#ff0',\r\n                bgAlpha: 0.5\r\n            }\r\n        },\r\n        components: {\r\n            ModelObj\r\n        }\r\n    }\r\n<\\/script>\r\n`\r\n\r\nconst htmlCode = `\r\n<body>\r\n    <div id=\"app\">\r\n        <p class=\"background-text\">\r\n            Vue<br>3D<br>Model<br>Background\r\n        </p>\r\n        <div class=\"background-buttons\">\r\n            <p>Color</p>\r\n            <button @click=\"bgColor = '#ff0'\">#ff0</button>\r\n            <button @click=\"bgColor = '#f00'\">#f00</button>\r\n            <button @click=\"bgColor = '#13ce66'\">#13ce66</button>\r\n            <p>Alpha</p>\r\n            <button @click=\"bgAlpha = 0.5\">0.5</button>\r\n            <button @click=\"bgAlpha = 1\">1</button>\r\n            <button @click=\"bgAlpha = 0\">0</button>\r\n        </div>\r\n        <model-obj\r\n            :backgroundAlpha=\"bgAlpha\"\r\n            :backgroundColor=\"bgColor\"\r\n            src=\"static/models/obj/tree.obj\"></model-obj>\r\n    </div>\r\n    #scripts#\r\n    <script>\r\n        new Vue({\r\n            el: '#app',\r\n            data: {\r\n                bgColor: '#ff0',\r\n                bgAlpha: 0.5\r\n            }\r\n        })\r\n    <\\/script>\r\n</body>\r\n`\r\n\r\nexport default {\r\n    name: 'demo-background',\r\n    data () {\r\n    \treturn {\r\n            code,\r\n            htmlCode,\r\n            loading: true,\r\n            bgColor: '#ff0',\r\n            bgAlpha: 0.5\r\n    \t}\r\n    },\r\n    methods: {\r\n        onLoad () {\r\n            this.loading = false;\r\n        },\r\n        setBackground ( color, alpha ) {\r\n\r\n        }\r\n    },\r\n    components: {\r\n        ModelObj,\r\n        DemoBlock\r\n    }\r\n}\r\n</script>\n\n\n// WEBPACK FOOTER //\n// demo-background.vue?1758268a","var Component = require(\"!../node_modules/_vue-loader@11.3.4@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=script&index=0!./model-obj.vue\"),\n  /* template */\n  null,\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/model-obj.vue\n// module id = 3\n// module chunks = 1","<template>\r\n    <demo-block :vue-code=\"code\" :html-code=\"htmlCode\">\r\n        <template slot=\"preview\">\r\n            <model-three :backgroundAlpha=\"0\"\r\n                @on-load=\"onLoad\"\r\n                src=\"static/models/json/scene.json\"></model-three>\r\n            <div class=\"example-loading\" v-show=\"loading\"></div>\r\n        </template>\r\n    </demo-block>\r\n</template>\r\n\r\n<script>\r\nimport DemoBlock from '../components/demo-block';\r\nimport ModelThree from '../../src/model-three.vue'\r\n\r\nconst code = `\r\n<template>\r\n    <model-three src=\"static/models/json/scene.json\"></model-three>\r\n</template>\r\n\r\n<script>\r\n    import { ModelThree } from 'vue-3d-model'\r\n\r\n    export default {\r\n        components: {\r\n            ModelThree\r\n        }\r\n    }\r\n<\\/script>\r\n`\r\n\r\nconst htmlCode = `\r\n<body>\r\n    <div id=\"app\">\r\n        <model-three src=\"static/models/json/scene.json\"></model-three>\r\n    </div>\r\n    #scripts#\r\n    <script>\r\n        new Vue({\r\n            el: '#app'\r\n        })\r\n    <\\/script>\r\n</body>\r\n`\r\n\r\nexport default {\r\n    name: 'demo-basic',\r\n    data () {\r\n    \treturn {\r\n            code,\r\n            htmlCode,\r\n            loading: true\r\n    \t}\r\n    },\r\n    methods: {\r\n        onLoad () {\r\n            this.loading = false;\r\n        }\r\n    },\r\n    components: {\r\n        ModelThree,\r\n        DemoBlock\r\n    }\r\n}\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// demo-basic.vue?9b7dffa6","<template>\r\n    <demo-block :vue-code=\"code\" :html-code=\"htmlCode\">\r\n        <template slot=\"preview\">\r\n            <model-collada :backgroundAlpha=\"0\"\r\n                @on-load=\"onLoad\"\r\n                src=\"static/models/collada/elf/elf.dae\"></model-collada>\r\n            <div class=\"example-loading\" v-show=\"loading\"></div>\r\n        </template>\r\n    </demo-block>\r\n</template>\r\n\r\n<script>\r\nimport DemoBlock from '../components/demo-block';\r\nimport ModelCollada from '../../src/model-collada.vue'\r\n\r\nconst code = `\r\n<template>\r\n    <model-collada src=\"static/models/collada/elf.dae\"></model-collada>\r\n</template>\r\n\r\n<script>\r\n    import { ModelCollada } from 'vue-3d-model'\r\n\r\n    export default {\r\n        components: {\r\n            ModelCollada\r\n        }\r\n    }\r\n<\\/script>\r\n`\r\n\r\nconst htmlCode = `\r\n<body>\r\n    <div id=\"app\">\r\n        <model-collada src=\"static/models/collada/elf.dae\"></model-collada>\r\n    </div>\r\n    #scripts#\r\n    <script>\r\n        new Vue({\r\n            el: '#app'\r\n        })\r\n    <\\/script>\r\n</body>\r\n`\r\n\r\nexport default {\r\n    name: 'demo-collada',\r\n    data () {\r\n    \treturn {\r\n            code,\r\n            htmlCode,\r\n            loading: true\r\n    \t}\r\n    },\r\n    methods: {\r\n        onLoad () {\r\n            this.loading = false;\r\n        }\r\n    },\r\n    components: {\r\n        ModelCollada,\r\n        DemoBlock\r\n    }\r\n}\r\n</script>\n\n\n// WEBPACK FOOTER //\n// demo-collada.vue?78f715c9","<template>\r\n    <demo-block :vue-code=\"code\" :html-code=\"htmlCode\">\r\n        <template slot=\"preview\">\r\n            <model-obj :backgroundAlpha=\"0\"\r\n                ref=\"model\"\r\n                @on-load=\"onLoad\"\r\n                @on-mousemove=\"onMouseMove\"\r\n                src=\"static/models/obj/tree.obj\"></model-obj>\r\n            <div class=\"example-loading\" v-show=\"loading\"></div>\r\n        </template>\r\n    </demo-block>\r\n</template>\r\n\r\n<script>\r\nimport DemoBlock from '../components/demo-block';\r\nimport ModelObj from '../../src/model-obj.vue'\r\n\r\nconst code = `\r\n\r\n<template>\r\n    <model-obj \r\n        src=\"static/models/obj/tree.obj\"\r\n        @on-mousemove=\"onMouseMove\">\r\n    </model-obj>\r\n</template>\r\n\r\n<script>\r\n    import { ModelObj } from 'vue-3d-model'\r\n\r\n    export default {\r\n        data () {\r\n            return {\r\n                intersected: null\r\n            }\r\n        },\r\n        methods: {\r\n            onMouseMove ( event ) {\r\n\r\n                console.log( event );   // event: { distance, face, faceIndex, point, index, uv, object }\r\n\r\n                if ( !event ) {\r\n\r\n                    if ( this.intersected ) {\r\n                        this.intersected.material.color.setStyle( '#fff' );\r\n                    }\r\n\r\n                    this.intersected = null;\r\n                    return;\r\n                }\r\n\r\n                this.intersected = event.object;\r\n                this.intersected.material.color.setStyle( '#13ce66' );\r\n            }\r\n        },\r\n        components: {\r\n            ModelObj\r\n        }\r\n    }\r\n<\\/script>\r\n\r\n`\r\n\r\nconst htmlCode = `\r\n<body>\r\n    <div id=\"app\">\r\n        <model-obj \r\n            src=\"static/models/obj/tree.obj\"\r\n            @on-mousemove=\"onMouseMove\">\r\n        </model-obj>\r\n    </div>\r\n    #scripts#\r\n    <script>\r\n        new Vue({\r\n            el: '#app',\r\n            data: {\r\n                intersected: null\r\n            },\r\n            methods: {\r\n                onMouseMove ( event ) {\r\n\r\n                    console.log( event );   // event: { distance, face, faceIndex, point, index, uv, object }\r\n\r\n                    if ( !event ) {\r\n\r\n                        if ( this.intersected ) {\r\n                            this.intersected.material.color.setStyle( '#fff' );\r\n                        }\r\n\r\n                        this.intersected = null;\r\n                        return;\r\n                    }\r\n\r\n                    this.intersected = event.object;\r\n                    this.intersected.material.color.setStyle( '#13ce66' );\r\n                }\r\n            }\r\n        })\r\n    <\\/script>\r\n</body>\r\n`\r\n\r\nexport default {\r\n    name: 'demo-gltf',\r\n    data () {\r\n        return {\r\n            code,\r\n            htmlCode,\r\n            loading: true,\r\n            intersected: null\r\n        }\r\n    },\r\n    methods: {\r\n        onLoad () {\r\n            this.loading = false;\r\n        },\r\n        onMouseMove ( event ) {\r\n\r\n            console.log( event );\r\n\r\n            if ( !event ) {\r\n\r\n                if ( this.intersected ) {\r\n                    this.intersected.material.color.setStyle( '#fff' );\r\n                }\r\n\r\n                this.intersected = null;\r\n                return;\r\n            }\r\n\r\n            this.intersected = event.object;\r\n            this.intersected.material.color.setStyle( '#13ce66' );\r\n        }\r\n    },\r\n    components: {\r\n        ModelObj,\r\n        DemoBlock\r\n    }\r\n}\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// demo-event.vue?550922ef","<template>\r\n    <demo-block :vue-code=\"code\" :html-code=\"htmlCode\">\r\n        <template slot=\"preview\">\r\n            <model-obj :backgroundAlpha=\"0\"\r\n                @on-load=\"onLoad\"\r\n                src=\"static/models/obj/tree.obj\"></model-obj>\r\n            <div class=\"example-loading\" v-show=\"loading\"></div>\r\n        </template>\r\n    </demo-block>\r\n</template>\r\n\r\n<script>\r\nimport DemoBlock from '../components/demo-block';\r\nimport ModelObj from '../../src/model-obj.vue'\r\n\r\nconst code = `\r\n<template>\r\n    <model-obj src=\"static/models/obj/tree.obj\"></model-obj>\r\n</template>\r\n\r\n<script>\r\n    import { ModelObj } from 'vue-3d-model'\r\n\r\n    export default {\r\n        components: {\r\n            ModelObj\r\n        }\r\n    }\r\n<\\/script>\r\n`\r\n\r\nconst htmlCode = `\r\n<body>\r\n    <div id=\"app\">\r\n        <model-obj src=\"static/models/obj/tree.obj\"></model-obj>\r\n    </div>\r\n    #scripts#\r\n    <script>\r\n        new Vue({\r\n            el: '#app'\r\n        })\r\n    <\\/script>\r\n</body>\r\n`\r\n\r\nexport default {\r\n    name: 'demo-obj',\r\n    data () {\r\n    \treturn {\r\n            code,\r\n            htmlCode,\r\n            loading: true\r\n    \t}\r\n    },\r\n    methods: {\r\n        onLoad () {\r\n            this.loading = false;\r\n        }\r\n    },\r\n    components: {\r\n        ModelObj,\r\n        DemoBlock\r\n    }\r\n}\r\n</script>\n\n\n// WEBPACK FOOTER //\n// demo-json.vue?188bcd56","<template>\r\n    <demo-block :vue-code=\"code\" :html-code=\"htmlCode\">\r\n        <template slot=\"preview\">\r\n            <model-obj :backgroundAlpha=\"0\"\r\n                @on-load=\"onLoad\"\r\n                src=\"static/models/obj/male02/male02.obj\"\r\n                mtl=\"static/models/obj/male02/male02.mtl\"></model-obj>\r\n            <div class=\"example-loading\" v-show=\"loading\"></div>\r\n        </template>\r\n    </demo-block>\r\n</template>\r\n\r\n<script>\r\nimport DemoBlock from '../components/demo-block';\r\nimport ModelObj from '../../src/model-obj.vue'\r\n\r\nconst code = `\r\n<template>\r\n    <model-obj \r\n        src=\"static/models/obj/male02/male02.obj\"\r\n        mtl=\"static/models/obj/male02/male02.mtl\"></model-obj>\r\n</template>\r\n\r\n<script>\r\n    import { ModelObj } from 'vue-3d-model'\r\n\r\n    export default {\r\n        components: {\r\n            ModelObj\r\n        }\r\n    }\r\n<\\/script>\r\n`\r\n\r\nconst htmlCode = `\r\n<body>\r\n    <div id=\"app\">\r\n        <model-obj \r\n            src=\"static/models/obj/male02/male02.obj\"\r\n            mtl=\"static/models/obj/male02/male02.mtl\"></model-obj>\r\n    </div>\r\n    #scripts#\r\n    <script>\r\n        new Vue({\r\n            el: '#app'\r\n        })\r\n    <\\/script>\r\n</body>\r\n`\r\n\r\nexport default {\r\n    name: 'demo-obj-mtl',\r\n    data () {\r\n    \treturn {\r\n            code,\r\n            htmlCode,\r\n            loading: true\r\n    \t}\r\n    },\r\n    methods: {\r\n        onLoad () {\r\n            this.loading = false;\r\n        }\r\n    },\r\n    components: {\r\n        ModelObj,\r\n        DemoBlock\r\n    }\r\n}\r\n</script>\n\n\n// WEBPACK FOOTER //\n// demo-obj-mtl.vue?5e4dca07","<template>\r\n    <demo-block :vue-code=\"code\" :html-code=\"htmlCode\">\r\n        <template slot=\"preview\">\r\n            <model-obj :backgroundAlpha=\"0\"\r\n                @on-load=\"onLoad\"\r\n                src=\"static/models/obj/tree.obj\"></model-obj>\r\n            <div class=\"example-loading\" v-show=\"loading\"></div>\r\n        </template>\r\n    </demo-block>\r\n</template>\r\n\r\n<script>\r\nimport DemoBlock from '../components/demo-block';\r\nimport ModelObj from '../../src/model-obj.vue'\r\n\r\nconst code = `\r\n<template>\r\n    <model-obj src=\"static/models/obj/tree.obj\"></model-obj>\r\n</template>\r\n\r\n<script>\r\n    import { ModelObj } from 'vue-3d-model'\r\n\r\n    export default {\r\n        components: {\r\n            ModelObj\r\n        }\r\n    }\r\n<\\/script>\r\n`\r\n\r\nconst htmlCode = `\r\n<body>\r\n    <div id=\"app\">\r\n        <model-obj src=\"static/models/obj/tree.obj\"></model-obj>\r\n    </div>\r\n    #scripts#\r\n    <script>\r\n        new Vue({\r\n            el: '#app'\r\n        })\r\n    <\\/script>\r\n</body>\r\n`\r\n\r\nexport default {\r\n    name: 'demo-obj',\r\n    data () {\r\n    \treturn {\r\n            code,\r\n            htmlCode,\r\n            loading: true\r\n    \t}\r\n    },\r\n    methods: {\r\n        onLoad () {\r\n            this.loading = false;\r\n        }\r\n    },\r\n    components: {\r\n        ModelObj,\r\n        DemoBlock\r\n    }\r\n}\r\n</script>\n\n\n// WEBPACK FOOTER //\n// demo-obj.vue?4b9aebbd","<template>\r\n    <demo-block :vue-code=\"code\" :html-code=\"htmlCode\">\r\n        <template slot=\"preview\">\r\n            <model-collada\r\n                ref=\"collada\"\r\n                :rotation=\"rotation\"\r\n                @on-load=\"onLoad\"\r\n                src=\"static/models/collada/elf/elf.dae\"></model-collada>\r\n            <div class=\"example-loading\" v-show=\"loading\"></div>\r\n        </template>\r\n    </demo-block>\r\n</template>\r\n\r\n<script>\r\nimport DemoBlock from '../components/demo-block';\r\nimport ModelCollada from '../../src/model-collada.vue'\r\n\r\nconst code = `\r\n<template>\r\n    <model-collada\r\n        :rotation=\"rotation\"\r\n        @on-load=\"onLoad\"\r\n        src=\"static/models/collada/elf.dae\"></model-collada>\r\n</template>\r\n\r\n<script>\r\n    import { ModelCollada } from 'vue-3d-model'\r\n\r\n    export default {\r\n        data: {\r\n            rotation: {\r\n                x: 0,\r\n                y: 0,\r\n                z: 0\r\n            }\r\n        },\r\n        methods: {\r\n            onLoad () {\r\n                this.rotate();\r\n            },\r\n            rotate () {\r\n                this.rotation.y += 0.01;\r\n                requestAnimationFrame( this.rotate );\r\n            }\r\n        },\r\n        components: {\r\n            ModelCollada\r\n        }\r\n    }\r\n<\\/script>\r\n`\r\n\r\nconst htmlCode = `\r\n<body>\r\n    <div id=\"app\">\r\n        <model-collada\r\n            :rotation=\"rotation\"\r\n            @on-load=\"onLoad\"\r\n            src=\"static/models/collada/elf.dae\"></model-collada>\r\n    </div>\r\n    #scripts#\r\n    <script>\r\n        new Vue({\r\n            el: '#app',\r\n            data: {\r\n                rotation: {\r\n                    x: 0,\r\n                    y: 0,\r\n                    z: 0\r\n                }\r\n            },\r\n            methods: {\r\n                onLoad () {\r\n                    this.rotate();\r\n                },\r\n                rotate () {\r\n                    this.rotation.y += 0.01;\r\n                    requestAnimationFrame( this.rotate );\r\n                }\r\n            }\r\n        })\r\n    <\\/script>\r\n</body>\r\n`\r\n\r\nexport default {\r\n    name: 'demo-rotate',\r\n    data () {\r\n        return {\r\n            code,\r\n            htmlCode,\r\n            loading: true,\r\n            rotation: {\r\n                x: -Math.PI / 2,\r\n                y: 0,\r\n                z: 0\r\n            }\r\n        }\r\n    },\r\n    methods: {\r\n        onLoad () {\r\n            this.loading = false;\r\n            console.log( this.$refs.collada.object.rotation )\r\n            // this.rotation.z += 0.01;\r\n            // this.$refs.collada.object.rotation.z += 0.1;\r\n            this.rotate();\r\n        },\r\n        rotate () {\r\n            requestAnimationFrame( this.rotate );\r\n            this.rotation.z += 0.01;\r\n        }\r\n    },\r\n    components: {\r\n        ModelCollada,\r\n        DemoBlock\r\n    }\r\n}\r\n</script>\n\n\n// WEBPACK FOOTER //\n// demo-rotate.vue?72d193b2","<template>\r\n    <demo-block :vue-code=\"code\" :html-code=\"htmlCode\">\r\n        <template slot=\"preview\">\r\n            <model-stl :backgroundAlpha=\"0\"\r\n                @on-load=\"onLoad\"\r\n                src=\"static/models/stl/gear.stl\"></model-stl>\r\n            <div class=\"example-loading\" v-show=\"loading\"></div>\r\n        </template>\r\n    </demo-block>\r\n</template>\r\n\r\n<script>\r\nimport DemoBlock from '../components/demo-block';\r\nimport ModelStl from '../../src/model-stl.vue'\r\n\r\nconst code = `\r\n<template>\r\n    <model-stl src=\"static/models/stl/slotted_disk.stl\"></model-stl>\r\n</template>\r\n\r\n<script>\r\n    import { ModelStl } from 'vue-3d-model'\r\n\r\n    export default {\r\n        components: {\r\n            ModelStl\r\n        }\r\n    }\r\n<\\/script>\r\n`\r\n\r\nconst htmlCode = `\r\n<body>\r\n    <div id=\"app\">\r\n        <model-stl src=\"static/models/stl/slotted_disk.stl\"></model-stl>\r\n    </div>\r\n    #scripts#\r\n    <script>\r\n        new Vue({\r\n            el: '#app'\r\n        })\r\n    <\\/script>\r\n</body>\r\n`\r\n\r\nexport default {\r\n    name: 'demo-stl',\r\n    data () {\r\n    \treturn {\r\n            code,\r\n            htmlCode,\r\n            loading: true\r\n    \t}\r\n    },\r\n    methods: {\r\n        onLoad () {\r\n            this.loading = false;\r\n        }\r\n    },\r\n    components: {\r\n        ModelStl,\r\n        DemoBlock\r\n    }\r\n}\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// demo-stl.vue?1f99e73b","<script>\r\nimport { ColladaLoader } from './loaders/ColladaLoader'\r\nimport { toIndexed } from './util'\r\nimport mixin from './model-mixin.vue'\r\n\r\nexport default {\r\n    name: 'model-collada',\r\n    mixins: [ mixin ],\r\n    props: {\r\n        lights: {\r\n            type: Array,\r\n            default () {\r\n                return [\r\n                    {\r\n                        type: 'HemisphereLight',\r\n                        position: { x: 0, y: 1, z: 0 },\r\n                        skyColor: 0xaaaaff,\r\n                        groundColor: 0x806060,\r\n                        intensity: 0.2\r\n                    },\r\n                    {\r\n                        type: 'DirectionalLight',\r\n                        position: { x: 1, y: 1, z: 1 },\r\n                        color: 0xffffff,\r\n                        intensity: 0.8\r\n                    }\r\n                ]\r\n            }\r\n        },\r\n        smoothing: {\r\n            type: Boolean,\r\n            default: false\r\n        }\r\n    },\r\n    data () {\r\n\r\n        const loader = new ColladaLoader();\r\n        loader.options.convertUpAxis = true;\r\n\r\n        return {\r\n            loader\r\n        }\r\n    },\r\n    methods: {\r\n        load () {\r\n\r\n            if ( !this.src ) return;\r\n\r\n            if ( this.object ) {\r\n                this.scene.remove( this.object );\r\n            }\r\n\r\n            this.loader.load( this.src, collada => {\r\n\r\n                this.object = collada.scene;\r\n\r\n                this.scene.add( this.object );\r\n\r\n                this.updateCamera();\r\n\r\n                this.$emit( 'on-load' );\r\n\r\n            }, err => {\r\n\r\n                this.$emit( 'on-error', err );\r\n\r\n            } );\r\n\r\n        }\r\n    }\r\n}\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// model-collada.vue?7ac47316","<template>\r\n    <div style=\"width: 100%; height: 100%; margin: 0; border: 0; padding: 0;\">\r\n        <canvas v-if=\"suportWebGL\" ref=\"canvas\" style=\"width: 100%; height: 100%;\"></canvas>\r\n        <div v-else>\r\n            <slot>\r\n                Your browser does not seem to support <a href=\"http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation\" style=\"color:#000\">WebGL</a>.<br/>'\r\n            </slot>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport {\r\n    Object3D,\r\n    Vector2,\r\n    Vector3,\r\n    Color,\r\n    Scene,\r\n    Raycaster,\r\n    WebGLRenderer,\r\n    PerspectiveCamera,\r\n    AmbientLight,\r\n    HemisphereLight,\r\n    DirectionalLight\r\n} from 'three'\r\nimport { getSize, getCenter } from './util'\r\nimport { OrbitControls } from './controls/OrbitControls'\r\n\r\nconst suportWebGL = ( () => {\r\n\r\n    try {\r\n        var canvas = document.createElement( 'canvas' ); \r\n        return !! ( window.WebGLRenderingContext && ( canvas.getContext( 'webgl' ) || canvas.getContext( 'experimental-webgl' ) ) );\r\n    } catch ( e ) {\r\n        return false;\r\n    }\r\n\r\n} )();\r\n\r\nlet handler = null;\r\n\r\nexport default {\r\n    props: {\r\n        src: {\r\n            type: String\r\n        },\r\n        width: {\r\n            type: Number\r\n        },\r\n        height: {\r\n            type: Number\r\n        },\r\n        position: {\r\n            type: Object,\r\n            default () {\r\n                return { x: 0, y: 0, z: 0 }\r\n            }\r\n        },\r\n        rotation: {\r\n            type: Object,\r\n            default () {\r\n                return { x: 0, y: 0, z: 0 }\r\n            }\r\n        },\r\n        scale: {\r\n            type: Object,\r\n            default () {\r\n                return { x: 1, y: 1, z: 1 }\r\n            }\r\n        },\r\n        lights: {\r\n            type: Array,\r\n            default () {\r\n                return [];\r\n            }\r\n        },\r\n        cameraPosition: {\r\n            type: Object\r\n        },\r\n        cameraRotation: {\r\n            type: Object\r\n        },\r\n        cameraUp: {\r\n            type: Object\r\n        },\r\n        cameraLookAt: {\r\n            type: Object\r\n        },\r\n        backgroundColor: {\r\n            default: 0xffffff\r\n        },\r\n        backgroundAlpha: {\r\n            type: Number,\r\n            default: 1\r\n        },\r\n        controllable: {\r\n            type: Boolean,\r\n            default: true\r\n        }\r\n    },\r\n    data () {\r\n        return {\r\n            suportWebGL,\r\n            size: {\r\n                width: this.width,\r\n                height: this.height\r\n            },\r\n            object: null,\r\n            raycaster: new Raycaster(),\r\n            mouse: new Vector2(),\r\n            camera: new PerspectiveCamera( 45, 1, 0.001, 100000 ),\r\n            scene: new Scene(),\r\n            renderer: null,\r\n            controls: null,\r\n            allLights: [],\r\n            clock: typeof performance === 'undefined' ? Date : performance\r\n        }\r\n    },\r\n    computed: {\r\n        hasListener () {\r\n\r\n            // 判断是否有鼠标事件监听，用于减少不必要的拾取判断\r\n            const events = this._events;\r\n            let result = {};\r\n\r\n            [ 'on-mousemove', 'on-mouseup', 'on-mousedown', 'on-click' ].forEach( name => {\r\n                result[ name ] = !!events[ name ] && events[ name ].length > 0;\r\n            } )\r\n\r\n            return result;\r\n        }\r\n    },\r\n    created () {\r\n        window.addEventListener( 'resize', this.onResize, false );\r\n    },\r\n    mounted () {\r\n\r\n        if ( this.width === undefined || this.height === undefined ) {\r\n            this.size = {\r\n                width: this.$el.offsetWidth,\r\n                height: this.$el.offsetHeight\r\n            }\r\n        }\r\n\r\n        this.renderer = new WebGLRenderer( { antialias: true, alpha: true, canvas: this.$refs.canvas } )\r\n        this.renderer.shadowMap.enabled = true;\r\n\r\n        this.load();\r\n        this.update();\r\n\r\n        this.$el.addEventListener( 'mousedown', this.onMouseDown, false );\r\n        this.$el.addEventListener( 'mousemove', this.onMouseMove, false );\r\n        this.$el.addEventListener( 'mouseup', this.onMouseUp, false );\r\n        this.$el.addEventListener( 'click', this.onClick, false );\r\n\r\n        this.animate();\r\n    },\r\n    beforeDestroy () {\r\n\r\n        this.$el.removeEventListener( 'mousedown', this.onMouseDown, false );\r\n        this.$el.removeEventListener( 'mousemove', this.onMouseMove, false );\r\n        this.$el.removeEventListener( 'mouseup', this.onMouseUp, false );\r\n        this.$el.removeEventListener( 'click', this.onClick, false );\r\n\r\n    },\r\n    watch: {\r\n        src () {\r\n            this.load();\r\n        },\r\n        rotation: {\r\n            deep: true,\r\n            handler( val ) {\r\n                if ( !this.object ) return;\r\n                this.object.rotation.set( val.x, val.y, val.z );\r\n            }\r\n        },\r\n        position: {\r\n            deep: true,\r\n            handler( val ) {\r\n                if ( !this.object ) return;\r\n                this.object.position.set( val.x, val.y, val.z );\r\n            }\r\n        },\r\n        scale: {\r\n            deep: true,\r\n            handler( val ) {\r\n                if ( !this.object ) return;\r\n                this.object.scale.set( val.x, val.y, val.z );\r\n            }\r\n        },\r\n        lights: {\r\n            deep: true,\r\n            handler( val, oldVal ) {\r\n                this.updateLights();\r\n            }\r\n        },\r\n        size: {\r\n            deep: true,\r\n            handler ( val ) {\r\n                this.updateCamera();\r\n                this.updateRenderer();\r\n            }\r\n        },\r\n        controllable () {\r\n            this.updateControls();\r\n        },\r\n        backgroundAlpha () {\r\n            this.updateRenderer();\r\n        },\r\n        backgroundColor () {\r\n            this.updateRenderer();\r\n        }\r\n    },\r\n    methods: {\r\n        onResize () {\r\n\r\n            if ( this.width === undefined || this.height === undefined ) {\r\n\r\n                this.$nextTick( () => {\r\n                    this.size = {\r\n                        width: this.$el.offsetWidth,\r\n                        height: this.$el.offsetHeight\r\n                    }\r\n                } )\r\n                \r\n            }\r\n        },\r\n        onMouseDown ( event ) {\r\n\r\n            if ( !this.hasListener[ 'on-mousedown' ] ) return;\r\n\r\n            const intersected = this.pick( event.clientX, event.clientY );\r\n            this.$emit( 'on-mousedown', intersected );\r\n\r\n        },\r\n        onMouseMove ( event ) {\r\n\r\n            if ( !this.hasListener[ 'on-mousemove' ] ) return;\r\n\r\n            const intersected = this.pick( event.clientX, event.clientY );\r\n            this.$emit( 'on-mousemove', intersected );\r\n\r\n        },\r\n        onMouseUp ( event ) {\r\n\r\n            if ( !this.hasListener[ 'on-mouseup' ] ) return;\r\n\r\n            const intersected = this.pick( event.clientX, event.clientY );\r\n            this.$emit( 'on-mouseup', intersected );\r\n\r\n        },\r\n        onClick ( event ) {\r\n\r\n            if ( !this.hasListener[ 'on-click' ] ) return;\r\n\r\n            const intersected = this.pick( event.clientX, event.clientY );\r\n            this.$emit( 'on-click', intersected );\r\n\r\n        },\r\n        pick ( x, y ) {\r\n\r\n            if ( !this.object ) return;\r\n\r\n            const rect = this.$el.getBoundingClientRect();\r\n\r\n            x -= rect.left;\r\n            y -= rect.top;\r\n\r\n            this.mouse.x = ( x / this.size.width ) * 2 - 1;\r\n            this.mouse.y = - ( y / this.size.height ) * 2 + 1;\r\n\r\n            this.raycaster.setFromCamera( this.mouse, this.camera );\r\n\r\n            const intersects = this.raycaster.intersectObject( this.object, true );\r\n\r\n            return ( intersects && intersects.length ) > 0 ? intersects[ 0 ] : null;\r\n\r\n        },\r\n        update () {\r\n\r\n            this.updateRenderer();\r\n            this.updateModel();\r\n            this.updateCamera();\r\n            this.updateLights();\r\n            this.updateControls();\r\n            \r\n        },\r\n        updateModel () {\r\n\r\n            let object = this.object;\r\n\r\n            if ( !object ) return;\r\n\r\n            object.position.copy( this.position );\r\n            object.rotation.copy( this.rotation );\r\n            object.scale.copy( this.scale );\r\n\r\n            object.matrixWorldNeedsUpdate = true;\r\n\r\n        },\r\n        updateRenderer () {\r\n\r\n            let renderer = this.renderer;\r\n\r\n            renderer.setSize( this.size.width, this.size.height );\r\n            renderer.setPixelRatio( window.devicePixelRatio || 1 );\r\n            renderer.setClearColor( new Color( this.backgroundColor ).getHex() );\r\n            renderer.setClearAlpha( this.backgroundAlpha );\r\n        },\r\n        updateCamera () {\r\n\r\n            let camera = this.camera;\r\n            let object = this.object;\r\n\r\n            let distance = 0;\r\n            let center = null;\r\n\r\n            camera.aspect = this.size.width / this.size.height;\r\n            camera.updateProjectionMatrix();\r\n\r\n            if ( !this.cameraLookAt && !this.cameraPosition && !this.cameraRotation && !this.cameraUp ) {\r\n\r\n                if ( !object ) return;\r\n\r\n                distance = getSize( object ).length();\r\n                center = getCenter( object );\r\n\r\n                camera.position.set( 0, 0, 0 );\r\n                camera.position.z = distance;\r\n                camera.position.add( center );\r\n                camera.lookAt( center );\r\n\r\n            } else {\r\n                // TODO\r\n            }\r\n\r\n            if ( this.controls && center ) this.controls.target.copy( center );\r\n\r\n        },\r\n        updateLights () {\r\n\r\n            this.scene.remove.apply( this.scene, this.allLights );\r\n\r\n            this.allLights = [];\r\n\r\n            this.lights.forEach( item => {\r\n\r\n                if ( !item.type ) return;\r\n\r\n                const type = item.type.toLowerCase();\r\n\r\n                let light = null;\r\n\r\n                if ( type === 'ambient' || type === 'ambientlight' ) {\r\n\r\n                    const color = item.color || 0x404040;\r\n                    const intensity = item.intensity || 1;\r\n\r\n                    light = new AmbientLight( color, intensity );\r\n\r\n                } else if ( type === 'point' || type === 'pointlight' ) {\r\n\r\n                    const color = item.color || 0xffffff;\r\n                    const intensity = item.intensity || 1;\r\n                    const distance = item.distance || 0;\r\n                    const decay = item.decay || 1;\r\n\r\n                    light = new PointLight( color, intensity, distance, decay );\r\n\r\n                    if ( item.position ) {\r\n                        light.position.copy( item.position );\r\n                    }\r\n\r\n                } else if ( type === 'directional' || type === 'directionallight' ) {\r\n\r\n                    const color = item.color || 0xffffff;\r\n                    const intensity = item.intensity || 1;\r\n\r\n                    light = new DirectionalLight( color, intensity );\r\n\r\n                    if ( item.position ) {\r\n                        light.position.copy( item.position );\r\n                    }\r\n\r\n                    if ( item.target ) {\r\n                        light.target.copy( item.target );\r\n                    }\r\n\r\n                } else if ( type === 'hemisphere' || type === 'hemispherelight' ) {\r\n\r\n                    const skyColor = item.skyColor || 0xffffff;\r\n                    const groundColor = item.groundColor || 0xffffff;\r\n                    const intensity = item.intensity || 1;\r\n\r\n                    light = new HemisphereLight( skyColor, groundColor, intensity );\r\n\r\n                    if ( item.position ) {\r\n                        light.position.copy( item.position );\r\n                    }\r\n\r\n                }\r\n\r\n                this.allLights.push( light );\r\n                this.scene.add( light );\r\n\r\n            } )\r\n\r\n        },\r\n        updateControls () {\r\n\r\n            if ( this.controllable && this.controls ) return;\r\n\r\n            if ( this.controllable ) {\r\n\r\n                if ( this.controls ) return;\r\n\r\n                this.controls = new OrbitControls( this.camera, this.$el );\r\n                this.controls.type = 'orbit';\r\n\r\n            } else {\r\n\r\n                if ( this.controls ) {\r\n\r\n                    this.controls.dispose();\r\n                    this.controls = null;\r\n\r\n                }\r\n\r\n            }\r\n\r\n        },\r\n        load () {\r\n\r\n            if ( !this.src ) return;\r\n\r\n            if ( this.object ) {\r\n                this.scene.remove( this.object );\r\n            }\r\n\r\n            this.loader.load( this.src, object => {\r\n\r\n                if ( this.process ) {\r\n                    this.process ( object );\r\n                }\r\n\r\n                this.object = object;\r\n\r\n                this.scene.add( this.object );\r\n\r\n                this.updateCamera();\r\n\r\n                this.$emit( 'on-load' );\r\n\r\n            }, err => {\r\n\r\n                this.$emit( 'on-error', err );\r\n\r\n            } );\r\n\r\n        },\r\n        animate () {\r\n            requestAnimationFrame( this.animate );\r\n            this.render();\r\n        },\r\n        render () {\r\n            this.renderer.render( this.scene, this.camera );\r\n        }\r\n    }\r\n}\r\n\r\n</script>\n\n\n// WEBPACK FOOTER //\n// model-mixin.vue?f7d27ef8","<script>\r\nimport { OBJLoader } from './loaders/OBJLoader'\r\nimport { MTLLoader } from './loaders/MTLLoader'\r\nimport { toIndexed } from './util'\r\nimport mixin from './model-mixin.vue'\r\n\r\nexport default {\r\n    name: 'model-obj',\r\n    mixins: [ mixin ],\r\n    props: {\r\n        lights: {\r\n            type: Array,\r\n            default () {\r\n                return [\r\n                    {\r\n                        type: 'HemisphereLight',\r\n                        position: { x: 0, y: 1, z: 0 },\r\n                        skyColor: 0xaaaaff,\r\n                        groundColor: 0x806060,\r\n                        intensity: 0.2\r\n                    },\r\n                    {\r\n                        type: 'DirectionalLight',\r\n                        position: { x: 1, y: 1, z: 1 },\r\n                        color: 0xffffff,\r\n                        intensity: 0.8\r\n                    }\r\n                ]\r\n            }\r\n        },\r\n        smoothing: {\r\n            type: Boolean,\r\n            default: false\r\n        },\r\n        mtlPath: {\r\n            type: String\r\n        },\r\n        mtl: {\r\n            type: String\r\n        }\r\n    },\r\n    data () {\r\n        return {\r\n            loader: new OBJLoader(),\r\n            mtlLoader: new MTLLoader()\r\n        }\r\n    },\r\n    watch: {\r\n        mtl () {\r\n            this.load();\r\n        }\r\n    },\r\n    methods: {\r\n        process ( object ) {\r\n            if ( this.smoothing ) {\r\n                object.traverse( child => {\r\n                    if ( child.geometry ) {\r\n                        child.geometry = toIndexed( child.geometry );\r\n                        child.geometry.computeVertexNormals();\r\n                    }\r\n                } )\r\n            }\r\n        },\r\n        load () {\r\n\r\n            if ( !this.src ) return;\r\n\r\n            if ( this.object ) {\r\n                this.scene.remove( this.object );\r\n            }\r\n\r\n            const onLoad = object => {\r\n                \r\n                if ( this.process ) {\r\n                    this.process ( object );\r\n                }\r\n\r\n                this.object = object;\r\n\r\n                this.scene.add( this.object );\r\n\r\n                this.updateCamera();\r\n\r\n                this.$emit( 'on-load' );\r\n\r\n            }\r\n\r\n            const onError = err => {\r\n\r\n                this.$emit( 'on-error', err );\r\n\r\n            }\r\n\r\n            if ( this.mtl ) {\r\n\r\n                let mtlPath = this.mtlPath;\r\n                let mtlSrc = this.mtl;\r\n                \r\n                if ( !this.mtlPath ) {\r\n\r\n                    const result = /^(.*\\/)([^/]*)$/.exec( this.mtl );\r\n\r\n                    if ( result ) {\r\n                        mtlPath = result[ 1 ];\r\n                        mtlSrc = result[ 2 ];\r\n                    }\r\n\r\n                }\r\n\r\n                if ( mtlPath ) {\r\n                    this.mtlLoader.setPath( mtlPath )\r\n                }\r\n\r\n                this.mtlLoader.load( mtlSrc, materials => {\r\n\r\n                    materials.preload();\r\n\r\n                    this.loader.setMaterials( materials );\r\n\r\n                    this.loader.load( this.src, onLoad, onError );\r\n\r\n                }, onError );\r\n\r\n            } else {\r\n    \r\n                this.loader.load( this.src, onLoad, onError );\r\n\r\n            }\r\n\r\n        },\r\n    }\r\n}\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// model-obj.vue?3d0aa97d","<script>\r\nimport { STLLoader } from './loaders/STLLoader'\r\nimport mixin from './model-mixin.vue'\r\nimport {\r\n    Mesh,\r\n    MeshPhongMaterial\r\n} from 'three'\r\n\r\nexport default {\r\n    name: 'model-stl',\r\n    mixins: [ mixin ],\r\n    props: {\r\n        lights: {\r\n            type: Array,\r\n            default () {\r\n                return [\r\n                    {\r\n                        type: 'HemisphereLight',\r\n                        position: { x: 0, y: 1, z: 0 },\r\n                        skyColor: 0xaaaaff,\r\n                        groundColor: 0x806060,\r\n                        intensity: 0.2\r\n                    },\r\n                    {\r\n                        type: 'DirectionalLight',\r\n                        position: { x: 1, y: 1, z: 1 },\r\n                        color: 0xffffff,\r\n                        intensity: 0.8\r\n                    }\r\n                ]\r\n            }\r\n        }\r\n    },\r\n    data () {\r\n        return {\r\n            loader: new STLLoader()\r\n        }\r\n    },\r\n    methods: {\r\n        load () {\r\n\r\n            if ( !this.src ) return;\r\n\r\n            if ( this.object ) {\r\n                this.scene.remove( this.object );\r\n            }\r\n\r\n            this.loader.load( this.src, geometry => {\r\n\r\n                this.object = new Mesh( geometry, new MeshPhongMaterial() );\r\n\r\n                this.scene.add( this.object );\r\n\r\n                \r\n\r\n                this.updateCamera();\r\n\r\n                this.$emit( 'on-load' );\r\n\r\n            }, err => {\r\n\r\n                this.$emit( 'on-error', err );\r\n\r\n            } );\r\n\r\n        }\r\n    }\r\n}\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// model-stl.vue?f182b660","<script>\r\nimport { ObjectLoader } from 'three'\r\nimport mixin from './model-mixin.vue'\r\n\r\nexport default {\r\n    name: 'model-three',\r\n    mixins: [ mixin ],\r\n    data () {\r\n        return {\r\n            loader: new ObjectLoader()\r\n        }\r\n    }\r\n}\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// model-three.vue?de605bf0","import * as THREE from 'three';\r\n\r\n// https://github.com/mrdoob/three.js/blob/dev/examples/js/controls/OrbitControls.js\r\n\r\nconst OrbitControls = function ( object, domElement ) {\r\n\r\n\tthis.object = object;\r\n\r\n\tthis.domElement = ( domElement !== undefined ) ? domElement : document;\r\n\r\n\t// Set to false to disable this control\r\n\tthis.enabled = true;\r\n\r\n\t// \"target\" sets the location of focus, where the object orbits around\r\n\tthis.target = new THREE.Vector3();\r\n\r\n\t// How far you can dolly in and out ( PerspectiveCamera only )\r\n\tthis.minDistance = 0;\r\n\tthis.maxDistance = Infinity;\r\n\r\n\t// How far you can zoom in and out ( OrthographicCamera only )\r\n\tthis.minZoom = 0;\r\n\tthis.maxZoom = Infinity;\r\n\r\n\t// How far you can orbit vertically, upper and lower limits.\r\n\t// Range is 0 to Math.PI radians.\r\n\tthis.minPolarAngle = 0; // radians\r\n\tthis.maxPolarAngle = Math.PI; // radians\r\n\r\n\t// How far you can orbit horizontally, upper and lower limits.\r\n\t// If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\r\n\tthis.minAzimuthAngle = - Infinity; // radians\r\n\tthis.maxAzimuthAngle = Infinity; // radians\r\n\r\n\t// Set to true to enable damping (inertia)\r\n\t// If damping is enabled, you must call controls.update() in your animation loop\r\n\tthis.enableDamping = false;\r\n\tthis.dampingFactor = 0.25;\r\n\r\n\t// This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\r\n\t// Set to false to disable zooming\r\n\tthis.enableZoom = true;\r\n\tthis.zoomSpeed = 1.0;\r\n\r\n\t// Set to false to disable rotating\r\n\tthis.enableRotate = true;\r\n\tthis.rotateSpeed = 1.0;\r\n\r\n\t// Set to false to disable panning\r\n\tthis.enablePan = true;\r\n\tthis.keyPanSpeed = 7.0;\t// pixels moved per arrow key push\r\n\r\n\t// Set to true to automatically rotate around the target\r\n\t// If auto-rotate is enabled, you must call controls.update() in your animation loop\r\n\tthis.autoRotate = false;\r\n\tthis.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\r\n\r\n\t// Set to false to disable use of the keys\r\n\tthis.enableKeys = true;\r\n\r\n\t// The four arrow keys\r\n\tthis.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 };\r\n\r\n\t// Mouse buttons\r\n\tthis.mouseButtons = { ORBIT: THREE.MOUSE.LEFT, ZOOM: THREE.MOUSE.MIDDLE, PAN: THREE.MOUSE.RIGHT };\r\n\r\n\t// for reset\r\n\tthis.target0 = this.target.clone();\r\n\tthis.position0 = this.object.position.clone();\r\n\tthis.zoom0 = this.object.zoom;\r\n\r\n\t//\r\n\t// public methods\r\n\t//\r\n\r\n\tthis.getPolarAngle = function () {\r\n\r\n\t\treturn spherical.phi;\r\n\r\n\t};\r\n\r\n\tthis.getAzimuthalAngle = function () {\r\n\r\n\t\treturn spherical.theta;\r\n\r\n\t};\r\n\r\n\tthis.saveState = function () {\r\n\r\n\t\tscope.target0.copy( scope.target );\r\n\t\tscope.position0.copy( scope.object.position );\r\n\t\tscope.zoom0 = scope.object.zoom;\r\n\r\n\t};\r\n\r\n\tthis.reset = function () {\r\n\r\n\t\tscope.target.copy( scope.target0 );\r\n\t\tscope.object.position.copy( scope.position0 );\r\n\t\tscope.object.zoom = scope.zoom0;\r\n\r\n\t\tscope.object.updateProjectionMatrix();\r\n\t\tscope.dispatchEvent( changeEvent );\r\n\r\n\t\tscope.update();\r\n\r\n\t\tstate = STATE.NONE;\r\n\r\n\t};\r\n\r\n\t// this method is exposed, but perhaps it would be better if we can make it private...\r\n\tthis.update = function () {\r\n\r\n\t\tvar offset = new THREE.Vector3();\r\n\r\n\t\t// so camera.up is the orbit axis\r\n\t\tvar quat = new THREE.Quaternion().setFromUnitVectors( object.up, new THREE.Vector3( 0, 1, 0 ) );\r\n\t\tvar quatInverse = quat.clone().inverse();\r\n\r\n\t\tvar lastPosition = new THREE.Vector3();\r\n\t\tvar lastQuaternion = new THREE.Quaternion();\r\n\r\n\t\treturn function update() {\r\n\r\n\t\t\tvar position = scope.object.position;\r\n\r\n\t\t\toffset.copy( position ).sub( scope.target );\r\n\r\n\t\t\t// rotate offset to \"y-axis-is-up\" space\r\n\t\t\toffset.applyQuaternion( quat );\r\n\r\n\t\t\t// angle from z-axis around y-axis\r\n\t\t\tspherical.setFromVector3( offset );\r\n\r\n\t\t\tif ( scope.autoRotate && state === STATE.NONE ) {\r\n\r\n\t\t\t\trotateLeft( getAutoRotationAngle() );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tspherical.theta += sphericalDelta.theta;\r\n\t\t\tspherical.phi += sphericalDelta.phi;\r\n\r\n\t\t\t// restrict theta to be between desired limits\r\n\t\t\tspherical.theta = Math.max( scope.minAzimuthAngle, Math.min( scope.maxAzimuthAngle, spherical.theta ) );\r\n\r\n\t\t\t// restrict phi to be between desired limits\r\n\t\t\tspherical.phi = Math.max( scope.minPolarAngle, Math.min( scope.maxPolarAngle, spherical.phi ) );\r\n\r\n\t\t\tspherical.makeSafe();\r\n\r\n\r\n\t\t\tspherical.radius *= scale;\r\n\r\n\t\t\t// restrict radius to be between desired limits\r\n\t\t\tspherical.radius = Math.max( scope.minDistance, Math.min( scope.maxDistance, spherical.radius ) );\r\n\r\n\t\t\t// move target to panned location\r\n\t\t\tscope.target.add( panOffset );\r\n\r\n\t\t\toffset.setFromSpherical( spherical );\r\n\r\n\t\t\t// rotate offset back to \"camera-up-vector-is-up\" space\r\n\t\t\toffset.applyQuaternion( quatInverse );\r\n\r\n\t\t\tposition.copy( scope.target ).add( offset );\r\n\r\n\t\t\tscope.object.lookAt( scope.target );\r\n\r\n\t\t\tif ( scope.enableDamping === true ) {\r\n\r\n\t\t\t\tsphericalDelta.theta *= ( 1 - scope.dampingFactor );\r\n\t\t\t\tsphericalDelta.phi *= ( 1 - scope.dampingFactor );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tsphericalDelta.set( 0, 0, 0 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tscale = 1;\r\n\t\t\tpanOffset.set( 0, 0, 0 );\r\n\r\n\t\t\t// update condition is:\r\n\t\t\t// min(camera displacement, camera rotation in radians)^2 > EPS\r\n\t\t\t// using small-angle approximation cos(x/2) = 1 - x^2 / 8\r\n\r\n\t\t\tif ( zoomChanged ||\r\n\t\t\t\tlastPosition.distanceToSquared( scope.object.position ) > EPS ||\r\n\t\t\t\t8 * ( 1 - lastQuaternion.dot( scope.object.quaternion ) ) > EPS ) {\r\n\r\n\t\t\t\tscope.dispatchEvent( changeEvent );\r\n\r\n\t\t\t\tlastPosition.copy( scope.object.position );\r\n\t\t\t\tlastQuaternion.copy( scope.object.quaternion );\r\n\t\t\t\tzoomChanged = false;\r\n\r\n\t\t\t\treturn true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t};\r\n\r\n\t}();\r\n\r\n\tthis.dispose = function () {\r\n\r\n\t\tscope.domElement.removeEventListener( 'contextmenu', onContextMenu, false );\r\n\t\tscope.domElement.removeEventListener( 'mousedown', onMouseDown, false );\r\n\t\tscope.domElement.removeEventListener( 'wheel', onMouseWheel, false );\r\n\r\n\t\tscope.domElement.removeEventListener( 'touchstart', onTouchStart, false );\r\n\t\tscope.domElement.removeEventListener( 'touchend', onTouchEnd, false );\r\n\t\tscope.domElement.removeEventListener( 'touchmove', onTouchMove, false );\r\n\r\n\t\tdocument.removeEventListener( 'mousemove', onMouseMove, false );\r\n\t\tdocument.removeEventListener( 'mouseup', onMouseUp, false );\r\n\r\n\t\twindow.removeEventListener( 'keydown', onKeyDown, false );\r\n\r\n\t\t//scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\r\n\r\n\t};\r\n\r\n\t//\r\n\t// internals\r\n\t//\r\n\r\n\tvar scope = this;\r\n\r\n\tvar changeEvent = { type: 'change' };\r\n\tvar startEvent = { type: 'start' };\r\n\tvar endEvent = { type: 'end' };\r\n\r\n\tvar STATE = { NONE: - 1, ROTATE: 0, DOLLY: 1, PAN: 2, TOUCH_ROTATE: 3, TOUCH_DOLLY: 4, TOUCH_PAN: 5 };\r\n\r\n\tvar state = STATE.NONE;\r\n\r\n\tvar EPS = 0.000001;\r\n\r\n\t// current position in spherical coordinates\r\n\tvar spherical = new THREE.Spherical();\r\n\tvar sphericalDelta = new THREE.Spherical();\r\n\r\n\tvar scale = 1;\r\n\tvar panOffset = new THREE.Vector3();\r\n\tvar zoomChanged = false;\r\n\r\n\tvar rotateStart = new THREE.Vector2();\r\n\tvar rotateEnd = new THREE.Vector2();\r\n\tvar rotateDelta = new THREE.Vector2();\r\n\r\n\tvar panStart = new THREE.Vector2();\r\n\tvar panEnd = new THREE.Vector2();\r\n\tvar panDelta = new THREE.Vector2();\r\n\r\n\tvar dollyStart = new THREE.Vector2();\r\n\tvar dollyEnd = new THREE.Vector2();\r\n\tvar dollyDelta = new THREE.Vector2();\r\n\r\n\tfunction getAutoRotationAngle() {\r\n\r\n\t\treturn 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\r\n\r\n\t}\r\n\r\n\tfunction getZoomScale() {\r\n\r\n\t\treturn Math.pow( 0.95, scope.zoomSpeed );\r\n\r\n\t}\r\n\r\n\tfunction rotateLeft( angle ) {\r\n\r\n\t\tsphericalDelta.theta -= angle;\r\n\r\n\t}\r\n\r\n\tfunction rotateUp( angle ) {\r\n\r\n\t\tsphericalDelta.phi -= angle;\r\n\r\n\t}\r\n\r\n\tvar panLeft = function () {\r\n\r\n\t\tvar v = new THREE.Vector3();\r\n\r\n\t\treturn function panLeft( distance, objectMatrix ) {\r\n\r\n\t\t\tv.setFromMatrixColumn( objectMatrix, 0 ); // get X column of objectMatrix\r\n\t\t\tv.multiplyScalar( - distance );\r\n\r\n\t\t\tpanOffset.add( v );\r\n\r\n\t\t};\r\n\r\n\t}();\r\n\r\n\tvar panUp = function () {\r\n\r\n\t\tvar v = new THREE.Vector3();\r\n\r\n\t\treturn function panUp( distance, objectMatrix ) {\r\n\r\n\t\t\tv.setFromMatrixColumn( objectMatrix, 1 ); // get Y column of objectMatrix\r\n\t\t\tv.multiplyScalar( distance );\r\n\r\n\t\t\tpanOffset.add( v );\r\n\r\n\t\t};\r\n\r\n\t}();\r\n\r\n\t// deltaX and deltaY are in pixels; right and down are positive\r\n\tvar pan = function () {\r\n\r\n\t\tvar offset = new THREE.Vector3();\r\n\r\n\t\treturn function pan( deltaX, deltaY ) {\r\n\r\n\t\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\r\n\r\n\t\t\tif ( scope.object instanceof THREE.PerspectiveCamera ) {\r\n\r\n\t\t\t\t// perspective\r\n\t\t\t\tvar position = scope.object.position;\r\n\t\t\t\toffset.copy( position ).sub( scope.target );\r\n\t\t\t\tvar targetDistance = offset.length();\r\n\r\n\t\t\t\t// half of the fov is center to top of screen\r\n\t\t\t\ttargetDistance *= Math.tan( ( scope.object.fov / 2 ) * Math.PI / 180.0 );\r\n\r\n\t\t\t\t// we actually don't use screenWidth, since perspective camera is fixed to screen height\r\n\t\t\t\tpanLeft( 2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix );\r\n\t\t\t\tpanUp( 2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix );\r\n\r\n\t\t\t} else if ( scope.object instanceof THREE.OrthographicCamera ) {\r\n\r\n\t\t\t\t// orthographic\r\n\t\t\t\tpanLeft( deltaX * ( scope.object.right - scope.object.left ) / scope.object.zoom / element.clientWidth, scope.object.matrix );\r\n\t\t\t\tpanUp( deltaY * ( scope.object.top - scope.object.bottom ) / scope.object.zoom / element.clientHeight, scope.object.matrix );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// camera neither orthographic nor perspective\r\n\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.' );\r\n\t\t\t\tscope.enablePan = false;\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t}();\r\n\r\n\tfunction dollyIn( dollyScale ) {\r\n\r\n\t\tif ( scope.object instanceof THREE.PerspectiveCamera ) {\r\n\r\n\t\t\tscale /= dollyScale;\r\n\r\n\t\t} else if ( scope.object instanceof THREE.OrthographicCamera ) {\r\n\r\n\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom * dollyScale ) );\r\n\t\t\tscope.object.updateProjectionMatrix();\r\n\t\t\tzoomChanged = true;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\r\n\t\t\tscope.enableZoom = false;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction dollyOut( dollyScale ) {\r\n\r\n\t\tif ( scope.object instanceof THREE.PerspectiveCamera ) {\r\n\r\n\t\t\tscale *= dollyScale;\r\n\r\n\t\t} else if ( scope.object instanceof THREE.OrthographicCamera ) {\r\n\r\n\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom / dollyScale ) );\r\n\t\t\tscope.object.updateProjectionMatrix();\r\n\t\t\tzoomChanged = true;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\r\n\t\t\tscope.enableZoom = false;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t//\r\n\t// event callbacks - update the object state\r\n\t//\r\n\r\n\tfunction handleMouseDownRotate( event ) {\r\n\r\n\t\t//console.log( 'handleMouseDownRotate' );\r\n\r\n\t\trotateStart.set( event.clientX, event.clientY );\r\n\r\n\t}\r\n\r\n\tfunction handleMouseDownDolly( event ) {\r\n\r\n\t\t//console.log( 'handleMouseDownDolly' );\r\n\r\n\t\tdollyStart.set( event.clientX, event.clientY );\r\n\r\n\t}\r\n\r\n\tfunction handleMouseDownPan( event ) {\r\n\r\n\t\t//console.log( 'handleMouseDownPan' );\r\n\r\n\t\tpanStart.set( event.clientX, event.clientY );\r\n\r\n\t}\r\n\r\n\tfunction handleMouseMoveRotate( event ) {\r\n\r\n\t\t//console.log( 'handleMouseMoveRotate' );\r\n\r\n\t\trotateEnd.set( event.clientX, event.clientY );\r\n\t\trotateDelta.subVectors( rotateEnd, rotateStart );\r\n\r\n\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\r\n\r\n\t\t// rotating across whole screen goes 360 degrees around\r\n\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed );\r\n\r\n\t\t// rotating up and down along whole screen attempts to go 360, but limited to 180\r\n\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed );\r\n\r\n\t\trotateStart.copy( rotateEnd );\r\n\r\n\t\tscope.update();\r\n\r\n\t}\r\n\r\n\tfunction handleMouseMoveDolly( event ) {\r\n\r\n\t\t//console.log( 'handleMouseMoveDolly' );\r\n\r\n\t\tdollyEnd.set( event.clientX, event.clientY );\r\n\r\n\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\r\n\r\n\t\tif ( dollyDelta.y > 0 ) {\r\n\r\n\t\t\tdollyIn( getZoomScale() );\r\n\r\n\t\t} else if ( dollyDelta.y < 0 ) {\r\n\r\n\t\t\tdollyOut( getZoomScale() );\r\n\r\n\t\t}\r\n\r\n\t\tdollyStart.copy( dollyEnd );\r\n\r\n\t\tscope.update();\r\n\r\n\t}\r\n\r\n\tfunction handleMouseMovePan( event ) {\r\n\r\n\t\t//console.log( 'handleMouseMovePan' );\r\n\r\n\t\tpanEnd.set( event.clientX, event.clientY );\r\n\r\n\t\tpanDelta.subVectors( panEnd, panStart );\r\n\r\n\t\tpan( panDelta.x, panDelta.y );\r\n\r\n\t\tpanStart.copy( panEnd );\r\n\r\n\t\tscope.update();\r\n\r\n\t}\r\n\r\n\tfunction handleMouseUp( event ) {\r\n\r\n\t\t// console.log( 'handleMouseUp' );\r\n\r\n\t}\r\n\r\n\tfunction handleMouseWheel( event ) {\r\n\r\n\t\t// console.log( 'handleMouseWheel' );\r\n\r\n\t\tif ( event.deltaY < 0 ) {\r\n\r\n\t\t\tdollyOut( getZoomScale() );\r\n\r\n\t\t} else if ( event.deltaY > 0 ) {\r\n\r\n\t\t\tdollyIn( getZoomScale() );\r\n\r\n\t\t}\r\n\r\n\t\tscope.update();\r\n\r\n\t}\r\n\r\n\tfunction handleKeyDown( event ) {\r\n\r\n\t\t//console.log( 'handleKeyDown' );\r\n\r\n\t\tswitch ( event.keyCode ) {\r\n\r\n\t\t\tcase scope.keys.UP:\r\n\t\t\t\tpan( 0, scope.keyPanSpeed );\r\n\t\t\t\tscope.update();\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase scope.keys.BOTTOM:\r\n\t\t\t\tpan( 0, - scope.keyPanSpeed );\r\n\t\t\t\tscope.update();\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase scope.keys.LEFT:\r\n\t\t\t\tpan( scope.keyPanSpeed, 0 );\r\n\t\t\t\tscope.update();\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase scope.keys.RIGHT:\r\n\t\t\t\tpan( - scope.keyPanSpeed, 0 );\r\n\t\t\t\tscope.update();\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction handleTouchStartRotate( event ) {\r\n\r\n\t\t//console.log( 'handleTouchStartRotate' );\r\n\r\n\t\trotateStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\r\n\r\n\t}\r\n\r\n\tfunction handleTouchStartDolly( event ) {\r\n\r\n\t\t//console.log( 'handleTouchStartDolly' );\r\n\r\n\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\r\n\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\r\n\r\n\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\r\n\r\n\t\tdollyStart.set( 0, distance );\r\n\r\n\t}\r\n\r\n\tfunction handleTouchStartPan( event ) {\r\n\r\n\t\t//console.log( 'handleTouchStartPan' );\r\n\r\n\t\tpanStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\r\n\r\n\t}\r\n\r\n\tfunction handleTouchMoveRotate( event ) {\r\n\r\n\t\t//console.log( 'handleTouchMoveRotate' );\r\n\r\n\t\trotateEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\r\n\t\trotateDelta.subVectors( rotateEnd, rotateStart );\r\n\r\n\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\r\n\r\n\t\t// rotating across whole screen goes 360 degrees around\r\n\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed );\r\n\r\n\t\t// rotating up and down along whole screen attempts to go 360, but limited to 180\r\n\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed );\r\n\r\n\t\trotateStart.copy( rotateEnd );\r\n\r\n\t\tscope.update();\r\n\r\n\t}\r\n\r\n\tfunction handleTouchMoveDolly( event ) {\r\n\r\n\t\t//console.log( 'handleTouchMoveDolly' );\r\n\r\n\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\r\n\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\r\n\r\n\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\r\n\r\n\t\tdollyEnd.set( 0, distance );\r\n\r\n\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\r\n\r\n\t\tif ( dollyDelta.y > 0 ) {\r\n\r\n\t\t\tdollyOut( getZoomScale() );\r\n\r\n\t\t} else if ( dollyDelta.y < 0 ) {\r\n\r\n\t\t\tdollyIn( getZoomScale() );\r\n\r\n\t\t}\r\n\r\n\t\tdollyStart.copy( dollyEnd );\r\n\r\n\t\tscope.update();\r\n\r\n\t}\r\n\r\n\tfunction handleTouchMovePan( event ) {\r\n\r\n\t\t//console.log( 'handleTouchMovePan' );\r\n\r\n\t\tpanEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\r\n\r\n\t\tpanDelta.subVectors( panEnd, panStart );\r\n\r\n\t\tpan( panDelta.x, panDelta.y );\r\n\r\n\t\tpanStart.copy( panEnd );\r\n\r\n\t\tscope.update();\r\n\r\n\t}\r\n\r\n\tfunction handleTouchEnd( event ) {\r\n\r\n\t\t//console.log( 'handleTouchEnd' );\r\n\r\n\t}\r\n\r\n\t//\r\n\t// event handlers - FSM: listen for events and reset state\r\n\t//\r\n\r\n\tfunction onMouseDown( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\tevent.preventDefault();\r\n\r\n\t\tswitch ( event.button ) {\r\n\r\n\t\t\tcase scope.mouseButtons.ORBIT:\r\n\r\n\t\t\t\tif ( scope.enableRotate === false ) return;\r\n\r\n\t\t\t\thandleMouseDownRotate( event );\r\n\r\n\t\t\t\tstate = STATE.ROTATE;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase scope.mouseButtons.ZOOM:\r\n\r\n\t\t\t\tif ( scope.enableZoom === false ) return;\r\n\r\n\t\t\t\thandleMouseDownDolly( event );\r\n\r\n\t\t\t\tstate = STATE.DOLLY;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase scope.mouseButtons.PAN:\r\n\r\n\t\t\t\tif ( scope.enablePan === false ) return;\r\n\r\n\t\t\t\thandleMouseDownPan( event );\r\n\r\n\t\t\t\tstate = STATE.PAN;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tif ( state !== STATE.NONE ) {\r\n\r\n\t\t\tdocument.addEventListener( 'mousemove', onMouseMove, false );\r\n\t\t\tdocument.addEventListener( 'mouseup', onMouseUp, false );\r\n\r\n\t\t\tscope.dispatchEvent( startEvent );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction onMouseMove( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\tevent.preventDefault();\r\n\r\n\t\tswitch ( state ) {\r\n\r\n\t\t\tcase STATE.ROTATE:\r\n\r\n\t\t\t\tif ( scope.enableRotate === false ) return;\r\n\r\n\t\t\t\thandleMouseMoveRotate( event );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase STATE.DOLLY:\r\n\r\n\t\t\t\tif ( scope.enableZoom === false ) return;\r\n\r\n\t\t\t\thandleMouseMoveDolly( event );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase STATE.PAN:\r\n\r\n\t\t\t\tif ( scope.enablePan === false ) return;\r\n\r\n\t\t\t\thandleMouseMovePan( event );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction onMouseUp( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\thandleMouseUp( event );\r\n\r\n\t\tdocument.removeEventListener( 'mousemove', onMouseMove, false );\r\n\t\tdocument.removeEventListener( 'mouseup', onMouseUp, false );\r\n\r\n\t\tscope.dispatchEvent( endEvent );\r\n\r\n\t\tstate = STATE.NONE;\r\n\r\n\t}\r\n\r\n\tfunction onMouseWheel( event ) {\r\n\r\n\t\tif ( scope.enabled === false || scope.enableZoom === false || ( state !== STATE.NONE && state !== STATE.ROTATE ) ) return;\r\n\r\n\t\tevent.preventDefault();\r\n\t\tevent.stopPropagation();\r\n\r\n\t\thandleMouseWheel( event );\r\n\r\n\t\tscope.dispatchEvent( startEvent ); // not sure why these are here...\r\n\t\tscope.dispatchEvent( endEvent );\r\n\r\n\t}\r\n\r\n\tfunction onKeyDown( event ) {\r\n\r\n\t\tif ( scope.enabled === false || scope.enableKeys === false || scope.enablePan === false ) return;\r\n\r\n\t\thandleKeyDown( event );\r\n\r\n\t}\r\n\r\n\tfunction onTouchStart( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\tswitch ( event.touches.length ) {\r\n\r\n\t\t\tcase 1:\t// one-fingered touch: rotate\r\n\r\n\t\t\t\tif ( scope.enableRotate === false ) return;\r\n\r\n\t\t\t\thandleTouchStartRotate( event );\r\n\r\n\t\t\t\tstate = STATE.TOUCH_ROTATE;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 2:\t// two-fingered touch: dolly\r\n\r\n\t\t\t\tif ( scope.enableZoom === false ) return;\r\n\r\n\t\t\t\thandleTouchStartDolly( event );\r\n\r\n\t\t\t\tstate = STATE.TOUCH_DOLLY;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 3: // three-fingered touch: pan\r\n\r\n\t\t\t\tif ( scope.enablePan === false ) return;\r\n\r\n\t\t\t\thandleTouchStartPan( event );\r\n\r\n\t\t\t\tstate = STATE.TOUCH_PAN;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\r\n\t\t\t\tstate = STATE.NONE;\r\n\r\n\t\t}\r\n\r\n\t\tif ( state !== STATE.NONE ) {\r\n\r\n\t\t\tscope.dispatchEvent( startEvent );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction onTouchMove( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\tevent.preventDefault();\r\n\t\tevent.stopPropagation();\r\n\r\n\t\tswitch ( event.touches.length ) {\r\n\r\n\t\t\tcase 1: // one-fingered touch: rotate\r\n\r\n\t\t\t\tif ( scope.enableRotate === false ) return;\r\n\t\t\t\tif ( state !== STATE.TOUCH_ROTATE ) return; // is this needed?...\r\n\r\n\t\t\t\thandleTouchMoveRotate( event );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 2: // two-fingered touch: dolly\r\n\r\n\t\t\t\tif ( scope.enableZoom === false ) return;\r\n\t\t\t\tif ( state !== STATE.TOUCH_DOLLY ) return; // is this needed?...\r\n\r\n\t\t\t\thandleTouchMoveDolly( event );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 3: // three-fingered touch: pan\r\n\r\n\t\t\t\tif ( scope.enablePan === false ) return;\r\n\t\t\t\tif ( state !== STATE.TOUCH_PAN ) return; // is this needed?...\r\n\r\n\t\t\t\thandleTouchMovePan( event );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\r\n\t\t\t\tstate = STATE.NONE;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction onTouchEnd( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\thandleTouchEnd( event );\r\n\r\n\t\tscope.dispatchEvent( endEvent );\r\n\r\n\t\tstate = STATE.NONE;\r\n\r\n\t}\r\n\r\n\tfunction onContextMenu( event ) {\r\n\r\n\t\tevent.preventDefault();\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tscope.domElement.addEventListener( 'contextmenu', onContextMenu, false );\r\n\r\n\tscope.domElement.addEventListener( 'mousedown', onMouseDown, false );\r\n\tscope.domElement.addEventListener( 'wheel', onMouseWheel, false );\r\n\r\n\tscope.domElement.addEventListener( 'touchstart', onTouchStart, false );\r\n\tscope.domElement.addEventListener( 'touchend', onTouchEnd, false );\r\n\tscope.domElement.addEventListener( 'touchmove', onTouchMove, false );\r\n\r\n\twindow.addEventListener( 'keydown', onKeyDown, false );\r\n\r\n\t// force an update at start\r\n\r\n\tthis.update();\r\n\r\n};\r\n\r\nOrbitControls.prototype = Object.create( THREE.EventDispatcher.prototype );\r\nOrbitControls.prototype.constructor = OrbitControls;\r\n\r\nexport { OrbitControls };\n\n\n// WEBPACK FOOTER //\n// ./src/controls/OrbitControls.js","import * as THREE from 'three';\r\n\r\n/**\r\n* @author Tim Knip / http://www.floorplanner.com/ / tim at floorplanner.com\r\n* @author Tony Parisi / http://www.tonyparisi.com/\r\n*/\r\n\r\nconst ColladaLoader = function () {\r\n\r\n\tvar COLLADA = null;\r\n\tvar scene = null;\r\n\tvar visualScene;\r\n\tvar kinematicsModel;\r\n\r\n\tvar readyCallbackFunc = null;\r\n\r\n\tvar sources = {};\r\n\tvar images = {};\r\n\tvar animations = {};\r\n\tvar controllers = {};\r\n\tvar geometries = {};\r\n\tvar materials = {};\r\n\tvar effects = {};\r\n\tvar cameras = {};\r\n\tvar lights = {};\r\n\r\n\tvar animData;\r\n\tvar kinematics;\r\n\tvar visualScenes;\r\n\tvar kinematicsModels;\r\n\tvar baseUrl;\r\n\tvar morphs;\r\n\tvar skins;\r\n\r\n\tvar flip_uv = true;\r\n\tvar preferredShading = THREE.SmoothShading;\r\n\r\n\tvar options = {\r\n\t\t// Force Geometry to always be centered at the local origin of the\r\n\t\t// containing Mesh.\r\n\t\tcenterGeometry: false,\r\n\r\n\t\t// Axis conversion is done for geometries, animations, and controllers.\r\n\t\t// If we ever pull cameras or lights out of the COLLADA file, they'll\r\n\t\t// need extra work.\r\n\t\tconvertUpAxis: false,\r\n\r\n\t\tsubdivideFaces: true,\r\n\r\n\t\tupAxis: 'Y',\r\n\r\n\t\t// For reflective or refractive materials we'll use this cubemap\r\n\t\tdefaultEnvMap: null\r\n\r\n\t};\r\n\r\n\tvar colladaUnit = 1.0;\r\n\tvar colladaUp = 'Y';\r\n\tvar upConversion = null;\r\n\r\n\tfunction load ( url, readyCallback, progressCallback, failCallback ) {\r\n\r\n\t\tvar length = 0;\r\n\r\n\t\tif ( document.implementation && document.implementation.createDocument ) {\r\n\r\n\t\t\tvar request = new XMLHttpRequest();\r\n\r\n\t\t\trequest.onreadystatechange = function() {\r\n\r\n\t\t\t\tif ( request.readyState === 4 ) {\r\n\r\n\t\t\t\t\tif ( request.status === 0 || request.status === 200 ) {\r\n\r\n\t\t\t\t\t\tif ( request.response ) {\r\n\r\n\t\t\t\t\t\t\treadyCallbackFunc = readyCallback;\r\n\t\t\t\t\t\t\tparse( request.response, undefined, url );\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\tif ( failCallback ) {\r\n\r\n\t\t\t\t\t\t\t\tfailCallback( { type: 'error', url: url } );\r\n\r\n\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\tconsole.error( \"ColladaLoader: Empty or non-existing file (\" + url + \")\" );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}else{\r\n\r\n\t\t\t\t\t\tif( failCallback ){\r\n\r\n\t\t\t\t\t\t\tfailCallback( { type: 'error', url: url } );\r\n\r\n\t\t\t\t\t\t}else{\r\n\r\n\t\t\t\t\t\t\tconsole.error( 'ColladaLoader: Couldn\\'t load \"' + url + '\" (' + request.status + ')' );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else if ( request.readyState === 3 ) {\r\n\r\n\t\t\t\t\tif ( progressCallback ) {\r\n\r\n\t\t\t\t\t\tif ( length === 0 ) {\r\n\r\n\t\t\t\t\t\t\tlength = request.getResponseHeader( \"Content-Length\" );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tprogressCallback( { total: length, loaded: request.responseText.length } );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t};\r\n\r\n\t\t\trequest.open( \"GET\", url, true );\r\n\t\t\trequest.send( null );\r\n\r\n\t\t} else {\r\n\r\n\t\t\talert( \"Don't know how to parse XML!\" );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction parse( text, callBack, url ) {\r\n\r\n\t\tCOLLADA = new DOMParser().parseFromString( text, 'text/xml' );\r\n\t\tcallBack = callBack || readyCallbackFunc;\r\n\r\n\t\tif ( url !== undefined ) {\r\n\r\n\t\t\tvar parts = url.split( '/' );\r\n\t\t\tparts.pop();\r\n\t\t\tbaseUrl = ( parts.length < 1 ? '.' : parts.join( '/' ) ) + '/';\r\n\r\n\t\t}\r\n\r\n\t\tparseAsset();\r\n\t\tsetUpConversion();\r\n\t\timages = parseLib( \"library_images image\", _Image, \"image\" );\r\n\t\tmaterials = parseLib( \"library_materials material\", Material, \"material\" );\r\n\t\teffects = parseLib( \"library_effects effect\", Effect, \"effect\" );\r\n\t\tgeometries = parseLib( \"library_geometries geometry\", Geometry, \"geometry\" );\r\n\t\tcameras = parseLib( \"library_cameras camera\", Camera, \"camera\" );\r\n\t\tlights = parseLib( \"library_lights light\", Light, \"light\" );\r\n\t\tcontrollers = parseLib( \"library_controllers controller\", Controller, \"controller\" );\r\n\t\tanimations = parseLib( \"library_animations animation\", Animation, \"animation\" );\r\n\t\tvisualScenes = parseLib( \"library_visual_scenes visual_scene\", VisualScene, \"visual_scene\" );\r\n\t\tkinematicsModels = parseLib( \"library_kinematics_models kinematics_model\", KinematicsModel, \"kinematics_model\" );\r\n\r\n\t\tmorphs = [];\r\n\t\tskins = [];\r\n\r\n\t\tvisualScene = parseScene();\r\n\t\tscene = new THREE.Group();\r\n\r\n\t\tfor ( var i = 0; i < visualScene.nodes.length; i ++ ) {\r\n\r\n\t\t\tscene.add( createSceneGraph( visualScene.nodes[ i ] ) );\r\n\r\n\t\t}\r\n\r\n\t\t// unit conversion\r\n\t\tscene.scale.multiplyScalar( colladaUnit );\r\n\r\n\t\tcreateAnimations();\r\n\r\n\t\tkinematicsModel = parseKinematicsModel();\r\n\t\tcreateKinematics();\r\n\r\n\t\tvar result = {\r\n\r\n\t\t\tscene: scene,\r\n\t\t\tmorphs: morphs,\r\n\t\t\tskins: skins,\r\n\t\t\tanimations: animData,\r\n\t\t\tkinematics: kinematics,\r\n\t\t\tdae: {\r\n\t\t\t\timages: images,\r\n\t\t\t\tmaterials: materials,\r\n\t\t\t\tcameras: cameras,\r\n\t\t\t\tlights: lights,\r\n\t\t\t\teffects: effects,\r\n\t\t\t\tgeometries: geometries,\r\n\t\t\t\tcontrollers: controllers,\r\n\t\t\t\tanimations: animations,\r\n\t\t\t\tvisualScenes: visualScenes,\r\n\t\t\t\tvisualScene: visualScene,\r\n\t\t\t\tscene: visualScene,\r\n\t\t\t\tkinematicsModels: kinematicsModels,\r\n\t\t\t\tkinematicsModel: kinematicsModel\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t\tif ( callBack ) {\r\n\r\n\t\t\tcallBack( result );\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t}\r\n\r\n\tfunction setPreferredShading ( shading ) {\r\n\r\n\t\tpreferredShading = shading;\r\n\r\n\t}\r\n\r\n\tfunction parseAsset () {\r\n\r\n\t\tvar elements = COLLADA.querySelectorAll('asset');\r\n\r\n\t\tvar element = elements[0];\r\n\r\n\t\tif ( element && element.childNodes ) {\r\n\r\n\t\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\t\tvar child = element.childNodes[ i ];\r\n\r\n\t\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\t\tcase 'unit':\r\n\r\n\t\t\t\t\t\tvar meter = child.getAttribute( 'meter' );\r\n\r\n\t\t\t\t\t\tif ( meter ) {\r\n\r\n\t\t\t\t\t\t\tcolladaUnit = parseFloat( meter );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'up_axis':\r\n\r\n\t\t\t\t\t\tcolladaUp = child.textContent.charAt(0);\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction parseLib ( q, classSpec, prefix ) {\r\n\r\n\t\tvar elements = COLLADA.querySelectorAll(q);\r\n\r\n\t\tvar lib = {};\r\n\r\n\t\tvar i = 0;\r\n\r\n\t\tvar elementsLength = elements.length;\r\n\r\n\t\tfor ( var j = 0; j < elementsLength; j ++ ) {\r\n\r\n\t\t\tvar element = elements[j];\r\n\t\t\tvar daeElement = ( new classSpec() ).parse( element );\r\n\r\n\t\t\tif ( !daeElement.id || daeElement.id.length === 0 ) daeElement.id = prefix + ( i ++ );\r\n\t\t\tlib[ daeElement.id ] = daeElement;\r\n\r\n\t\t}\r\n\r\n\t\treturn lib;\r\n\r\n\t}\r\n\r\n\tfunction parseScene() {\r\n\r\n\t\tvar sceneElement = COLLADA.querySelectorAll('scene instance_visual_scene')[0];\r\n\r\n\t\tif ( sceneElement ) {\r\n\r\n\t\t\tvar url = sceneElement.getAttribute( 'url' ).replace( /^#/, '' );\r\n\t\t\treturn visualScenes[ url.length > 0 ? url : 'visual_scene0' ];\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction parseKinematicsModel() {\r\n\r\n\t\tvar kinematicsModelElement = COLLADA.querySelectorAll('instance_kinematics_model')[0];\r\n\r\n\t\tif ( kinematicsModelElement ) {\r\n\r\n\t\t\tvar url = kinematicsModelElement.getAttribute( 'url' ).replace(/^#/, '');\r\n\t\t\treturn kinematicsModels[ url.length > 0 ? url : 'kinematics_model0' ];\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction createAnimations() {\r\n\r\n\t\tanimData = [];\r\n\r\n\t\t// fill in the keys\r\n\t\trecurseHierarchy( scene );\r\n\r\n\t}\r\n\r\n\tfunction recurseHierarchy( node ) {\r\n\r\n\t\tvar n = visualScene.getChildById( node.colladaId, true ),\r\n\t\t\tnewData = null;\r\n\r\n\t\tif ( n && n.keys ) {\r\n\r\n\t\t\tnewData = {\r\n\t\t\t\tfps: 60,\r\n\t\t\t\thierarchy: [ {\r\n\t\t\t\t\tnode: n,\r\n\t\t\t\t\tkeys: n.keys,\r\n\t\t\t\t\tsids: n.sids\r\n\t\t\t\t} ],\r\n\t\t\t\tnode: node,\r\n\t\t\t\tname: 'animation_' + node.name,\r\n\t\t\t\tlength: 0\r\n\t\t\t};\r\n\r\n\t\t\tanimData.push(newData);\r\n\r\n\t\t\tfor ( var i = 0, il = n.keys.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tnewData.length = Math.max( newData.length, n.keys[i].time );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tnewData = {\r\n\t\t\t\thierarchy: [ {\r\n\t\t\t\t\tkeys: [],\r\n\t\t\t\t\tsids: []\r\n\t\t\t\t} ]\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var i = 0, il = node.children.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar d = recurseHierarchy( node.children[i] );\r\n\r\n\t\t\tfor ( var j = 0, jl = d.hierarchy.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tnewData.hierarchy.push( {\r\n\t\t\t\t\tkeys: [],\r\n\t\t\t\t\tsids: []\r\n\t\t\t\t} );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn newData;\r\n\r\n\t}\r\n\r\n\tfunction calcAnimationBounds () {\r\n\r\n\t\tvar start = 1000000;\r\n\t\tvar end = -start;\r\n\t\tvar frames = 0;\r\n\t\tvar ID;\r\n\t\tfor ( var id in animations ) {\r\n\r\n\t\t\tvar animation = animations[ id ];\r\n\t\t\tID = ID || animation.id;\r\n\t\t\tfor ( var i = 0; i < animation.sampler.length; i ++ ) {\r\n\r\n\t\t\t\tvar sampler = animation.sampler[ i ];\r\n\r\n\t\t\t\tsampler.create();\r\n\r\n\t\t\t\tstart = Math.min( start, sampler.startTime );\r\n\t\t\t\tend = Math.max( end, sampler.endTime );\r\n\t\t\t\tframes = Math.max( frames, sampler.input.length );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn { start:start, end:end, frames:frames,ID:ID };\r\n\r\n\t}\r\n\r\n\tfunction createMorph ( geometry, ctrl ) {\r\n\r\n\t\tvar morphCtrl = ctrl instanceof InstanceController ? controllers[ ctrl.url ] : ctrl;\r\n\r\n\t\tif ( !morphCtrl || !morphCtrl.morph ) {\r\n\r\n\t\t\tconsole.log(\"could not find morph controller!\");\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tvar morph = morphCtrl.morph;\r\n\r\n\t\tfor ( var i = 0; i < morph.targets.length; i ++ ) {\r\n\r\n\t\t\tvar target_id = morph.targets[ i ];\r\n\t\t\tvar daeGeometry = geometries[ target_id ];\r\n\r\n\t\t\tif ( !daeGeometry.mesh ||\r\n\t\t\t\t !daeGeometry.mesh.primitives ||\r\n\t\t\t\t !daeGeometry.mesh.primitives.length ) {\r\n\t\t\t\t continue;\r\n\t\t\t}\r\n\r\n\t\t\tvar target = daeGeometry.mesh.primitives[ 0 ].geometry;\r\n\r\n\t\t\tif ( target.vertices.length === geometry.vertices.length ) {\r\n\r\n\t\t\t\tgeometry.morphTargets.push( { name: \"target_1\", vertices: target.vertices } );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tgeometry.morphTargets.push( { name: \"target_Z\", vertices: geometry.vertices } );\r\n\r\n\t}\r\n\r\n\tfunction createSkin ( geometry, ctrl, applyBindShape ) {\r\n\r\n\t\tvar skinCtrl = controllers[ ctrl.url ];\r\n\r\n\t\tif ( !skinCtrl || !skinCtrl.skin ) {\r\n\r\n\t\t\tconsole.log( \"could not find skin controller!\" );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tif ( !ctrl.skeleton || !ctrl.skeleton.length ) {\r\n\r\n\t\t\tconsole.log( \"could not find the skeleton for the skin!\" );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tvar skin = skinCtrl.skin;\r\n\t\tvar skeleton = visualScene.getChildById( ctrl.skeleton[ 0 ] );\r\n\t\tvar hierarchy = [];\r\n\r\n\t\tapplyBindShape = applyBindShape !== undefined ? applyBindShape : true;\r\n\r\n\t\tvar bones = [];\r\n\t\tgeometry.skinWeights = [];\r\n\t\tgeometry.skinIndices = [];\r\n\r\n\t\t//createBones( geometry.bones, skin, hierarchy, skeleton, null, -1 );\r\n\t\t//createWeights( skin, geometry.bones, geometry.skinIndices, geometry.skinWeights );\r\n\r\n\t\t/*\r\n\t\tgeometry.animation = {\r\n\t\t\tname: 'take_001',\r\n\t\t\tfps: 30,\r\n\t\t\tlength: 2,\r\n\t\t\tJIT: true,\r\n\t\t\thierarchy: hierarchy\r\n\t\t};\r\n\t\t*/\r\n\r\n\t\tif ( applyBindShape ) {\r\n\r\n\t\t\tfor ( var i = 0; i < geometry.vertices.length; i ++ ) {\r\n\r\n\t\t\t\tgeometry.vertices[ i ].applyMatrix4( skin.bindShapeMatrix );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction setupSkeleton ( node, bones, frame, parent ) {\r\n\r\n\t\tnode.world = node.world || new THREE.Matrix4();\r\n\t\tnode.localworld = node.localworld || new THREE.Matrix4();\r\n\t\tnode.world.copy( node.matrix );\r\n\t\tnode.localworld.copy( node.matrix );\r\n\r\n\t\tif ( node.channels && node.channels.length ) {\r\n\r\n\t\t\tvar channel = node.channels[ 0 ];\r\n\t\t\tvar m = channel.sampler.output[ frame ];\r\n\r\n\t\t\tif ( m instanceof THREE.Matrix4 ) {\r\n\r\n\t\t\t\tnode.world.copy( m );\r\n\t\t\t\tnode.localworld.copy(m);\r\n\t\t\t\tif (frame === 0)\r\n\t\t\t\t\tnode.matrix.copy(m);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( parent ) {\r\n\r\n\t\t\tnode.world.multiplyMatrices( parent, node.world );\r\n\r\n\t\t}\r\n\r\n\t\tbones.push( node );\r\n\r\n\t\tfor ( var i = 0; i < node.nodes.length; i ++ ) {\r\n\r\n\t\t\tsetupSkeleton( node.nodes[ i ], bones, frame, node.world );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction setupSkinningMatrices ( bones, skin ) {\r\n\r\n\t\t// FIXME: this is dumb...\r\n\r\n\t\tfor ( var i = 0; i < bones.length; i ++ ) {\r\n\r\n\t\t\tvar bone = bones[ i ];\r\n\t\t\tvar found = -1;\r\n\r\n\t\t\tif ( bone.type != 'JOINT' ) continue;\r\n\r\n\t\t\tfor ( var j = 0; j < skin.joints.length; j ++ ) {\r\n\r\n\t\t\t\tif ( bone.sid === skin.joints[ j ] ) {\r\n\r\n\t\t\t\t\tfound = j;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( found >= 0 ) {\r\n\r\n\t\t\t\tvar inv = skin.invBindMatrices[ found ];\r\n\r\n\t\t\t\tbone.invBindMatrix = inv;\r\n\t\t\t\tbone.skinningMatrix = new THREE.Matrix4();\r\n\t\t\t\tbone.skinningMatrix.multiplyMatrices(bone.world, inv); // (IBMi * JMi)\r\n\t\t\t\tbone.animatrix = new THREE.Matrix4();\r\n\r\n\t\t\t\tbone.animatrix.copy(bone.localworld);\r\n\t\t\t\tbone.weights = [];\r\n\r\n\t\t\t\tfor ( var j = 0; j < skin.weights.length; j ++ ) {\r\n\r\n\t\t\t\t\tfor (var k = 0; k < skin.weights[ j ].length; k ++ ) {\r\n\r\n\t\t\t\t\t\tvar w = skin.weights[ j ][ k ];\r\n\r\n\t\t\t\t\t\tif ( w.joint === found ) {\r\n\r\n\t\t\t\t\t\t\tbone.weights.push( w );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconsole.warn( \"ColladaLoader: Could not find joint '\" + bone.sid + \"'.\" );\r\n\r\n\t\t\t\tbone.skinningMatrix = new THREE.Matrix4();\r\n\t\t\t\tbone.weights = [];\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t//Walk the Collada tree and flatten the bones into a list, extract the position, quat and scale from the matrix\r\n\tfunction flattenSkeleton(skeleton) {\r\n\r\n\t\tvar list = [];\r\n\t\tvar walk = function(parentid, node, list) {\r\n\r\n\t\t\tvar bone = {};\r\n\t\t\tbone.name = node.sid;\r\n\t\t\tbone.parent = parentid;\r\n\t\t\tbone.matrix = node.matrix;\r\n\t\t\tvar data = [ new THREE.Vector3(),new THREE.Quaternion(),new THREE.Vector3() ];\r\n\t\t\tbone.matrix.decompose(data[0], data[1], data[2]);\r\n\r\n\t\t\tbone.pos = [ data[0].x,data[0].y,data[0].z ];\r\n\r\n\t\t\tbone.scl = [ data[2].x,data[2].y,data[2].z ];\r\n\t\t\tbone.rotq = [ data[1].x,data[1].y,data[1].z,data[1].w ];\r\n\t\t\tlist.push(bone);\r\n\r\n\t\t\tfor (var i in node.nodes) {\r\n\r\n\t\t\t\twalk(node.sid, node.nodes[i], list);\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t\twalk(-1, skeleton, list);\r\n\t\treturn list;\r\n\r\n\t}\r\n\r\n\t//Move the vertices into the pose that is proper for the start of the animation\r\n\tfunction skinToBindPose(geometry,skeleton,skinController) {\r\n\r\n\t\tvar bones = [];\r\n\t\tsetupSkeleton( skeleton, bones, -1 );\r\n\t\tsetupSkinningMatrices( bones, skinController.skin );\r\n\t\tvar v = new THREE.Vector3();\r\n\t\tvar skinned = [];\r\n\r\n\t\tfor (var i = 0; i < geometry.vertices.length; i ++) {\r\n\r\n\t\t\tskinned.push(new THREE.Vector3());\r\n\r\n\t\t}\r\n\r\n\t\tfor ( i = 0; i < bones.length; i ++ ) {\r\n\r\n\t\t\tif ( bones[ i ].type != 'JOINT' ) continue;\r\n\r\n\t\t\tfor ( var j = 0; j < bones[ i ].weights.length; j ++ ) {\r\n\r\n\t\t\t\tvar w = bones[ i ].weights[ j ];\r\n\t\t\t\tvar vidx = w.index;\r\n\t\t\t\tvar weight = w.weight;\r\n\r\n\t\t\t\tvar o = geometry.vertices[vidx];\r\n\t\t\t\tvar s = skinned[vidx];\r\n\r\n\t\t\t\tv.x = o.x;\r\n\t\t\t\tv.y = o.y;\r\n\t\t\t\tv.z = o.z;\r\n\r\n\t\t\t\tv.applyMatrix4( bones[i].skinningMatrix );\r\n\r\n\t\t\t\ts.x += (v.x * weight);\r\n\t\t\t\ts.y += (v.y * weight);\r\n\t\t\t\ts.z += (v.z * weight);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfor (var i = 0; i < geometry.vertices.length; i ++) {\r\n\r\n\t\t\tgeometry.vertices[i] = skinned[i];\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction applySkin( geometry, instanceCtrl, frame ) {\r\n\r\n\t\tif ( frame === undefined ) frame = 40;\r\n\r\n\t\tvar skinController = controllers[ instanceCtrl.url ];\r\n\r\n\t\tif ( !skinController || !skinController.skin ) {\r\n\r\n\t\t\tconsole.log( 'ColladaLoader: Could not find skin controller.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tif ( !instanceCtrl.skeleton || !instanceCtrl.skeleton.length ) {\r\n\r\n\t\t\tconsole.log( 'ColladaLoader: Could not find the skeleton for the skin. ' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tvar animationBounds = calcAnimationBounds();\r\n\t\tvar skeleton = visualScene.getChildById( instanceCtrl.skeleton[0], true ) || visualScene.getChildBySid( instanceCtrl.skeleton[0], true );\r\n\r\n\t\t//flatten the skeleton into a list of bones\r\n\t\tvar bonelist = flattenSkeleton(skeleton);\r\n\t\tvar joints = skinController.skin.joints;\r\n\r\n\t\t//sort that list so that the order reflects the order in the joint list\r\n\t\tvar sortedbones = [];\r\n\t\tfor (var i = 0; i < joints.length; i ++) {\r\n\r\n\t\t\tfor (var j = 0; j < bonelist.length; j ++) {\r\n\r\n\t\t\t\tif (bonelist[j].name === joints[i]) {\r\n\r\n\t\t\t\t\tsortedbones[i] = bonelist[j];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t//hook up the parents by index instead of name\r\n\t\tfor (var i = 0; i < sortedbones.length; i ++) {\r\n\r\n\t\t\tfor (var j = 0; j < sortedbones.length; j ++) {\r\n\r\n\t\t\t\tif (sortedbones[i].parent === sortedbones[j].name) {\r\n\r\n\t\t\t\t\tsortedbones[i].parent = j;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\r\n\t\tvar i, j, w, vidx, weight;\r\n\t\tvar v = new THREE.Vector3(), o, s;\r\n\r\n\t\t// move vertices to bind shape\r\n\t\tfor ( i = 0; i < geometry.vertices.length; i ++ ) {\r\n\t\t\tgeometry.vertices[i].applyMatrix4( skinController.skin.bindShapeMatrix );\r\n\t\t}\r\n\r\n\t\tvar skinIndices = [];\r\n\t\tvar skinWeights = [];\r\n\t\tvar weights = skinController.skin.weights;\r\n\r\n\t\t// hook up the skin weights\r\n\t\t// TODO - this might be a good place to choose greatest 4 weights\r\n\t\tfor ( var i =0; i < weights.length; i ++ ) {\r\n\r\n\t\t\tvar indicies = new THREE.Vector4(weights[i][0] ? weights[i][0].joint : 0,weights[i][1] ? weights[i][1].joint : 0,weights[i][2] ? weights[i][2].joint : 0,weights[i][3] ? weights[i][3].joint : 0);\r\n\t\t\tvar weight = new THREE.Vector4(weights[i][0] ? weights[i][0].weight : 0,weights[i][1] ? weights[i][1].weight : 0,weights[i][2] ? weights[i][2].weight : 0,weights[i][3] ? weights[i][3].weight : 0);\r\n\r\n\t\t\tskinIndices.push(indicies);\r\n\t\t\tskinWeights.push(weight);\r\n\r\n\t\t}\r\n\r\n\t\tgeometry.skinIndices = skinIndices;\r\n\t\tgeometry.skinWeights = skinWeights;\r\n\t\tgeometry.bones = sortedbones;\r\n\t\t// process animation, or simply pose the rig if no animation\r\n\r\n\t\t//create an animation for the animated bones\r\n\t\t//NOTE: this has no effect when using morphtargets\r\n\t\tvar animationdata = { \"name\":animationBounds.ID,\"fps\":30,\"length\":animationBounds.frames / 30,\"hierarchy\":[] };\r\n\r\n\t\tfor (var j = 0; j < sortedbones.length; j ++) {\r\n\r\n\t\t\tanimationdata.hierarchy.push({ parent:sortedbones[j].parent, name:sortedbones[j].name, keys:[] });\r\n\r\n\t\t}\r\n\r\n\t\tconsole.log( 'ColladaLoader:', animationBounds.ID + ' has ' + sortedbones.length + ' bones.' );\r\n\r\n\r\n\r\n\t\tskinToBindPose(geometry, skeleton, skinController);\r\n\r\n\r\n\t\tfor ( frame = 0; frame < animationBounds.frames; frame ++ ) {\r\n\r\n\t\t\tvar bones = [];\r\n\t\t\tvar skinned = [];\r\n\t\t\t// process the frame and setup the rig with a fresh\r\n\t\t\t// transform, possibly from the bone's animation channel(s)\r\n\r\n\t\t\tsetupSkeleton( skeleton, bones, frame );\r\n\t\t\tsetupSkinningMatrices( bones, skinController.skin );\r\n\r\n\t\t\tfor (var i = 0; i < bones.length; i ++) {\r\n\r\n\t\t\t\tfor (var j = 0; j < animationdata.hierarchy.length; j ++) {\r\n\r\n\t\t\t\t\tif (animationdata.hierarchy[j].name === bones[i].sid) {\r\n\r\n\t\t\t\t\t\tvar key = {};\r\n\t\t\t\t\t\tkey.time = (frame / 30);\r\n\t\t\t\t\t\tkey.matrix = bones[i].animatrix;\r\n\r\n\t\t\t\t\t\tif (frame === 0)\r\n\t\t\t\t\t\t\tbones[i].matrix = key.matrix;\r\n\r\n\t\t\t\t\t\tvar data = [ new THREE.Vector3(),new THREE.Quaternion(),new THREE.Vector3() ];\r\n\t\t\t\t\t\tkey.matrix.decompose(data[0], data[1], data[2]);\r\n\r\n\t\t\t\t\t\tkey.pos = [ data[0].x,data[0].y,data[0].z ];\r\n\r\n\t\t\t\t\t\tkey.scl = [ data[2].x,data[2].y,data[2].z ];\r\n\t\t\t\t\t\tkey.rot = data[1];\r\n\r\n\t\t\t\t\t\tanimationdata.hierarchy[j].keys.push(key);\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.animation = animationdata;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction createKinematics() {\r\n\r\n\t\tif ( kinematicsModel && kinematicsModel.joints.length === 0 ) {\r\n\t\t\tkinematics = undefined;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar jointMap = {};\r\n\r\n\t\tvar _addToMap = function( jointIndex, parentVisualElement ) {\r\n\r\n\t\t\tvar parentVisualElementId = parentVisualElement.getAttribute( 'id' );\r\n\t\t\tvar colladaNode = visualScene.getChildById( parentVisualElementId, true );\r\n\t\t\tvar joint = kinematicsModel.joints[ jointIndex ];\r\n\r\n\t\t\tscene.traverse(function( node ) {\r\n\r\n\t\t\t\tif ( node.colladaId == parentVisualElementId ) {\r\n\r\n\t\t\t\t\tjointMap[ jointIndex ] = {\r\n\t\t\t\t\t\tnode: node,\r\n\t\t\t\t\t\ttransforms: colladaNode.transforms,\r\n\t\t\t\t\t\tjoint: joint,\r\n\t\t\t\t\t\tposition: joint.zeroPosition\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\r\n\t\t};\r\n\r\n\t\tkinematics = {\r\n\r\n\t\t\tjoints: kinematicsModel && kinematicsModel.joints,\r\n\r\n\t\t\tgetJointValue: function( jointIndex ) {\r\n\r\n\t\t\t\tvar jointData = jointMap[ jointIndex ];\r\n\r\n\t\t\t\tif ( jointData ) {\r\n\r\n\t\t\t\t\treturn jointData.position;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconsole.log( 'getJointValue: joint ' + jointIndex + ' doesn\\'t exist' );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\tsetJointValue: function( jointIndex, value ) {\r\n\r\n\t\t\t\tvar jointData = jointMap[ jointIndex ];\r\n\r\n\t\t\t\tif ( jointData ) {\r\n\r\n\t\t\t\t\tvar joint = jointData.joint;\r\n\r\n\t\t\t\t\tif ( value > joint.limits.max || value < joint.limits.min ) {\r\n\r\n\t\t\t\t\t\tconsole.log( 'setJointValue: joint ' + jointIndex + ' value ' + value + ' outside of limits (min: ' + joint.limits.min + ', max: ' + joint.limits.max + ')' );\r\n\r\n\t\t\t\t\t} else if ( joint.static ) {\r\n\r\n\t\t\t\t\t\tconsole.log( 'setJointValue: joint ' + jointIndex + ' is static' );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tvar threejsNode = jointData.node;\r\n\t\t\t\t\t\tvar axis = joint.axis;\r\n\t\t\t\t\t\tvar transforms = jointData.transforms;\r\n\r\n\t\t\t\t\t\tvar matrix = new THREE.Matrix4();\r\n\t\t\t\t\t\tvar m1 = new THREE.Matrix4();\r\n\r\n\t\t\t\t\t\tfor (i = 0; i < transforms.length; i ++ ) {\r\n\r\n\t\t\t\t\t\t\tvar transform = transforms[ i ];\r\n\r\n\t\t\t\t\t\t\t// kinda ghetto joint detection\r\n\r\n\t\t\t\t\t\t\tif ( transform.sid && transform.sid.indexOf( 'joint' + jointIndex ) !== -1 ) {\r\n\r\n\t\t\t\t\t\t\t\t// apply actual joint value here\r\n\t\t\t\t\t\t\t\tswitch ( joint.type ) {\r\n\r\n\t\t\t\t\t\t\t\t\tcase 'revolute':\r\n\r\n\t\t\t\t\t\t\t\t\t\tmatrix.multiply( m1.makeRotationAxis( axis, THREE.Math.degToRad(value) ) );\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\t\t\tcase 'prismatic':\r\n\r\n\t\t\t\t\t\t\t\t\t\tmatrix.multiply( m1.makeTranslation(axis.x * value, axis.y * value, axis.z * value ) );\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\t\t\tdefault:\r\n\r\n\t\t\t\t\t\t\t\t\t\tconsole.warn( 'setJointValue: unknown joint type: ' + joint.type );\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\tswitch ( transform.type ) {\r\n\r\n\t\t\t\t\t\t\t\t\tcase 'matrix':\r\n\r\n\t\t\t\t\t\t\t\t\t\tmatrix.multiply( transform.obj );\r\n\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\t\t\tcase 'translate':\r\n\r\n\t\t\t\t\t\t\t\t\t\tmatrix.multiply( m1.makeTranslation( transform.obj.x, transform.obj.y, transform.obj.z ) );\r\n\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\t\t\tcase 'rotate':\r\n\r\n\t\t\t\t\t\t\t\t\t\tmatrix.multiply( m1.makeRotationAxis( transform.obj, transform.angle ) );\r\n\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// apply the matrix to the threejs node\r\n\t\t\t\t\t\tvar elementsFloat32Arr = matrix.elements;\r\n\t\t\t\t\t\tvar elements = Array.prototype.slice.call( elementsFloat32Arr );\r\n\r\n\t\t\t\t\t\tvar elementsRowMajor = [\r\n\t\t\t\t\t\t\telements[ 0 ],\r\n\t\t\t\t\t\t\telements[ 4 ],\r\n\t\t\t\t\t\t\telements[ 8 ],\r\n\t\t\t\t\t\t\telements[ 12 ],\r\n\t\t\t\t\t\t\telements[ 1 ],\r\n\t\t\t\t\t\t\telements[ 5 ],\r\n\t\t\t\t\t\t\telements[ 9 ],\r\n\t\t\t\t\t\t\telements[ 13 ],\r\n\t\t\t\t\t\t\telements[ 2 ],\r\n\t\t\t\t\t\t\telements[ 6 ],\r\n\t\t\t\t\t\t\telements[ 10 ],\r\n\t\t\t\t\t\t\telements[ 14 ],\r\n\t\t\t\t\t\t\telements[ 3 ],\r\n\t\t\t\t\t\t\telements[ 7 ],\r\n\t\t\t\t\t\t\telements[ 11 ],\r\n\t\t\t\t\t\t\telements[ 15 ]\r\n\t\t\t\t\t\t];\r\n\r\n\t\t\t\t\t\tthreejsNode.matrix.set.apply( threejsNode.matrix, elementsRowMajor );\r\n\t\t\t\t\t\tthreejsNode.matrix.decompose( threejsNode.position, threejsNode.quaternion, threejsNode.scale );\r\n\r\n\t\t\t\t\t\tjointMap[ jointIndex ].position = value;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconsole.log( 'setJointValue: joint ' + jointIndex + ' doesn\\'t exist' );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t\tvar element = COLLADA.querySelector('scene instance_kinematics_scene');\r\n\r\n\t\tif ( element ) {\r\n\r\n\t\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\t\tvar child = element.childNodes[ i ];\r\n\r\n\t\t\t\tif ( child.nodeType != 1 ) continue;\r\n\r\n\t\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\t\tcase 'bind_joint_axis':\r\n\r\n\t\t\t\t\t\tvar visualTarget = child.getAttribute( 'target' ).split( '/' ).pop();\r\n\t\t\t\t\t\tvar axis = child.querySelector('axis param').textContent;\r\n\t\t\t\t\t\tvar jointIndex = parseInt( axis.split( 'joint' ).pop().split( '.' )[0] );\r\n\t\t\t\t\t\tvar visualTargetElement = COLLADA.querySelector( '[sid=\"' + visualTarget + '\"]' );\r\n\r\n\t\t\t\t\t\tif ( visualTargetElement ) {\r\n\t\t\t\t\t\t\tvar parentVisualElement = visualTargetElement.parentElement;\r\n\t\t\t\t\t\t\t_addToMap(jointIndex, parentVisualElement);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault:\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction createSceneGraph ( node, parent ) {\r\n\r\n\t\tvar obj = new THREE.Object3D();\r\n\t\tvar skinned = false;\r\n\t\tvar skinController;\r\n\t\tvar morphController;\r\n\t\tvar i, j;\r\n\r\n\t\t// FIXME: controllers\r\n\r\n\t\tfor ( i = 0; i < node.controllers.length; i ++ ) {\r\n\r\n\t\t\tvar controller = controllers[ node.controllers[ i ].url ];\r\n\r\n\t\t\tswitch ( controller.type ) {\r\n\r\n\t\t\t\tcase 'skin':\r\n\r\n\t\t\t\t\tif ( geometries[ controller.skin.source ] ) {\r\n\r\n\t\t\t\t\t\tvar inst_geom = new InstanceGeometry();\r\n\r\n\t\t\t\t\t\tinst_geom.url = controller.skin.source;\r\n\t\t\t\t\t\tinst_geom.instance_material = node.controllers[ i ].instance_material;\r\n\r\n\t\t\t\t\t\tnode.geometries.push( inst_geom );\r\n\t\t\t\t\t\tskinned = true;\r\n\t\t\t\t\t\tskinController = node.controllers[ i ];\r\n\r\n\t\t\t\t\t} else if ( controllers[ controller.skin.source ] ) {\r\n\r\n\t\t\t\t\t\t// urgh: controller can be chained\r\n\t\t\t\t\t\t// handle the most basic case...\r\n\r\n\t\t\t\t\t\tvar second = controllers[ controller.skin.source ];\r\n\t\t\t\t\t\tmorphController = second;\r\n\t\t\t\t\t//\tskinController = node.controllers[i];\r\n\r\n\t\t\t\t\t\tif ( second.morph && geometries[ second.morph.source ] ) {\r\n\r\n\t\t\t\t\t\t\tvar inst_geom = new InstanceGeometry();\r\n\r\n\t\t\t\t\t\t\tinst_geom.url = second.morph.source;\r\n\t\t\t\t\t\t\tinst_geom.instance_material = node.controllers[ i ].instance_material;\r\n\r\n\t\t\t\t\t\t\tnode.geometries.push( inst_geom );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'morph':\r\n\r\n\t\t\t\t\tif ( geometries[ controller.morph.source ] ) {\r\n\r\n\t\t\t\t\t\tvar inst_geom = new InstanceGeometry();\r\n\r\n\t\t\t\t\t\tinst_geom.url = controller.morph.source;\r\n\t\t\t\t\t\tinst_geom.instance_material = node.controllers[ i ].instance_material;\r\n\r\n\t\t\t\t\t\tnode.geometries.push( inst_geom );\r\n\t\t\t\t\t\tmorphController = node.controllers[ i ];\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tconsole.log( 'ColladaLoader: Morph-controller partially supported.' );\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// geometries\r\n\r\n\t\tvar double_sided_materials = {};\r\n\r\n\t\tfor ( i = 0; i < node.geometries.length; i ++ ) {\r\n\r\n\t\t\tvar instance_geometry = node.geometries[i];\r\n\t\t\tvar instance_materials = instance_geometry.instance_material;\r\n\t\t\tvar geometry = geometries[ instance_geometry.url ];\r\n\t\t\tvar used_materials = {};\r\n\t\t\tvar used_materials_array = [];\r\n\t\t\tvar num_materials = 0;\r\n\t\t\tvar first_material;\r\n\r\n\t\t\tif ( geometry ) {\r\n\r\n\t\t\t\tif ( !geometry.mesh || !geometry.mesh.primitives )\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\tif ( obj.name.length === 0 ) {\r\n\r\n\t\t\t\t\tobj.name = geometry.id;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// collect used fx for this geometry-instance\r\n\r\n\t\t\t\tif ( instance_materials ) {\r\n\r\n\t\t\t\t\tfor ( j = 0; j < instance_materials.length; j ++ ) {\r\n\r\n\t\t\t\t\t\tvar instance_material = instance_materials[ j ];\r\n\t\t\t\t\t\tvar mat = materials[ instance_material.target ];\r\n\t\t\t\t\t\tvar effect_id = mat.instance_effect.url;\r\n\t\t\t\t\t\tvar shader = effects[ effect_id ].shader;\r\n\t\t\t\t\t\tvar material3js = shader.material;\r\n\r\n\t\t\t\t\t\tif ( geometry.doubleSided ) {\r\n\r\n\t\t\t\t\t\t\tif ( !( instance_material.symbol in double_sided_materials ) ) {\r\n\r\n\t\t\t\t\t\t\t\tvar _copied_material = material3js.clone();\r\n\t\t\t\t\t\t\t\t_copied_material.side = THREE.DoubleSide;\r\n\t\t\t\t\t\t\t\tdouble_sided_materials[ instance_material.symbol ] = _copied_material;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tmaterial3js = double_sided_materials[ instance_material.symbol ];\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tmaterial3js.opacity = !material3js.opacity ? 1 : material3js.opacity;\r\n\t\t\t\t\t\tused_materials[ instance_material.symbol ] = num_materials;\r\n\t\t\t\t\t\tused_materials_array.push( material3js );\r\n\t\t\t\t\t\tfirst_material = material3js;\r\n\t\t\t\t\t\tfirst_material.name = mat.name === null || mat.name === '' ? mat.id : mat.name;\r\n\t\t\t\t\t\tnum_materials ++;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar mesh;\r\n\t\t\t\tvar material = first_material || new THREE.MeshLambertMaterial( { color: 0xdddddd, side: geometry.doubleSided ? THREE.DoubleSide : THREE.FrontSide } );\r\n\t\t\t\tvar geom = geometry.mesh.geometry3js;\r\n\r\n\t\t\t\tif ( num_materials > 1 ) {\r\n\r\n\t\t\t\t\tmaterial = new THREE.MultiMaterial( used_materials_array );\r\n\r\n\t\t\t\t\tfor ( j = 0; j < geom.faces.length; j ++ ) {\r\n\r\n\t\t\t\t\t\tvar face = geom.faces[ j ];\r\n\t\t\t\t\t\tface.materialIndex = used_materials[ face.daeMaterial ]\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( skinController !== undefined ) {\r\n\r\n\r\n\t\t\t\t\tapplySkin( geom, skinController );\r\n\r\n\t\t\t\t\tif ( geom.morphTargets.length > 0 ) {\r\n\r\n\t\t\t\t\t\tmaterial.morphTargets = true;\r\n\t\t\t\t\t\tmaterial.skinning = false;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tmaterial.morphTargets = false;\r\n\t\t\t\t\t\tmaterial.skinning = true;\r\n\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\tmesh = new THREE.SkinnedMesh( geom, material, false );\r\n\r\n\r\n\t\t\t\t\t//mesh.skeleton = skinController.skeleton;\r\n\t\t\t\t\t//mesh.skinController = controllers[ skinController.url ];\r\n\t\t\t\t\t//mesh.skinInstanceController = skinController;\r\n\t\t\t\t\tmesh.name = 'skin_' + skins.length;\r\n\r\n\r\n\r\n\t\t\t\t\t//mesh.animationHandle.setKey(0);\r\n\t\t\t\t\tskins.push( mesh );\r\n\r\n\t\t\t\t} else if ( morphController !== undefined ) {\r\n\r\n\t\t\t\t\tcreateMorph( geom, morphController );\r\n\r\n\t\t\t\t\tmaterial.morphTargets = true;\r\n\r\n\t\t\t\t\tmesh = new THREE.Mesh( geom, material );\r\n\t\t\t\t\tmesh.name = 'morph_' + morphs.length;\r\n\r\n\t\t\t\t\tmorphs.push( mesh );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tif ( geom.isLineStrip === true ) {\r\n\r\n\t\t\t\t\t\tmesh = new THREE.Line( geom );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tmesh = new THREE.Mesh( geom, material );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tobj.add(mesh);\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfor ( i = 0; i < node.cameras.length; i ++ ) {\r\n\r\n\t\t\tvar instance_camera = node.cameras[i];\r\n\t\t\tvar cparams = cameras[instance_camera.url];\r\n\r\n\t\t\tvar cam = new THREE.PerspectiveCamera(cparams.yfov, parseFloat(cparams.aspect_ratio),\r\n\t\t\t\t\tparseFloat(cparams.znear), parseFloat(cparams.zfar));\r\n\r\n\t\t\tobj.add(cam);\r\n\t\t}\r\n\r\n\t\tfor ( i = 0; i < node.lights.length; i ++ ) {\r\n\r\n\t\t\tvar light = null;\r\n\t\t\tvar instance_light = node.lights[i];\r\n\t\t\tvar lparams = lights[instance_light.url];\r\n\r\n\t\t\tif ( lparams && lparams.technique ) {\r\n\r\n\t\t\t\tvar color = lparams.color.getHex();\r\n\t\t\t\tvar intensity = lparams.intensity;\r\n\t\t\t\tvar distance = lparams.distance;\r\n\t\t\t\tvar angle = lparams.falloff_angle;\r\n\r\n\t\t\t\tswitch ( lparams.technique ) {\r\n\r\n\t\t\t\t\tcase 'directional':\r\n\r\n\t\t\t\t\t\tlight = new THREE.DirectionalLight( color, intensity, distance );\r\n\t\t\t\t\t\tlight.position.set(0, 0, 1);\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'point':\r\n\r\n\t\t\t\t\t\tlight = new THREE.PointLight( color, intensity, distance );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'spot':\r\n\r\n\t\t\t\t\t\tlight = new THREE.SpotLight( color, intensity, distance, angle );\r\n\t\t\t\t\t\tlight.position.set(0, 0, 1);\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'ambient':\r\n\r\n\t\t\t\t\t\tlight = new THREE.AmbientLight( color );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif (light) {\r\n\t\t\t\tobj.add(light);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tobj.name = node.name || node.id || \"\";\r\n\t\tobj.colladaId = node.id || \"\";\r\n\t\tobj.layer = node.layer || \"\";\r\n\t\tobj.matrix = node.matrix;\r\n\t\tobj.matrix.decompose( obj.position, obj.quaternion, obj.scale );\r\n\r\n\t\tif ( options.centerGeometry && obj.geometry ) {\r\n\r\n\t\t\tvar delta = obj.geometry.center();\r\n\t\t\tdelta.multiply( obj.scale );\r\n\t\t\tdelta.applyQuaternion( obj.quaternion );\r\n\r\n\t\t\tobj.position.sub( delta );\r\n\r\n\t\t}\r\n\r\n\t\tfor ( i = 0; i < node.nodes.length; i ++ ) {\r\n\r\n\t\t\tobj.add( createSceneGraph( node.nodes[i], node ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn obj;\r\n\r\n\t}\r\n\r\n\tfunction getJointId( skin, id ) {\r\n\r\n\t\tfor ( var i = 0; i < skin.joints.length; i ++ ) {\r\n\r\n\t\t\tif ( skin.joints[ i ] === id ) {\r\n\r\n\t\t\t\treturn i;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction getLibraryNode( id ) {\r\n\r\n\t\tvar nodes = COLLADA.querySelectorAll('library_nodes node');\r\n\r\n\t\tfor ( var i = 0; i < nodes.length; i++ ) {\r\n\r\n\t\t\tvar attObj = nodes[i].attributes.getNamedItem('id');\r\n\r\n\t\t\tif ( attObj && attObj.value === id ) {\r\n\r\n\t\t\t\treturn nodes[i];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn undefined;\r\n\r\n\t}\r\n\r\n\tfunction getChannelsForNode ( node ) {\r\n\r\n\t\tvar channels = [];\r\n\t\tvar startTime = 1000000;\r\n\t\tvar endTime = -1000000;\r\n\r\n\t\tfor ( var id in animations ) {\r\n\r\n\t\t\tvar animation = animations[id];\r\n\r\n\t\t\tfor ( var i = 0; i < animation.channel.length; i ++ ) {\r\n\r\n\t\t\t\tvar channel = animation.channel[i];\r\n\t\t\t\tvar sampler = animation.sampler[i];\r\n\t\t\t\tvar id = channel.target.split('/')[0];\r\n\r\n\t\t\t\tif ( id == node.id ) {\r\n\r\n\t\t\t\t\tsampler.create();\r\n\t\t\t\t\tchannel.sampler = sampler;\r\n\t\t\t\t\tstartTime = Math.min(startTime, sampler.startTime);\r\n\t\t\t\t\tendTime = Math.max(endTime, sampler.endTime);\r\n\t\t\t\t\tchannels.push(channel);\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( channels.length ) {\r\n\r\n\t\t\tnode.startTime = startTime;\r\n\t\t\tnode.endTime = endTime;\r\n\r\n\t\t}\r\n\r\n\t\treturn channels;\r\n\r\n\t}\r\n\r\n\tfunction calcFrameDuration( node ) {\r\n\r\n\t\tvar minT = 10000000;\r\n\r\n\t\tfor ( var i = 0; i < node.channels.length; i ++ ) {\r\n\r\n\t\t\tvar sampler = node.channels[i].sampler;\r\n\r\n\t\t\tfor ( var j = 0; j < sampler.input.length - 1; j ++ ) {\r\n\r\n\t\t\t\tvar t0 = sampler.input[ j ];\r\n\t\t\t\tvar t1 = sampler.input[ j + 1 ];\r\n\t\t\t\tminT = Math.min( minT, t1 - t0 );\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn minT;\r\n\r\n\t}\r\n\r\n\tfunction calcMatrixAt( node, t ) {\r\n\r\n\t\tvar animated = {};\r\n\r\n\t\tvar i, j;\r\n\r\n\t\tfor ( i = 0; i < node.channels.length; i ++ ) {\r\n\r\n\t\t\tvar channel = node.channels[ i ];\r\n\t\t\tanimated[ channel.sid ] = channel;\r\n\r\n\t\t}\r\n\r\n\t\tvar matrix = new THREE.Matrix4();\r\n\r\n\t\tfor ( i = 0; i < node.transforms.length; i ++ ) {\r\n\r\n\t\t\tvar transform = node.transforms[ i ];\r\n\t\t\tvar channel = animated[ transform.sid ];\r\n\r\n\t\t\tif ( channel !== undefined ) {\r\n\r\n\t\t\t\tvar sampler = channel.sampler;\r\n\t\t\t\tvar value;\r\n\r\n\t\t\t\tfor ( j = 0; j < sampler.input.length - 1; j ++ ) {\r\n\r\n\t\t\t\t\tif ( sampler.input[ j + 1 ] > t ) {\r\n\r\n\t\t\t\t\t\tvalue = sampler.output[ j ];\r\n\t\t\t\t\t\t//console.log(value.flatten)\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( value !== undefined ) {\r\n\r\n\t\t\t\t\tif ( value instanceof THREE.Matrix4 ) {\r\n\r\n\t\t\t\t\t\tmatrix.multiplyMatrices( matrix, value );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t// FIXME: handle other types\r\n\r\n\t\t\t\t\t\tmatrix.multiplyMatrices( matrix, transform.matrix );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tmatrix.multiplyMatrices( matrix, transform.matrix );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tmatrix.multiplyMatrices( matrix, transform.matrix );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn matrix;\r\n\r\n\t}\r\n\r\n\tfunction bakeAnimations ( node ) {\r\n\r\n\t\tif ( node.channels && node.channels.length ) {\r\n\r\n\t\t\tvar keys = [],\r\n\t\t\t\tsids = [];\r\n\r\n\t\t\tfor ( var i = 0, il = node.channels.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tvar channel = node.channels[i],\r\n\t\t\t\t\tfullSid = channel.fullSid,\r\n\t\t\t\t\tsampler = channel.sampler,\r\n\t\t\t\t\tinput = sampler.input,\r\n\t\t\t\t\ttransform = node.getTransformBySid( channel.sid ),\r\n\t\t\t\t\tmember;\r\n\r\n\t\t\t\tif ( channel.arrIndices ) {\r\n\r\n\t\t\t\t\tmember = [];\r\n\r\n\t\t\t\t\tfor ( var j = 0, jl = channel.arrIndices.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\t\tmember[ j ] = getConvertedIndex( channel.arrIndices[ j ] );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tmember = getConvertedMember( channel.member );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( transform ) {\r\n\r\n\t\t\t\t\tif ( sids.indexOf( fullSid ) === -1 ) {\r\n\r\n\t\t\t\t\t\tsids.push( fullSid );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor ( var j = 0, jl = input.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\t\tvar time = input[j],\r\n\t\t\t\t\t\t\tdata = sampler.getData( transform.type, j, member ),\r\n\t\t\t\t\t\t\tkey = findKey( keys, time );\r\n\r\n\t\t\t\t\t\tif ( !key ) {\r\n\r\n\t\t\t\t\t\t\tkey = new Key( time );\r\n\t\t\t\t\t\t\tvar timeNdx = findTimeNdx( keys, time );\r\n\t\t\t\t\t\t\tkeys.splice( timeNdx === -1 ? keys.length : timeNdx, 0, key );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tkey.addTarget( fullSid, transform, member, data );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconsole.log( 'Could not find transform \"' + channel.sid + '\" in node ' + node.id );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// post process\r\n\t\t\tfor ( var i = 0; i < sids.length; i ++ ) {\r\n\r\n\t\t\t\tvar sid = sids[ i ];\r\n\r\n\t\t\t\tfor ( var j = 0; j < keys.length; j ++ ) {\r\n\r\n\t\t\t\t\tvar key = keys[ j ];\r\n\r\n\t\t\t\t\tif ( !key.hasTarget( sid ) ) {\r\n\r\n\t\t\t\t\t\tinterpolateKeys( keys, key, j, sid );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tnode.keys = keys;\r\n\t\t\tnode.sids = sids;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction findKey ( keys, time) {\r\n\r\n\t\tvar retVal = null;\r\n\r\n\t\tfor ( var i = 0, il = keys.length; i < il && retVal === null; i ++ ) {\r\n\r\n\t\t\tvar key = keys[i];\r\n\r\n\t\t\tif ( key.time === time ) {\r\n\r\n\t\t\t\tretVal = key;\r\n\r\n\t\t\t} else if ( key.time > time ) {\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn retVal;\r\n\r\n\t}\r\n\r\n\tfunction findTimeNdx ( keys, time) {\r\n\r\n\t\tvar ndx = -1;\r\n\r\n\t\tfor ( var i = 0, il = keys.length; i < il && ndx === -1; i ++ ) {\r\n\r\n\t\t\tvar key = keys[i];\r\n\r\n\t\t\tif ( key.time >= time ) {\r\n\r\n\t\t\t\tndx = i;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn ndx;\r\n\r\n\t}\r\n\r\n\tfunction interpolateKeys ( keys, key, ndx, fullSid ) {\r\n\r\n\t\tvar prevKey = getPrevKeyWith( keys, fullSid, ndx ? ndx - 1 : 0 ),\r\n\t\t\tnextKey = getNextKeyWith( keys, fullSid, ndx + 1 );\r\n\r\n\t\tif ( prevKey && nextKey ) {\r\n\r\n\t\t\tvar scale = (key.time - prevKey.time) / (nextKey.time - prevKey.time),\r\n\t\t\t\tprevTarget = prevKey.getTarget( fullSid ),\r\n\t\t\t\tnextData = nextKey.getTarget( fullSid ).data,\r\n\t\t\t\tprevData = prevTarget.data,\r\n\t\t\t\tdata;\r\n\r\n\t\t\tif ( prevTarget.type === 'matrix' ) {\r\n\r\n\t\t\t\tdata = prevData;\r\n\r\n\t\t\t} else if ( prevData.length ) {\r\n\r\n\t\t\t\tdata = [];\r\n\r\n\t\t\t\tfor ( var i = 0; i < prevData.length; ++ i ) {\r\n\r\n\t\t\t\t\tdata[ i ] = prevData[ i ] + ( nextData[ i ] - prevData[ i ] ) * scale;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tdata = prevData + ( nextData - prevData ) * scale;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tkey.addTarget( fullSid, prevTarget.transform, prevTarget.member, data );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// Get next key with given sid\r\n\r\n\tfunction getNextKeyWith( keys, fullSid, ndx ) {\r\n\r\n\t\tfor ( ; ndx < keys.length; ndx ++ ) {\r\n\r\n\t\t\tvar key = keys[ ndx ];\r\n\r\n\t\t\tif ( key.hasTarget( fullSid ) ) {\r\n\r\n\t\t\t\treturn key;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t}\r\n\r\n\t// Get previous key with given sid\r\n\r\n\tfunction getPrevKeyWith( keys, fullSid, ndx ) {\r\n\r\n\t\tndx = ndx >= 0 ? ndx : ndx + keys.length;\r\n\r\n\t\tfor ( ; ndx >= 0; ndx -- ) {\r\n\r\n\t\t\tvar key = keys[ ndx ];\r\n\r\n\t\t\tif ( key.hasTarget( fullSid ) ) {\r\n\r\n\t\t\t\treturn key;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t}\r\n\r\n\tfunction _Image() {\r\n\r\n\t\tthis.id = \"\";\r\n\t\tthis.init_from = \"\";\r\n\r\n\t}\r\n\r\n\t_Image.prototype.parse = function(element) {\r\n\r\n\t\tthis.id = element.getAttribute('id');\r\n\r\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tvar child = element.childNodes[ i ];\r\n\r\n\t\t\tif ( child.nodeName === 'init_from' ) {\r\n\r\n\t\t\t\tthis.init_from = child.textContent;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tfunction Controller() {\r\n\r\n\t\tthis.id = \"\";\r\n\t\tthis.name = \"\";\r\n\t\tthis.type = \"\";\r\n\t\tthis.skin = null;\r\n\t\tthis.morph = null;\r\n\r\n\t}\r\n\r\n\tController.prototype.parse = function( element ) {\r\n\r\n\t\tthis.id = element.getAttribute('id');\r\n\t\tthis.name = element.getAttribute('name');\r\n\t\tthis.type = \"none\";\r\n\r\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tvar child = element.childNodes[ i ];\r\n\r\n\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\tcase 'skin':\r\n\r\n\t\t\t\t\tthis.skin = (new Skin()).parse(child);\r\n\t\t\t\t\tthis.type = child.nodeName;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'morph':\r\n\r\n\t\t\t\t\tthis.morph = (new Morph()).parse(child);\r\n\t\t\t\t\tthis.type = child.nodeName;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tfunction Morph() {\r\n\r\n\t\tthis.method = null;\r\n\t\tthis.source = null;\r\n\t\tthis.targets = null;\r\n\t\tthis.weights = null;\r\n\r\n\t}\r\n\r\n\tMorph.prototype.parse = function( element ) {\r\n\r\n\t\tvar sources = {};\r\n\t\tvar inputs = [];\r\n\t\tvar i;\r\n\r\n\t\tthis.method = element.getAttribute( 'method' );\r\n\t\tthis.source = element.getAttribute( 'source' ).replace( /^#/, '' );\r\n\r\n\t\tfor ( i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tvar child = element.childNodes[ i ];\r\n\t\t\tif ( child.nodeType != 1 ) continue;\r\n\r\n\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\tcase 'source':\r\n\r\n\t\t\t\t\tvar source = ( new Source() ).parse( child );\r\n\t\t\t\t\tsources[ source.id ] = source;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'targets':\r\n\r\n\t\t\t\t\tinputs = this.parseInputs( child );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\r\n\t\t\t\t\tconsole.log( child.nodeName );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfor ( i = 0; i < inputs.length; i ++ ) {\r\n\r\n\t\t\tvar input = inputs[ i ];\r\n\t\t\tvar source = sources[ input.source ];\r\n\r\n\t\t\tswitch ( input.semantic ) {\r\n\r\n\t\t\t\tcase 'MORPH_TARGET':\r\n\r\n\t\t\t\t\tthis.targets = source.read();\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'MORPH_WEIGHT':\r\n\r\n\t\t\t\t\tthis.weights = source.read();\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tMorph.prototype.parseInputs = function(element) {\r\n\r\n\t\tvar inputs = [];\r\n\r\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tvar child = element.childNodes[i];\r\n\t\t\tif ( child.nodeType != 1) continue;\r\n\r\n\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\tcase 'input':\r\n\r\n\t\t\t\t\tinputs.push( (new Input()).parse(child) );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn inputs;\r\n\r\n\t};\r\n\r\n\tfunction Skin() {\r\n\r\n\t\tthis.source = \"\";\r\n\t\tthis.bindShapeMatrix = null;\r\n\t\tthis.invBindMatrices = [];\r\n\t\tthis.joints = [];\r\n\t\tthis.weights = [];\r\n\r\n\t}\r\n\r\n\tSkin.prototype.parse = function( element ) {\r\n\r\n\t\tvar sources = {};\r\n\t\tvar joints, weights;\r\n\r\n\t\tthis.source = element.getAttribute( 'source' ).replace( /^#/, '' );\r\n\t\tthis.invBindMatrices = [];\r\n\t\tthis.joints = [];\r\n\t\tthis.weights = [];\r\n\r\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tvar child = element.childNodes[i];\r\n\t\t\tif ( child.nodeType != 1 ) continue;\r\n\r\n\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\tcase 'bind_shape_matrix':\r\n\r\n\t\t\t\t\tvar f = _floats(child.textContent);\r\n\t\t\t\t\tthis.bindShapeMatrix = getConvertedMat4( f );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'source':\r\n\r\n\t\t\t\t\tvar src = new Source().parse(child);\r\n\t\t\t\t\tsources[ src.id ] = src;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'joints':\r\n\r\n\t\t\t\t\tjoints = child;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'vertex_weights':\r\n\r\n\t\t\t\t\tweights = child;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\r\n\t\t\t\t\tconsole.log( child.nodeName );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.parseJoints( joints, sources );\r\n\t\tthis.parseWeights( weights, sources );\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tSkin.prototype.parseJoints = function ( element, sources ) {\r\n\r\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tvar child = element.childNodes[ i ];\r\n\t\t\tif ( child.nodeType != 1 ) continue;\r\n\r\n\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\tcase 'input':\r\n\r\n\t\t\t\t\tvar input = ( new Input() ).parse( child );\r\n\t\t\t\t\tvar source = sources[ input.source ];\r\n\r\n\t\t\t\t\tif ( input.semantic === 'JOINT' ) {\r\n\r\n\t\t\t\t\t\tthis.joints = source.read();\r\n\r\n\t\t\t\t\t} else if ( input.semantic === 'INV_BIND_MATRIX' ) {\r\n\r\n\t\t\t\t\t\tthis.invBindMatrices = source.read();\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tSkin.prototype.parseWeights = function ( element, sources ) {\r\n\r\n\t\tvar v, vcount, inputs = [];\r\n\r\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tvar child = element.childNodes[ i ];\r\n\t\t\tif ( child.nodeType != 1 ) continue;\r\n\r\n\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\tcase 'input':\r\n\r\n\t\t\t\t\tinputs.push( ( new Input() ).parse( child ) );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'v':\r\n\r\n\t\t\t\t\tv = _ints( child.textContent );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'vcount':\r\n\r\n\t\t\t\t\tvcount = _ints( child.textContent );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar index = 0;\r\n\r\n\t\tfor ( var i = 0; i < vcount.length; i ++ ) {\r\n\r\n\t\t\tvar numBones = vcount[i];\r\n\t\t\tvar vertex_weights = [];\r\n\r\n\t\t\tfor ( var j = 0; j < numBones; j ++ ) {\r\n\r\n\t\t\t\tvar influence = {};\r\n\r\n\t\t\t\tfor ( var k = 0; k < inputs.length; k ++ ) {\r\n\r\n\t\t\t\t\tvar input = inputs[ k ];\r\n\t\t\t\t\tvar value = v[ index + input.offset ];\r\n\r\n\t\t\t\t\tswitch ( input.semantic ) {\r\n\r\n\t\t\t\t\t\tcase 'JOINT':\r\n\r\n\t\t\t\t\t\t\tinfluence.joint = value;//this.joints[value];\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase 'WEIGHT':\r\n\r\n\t\t\t\t\t\t\tinfluence.weight = sources[ input.source ].data[ value ];\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvertex_weights.push( influence );\r\n\t\t\t\tindex += inputs.length;\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var j = 0; j < vertex_weights.length; j ++ ) {\r\n\r\n\t\t\t\tvertex_weights[ j ].index = i;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.weights.push( vertex_weights );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tfunction VisualScene () {\r\n\r\n\t\tthis.id = \"\";\r\n\t\tthis.name = \"\";\r\n\t\tthis.nodes = [];\r\n\t\tthis.scene = new THREE.Group();\r\n\r\n\t}\r\n\r\n\tVisualScene.prototype.getChildById = function( id, recursive ) {\r\n\r\n\t\tfor ( var i = 0; i < this.nodes.length; i ++ ) {\r\n\r\n\t\t\tvar node = this.nodes[ i ].getChildById( id, recursive );\r\n\r\n\t\t\tif ( node ) {\r\n\r\n\t\t\t\treturn node;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t};\r\n\r\n\tVisualScene.prototype.getChildBySid = function( sid, recursive ) {\r\n\r\n\t\tfor ( var i = 0; i < this.nodes.length; i ++ ) {\r\n\r\n\t\t\tvar node = this.nodes[ i ].getChildBySid( sid, recursive );\r\n\r\n\t\t\tif ( node ) {\r\n\r\n\t\t\t\treturn node;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t};\r\n\r\n\tVisualScene.prototype.parse = function( element ) {\r\n\r\n\t\tthis.id = element.getAttribute( 'id' );\r\n\t\tthis.name = element.getAttribute( 'name' );\r\n\t\tthis.nodes = [];\r\n\r\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tvar child = element.childNodes[ i ];\r\n\t\t\tif ( child.nodeType != 1 ) continue;\r\n\r\n\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\tcase 'node':\r\n\r\n\t\t\t\t\tthis.nodes.push( ( new Node() ).parse( child ) );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tfunction Node() {\r\n\r\n\t\tthis.id = \"\";\r\n\t\tthis.name = \"\";\r\n\t\tthis.sid = \"\";\r\n\t\tthis.nodes = [];\r\n\t\tthis.controllers = [];\r\n\t\tthis.transforms = [];\r\n\t\tthis.geometries = [];\r\n\t\tthis.channels = [];\r\n\t\tthis.matrix = new THREE.Matrix4();\r\n\r\n\t}\r\n\r\n\tNode.prototype.getChannelForTransform = function( transformSid ) {\r\n\r\n\t\tfor ( var i = 0; i < this.channels.length; i ++ ) {\r\n\r\n\t\t\tvar channel = this.channels[i];\r\n\t\t\tvar parts = channel.target.split('/');\r\n\t\t\tvar id = parts.shift();\r\n\t\t\tvar sid = parts.shift();\r\n\t\t\tvar dotSyntax = (sid.indexOf(\".\") >= 0);\r\n\t\t\tvar arrSyntax = (sid.indexOf(\"(\") >= 0);\r\n\t\t\tvar arrIndices;\r\n\r\n\t\t\tif ( dotSyntax ) {\r\n\r\n\t\t\t\tparts = sid.split(\".\");\r\n\t\t\t\tsid = parts.shift();\r\n\r\n\t\t\t} else if ( arrSyntax ) {\r\n\r\n\t\t\t\tarrIndices = sid.split(\"(\");\r\n\t\t\t\tsid = arrIndices.shift();\r\n\r\n\t\t\t\tfor ( var j = 0; j < arrIndices.length; j ++ ) {\r\n\r\n\t\t\t\t\tarrIndices[ j ] = parseInt( arrIndices[ j ].replace( /\\)/, '' ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( sid === transformSid ) {\r\n\r\n\t\t\t\tchannel.info = { sid: sid, dotSyntax: dotSyntax, arrSyntax: arrSyntax, arrIndices: arrIndices };\r\n\t\t\t\treturn channel;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t};\r\n\r\n\tNode.prototype.getChildById = function ( id, recursive ) {\r\n\r\n\t\tif ( this.id === id ) {\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\tif ( recursive ) {\r\n\r\n\t\t\tfor ( var i = 0; i < this.nodes.length; i ++ ) {\r\n\r\n\t\t\t\tvar n = this.nodes[ i ].getChildById( id, recursive );\r\n\r\n\t\t\t\tif ( n ) {\r\n\r\n\t\t\t\t\treturn n;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t};\r\n\r\n\tNode.prototype.getChildBySid = function ( sid, recursive ) {\r\n\r\n\t\tif ( this.sid === sid ) {\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\tif ( recursive ) {\r\n\r\n\t\t\tfor ( var i = 0; i < this.nodes.length; i ++ ) {\r\n\r\n\t\t\t\tvar n = this.nodes[ i ].getChildBySid( sid, recursive );\r\n\r\n\t\t\t\tif ( n ) {\r\n\r\n\t\t\t\t\treturn n;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t};\r\n\r\n\tNode.prototype.getTransformBySid = function ( sid ) {\r\n\r\n\t\tfor ( var i = 0; i < this.transforms.length; i ++ ) {\r\n\r\n\t\t\tif ( this.transforms[ i ].sid === sid ) return this.transforms[ i ];\r\n\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t};\r\n\r\n\tNode.prototype.parse = function( element ) {\r\n\r\n\t\tvar url;\r\n\r\n\t\tthis.id = element.getAttribute('id');\r\n\t\tthis.sid = element.getAttribute('sid');\r\n\t\tthis.name = element.getAttribute('name');\r\n\t\tthis.type = element.getAttribute('type');\r\n\t\tthis.layer = element.getAttribute('layer');\r\n\r\n\t\tthis.type = this.type === 'JOINT' ? this.type : 'NODE';\r\n\r\n\t\tthis.nodes = [];\r\n\t\tthis.transforms = [];\r\n\t\tthis.geometries = [];\r\n\t\tthis.cameras = [];\r\n\t\tthis.lights = [];\r\n\t\tthis.controllers = [];\r\n\t\tthis.matrix = new THREE.Matrix4();\r\n\r\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tvar child = element.childNodes[ i ];\r\n\t\t\tif ( child.nodeType != 1 ) continue;\r\n\r\n\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\tcase 'node':\r\n\r\n\t\t\t\t\tthis.nodes.push( ( new Node() ).parse( child ) );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'instance_camera':\r\n\r\n\t\t\t\t\tthis.cameras.push( ( new InstanceCamera() ).parse( child ) );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'instance_controller':\r\n\r\n\t\t\t\t\tthis.controllers.push( ( new InstanceController() ).parse( child ) );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'instance_geometry':\r\n\r\n\t\t\t\t\tthis.geometries.push( ( new InstanceGeometry() ).parse( child ) );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'instance_light':\r\n\r\n\t\t\t\t\tthis.lights.push( ( new InstanceLight() ).parse( child ) );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'instance_node':\r\n\r\n\t\t\t\t\turl = child.getAttribute( 'url' ).replace( /^#/, '' );\r\n\t\t\t\t\tvar iNode = getLibraryNode( url );\r\n\r\n\t\t\t\t\tif ( iNode ) {\r\n\r\n\t\t\t\t\t\tthis.nodes.push( ( new Node() ).parse( iNode )) ;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'rotate':\r\n\t\t\t\tcase 'translate':\r\n\t\t\t\tcase 'scale':\r\n\t\t\t\tcase 'matrix':\r\n\t\t\t\tcase 'lookat':\r\n\t\t\t\tcase 'skew':\r\n\r\n\t\t\t\t\tthis.transforms.push( ( new Transform() ).parse( child ) );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'extra':\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\r\n\t\t\t\t\tconsole.log( child.nodeName );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.channels = getChannelsForNode( this );\r\n\t\tbakeAnimations( this );\r\n\r\n\t\tthis.updateMatrix();\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tNode.prototype.updateMatrix = function () {\r\n\r\n\t\tthis.matrix.identity();\r\n\r\n\t\tfor ( var i = 0; i < this.transforms.length; i ++ ) {\r\n\r\n\t\t\tthis.transforms[ i ].apply( this.matrix );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tfunction Transform () {\r\n\r\n\t\tthis.sid = \"\";\r\n\t\tthis.type = \"\";\r\n\t\tthis.data = [];\r\n\t\tthis.obj = null;\r\n\r\n\t}\r\n\r\n\tTransform.prototype.parse = function ( element ) {\r\n\r\n\t\tthis.sid = element.getAttribute( 'sid' );\r\n\t\tthis.type = element.nodeName;\r\n\t\tthis.data = _floats( element.textContent );\r\n\t\tthis.convert();\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tTransform.prototype.convert = function () {\r\n\r\n\t\tswitch ( this.type ) {\r\n\r\n\t\t\tcase 'matrix':\r\n\r\n\t\t\t\tthis.obj = getConvertedMat4( this.data );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'rotate':\r\n\r\n\t\t\t\tthis.angle = THREE.Math.degToRad( this.data[3] );\r\n\r\n\t\t\tcase 'translate':\r\n\r\n\t\t\t\tfixCoords( this.data, -1 );\r\n\t\t\t\tthis.obj = new THREE.Vector3( this.data[ 0 ], this.data[ 1 ], this.data[ 2 ] );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'scale':\r\n\r\n\t\t\t\tfixCoords( this.data, 1 );\r\n\t\t\t\tthis.obj = new THREE.Vector3( this.data[ 0 ], this.data[ 1 ], this.data[ 2 ] );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\tconsole.log( 'Can not convert Transform of type ' + this.type );\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tTransform.prototype.apply = function () {\r\n\r\n\t\tvar m1 = new THREE.Matrix4();\r\n\r\n\t\treturn function ( matrix ) {\r\n\r\n\t\t\tswitch ( this.type ) {\r\n\r\n\t\t\t\tcase 'matrix':\r\n\r\n\t\t\t\t\tmatrix.multiply( this.obj );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'translate':\r\n\r\n\t\t\t\t\tmatrix.multiply( m1.makeTranslation( this.obj.x, this.obj.y, this.obj.z ) );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'rotate':\r\n\r\n\t\t\t\t\tmatrix.multiply( m1.makeRotationAxis( this.obj, this.angle ) );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'scale':\r\n\r\n\t\t\t\t\tmatrix.scale( this.obj );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t}();\r\n\r\n\tTransform.prototype.update = function ( data, member ) {\r\n\r\n\t\tvar members = [ 'X', 'Y', 'Z', 'ANGLE' ];\r\n\r\n\t\tswitch ( this.type ) {\r\n\r\n\t\t\tcase 'matrix':\r\n\r\n\t\t\t\tif ( ! member ) {\r\n\r\n\t\t\t\t\tthis.obj.copy( data );\r\n\r\n\t\t\t\t} else if ( member.length === 1 ) {\r\n\r\n\t\t\t\t\tswitch ( member[ 0 ] ) {\r\n\r\n\t\t\t\t\t\tcase 0:\r\n\r\n\t\t\t\t\t\t\tthis.obj.n11 = data[ 0 ];\r\n\t\t\t\t\t\t\tthis.obj.n21 = data[ 1 ];\r\n\t\t\t\t\t\t\tthis.obj.n31 = data[ 2 ];\r\n\t\t\t\t\t\t\tthis.obj.n41 = data[ 3 ];\r\n\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase 1:\r\n\r\n\t\t\t\t\t\t\tthis.obj.n12 = data[ 0 ];\r\n\t\t\t\t\t\t\tthis.obj.n22 = data[ 1 ];\r\n\t\t\t\t\t\t\tthis.obj.n32 = data[ 2 ];\r\n\t\t\t\t\t\t\tthis.obj.n42 = data[ 3 ];\r\n\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase 2:\r\n\r\n\t\t\t\t\t\t\tthis.obj.n13 = data[ 0 ];\r\n\t\t\t\t\t\t\tthis.obj.n23 = data[ 1 ];\r\n\t\t\t\t\t\t\tthis.obj.n33 = data[ 2 ];\r\n\t\t\t\t\t\t\tthis.obj.n43 = data[ 3 ];\r\n\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase 3:\r\n\r\n\t\t\t\t\t\t\tthis.obj.n14 = data[ 0 ];\r\n\t\t\t\t\t\t\tthis.obj.n24 = data[ 1 ];\r\n\t\t\t\t\t\t\tthis.obj.n34 = data[ 2 ];\r\n\t\t\t\t\t\t\tthis.obj.n44 = data[ 3 ];\r\n\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else if ( member.length === 2 ) {\r\n\r\n\t\t\t\t\tvar propName = 'n' + ( member[ 0 ] + 1 ) + ( member[ 1 ] + 1 );\r\n\t\t\t\t\tthis.obj[ propName ] = data;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconsole.log('Incorrect addressing of matrix in transform.');\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'translate':\r\n\t\t\tcase 'scale':\r\n\r\n\t\t\t\tif ( Object.prototype.toString.call( member ) === '[object Array]' ) {\r\n\r\n\t\t\t\t\tmember = members[ member[ 0 ] ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tswitch ( member ) {\r\n\r\n\t\t\t\t\tcase 'X':\r\n\r\n\t\t\t\t\t\tthis.obj.x = data;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'Y':\r\n\r\n\t\t\t\t\t\tthis.obj.y = data;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'Z':\r\n\r\n\t\t\t\t\t\tthis.obj.z = data;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault:\r\n\r\n\t\t\t\t\t\tthis.obj.x = data[ 0 ];\r\n\t\t\t\t\t\tthis.obj.y = data[ 1 ];\r\n\t\t\t\t\t\tthis.obj.z = data[ 2 ];\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'rotate':\r\n\r\n\t\t\t\tif ( Object.prototype.toString.call( member ) === '[object Array]' ) {\r\n\r\n\t\t\t\t\tmember = members[ member[ 0 ] ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tswitch ( member ) {\r\n\r\n\t\t\t\t\tcase 'X':\r\n\r\n\t\t\t\t\t\tthis.obj.x = data;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'Y':\r\n\r\n\t\t\t\t\t\tthis.obj.y = data;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'Z':\r\n\r\n\t\t\t\t\t\tthis.obj.z = data;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'ANGLE':\r\n\r\n\t\t\t\t\t\tthis.angle = THREE.Math.degToRad( data );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault:\r\n\r\n\t\t\t\t\t\tthis.obj.x = data[ 0 ];\r\n\t\t\t\t\t\tthis.obj.y = data[ 1 ];\r\n\t\t\t\t\t\tthis.obj.z = data[ 2 ];\r\n\t\t\t\t\t\tthis.angle = THREE.Math.degToRad( data[ 3 ] );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tfunction InstanceController() {\r\n\r\n\t\tthis.url = \"\";\r\n\t\tthis.skeleton = [];\r\n\t\tthis.instance_material = [];\r\n\r\n\t}\r\n\r\n\tInstanceController.prototype.parse = function ( element ) {\r\n\r\n\t\tthis.url = element.getAttribute('url').replace(/^#/, '');\r\n\t\tthis.skeleton = [];\r\n\t\tthis.instance_material = [];\r\n\r\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tvar child = element.childNodes[ i ];\r\n\t\t\tif ( child.nodeType !== 1 ) continue;\r\n\r\n\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\tcase 'skeleton':\r\n\r\n\t\t\t\t\tthis.skeleton.push( child.textContent.replace(/^#/, '') );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'bind_material':\r\n\r\n\t\t\t\t\tvar instances = child.querySelectorAll('instance_material');\r\n\r\n\t\t\t\t\tfor ( var j = 0; j < instances.length; j ++ ) {\r\n\r\n\t\t\t\t\t\tvar instance = instances[j];\r\n\t\t\t\t\t\tthis.instance_material.push( (new InstanceMaterial()).parse(instance) );\r\n\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'extra':\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tfunction InstanceMaterial () {\r\n\r\n\t\tthis.symbol = \"\";\r\n\t\tthis.target = \"\";\r\n\r\n\t}\r\n\r\n\tInstanceMaterial.prototype.parse = function ( element ) {\r\n\r\n\t\tthis.symbol = element.getAttribute('symbol');\r\n\t\tthis.target = element.getAttribute('target').replace(/^#/, '');\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tfunction InstanceGeometry() {\r\n\r\n\t\tthis.url = \"\";\r\n\t\tthis.instance_material = [];\r\n\r\n\t}\r\n\r\n\tInstanceGeometry.prototype.parse = function ( element ) {\r\n\r\n\t\tthis.url = element.getAttribute('url').replace(/^#/, '');\r\n\t\tthis.instance_material = [];\r\n\r\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tvar child = element.childNodes[i];\r\n\t\t\tif ( child.nodeType != 1 ) continue;\r\n\r\n\t\t\tif ( child.nodeName === 'bind_material' ) {\r\n\r\n\t\t\t\tvar instances = child.querySelectorAll('instance_material');\r\n\r\n\t\t\t\tfor ( var j = 0; j < instances.length; j ++ ) {\r\n\r\n\t\t\t\t\tvar instance = instances[j];\r\n\t\t\t\t\tthis.instance_material.push( (new InstanceMaterial()).parse(instance) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tfunction Geometry() {\r\n\r\n\t\tthis.id = \"\";\r\n\t\tthis.mesh = null;\r\n\r\n\t}\r\n\r\n\tGeometry.prototype.parse = function ( element ) {\r\n\r\n\t\tthis.id = element.getAttribute('id');\r\n\r\n\t\textractDoubleSided( this, element );\r\n\r\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tvar child = element.childNodes[i];\r\n\r\n\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\tcase 'mesh':\r\n\r\n\t\t\t\t\tthis.mesh = (new Mesh(this)).parse(child);\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'extra':\r\n\r\n\t\t\t\t\t// console.log( child );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tfunction Mesh( geometry ) {\r\n\r\n\t\tthis.geometry = geometry.id;\r\n\t\tthis.primitives = [];\r\n\t\tthis.vertices = null;\r\n\t\tthis.geometry3js = null;\r\n\r\n\t}\r\n\r\n\tMesh.prototype.parse = function ( element ) {\r\n\r\n\t\tthis.primitives = [];\r\n\r\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tvar child = element.childNodes[ i ];\r\n\r\n\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\tcase 'source':\r\n\r\n\t\t\t\t\t_source( child );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'vertices':\r\n\r\n\t\t\t\t\tthis.vertices = ( new Vertices() ).parse( child );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'linestrips':\r\n\r\n\t\t\t\t\tthis.primitives.push( ( new LineStrips().parse( child ) ) );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'triangles':\r\n\r\n\t\t\t\t\tthis.primitives.push( ( new Triangles().parse( child ) ) );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'polygons':\r\n\r\n\t\t\t\t\tthis.primitives.push( ( new Polygons().parse( child ) ) );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'polylist':\r\n\r\n\t\t\t\t\tthis.primitives.push( ( new Polylist().parse( child ) ) );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.geometry3js = new THREE.Geometry();\r\n\r\n\t\tif ( this.vertices === null ) {\r\n\r\n\t\t\t// TODO (mrdoob): Study case when this is null (carrier.dae)\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\tvar vertexData = sources[ this.vertices.input['POSITION'].source ].data;\r\n\r\n\t\tfor ( var i = 0; i < vertexData.length; i += 3 ) {\r\n\r\n\t\t\tthis.geometry3js.vertices.push( getConvertedVec3( vertexData, i ).clone() );\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var i = 0; i < this.primitives.length; i ++ ) {\r\n\r\n\t\t\tvar primitive = this.primitives[ i ];\r\n\t\t\tprimitive.setVertices( this.vertices );\r\n\t\t\tthis.handlePrimitive( primitive, this.geometry3js );\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.geometry3js.calcNormals ) {\r\n\r\n\t\t\tthis.geometry3js.computeVertexNormals();\r\n\t\t\tdelete this.geometry3js.calcNormals;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tMesh.prototype.handlePrimitive = function ( primitive, geom ) {\r\n\r\n\t\tif ( primitive instanceof LineStrips ) {\r\n\r\n\t\t\t// TODO: Handle indices. Maybe easier with BufferGeometry?\r\n\r\n\t\t\tgeom.isLineStrip = true;\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tvar j, k, pList = primitive.p, inputs = primitive.inputs;\r\n\t\tvar input, index, idx32;\r\n\t\tvar source, numParams;\r\n\t\tvar vcount, vcIndex = 0, maxOffset = 0;\r\n\t\tvar texture_sets = [];\r\n\r\n\t\tfor ( j = 0; j < inputs.length; j ++ ) {\r\n\r\n\t\t\tinput = inputs[ j ];\r\n\r\n\t\t\tvar offset = input.offset + 1;\r\n\t\t\tmaxOffset = (maxOffset < offset) ? offset : maxOffset;\r\n\r\n\t\t\tswitch ( input.semantic ) {\r\n\r\n\t\t\t\tcase 'TEXCOORD':\r\n\t\t\t\t\ttexture_sets.push( input.set );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var pCount = 0; pCount < pList.length; ++ pCount ) {\r\n\r\n\t\t\tvar p = pList[ pCount ], i = 0;\r\n\r\n\t\t\twhile ( i < p.length ) {\r\n\r\n\t\t\t\tvar vs = [];\r\n\t\t\t\tvar ns = [];\r\n\t\t\t\tvar ts = null;\r\n\t\t\t\tvar cs = [];\r\n\r\n\t\t\t\tif ( primitive.vcount ) {\r\n\r\n\t\t\t\t\tvcount = primitive.vcount.length ? primitive.vcount[ vcIndex ++ ] : primitive.vcount;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tvcount = p.length / maxOffset;\r\n\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tfor ( j = 0; j < vcount; j ++ ) {\r\n\r\n\t\t\t\t\tfor ( k = 0; k < inputs.length; k ++ ) {\r\n\r\n\t\t\t\t\t\tinput = inputs[ k ];\r\n\t\t\t\t\t\tsource = sources[ input.source ];\r\n\r\n\t\t\t\t\t\tindex = p[ i + ( j * maxOffset ) + input.offset ];\r\n\t\t\t\t\t\tnumParams = source.accessor.params.length;\r\n\t\t\t\t\t\tidx32 = index * numParams;\r\n\r\n\t\t\t\t\t\tswitch ( input.semantic ) {\r\n\r\n\t\t\t\t\t\t\tcase 'VERTEX':\r\n\r\n\t\t\t\t\t\t\t\tvs.push( index );\r\n\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tcase 'NORMAL':\r\n\r\n\t\t\t\t\t\t\t\tns.push( getConvertedVec3( source.data, idx32 ) );\r\n\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tcase 'TEXCOORD':\r\n\r\n\t\t\t\t\t\t\t\tts = ts || { };\r\n\t\t\t\t\t\t\t\tif ( ts[ input.set ] === undefined ) ts[ input.set ] = [];\r\n\t\t\t\t\t\t\t\t// invert the V\r\n\t\t\t\t\t\t\t\tts[ input.set ].push( new THREE.Vector2( source.data[ idx32 ], source.data[ idx32 + 1 ] ) );\r\n\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tcase 'COLOR':\r\n\r\n\t\t\t\t\t\t\t\tcs.push( new THREE.Color().setRGB( source.data[ idx32 ], source.data[ idx32 + 1 ], source.data[ idx32 + 2 ] ) );\r\n\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tdefault:\r\n\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( ns.length === 0 ) {\r\n\r\n\t\t\t\t\t// check the vertices inputs\r\n\t\t\t\t\tinput = this.vertices.input.NORMAL;\r\n\r\n\t\t\t\t\tif ( input ) {\r\n\r\n\t\t\t\t\t\tsource = sources[ input.source ];\r\n\t\t\t\t\t\tnumParams = source.accessor.params.length;\r\n\r\n\t\t\t\t\t\tfor ( var ndx = 0, len = vs.length; ndx < len; ndx ++ ) {\r\n\r\n\t\t\t\t\t\t\tns.push( getConvertedVec3( source.data, vs[ ndx ] * numParams ) );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tgeom.calcNormals = true;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( !ts ) {\r\n\r\n\t\t\t\t\tts = { };\r\n\t\t\t\t\t// check the vertices inputs\r\n\t\t\t\t\tinput = this.vertices.input.TEXCOORD;\r\n\r\n\t\t\t\t\tif ( input ) {\r\n\r\n\t\t\t\t\t\ttexture_sets.push( input.set );\r\n\t\t\t\t\t\tsource = sources[ input.source ];\r\n\t\t\t\t\t\tnumParams = source.accessor.params.length;\r\n\r\n\t\t\t\t\t\tfor ( var ndx = 0, len = vs.length; ndx < len; ndx ++ ) {\r\n\r\n\t\t\t\t\t\t\tidx32 = vs[ ndx ] * numParams;\r\n\t\t\t\t\t\t\tif ( ts[ input.set ] === undefined ) ts[ input.set ] = [ ];\r\n\t\t\t\t\t\t\t// invert the V\r\n\t\t\t\t\t\t\tts[ input.set ].push( new THREE.Vector2( source.data[ idx32 ], 1.0 - source.data[ idx32 + 1 ] ) );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( cs.length === 0 ) {\r\n\r\n\t\t\t\t\t// check the vertices inputs\r\n\t\t\t\t\tinput = this.vertices.input.COLOR;\r\n\r\n\t\t\t\t\tif ( input ) {\r\n\r\n\t\t\t\t\t\tsource = sources[ input.source ];\r\n\t\t\t\t\t\tnumParams = source.accessor.params.length;\r\n\r\n\t\t\t\t\t\tfor ( var ndx = 0, len = vs.length; ndx < len; ndx ++ ) {\r\n\r\n\t\t\t\t\t\t\tidx32 = vs[ ndx ] * numParams;\r\n\t\t\t\t\t\t\tcs.push( new THREE.Color().setRGB( source.data[ idx32 ], source.data[ idx32 + 1 ], source.data[ idx32 + 2 ] ) );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar face = null, faces = [], uv, uvArr;\r\n\r\n\t\t\t\tif ( vcount === 3 ) {\r\n\r\n\t\t\t\t\tfaces.push( new THREE.Face3( vs[0], vs[1], vs[2], ns, cs.length ? cs : new THREE.Color() ) );\r\n\r\n\t\t\t\t} else if ( vcount === 4 ) {\r\n\r\n\t\t\t\t\tfaces.push( new THREE.Face3( vs[0], vs[1], vs[3], ns.length ? [ ns[0].clone(), ns[1].clone(), ns[3].clone() ] : [], cs.length ? [ cs[0], cs[1], cs[3] ] : new THREE.Color() ) );\r\n\r\n\t\t\t\t\tfaces.push( new THREE.Face3( vs[1], vs[2], vs[3], ns.length ? [ ns[1].clone(), ns[2].clone(), ns[3].clone() ] : [], cs.length ? [ cs[1], cs[2], cs[3] ] : new THREE.Color() ) );\r\n\r\n\t\t\t\t} else if ( vcount > 4 && options.subdivideFaces ) {\r\n\r\n\t\t\t\t\tvar clr = cs.length ? cs : new THREE.Color(),\r\n\t\t\t\t\t\tvec1, vec2, vec3, v1, v2, norm;\r\n\r\n\t\t\t\t\t// subdivide into multiple Face3s\r\n\r\n\t\t\t\t\tfor ( k = 1; k < vcount - 1; ) {\r\n\r\n\t\t\t\t\t\tfaces.push( new THREE.Face3( vs[0], vs[k], vs[k + 1], ns.length ? [ ns[0].clone(), ns[k ++].clone(), ns[k].clone() ] : [], clr ) );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( faces.length ) {\r\n\r\n\t\t\t\t\tfor ( var ndx = 0, len = faces.length; ndx < len; ndx ++ ) {\r\n\r\n\t\t\t\t\t\tface = faces[ndx];\r\n\t\t\t\t\t\tface.daeMaterial = primitive.material;\r\n\t\t\t\t\t\tgeom.faces.push( face );\r\n\r\n\t\t\t\t\t\tfor ( k = 0; k < texture_sets.length; k ++ ) {\r\n\r\n\t\t\t\t\t\t\tuv = ts[ texture_sets[k] ];\r\n\r\n\t\t\t\t\t\t\tif ( vcount > 4 ) {\r\n\r\n\t\t\t\t\t\t\t\t// Grab the right UVs for the vertices in this face\r\n\t\t\t\t\t\t\t\tuvArr = [ uv[0], uv[ndx + 1], uv[ndx + 2] ];\r\n\r\n\t\t\t\t\t\t\t} else if ( vcount === 4 ) {\r\n\r\n\t\t\t\t\t\t\t\tif ( ndx === 0 ) {\r\n\r\n\t\t\t\t\t\t\t\t\tuvArr = [ uv[0], uv[1], uv[3] ];\r\n\r\n\t\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\t\tuvArr = [ uv[1].clone(), uv[2], uv[3].clone() ];\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\tuvArr = [ uv[0], uv[1], uv[2] ];\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif ( geom.faceVertexUvs[k] === undefined ) {\r\n\r\n\t\t\t\t\t\t\t\tgeom.faceVertexUvs[k] = [];\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tgeom.faceVertexUvs[k].push( uvArr );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconsole.log( 'dropped face with vcount ' + vcount + ' for geometry with id: ' + geom.id );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ti += maxOffset * vcount;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tfunction Polygons () {\r\n\r\n\t\tthis.material = \"\";\r\n\t\tthis.count = 0;\r\n\t\tthis.inputs = [];\r\n\t\tthis.vcount = null;\r\n\t\tthis.p = [];\r\n\t\tthis.geometry = new THREE.Geometry();\r\n\r\n\t}\r\n\r\n\tPolygons.prototype.setVertices = function ( vertices ) {\r\n\r\n\t\tfor ( var i = 0; i < this.inputs.length; i ++ ) {\r\n\r\n\t\t\tif ( this.inputs[ i ].source === vertices.id ) {\r\n\r\n\t\t\t\tthis.inputs[ i ].source = vertices.input[ 'POSITION' ].source;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tPolygons.prototype.parse = function ( element ) {\r\n\r\n\t\tthis.material = element.getAttribute( 'material' );\r\n\t\tthis.count = _attr_as_int( element, 'count', 0 );\r\n\r\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tvar child = element.childNodes[ i ];\r\n\r\n\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\tcase 'input':\r\n\r\n\t\t\t\t\tthis.inputs.push( ( new Input() ).parse( element.childNodes[ i ] ) );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'vcount':\r\n\r\n\t\t\t\t\tthis.vcount = _ints( child.textContent );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'p':\r\n\r\n\t\t\t\t\tthis.p.push( _ints( child.textContent ) );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'ph':\r\n\r\n\t\t\t\t\tconsole.warn( 'polygon holes not yet supported!' );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tfunction Polylist () {\r\n\r\n\t\tPolygons.call( this );\r\n\r\n\t\tthis.vcount = [];\r\n\r\n\t}\r\n\r\n\tPolylist.prototype = Object.create( Polygons.prototype );\r\n\tPolylist.prototype.constructor = Polylist;\r\n\r\n\tfunction LineStrips() {\r\n\r\n\t\tPolygons.call( this );\r\n\r\n\t\tthis.vcount = 1;\r\n\r\n\t}\r\n\r\n\tLineStrips.prototype = Object.create( Polygons.prototype );\r\n\tLineStrips.prototype.constructor = LineStrips;\r\n\r\n\tfunction Triangles () {\r\n\r\n\t\tPolygons.call( this );\r\n\r\n\t\tthis.vcount = 3;\r\n\r\n\t}\r\n\r\n\tTriangles.prototype = Object.create( Polygons.prototype );\r\n\tTriangles.prototype.constructor = Triangles;\r\n\r\n\tfunction Accessor() {\r\n\r\n\t\tthis.source = \"\";\r\n\t\tthis.count = 0;\r\n\t\tthis.stride = 0;\r\n\t\tthis.params = [];\r\n\r\n\t}\r\n\r\n\tAccessor.prototype.parse = function ( element ) {\r\n\r\n\t\tthis.params = [];\r\n\t\tthis.source = element.getAttribute( 'source' );\r\n\t\tthis.count = _attr_as_int( element, 'count', 0 );\r\n\t\tthis.stride = _attr_as_int( element, 'stride', 0 );\r\n\r\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tvar child = element.childNodes[ i ];\r\n\r\n\t\t\tif ( child.nodeName === 'param' ) {\r\n\r\n\t\t\t\tvar param = {};\r\n\t\t\t\tparam[ 'name' ] = child.getAttribute( 'name' );\r\n\t\t\t\tparam[ 'type' ] = child.getAttribute( 'type' );\r\n\t\t\t\tthis.params.push( param );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tfunction Vertices() {\r\n\r\n\t\tthis.input = {};\r\n\r\n\t}\r\n\r\n\tVertices.prototype.parse = function ( element ) {\r\n\r\n\t\tthis.id = element.getAttribute('id');\r\n\r\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tif ( element.childNodes[i].nodeName === 'input' ) {\r\n\r\n\t\t\t\tvar input = ( new Input() ).parse( element.childNodes[ i ] );\r\n\t\t\t\tthis.input[ input.semantic ] = input;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tfunction Input () {\r\n\r\n\t\tthis.semantic = \"\";\r\n\t\tthis.offset = 0;\r\n\t\tthis.source = \"\";\r\n\t\tthis.set = 0;\r\n\r\n\t}\r\n\r\n\tInput.prototype.parse = function ( element ) {\r\n\r\n\t\tthis.semantic = element.getAttribute('semantic');\r\n\t\tthis.source = element.getAttribute('source').replace(/^#/, '');\r\n\t\tthis.set = _attr_as_int(element, 'set', -1);\r\n\t\tthis.offset = _attr_as_int(element, 'offset', 0);\r\n\r\n\t\tif ( this.semantic === 'TEXCOORD' && this.set < 0 ) {\r\n\r\n\t\t\tthis.set = 0;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tfunction Source ( id ) {\r\n\r\n\t\tthis.id = id;\r\n\t\tthis.type = null;\r\n\r\n\t}\r\n\r\n\tSource.prototype.parse = function ( element ) {\r\n\r\n\t\tthis.id = element.getAttribute( 'id' );\r\n\r\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tvar child = element.childNodes[i];\r\n\r\n\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\tcase 'bool_array':\r\n\r\n\t\t\t\t\tthis.data = _bools( child.textContent );\r\n\t\t\t\t\tthis.type = child.nodeName;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'float_array':\r\n\r\n\t\t\t\t\tthis.data = _floats( child.textContent );\r\n\t\t\t\t\tthis.type = child.nodeName;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'int_array':\r\n\r\n\t\t\t\t\tthis.data = _ints( child.textContent );\r\n\t\t\t\t\tthis.type = child.nodeName;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'IDREF_array':\r\n\t\t\t\tcase 'Name_array':\r\n\r\n\t\t\t\t\tthis.data = _strings( child.textContent );\r\n\t\t\t\t\tthis.type = child.nodeName;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'technique_common':\r\n\r\n\t\t\t\t\tfor ( var j = 0; j < child.childNodes.length; j ++ ) {\r\n\r\n\t\t\t\t\t\tif ( child.childNodes[ j ].nodeName === 'accessor' ) {\r\n\r\n\t\t\t\t\t\t\tthis.accessor = ( new Accessor() ).parse( child.childNodes[ j ] );\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\t// console.log(child.nodeName);\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tSource.prototype.read = function () {\r\n\r\n\t\tvar result = [];\r\n\r\n\t\t//for (var i = 0; i < this.accessor.params.length; i++) {\r\n\r\n\t\tvar param = this.accessor.params[ 0 ];\r\n\r\n\t\t\t//console.log(param.name + \" \" + param.type);\r\n\r\n\t\tswitch ( param.type ) {\r\n\r\n\t\t\tcase 'IDREF':\r\n\t\t\tcase 'Name': case 'name':\r\n\t\t\tcase 'float':\r\n\r\n\t\t\t\treturn this.data;\r\n\r\n\t\t\tcase 'float4x4':\r\n\r\n\t\t\t\tfor ( var j = 0; j < this.data.length; j += 16 ) {\r\n\r\n\t\t\t\t\tvar s = this.data.slice( j, j + 16 );\r\n\t\t\t\t\tvar m = getConvertedMat4( s );\r\n\t\t\t\t\tresult.push( m );\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\r\n\t\t\t\tconsole.log( 'ColladaLoader: Source: Read dont know how to read ' + param.type + '.' );\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\t//}\r\n\r\n\t\treturn result;\r\n\r\n\t};\r\n\r\n\tfunction Material () {\r\n\r\n\t\tthis.id = \"\";\r\n\t\tthis.name = \"\";\r\n\t\tthis.instance_effect = null;\r\n\r\n\t}\r\n\r\n\tMaterial.prototype.parse = function ( element ) {\r\n\r\n\t\tthis.id = element.getAttribute( 'id' );\r\n\t\tthis.name = element.getAttribute( 'name' );\r\n\r\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tif ( element.childNodes[ i ].nodeName === 'instance_effect' ) {\r\n\r\n\t\t\t\tthis.instance_effect = ( new InstanceEffect() ).parse( element.childNodes[ i ] );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tfunction ColorOrTexture () {\r\n\r\n\t\tthis.color = new THREE.Color();\r\n\t\tthis.color.setRGB( Math.random(), Math.random(), Math.random() );\r\n\t\tthis.color.a = 1.0;\r\n\r\n\t\tthis.texture = null;\r\n\t\tthis.texcoord = null;\r\n\t\tthis.texOpts = null;\r\n\r\n\t}\r\n\r\n\tColorOrTexture.prototype.isColor = function () {\r\n\r\n\t\treturn ( this.texture === null );\r\n\r\n\t};\r\n\r\n\tColorOrTexture.prototype.isTexture = function () {\r\n\r\n\t\treturn ( this.texture != null );\r\n\r\n\t};\r\n\r\n\tColorOrTexture.prototype.parse = function ( element ) {\r\n\r\n\t\tif (element.nodeName === 'transparent') {\r\n\r\n\t\t\tthis.opaque = element.getAttribute('opaque');\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tvar child = element.childNodes[ i ];\r\n\t\t\tif ( child.nodeType != 1 ) continue;\r\n\r\n\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\tcase 'color':\r\n\r\n\t\t\t\t\tvar rgba = _floats( child.textContent );\r\n\t\t\t\t\tthis.color = new THREE.Color();\r\n\t\t\t\t\tthis.color.setRGB( rgba[0], rgba[1], rgba[2] );\r\n\t\t\t\t\tthis.color.a = rgba[3];\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'texture':\r\n\r\n\t\t\t\t\tthis.texture = child.getAttribute('texture');\r\n\t\t\t\t\tthis.texcoord = child.getAttribute('texcoord');\r\n\t\t\t\t\t// Defaults from:\r\n\t\t\t\t\t// https://collada.org/mediawiki/index.php/Maya_texture_placement_MAYA_extension\r\n\t\t\t\t\tthis.texOpts = {\r\n\t\t\t\t\t\toffsetU: 0,\r\n\t\t\t\t\t\toffsetV: 0,\r\n\t\t\t\t\t\trepeatU: 1,\r\n\t\t\t\t\t\trepeatV: 1,\r\n\t\t\t\t\t\twrapU: 1,\r\n\t\t\t\t\t\twrapV: 1\r\n\t\t\t\t\t};\r\n\t\t\t\t\tthis.parseTexture( child );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tColorOrTexture.prototype.parseTexture = function ( element ) {\r\n\r\n\t\tif ( ! element.childNodes ) return this;\r\n\r\n\t\t// This should be supported by Maya, 3dsMax, and MotionBuilder\r\n\r\n\t\tif ( element.childNodes[1] && element.childNodes[1].nodeName === 'extra' ) {\r\n\r\n\t\t\telement = element.childNodes[1];\r\n\r\n\t\t\tif ( element.childNodes[1] && element.childNodes[1].nodeName === 'technique' ) {\r\n\r\n\t\t\t\telement = element.childNodes[1];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tvar child = element.childNodes[ i ];\r\n\r\n\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\tcase 'offsetU':\r\n\t\t\t\tcase 'offsetV':\r\n\t\t\t\tcase 'repeatU':\r\n\t\t\t\tcase 'repeatV':\r\n\r\n\t\t\t\t\tthis.texOpts[ child.nodeName ] = parseFloat( child.textContent );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'wrapU':\r\n\t\t\t\tcase 'wrapV':\r\n\r\n\t\t\t\t\t// some dae have a value of true which becomes NaN via parseInt\r\n\r\n\t\t\t\t\tif ( child.textContent.toUpperCase() === 'TRUE' ) {\r\n\r\n\t\t\t\t\t\tthis.texOpts[ child.nodeName ] = 1;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tthis.texOpts[ child.nodeName ] = parseInt( child.textContent );\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\r\n\t\t\t\t\tthis.texOpts[ child.nodeName ] = child.textContent;\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tfunction Shader ( type, effect ) {\r\n\r\n\t\tthis.type = type;\r\n\t\tthis.effect = effect;\r\n\t\tthis.material = null;\r\n\r\n\t}\r\n\r\n\tShader.prototype.parse = function ( element ) {\r\n\r\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tvar child = element.childNodes[ i ];\r\n\t\t\tif ( child.nodeType != 1 ) continue;\r\n\r\n\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\tcase 'emission':\r\n\t\t\t\tcase 'diffuse':\r\n\t\t\t\tcase 'specular':\r\n\t\t\t\tcase 'transparent':\r\n\r\n\t\t\t\t\tthis[ child.nodeName ] = ( new ColorOrTexture() ).parse( child );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'bump':\r\n\r\n\t\t\t\t\t// If 'bumptype' is 'heightfield', create a 'bump' property\r\n\t\t\t\t\t// Else if 'bumptype' is 'normalmap', create a 'normal' property\r\n\t\t\t\t\t// (Default to 'bump')\r\n\t\t\t\t\tvar bumpType = child.getAttribute( 'bumptype' );\r\n\t\t\t\t\tif ( bumpType ) {\r\n\t\t\t\t\t\tif ( bumpType.toLowerCase() === \"heightfield\" ) {\r\n\t\t\t\t\t\t\tthis[ 'bump' ] = ( new ColorOrTexture() ).parse( child );\r\n\t\t\t\t\t\t} else if ( bumpType.toLowerCase() === \"normalmap\" ) {\r\n\t\t\t\t\t\t\tthis[ 'normal' ] = ( new ColorOrTexture() ).parse( child );\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tconsole.error( \"Shader.prototype.parse: Invalid value for attribute 'bumptype' (\" + bumpType + \") - valid bumptypes are 'HEIGHTFIELD' and 'NORMALMAP' - defaulting to 'HEIGHTFIELD'\" );\r\n\t\t\t\t\t\t\tthis[ 'bump' ] = ( new ColorOrTexture() ).parse( child );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.warn( \"Shader.prototype.parse: Attribute 'bumptype' missing from bump node - defaulting to 'HEIGHTFIELD'\" );\r\n\t\t\t\t\t\tthis[ 'bump' ] = ( new ColorOrTexture() ).parse( child );\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'shininess':\r\n\t\t\t\tcase 'reflectivity':\r\n\t\t\t\tcase 'index_of_refraction':\r\n\t\t\t\tcase 'transparency':\r\n\r\n\t\t\t\t\tvar f = child.querySelectorAll('float');\r\n\r\n\t\t\t\t\tif ( f.length > 0 )\r\n\t\t\t\t\t\tthis[ child.nodeName ] = parseFloat( f[ 0 ].textContent );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.create();\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tShader.prototype.create = function() {\r\n\r\n\t\tvar props = {};\r\n\r\n\t\tvar transparent = false;\r\n\r\n\t\tif (this['transparency'] !== undefined && this['transparent'] !== undefined) {\r\n\t\t\t// convert transparent color RBG to average value\r\n\t\t\tvar transparentColor = this['transparent'];\r\n\t\t\tvar transparencyLevel = (this.transparent.color.r + this.transparent.color.g + this.transparent.color.b) / 3 * this.transparency;\r\n\r\n\t\t\tif (transparencyLevel > 0) {\r\n\t\t\t\ttransparent = true;\r\n\t\t\t\tprops[ 'transparent' ] = true;\r\n\t\t\t\tprops[ 'opacity' ] = 1 - transparencyLevel;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar keys = {\r\n\t\t\t'diffuse':'map',\r\n\t\t\t'ambient':'lightMap',\r\n\t\t\t'specular':'specularMap',\r\n\t\t\t'emission':'emissionMap',\r\n\t\t\t'bump':'bumpMap',\r\n\t\t\t'normal':'normalMap'\r\n\t\t\t};\r\n\r\n\t\tfor ( var prop in this ) {\r\n\r\n\t\t\tswitch ( prop ) {\r\n\r\n\t\t\t\tcase 'ambient':\r\n\t\t\t\tcase 'emission':\r\n\t\t\t\tcase 'diffuse':\r\n\t\t\t\tcase 'specular':\r\n\t\t\t\tcase 'bump':\r\n\t\t\t\tcase 'normal':\r\n\r\n\t\t\t\t\tvar cot = this[ prop ];\r\n\r\n\t\t\t\t\tif ( cot instanceof ColorOrTexture ) {\r\n\r\n\t\t\t\t\t\tif ( cot.isTexture() ) {\r\n\r\n\t\t\t\t\t\t\tvar samplerId = cot.texture;\r\n\t\t\t\t\t\t\tvar sampler = this.effect.sampler[samplerId];\r\n\r\n\t\t\t\t\t\t\tif ( sampler !== undefined && sampler.source !== undefined ) {\r\n\r\n\t\t\t\t\t\t\t\tvar surface = this.effect.surface[sampler.source];\r\n\r\n\t\t\t\t\t\t\t\tif ( surface !== undefined ) {\r\n\r\n\t\t\t\t\t\t\t\t\tvar image = images[ surface.init_from ];\r\n\r\n\t\t\t\t\t\t\t\t\tif ( image ) {\r\n\r\n\t\t\t\t\t\t\t\t\t\tvar url = baseUrl + image.init_from;\r\n\r\n\t\t\t\t\t\t\t\t\t\tvar texture;\r\n\t\t\t\t\t\t\t\t\t\tvar loader = THREE.Loader.Handlers.get( url );\r\n\r\n\t\t\t\t\t\t\t\t\t\tif ( loader !== null ) {\r\n\r\n\t\t\t\t\t\t\t\t\t\t\ttexture = loader.load( url );\r\n\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\t\t\t\ttexture = new THREE.Texture();\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tloadTextureImage( texture, url );\r\n\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\tif ( sampler.wrap_s === \"MIRROR\" ) {\r\n\r\n\t\t\t\t\t\t\t\t\t\t\ttexture.wrapS = THREE.MirroredRepeatWrapping;\r\n\r\n\t\t\t\t\t\t\t\t\t\t} else if ( sampler.wrap_s === \"WRAP\" || cot.texOpts.wrapU ) {\r\n\r\n\t\t\t\t\t\t\t\t\t\t\ttexture.wrapS = THREE.RepeatWrapping;\r\n\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\t\t\t\ttexture.wrapS = THREE.ClampToEdgeWrapping;\r\n\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\tif ( sampler.wrap_t === \"MIRROR\" ) {\r\n\r\n\t\t\t\t\t\t\t\t\t\t\ttexture.wrapT = THREE.MirroredRepeatWrapping;\r\n\r\n\t\t\t\t\t\t\t\t\t\t} else if ( sampler.wrap_t === \"WRAP\" || cot.texOpts.wrapV ) {\r\n\r\n\t\t\t\t\t\t\t\t\t\t\ttexture.wrapT = THREE.RepeatWrapping;\r\n\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\t\t\t\ttexture.wrapT = THREE.ClampToEdgeWrapping;\r\n\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\ttexture.offset.x = cot.texOpts.offsetU;\r\n\t\t\t\t\t\t\t\t\t\ttexture.offset.y = cot.texOpts.offsetV;\r\n\t\t\t\t\t\t\t\t\t\ttexture.repeat.x = cot.texOpts.repeatU;\r\n\t\t\t\t\t\t\t\t\t\ttexture.repeat.y = cot.texOpts.repeatV;\r\n\t\t\t\t\t\t\t\t\t\tprops[keys[prop]] = texture;\r\n\r\n\t\t\t\t\t\t\t\t\t\t// Texture with baked lighting?\r\n\t\t\t\t\t\t\t\t\t\tif (prop === 'emission') props['emissive'] = 0xffffff;\r\n\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t} else if ( prop === 'diffuse' || !transparent ) {\r\n\r\n\t\t\t\t\t\t\tif ( prop === 'emission' ) {\r\n\r\n\t\t\t\t\t\t\t\tprops[ 'emissive' ] = cot.color.getHex();\r\n\r\n\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\tprops[ prop ] = cot.color.getHex();\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'shininess':\r\n\r\n\t\t\t\t\tprops[ prop ] = this[ prop ];\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'reflectivity':\r\n\r\n\t\t\t\t\tprops[ prop ] = this[ prop ];\r\n\t\t\t\t\tif ( props[ prop ] > 0.0 ) props['envMap'] = options.defaultEnvMap;\r\n\t\t\t\t\tprops['combine'] = THREE.MixOperation;\t//mix regular shading with reflective component\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'index_of_refraction':\r\n\r\n\t\t\t\t\tprops[ 'refractionRatio' ] = this[ prop ]; //TODO: \"index_of_refraction\" becomes \"refractionRatio\" in shader, but I'm not sure if the two are actually comparable\r\n\t\t\t\t\tif ( this[ prop ] !== 1.0 ) props['envMap'] = options.defaultEnvMap;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'transparency':\r\n\t\t\t\t\t// gets figured out up top\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tprops[ 'shading' ] = preferredShading;\r\n\t\tprops[ 'side' ] = this.effect.doubleSided ? THREE.DoubleSide : THREE.FrontSide;\r\n\r\n\t\tif ( props.diffuse !== undefined ) {\r\n\r\n\t\t\tprops.color = props.diffuse;\r\n\t\t\tdelete props.diffuse;\r\n\r\n\t\t}\r\n\r\n\t\tswitch ( this.type ) {\r\n\r\n\t\t\tcase 'constant':\r\n\r\n\t\t\t\tif (props.emissive != undefined) props.color = props.emissive;\r\n\t\t\t\tthis.material = new THREE.MeshBasicMaterial( props );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'phong':\r\n\t\t\tcase 'blinn':\r\n\r\n\t\t\t\tthis.material = new THREE.MeshPhongMaterial( props );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'lambert':\r\n\t\t\tdefault:\r\n\r\n\t\t\t\tthis.material = new THREE.MeshLambertMaterial( props );\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\treturn this.material;\r\n\r\n\t};\r\n\r\n\tfunction Surface ( effect ) {\r\n\r\n\t\tthis.effect = effect;\r\n\t\tthis.init_from = null;\r\n\t\tthis.format = null;\r\n\r\n\t}\r\n\r\n\tSurface.prototype.parse = function ( element ) {\r\n\r\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tvar child = element.childNodes[ i ];\r\n\t\t\tif ( child.nodeType != 1 ) continue;\r\n\r\n\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\tcase 'init_from':\r\n\r\n\t\t\t\t\tthis.init_from = child.textContent;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'format':\r\n\r\n\t\t\t\t\tthis.format = child.textContent;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\r\n\t\t\t\t\tconsole.log( \"unhandled Surface prop: \" + child.nodeName );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tfunction Sampler2D ( effect ) {\r\n\r\n\t\tthis.effect = effect;\r\n\t\tthis.source = null;\r\n\t\tthis.wrap_s = null;\r\n\t\tthis.wrap_t = null;\r\n\t\tthis.minfilter = null;\r\n\t\tthis.magfilter = null;\r\n\t\tthis.mipfilter = null;\r\n\r\n\t}\r\n\r\n\tSampler2D.prototype.parse = function ( element ) {\r\n\r\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tvar child = element.childNodes[ i ];\r\n\t\t\tif ( child.nodeType != 1 ) continue;\r\n\r\n\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\tcase 'source':\r\n\r\n\t\t\t\t\tthis.source = child.textContent;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'minfilter':\r\n\r\n\t\t\t\t\tthis.minfilter = child.textContent;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'magfilter':\r\n\r\n\t\t\t\t\tthis.magfilter = child.textContent;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'mipfilter':\r\n\r\n\t\t\t\t\tthis.mipfilter = child.textContent;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'wrap_s':\r\n\r\n\t\t\t\t\tthis.wrap_s = child.textContent;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'wrap_t':\r\n\r\n\t\t\t\t\tthis.wrap_t = child.textContent;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\r\n\t\t\t\t\tconsole.log( \"unhandled Sampler2D prop: \" + child.nodeName );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tfunction Effect () {\r\n\r\n\t\tthis.id = \"\";\r\n\t\tthis.name = \"\";\r\n\t\tthis.shader = null;\r\n\t\tthis.surface = {};\r\n\t\tthis.sampler = {};\r\n\r\n\t}\r\n\r\n\tEffect.prototype.create = function () {\r\n\r\n\t\tif ( this.shader === null ) {\r\n\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tEffect.prototype.parse = function ( element ) {\r\n\r\n\t\tthis.id = element.getAttribute( 'id' );\r\n\t\tthis.name = element.getAttribute( 'name' );\r\n\r\n\t\textractDoubleSided( this, element );\r\n\r\n\t\tthis.shader = null;\r\n\r\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tvar child = element.childNodes[ i ];\r\n\t\t\tif ( child.nodeType != 1 ) continue;\r\n\r\n\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\tcase 'profile_COMMON':\r\n\r\n\t\t\t\t\tthis.parseTechnique( this.parseProfileCOMMON( child ) );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tEffect.prototype.parseNewparam = function ( element ) {\r\n\r\n\t\tvar sid = element.getAttribute( 'sid' );\r\n\r\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tvar child = element.childNodes[ i ];\r\n\t\t\tif ( child.nodeType != 1 ) continue;\r\n\r\n\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\tcase 'surface':\r\n\r\n\t\t\t\t\tthis.surface[sid] = ( new Surface( this ) ).parse( child );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'sampler2D':\r\n\r\n\t\t\t\t\tthis.sampler[sid] = ( new Sampler2D( this ) ).parse( child );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'extra':\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\r\n\t\t\t\t\tconsole.log( child.nodeName );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tEffect.prototype.parseProfileCOMMON = function ( element ) {\r\n\r\n\t\tvar technique;\r\n\r\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tvar child = element.childNodes[ i ];\r\n\r\n\t\t\tif ( child.nodeType != 1 ) continue;\r\n\r\n\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\tcase 'profile_COMMON':\r\n\r\n\t\t\t\t\tthis.parseProfileCOMMON( child );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'technique':\r\n\r\n\t\t\t\t\ttechnique = child;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'newparam':\r\n\r\n\t\t\t\t\tthis.parseNewparam( child );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'image':\r\n\r\n\t\t\t\t\tvar _image = ( new _Image() ).parse( child );\r\n\t\t\t\t\timages[ _image.id ] = _image;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'extra':\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\r\n\t\t\t\t\tconsole.log( child.nodeName );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn technique;\r\n\r\n\t};\r\n\r\n\tEffect.prototype.parseTechnique = function ( element ) {\r\n\r\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tvar child = element.childNodes[i];\r\n\t\t\tif ( child.nodeType != 1 ) continue;\r\n\r\n\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\tcase 'constant':\r\n\t\t\t\tcase 'lambert':\r\n\t\t\t\tcase 'blinn':\r\n\t\t\t\tcase 'phong':\r\n\r\n\t\t\t\t\tthis.shader = ( new Shader( child.nodeName, this ) ).parse( child );\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'extra':\r\n\t\t\t\t\tthis.parseExtra(child);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tEffect.prototype.parseExtra = function ( element ) {\r\n\r\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tvar child = element.childNodes[i];\r\n\t\t\tif ( child.nodeType != 1 ) continue;\r\n\r\n\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\tcase 'technique':\r\n\t\t\t\t\tthis.parseExtraTechnique( child );\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tEffect.prototype.parseExtraTechnique = function ( element ) {\r\n\r\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tvar child = element.childNodes[i];\r\n\t\t\tif ( child.nodeType != 1 ) continue;\r\n\r\n\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\tcase 'bump':\r\n\t\t\t\t\tthis.shader.parse( element );\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tfunction InstanceEffect () {\r\n\r\n\t\tthis.url = \"\";\r\n\r\n\t}\r\n\r\n\tInstanceEffect.prototype.parse = function ( element ) {\r\n\r\n\t\tthis.url = element.getAttribute( 'url' ).replace( /^#/, '' );\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tfunction Animation() {\r\n\r\n\t\tthis.id = \"\";\r\n\t\tthis.name = \"\";\r\n\t\tthis.source = {};\r\n\t\tthis.sampler = [];\r\n\t\tthis.channel = [];\r\n\r\n\t}\r\n\r\n\tAnimation.prototype.parse = function ( element ) {\r\n\r\n\t\tthis.id = element.getAttribute( 'id' );\r\n\t\tthis.name = element.getAttribute( 'name' );\r\n\t\tthis.source = {};\r\n\r\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tvar child = element.childNodes[ i ];\r\n\r\n\t\t\tif ( child.nodeType != 1 ) continue;\r\n\r\n\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\tcase 'animation':\r\n\r\n\t\t\t\t\tvar anim = ( new Animation() ).parse( child );\r\n\r\n\t\t\t\t\tfor ( var src in anim.source ) {\r\n\r\n\t\t\t\t\t\tthis.source[ src ] = anim.source[ src ];\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor ( var j = 0; j < anim.channel.length; j ++ ) {\r\n\r\n\t\t\t\t\t\tthis.channel.push( anim.channel[ j ] );\r\n\t\t\t\t\t\tthis.sampler.push( anim.sampler[ j ] );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'source':\r\n\r\n\t\t\t\t\tvar src = ( new Source() ).parse( child );\r\n\t\t\t\t\tthis.source[ src.id ] = src;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'sampler':\r\n\r\n\t\t\t\t\tthis.sampler.push( ( new Sampler( this ) ).parse( child ) );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'channel':\r\n\r\n\t\t\t\t\tthis.channel.push( ( new Channel( this ) ).parse( child ) );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tfunction Channel( animation ) {\r\n\r\n\t\tthis.animation = animation;\r\n\t\tthis.source = \"\";\r\n\t\tthis.target = \"\";\r\n\t\tthis.fullSid = null;\r\n\t\tthis.sid = null;\r\n\t\tthis.dotSyntax = null;\r\n\t\tthis.arrSyntax = null;\r\n\t\tthis.arrIndices = null;\r\n\t\tthis.member = null;\r\n\r\n\t}\r\n\r\n\tChannel.prototype.parse = function ( element ) {\r\n\r\n\t\tthis.source = element.getAttribute( 'source' ).replace( /^#/, '' );\r\n\t\tthis.target = element.getAttribute( 'target' );\r\n\r\n\t\tvar parts = this.target.split( '/' );\r\n\r\n\t\tvar id = parts.shift();\r\n\t\tvar sid = parts.shift();\r\n\r\n\t\tvar dotSyntax = ( sid.indexOf(\".\") >= 0 );\r\n\t\tvar arrSyntax = ( sid.indexOf(\"(\") >= 0 );\r\n\r\n\t\tif ( dotSyntax ) {\r\n\r\n\t\t\tparts = sid.split(\".\");\r\n\t\t\tthis.sid = parts.shift();\r\n\t\t\tthis.member = parts.shift();\r\n\r\n\t\t} else if ( arrSyntax ) {\r\n\r\n\t\t\tvar arrIndices = sid.split(\"(\");\r\n\t\t\tthis.sid = arrIndices.shift();\r\n\r\n\t\t\tfor (var j = 0; j < arrIndices.length; j ++ ) {\r\n\r\n\t\t\t\tarrIndices[j] = parseInt( arrIndices[j].replace(/\\)/, '') );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.arrIndices = arrIndices;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.sid = sid;\r\n\r\n\t\t}\r\n\r\n\t\tthis.fullSid = sid;\r\n\t\tthis.dotSyntax = dotSyntax;\r\n\t\tthis.arrSyntax = arrSyntax;\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tfunction Sampler ( animation ) {\r\n\r\n\t\tthis.id = \"\";\r\n\t\tthis.animation = animation;\r\n\t\tthis.inputs = [];\r\n\t\tthis.input = null;\r\n\t\tthis.output = null;\r\n\t\tthis.strideOut = null;\r\n\t\tthis.interpolation = null;\r\n\t\tthis.startTime = null;\r\n\t\tthis.endTime = null;\r\n\t\tthis.duration = 0;\r\n\r\n\t}\r\n\r\n\tSampler.prototype.parse = function ( element ) {\r\n\r\n\t\tthis.id = element.getAttribute( 'id' );\r\n\t\tthis.inputs = [];\r\n\r\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tvar child = element.childNodes[ i ];\r\n\t\t\tif ( child.nodeType != 1 ) continue;\r\n\r\n\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\tcase 'input':\r\n\r\n\t\t\t\t\tthis.inputs.push( (new Input()).parse( child ) );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tSampler.prototype.create = function () {\r\n\r\n\t\tfor ( var i = 0; i < this.inputs.length; i ++ ) {\r\n\r\n\t\t\tvar input = this.inputs[ i ];\r\n\t\t\tvar source = this.animation.source[ input.source ];\r\n\r\n\t\t\tswitch ( input.semantic ) {\r\n\r\n\t\t\t\tcase 'INPUT':\r\n\r\n\t\t\t\t\tthis.input = source.read();\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'OUTPUT':\r\n\r\n\t\t\t\t\tthis.output = source.read();\r\n\t\t\t\t\tthis.strideOut = source.accessor.stride;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'INTERPOLATION':\r\n\r\n\t\t\t\t\tthis.interpolation = source.read();\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'IN_TANGENT':\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'OUT_TANGENT':\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\r\n\t\t\t\t\tconsole.log(input.semantic);\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.startTime = 0;\r\n\t\tthis.endTime = 0;\r\n\t\tthis.duration = 0;\r\n\r\n\t\tif ( this.input.length ) {\r\n\r\n\t\t\tthis.startTime = 100000000;\r\n\t\t\tthis.endTime = -100000000;\r\n\r\n\t\t\tfor ( var i = 0; i < this.input.length; i ++ ) {\r\n\r\n\t\t\t\tthis.startTime = Math.min( this.startTime, this.input[ i ] );\r\n\t\t\t\tthis.endTime = Math.max( this.endTime, this.input[ i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.duration = this.endTime - this.startTime;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tSampler.prototype.getData = function ( type, ndx, member ) {\r\n\r\n\t\tvar data;\r\n\r\n\t\tif ( type === 'matrix' && this.strideOut === 16 ) {\r\n\r\n\t\t\tdata = this.output[ ndx ];\r\n\r\n\t\t} else if ( this.strideOut > 1 ) {\r\n\r\n\t\t\tdata = [];\r\n\t\t\tndx *= this.strideOut;\r\n\r\n\t\t\tfor ( var i = 0; i < this.strideOut; ++ i ) {\r\n\r\n\t\t\t\tdata[ i ] = this.output[ ndx + i ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( this.strideOut === 3 ) {\r\n\r\n\t\t\t\tswitch ( type ) {\r\n\r\n\t\t\t\t\tcase 'rotate':\r\n\t\t\t\t\tcase 'translate':\r\n\r\n\t\t\t\t\t\tfixCoords( data, -1 );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'scale':\r\n\r\n\t\t\t\t\t\tfixCoords( data, 1 );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( this.strideOut === 4 && type === 'matrix' ) {\r\n\r\n\t\t\t\tfixCoords( data, -1 );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tdata = this.output[ ndx ];\r\n\r\n\t\t\tif ( member && type === 'translate' ) {\r\n\t\t\t\tdata = getConvertedTranslation( member, data );\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\r\n\t};\r\n\r\n\tfunction Key ( time ) {\r\n\r\n\t\tthis.targets = [];\r\n\t\tthis.time = time;\r\n\r\n\t}\r\n\r\n\tKey.prototype.addTarget = function ( fullSid, transform, member, data ) {\r\n\r\n\t\tthis.targets.push( {\r\n\t\t\tsid: fullSid,\r\n\t\t\tmember: member,\r\n\t\t\ttransform: transform,\r\n\t\t\tdata: data\r\n\t\t} );\r\n\r\n\t};\r\n\r\n\tKey.prototype.apply = function ( opt_sid ) {\r\n\r\n\t\tfor ( var i = 0; i < this.targets.length; ++ i ) {\r\n\r\n\t\t\tvar target = this.targets[ i ];\r\n\r\n\t\t\tif ( !opt_sid || target.sid === opt_sid ) {\r\n\r\n\t\t\t\ttarget.transform.update( target.data, target.member );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tKey.prototype.getTarget = function ( fullSid ) {\r\n\r\n\t\tfor ( var i = 0; i < this.targets.length; ++ i ) {\r\n\r\n\t\t\tif ( this.targets[ i ].sid === fullSid ) {\r\n\r\n\t\t\t\treturn this.targets[ i ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t};\r\n\r\n\tKey.prototype.hasTarget = function ( fullSid ) {\r\n\r\n\t\tfor ( var i = 0; i < this.targets.length; ++ i ) {\r\n\r\n\t\t\tif ( this.targets[ i ].sid === fullSid ) {\r\n\r\n\t\t\t\treturn true;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\r\n\t};\r\n\r\n\t// TODO: Currently only doing linear interpolation. Should support full COLLADA spec.\r\n\tKey.prototype.interpolate = function ( nextKey, time ) {\r\n\r\n\t\tfor ( var i = 0, l = this.targets.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar target = this.targets[ i ],\r\n\t\t\t\tnextTarget = nextKey.getTarget( target.sid ),\r\n\t\t\t\tdata;\r\n\r\n\t\t\tif ( target.transform.type !== 'matrix' && nextTarget ) {\r\n\r\n\t\t\t\tvar scale = ( time - this.time ) / ( nextKey.time - this.time ),\r\n\t\t\t\t\tnextData = nextTarget.data,\r\n\t\t\t\t\tprevData = target.data;\r\n\r\n\t\t\t\tif ( scale < 0 ) scale = 0;\r\n\t\t\t\tif ( scale > 1 ) scale = 1;\r\n\r\n\t\t\t\tif ( prevData.length ) {\r\n\r\n\t\t\t\t\tdata = [];\r\n\r\n\t\t\t\t\tfor ( var j = 0; j < prevData.length; ++ j ) {\r\n\r\n\t\t\t\t\t\tdata[ j ] = prevData[ j ] + ( nextData[ j ] - prevData[ j ] ) * scale;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tdata = prevData + ( nextData - prevData ) * scale;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tdata = target.data;\r\n\r\n\t\t\t}\r\n\r\n\t\t\ttarget.transform.update( data, target.member );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\t// Camera\r\n\tfunction Camera() {\r\n\r\n\t\tthis.id = \"\";\r\n\t\tthis.name = \"\";\r\n\t\tthis.technique = \"\";\r\n\r\n\t}\r\n\r\n\tCamera.prototype.parse = function ( element ) {\r\n\r\n\t\tthis.id = element.getAttribute( 'id' );\r\n\t\tthis.name = element.getAttribute( 'name' );\r\n\r\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tvar child = element.childNodes[ i ];\r\n\t\t\tif ( child.nodeType != 1 ) continue;\r\n\r\n\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\tcase 'optics':\r\n\r\n\t\t\t\t\tthis.parseOptics( child );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tCamera.prototype.parseOptics = function ( element ) {\r\n\r\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tif ( element.childNodes[ i ].nodeName === 'technique_common' ) {\r\n\r\n\t\t\t\tvar technique = element.childNodes[ i ];\r\n\r\n\t\t\t\tfor ( var j = 0; j < technique.childNodes.length; j ++ ) {\r\n\r\n\t\t\t\t\tthis.technique = technique.childNodes[ j ].nodeName;\r\n\r\n\t\t\t\t\tif ( this.technique === 'perspective' ) {\r\n\r\n\t\t\t\t\t\tvar perspective = technique.childNodes[ j ];\r\n\r\n\t\t\t\t\t\tfor ( var k = 0; k < perspective.childNodes.length; k ++ ) {\r\n\r\n\t\t\t\t\t\t\tvar param = perspective.childNodes[ k ];\r\n\r\n\t\t\t\t\t\t\tswitch ( param.nodeName ) {\r\n\r\n\t\t\t\t\t\t\t\tcase 'yfov':\r\n\t\t\t\t\t\t\t\t\tthis.yfov = param.textContent;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase 'xfov':\r\n\t\t\t\t\t\t\t\t\tthis.xfov = param.textContent;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase 'znear':\r\n\t\t\t\t\t\t\t\t\tthis.znear = param.textContent;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase 'zfar':\r\n\t\t\t\t\t\t\t\t\tthis.zfar = param.textContent;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase 'aspect_ratio':\r\n\t\t\t\t\t\t\t\t\tthis.aspect_ratio = param.textContent;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else if ( this.technique === 'orthographic' ) {\r\n\r\n\t\t\t\t\t\tvar orthographic = technique.childNodes[ j ];\r\n\r\n\t\t\t\t\t\tfor ( var k = 0; k < orthographic.childNodes.length; k ++ ) {\r\n\r\n\t\t\t\t\t\t\tvar param = orthographic.childNodes[ k ];\r\n\r\n\t\t\t\t\t\t\tswitch ( param.nodeName ) {\r\n\r\n\t\t\t\t\t\t\t\tcase 'xmag':\r\n\t\t\t\t\t\t\t\t\tthis.xmag = param.textContent;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase 'ymag':\r\n\t\t\t\t\t\t\t\t\tthis.ymag = param.textContent;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase 'znear':\r\n\t\t\t\t\t\t\t\t\tthis.znear = param.textContent;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase 'zfar':\r\n\t\t\t\t\t\t\t\t\tthis.zfar = param.textContent;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase 'aspect_ratio':\r\n\t\t\t\t\t\t\t\t\tthis.aspect_ratio = param.textContent;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tfunction InstanceCamera() {\r\n\r\n\t\tthis.url = \"\";\r\n\r\n\t}\r\n\r\n\tInstanceCamera.prototype.parse = function ( element ) {\r\n\r\n\t\tthis.url = element.getAttribute('url').replace(/^#/, '');\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\t// Light\r\n\r\n\tfunction Light() {\r\n\r\n\t\tthis.id = \"\";\r\n\t\tthis.name = \"\";\r\n\t\tthis.technique = \"\";\r\n\r\n\t}\r\n\r\n\tLight.prototype.parse = function ( element ) {\r\n\r\n\t\tthis.id = element.getAttribute( 'id' );\r\n\t\tthis.name = element.getAttribute( 'name' );\r\n\r\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tvar child = element.childNodes[ i ];\r\n\t\t\tif ( child.nodeType != 1 ) continue;\r\n\r\n\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\tcase 'technique_common':\r\n\r\n\t\t\t\t\tthis.parseCommon( child );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'technique':\r\n\r\n\t\t\t\t\tthis.parseTechnique( child );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tLight.prototype.parseCommon = function ( element ) {\r\n\r\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tswitch ( element.childNodes[ i ].nodeName ) {\r\n\r\n\t\t\t\tcase 'directional':\r\n\t\t\t\tcase 'point':\r\n\t\t\t\tcase 'spot':\r\n\t\t\t\tcase 'ambient':\r\n\r\n\t\t\t\t\tthis.technique = element.childNodes[ i ].nodeName;\r\n\r\n\t\t\t\t\tvar light = element.childNodes[ i ];\r\n\r\n\t\t\t\t\tfor ( var j = 0; j < light.childNodes.length; j ++ ) {\r\n\r\n\t\t\t\t\t\tvar child = light.childNodes[j];\r\n\r\n\t\t\t\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\t\t\t\tcase 'color':\r\n\r\n\t\t\t\t\t\t\t\tvar rgba = _floats( child.textContent );\r\n\t\t\t\t\t\t\t\tthis.color = new THREE.Color(0);\r\n\t\t\t\t\t\t\t\tthis.color.setRGB( rgba[0], rgba[1], rgba[2] );\r\n\t\t\t\t\t\t\t\tthis.color.a = rgba[3];\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tcase 'falloff_angle':\r\n\r\n\t\t\t\t\t\t\t\tthis.falloff_angle = parseFloat( child.textContent );\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tcase 'quadratic_attenuation':\r\n\t\t\t\t\t\t\t\tvar f = parseFloat( child.textContent );\r\n\t\t\t\t\t\t\t\tthis.distance = f ? Math.sqrt( 1 / f ) : 0;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tLight.prototype.parseTechnique = function ( element ) {\r\n\r\n\t\tthis.profile = element.getAttribute( 'profile' );\r\n\r\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tvar child = element.childNodes[ i ];\r\n\r\n\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\tcase 'intensity':\r\n\r\n\t\t\t\t\tthis.intensity = parseFloat(child.textContent);\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tfunction InstanceLight() {\r\n\r\n\t\tthis.url = \"\";\r\n\r\n\t}\r\n\r\n\tInstanceLight.prototype.parse = function ( element ) {\r\n\r\n\t\tthis.url = element.getAttribute('url').replace(/^#/, '');\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tfunction KinematicsModel( ) {\r\n\r\n\t\tthis.id = '';\r\n\t\tthis.name = '';\r\n\t\tthis.joints = [];\r\n\t\tthis.links = [];\r\n\r\n\t}\r\n\r\n\tKinematicsModel.prototype.parse = function( element ) {\r\n\r\n\t\tthis.id = element.getAttribute('id');\r\n\t\tthis.name = element.getAttribute('name');\r\n\t\tthis.joints = [];\r\n\t\tthis.links = [];\r\n\r\n\t\tfor (var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tvar child = element.childNodes[ i ];\r\n\t\t\tif ( child.nodeType != 1 ) continue;\r\n\r\n\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\tcase 'technique_common':\r\n\r\n\t\t\t\t\tthis.parseCommon(child);\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tKinematicsModel.prototype.parseCommon = function( element ) {\r\n\r\n\t\tfor (var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tvar child = element.childNodes[ i ];\r\n\t\t\tif ( child.nodeType != 1 ) continue;\r\n\r\n\t\t\tswitch ( element.childNodes[ i ].nodeName ) {\r\n\r\n\t\t\t\tcase 'joint':\r\n\t\t\t\t\tthis.joints.push( (new Joint()).parse(child) );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'link':\r\n\t\t\t\t\tthis.links.push( (new Link()).parse(child) );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tfunction Joint( ) {\r\n\r\n\t\tthis.sid = '';\r\n\t\tthis.name = '';\r\n\t\tthis.axis = new THREE.Vector3();\r\n\t\tthis.limits = {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 0\r\n\t\t};\r\n\t\tthis.type = '';\r\n\t\tthis.static = false;\r\n\t\tthis.zeroPosition = 0.0;\r\n\t\tthis.middlePosition = 0.0;\r\n\r\n\t}\r\n\r\n\tJoint.prototype.parse = function( element ) {\r\n\r\n\t\tthis.sid = element.getAttribute('sid');\r\n\t\tthis.name = element.getAttribute('name');\r\n\t\tthis.axis = new THREE.Vector3();\r\n\t\tthis.limits = {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 0\r\n\t\t};\r\n\t\tthis.type = '';\r\n\t\tthis.static = false;\r\n\t\tthis.zeroPosition = 0.0;\r\n\t\tthis.middlePosition = 0.0;\r\n\r\n\t\tvar axisElement = element.querySelector('axis');\r\n\t\tvar _axis = _floats(axisElement.textContent);\r\n\t\tthis.axis = getConvertedVec3(_axis, 0);\r\n\r\n\t\tvar min = element.querySelector('limits min') ? parseFloat(element.querySelector('limits min').textContent) : -360;\r\n\t\tvar max = element.querySelector('limits max') ? parseFloat(element.querySelector('limits max').textContent) : 360;\r\n\r\n\t\tthis.limits = {\r\n\t\t\tmin: min,\r\n\t\t\tmax: max\r\n\t\t};\r\n\r\n\t\tvar jointTypes = [ 'prismatic', 'revolute' ];\r\n\t\tfor (var i = 0; i < jointTypes.length; i ++ ) {\r\n\r\n\t\t\tvar type = jointTypes[ i ];\r\n\r\n\t\t\tvar jointElement = element.querySelector(type);\r\n\r\n\t\t\tif ( jointElement ) {\r\n\r\n\t\t\t\tthis.type = type;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// if the min is equal to or somehow greater than the max, consider the joint static\r\n\t\tif ( this.limits.min >= this.limits.max ) {\r\n\r\n\t\t\tthis.static = true;\r\n\r\n\t\t}\r\n\r\n\t\tthis.middlePosition = (this.limits.min + this.limits.max) / 2.0;\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tfunction Link( ) {\r\n\r\n\t\tthis.sid = '';\r\n\t\tthis.name = '';\r\n\t\tthis.transforms = [];\r\n\t\tthis.attachments = [];\r\n\r\n\t}\r\n\r\n\tLink.prototype.parse = function( element ) {\r\n\r\n\t\tthis.sid = element.getAttribute('sid');\r\n\t\tthis.name = element.getAttribute('name');\r\n\t\tthis.transforms = [];\r\n\t\tthis.attachments = [];\r\n\r\n\t\tfor (var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tvar child = element.childNodes[ i ];\r\n\t\t\tif ( child.nodeType != 1 ) continue;\r\n\r\n\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\tcase 'attachment_full':\r\n\t\t\t\t\tthis.attachments.push( (new Attachment()).parse(child) );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'rotate':\r\n\t\t\t\tcase 'translate':\r\n\t\t\t\tcase 'matrix':\r\n\r\n\t\t\t\t\tthis.transforms.push( (new Transform()).parse(child) );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tfunction Attachment( ) {\r\n\r\n\t\tthis.joint = '';\r\n\t\tthis.transforms = [];\r\n\t\tthis.links = [];\r\n\r\n\t}\r\n\r\n\tAttachment.prototype.parse = function( element ) {\r\n\r\n\t\tthis.joint = element.getAttribute('joint').split('/').pop();\r\n\t\tthis.links = [];\r\n\r\n\t\tfor (var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tvar child = element.childNodes[ i ];\r\n\t\t\tif ( child.nodeType != 1 ) continue;\r\n\r\n\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\tcase 'link':\r\n\t\t\t\t\tthis.links.push( (new Link()).parse(child) );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'rotate':\r\n\t\t\t\tcase 'translate':\r\n\t\t\t\tcase 'matrix':\r\n\r\n\t\t\t\t\tthis.transforms.push( (new Transform()).parse(child) );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tfunction _source( element ) {\r\n\r\n\t\tvar id = element.getAttribute( 'id' );\r\n\r\n\t\tif ( sources[ id ] != undefined ) {\r\n\r\n\t\t\treturn sources[ id ];\r\n\r\n\t\t}\r\n\r\n\t\tsources[ id ] = ( new Source(id )).parse( element );\r\n\t\treturn sources[ id ];\r\n\r\n\t}\r\n\r\n\tfunction _nsResolver( nsPrefix ) {\r\n\r\n\t\tif ( nsPrefix === \"dae\" ) {\r\n\r\n\t\t\treturn \"http://www.collada.org/2005/11/COLLADASchema\";\r\n\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t}\r\n\r\n\tfunction _bools( str ) {\r\n\r\n\t\tvar raw = _strings( str );\r\n\t\tvar data = [];\r\n\r\n\t\tfor ( var i = 0, l = raw.length; i < l; i ++ ) {\r\n\r\n\t\t\tdata.push( (raw[i] === 'true' || raw[i] === '1') ? true : false );\r\n\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\r\n\t}\r\n\r\n\tfunction _floats( str ) {\r\n\r\n\t\tvar raw = _strings(str);\r\n\t\tvar data = [];\r\n\r\n\t\tfor ( var i = 0, l = raw.length; i < l; i ++ ) {\r\n\r\n\t\t\tdata.push( parseFloat( raw[ i ] ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\r\n\t}\r\n\r\n\tfunction _ints( str ) {\r\n\r\n\t\tvar raw = _strings( str );\r\n\t\tvar data = [];\r\n\r\n\t\tfor ( var i = 0, l = raw.length; i < l; i ++ ) {\r\n\r\n\t\t\tdata.push( parseInt( raw[ i ], 10 ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\r\n\t}\r\n\r\n\tfunction _strings( str ) {\r\n\r\n\t\treturn ( str.length > 0 ) ? _trimString( str ).split( /\\s+/ ) : [];\r\n\r\n\t}\r\n\r\n\tfunction _trimString( str ) {\r\n\r\n\t\treturn str.replace( /^\\s+/, \"\" ).replace( /\\s+$/, \"\" );\r\n\r\n\t}\r\n\r\n\tfunction _attr_as_float( element, name, defaultValue ) {\r\n\r\n\t\tif ( element.hasAttribute( name ) ) {\r\n\r\n\t\t\treturn parseFloat( element.getAttribute( name ) );\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn defaultValue;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction _attr_as_int( element, name, defaultValue ) {\r\n\r\n\t\tif ( element.hasAttribute( name ) ) {\r\n\r\n\t\t\treturn parseInt( element.getAttribute( name ), 10) ;\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn defaultValue;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction _attr_as_string( element, name, defaultValue ) {\r\n\r\n\t\tif ( element.hasAttribute( name ) ) {\r\n\r\n\t\t\treturn element.getAttribute( name );\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn defaultValue;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction _format_float( f, num ) {\r\n\r\n\t\tif ( f === undefined ) {\r\n\r\n\t\t\tvar s = '0.';\r\n\r\n\t\t\twhile ( s.length < num + 2 ) {\r\n\r\n\t\t\t\ts += '0';\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn s;\r\n\r\n\t\t}\r\n\r\n\t\tnum = num || 2;\r\n\r\n\t\tvar parts = f.toString().split( '.' );\r\n\t\tparts[ 1 ] = parts.length > 1 ? parts[ 1 ].substr( 0, num ) : \"0\";\r\n\r\n\t\twhile ( parts[ 1 ].length < num ) {\r\n\r\n\t\t\tparts[ 1 ] += '0';\r\n\r\n\t\t}\r\n\r\n\t\treturn parts.join( '.' );\r\n\r\n\t}\r\n\r\n\tfunction loadTextureImage ( texture, url ) {\r\n\r\n\t\tvar loader = new THREE.ImageLoader();\r\n\r\n\t\tloader.load( url, function ( image ) {\r\n\r\n\t\t\ttexture.image = image;\r\n\t\t\ttexture.needsUpdate = true;\r\n\r\n\t\t} );\r\n\r\n\t}\r\n\r\n\tfunction extractDoubleSided( obj, element ) {\r\n\r\n\t\tobj.doubleSided = false;\r\n\r\n\t\tvar node = element.querySelectorAll('extra double_sided')[0];\r\n\r\n\t\tif ( node ) {\r\n\r\n\t\t\tif ( node && parseInt( node.textContent, 10 ) === 1 ) {\r\n\r\n\t\t\t\tobj.doubleSided = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// Up axis conversion\r\n\r\n\tfunction setUpConversion() {\r\n\r\n\t\tif ( options.convertUpAxis !== true || colladaUp === options.upAxis ) {\r\n\r\n\t\t\tupConversion = null;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tswitch ( colladaUp ) {\r\n\r\n\t\t\t\tcase 'X':\r\n\r\n\t\t\t\t\tupConversion = options.upAxis === 'Y' ? 'XtoY' : 'XtoZ';\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'Y':\r\n\r\n\t\t\t\t\tupConversion = options.upAxis === 'X' ? 'YtoX' : 'YtoZ';\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'Z':\r\n\r\n\t\t\t\t\tupConversion = options.upAxis === 'X' ? 'ZtoX' : 'ZtoY';\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction fixCoords( data, sign ) {\r\n\r\n\t\tif ( options.convertUpAxis !== true || colladaUp === options.upAxis ) {\r\n\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tswitch ( upConversion ) {\r\n\r\n\t\t\tcase 'XtoY':\r\n\r\n\t\t\t\tvar tmp = data[ 0 ];\r\n\t\t\t\tdata[ 0 ] = sign * data[ 1 ];\r\n\t\t\t\tdata[ 1 ] = tmp;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'XtoZ':\r\n\r\n\t\t\t\tvar tmp = data[ 2 ];\r\n\t\t\t\tdata[ 2 ] = data[ 1 ];\r\n\t\t\t\tdata[ 1 ] = data[ 0 ];\r\n\t\t\t\tdata[ 0 ] = tmp;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'YtoX':\r\n\r\n\t\t\t\tvar tmp = data[ 0 ];\r\n\t\t\t\tdata[ 0 ] = data[ 1 ];\r\n\t\t\t\tdata[ 1 ] = sign * tmp;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'YtoZ':\r\n\r\n\t\t\t\tvar tmp = data[ 1 ];\r\n\t\t\t\tdata[ 1 ] = sign * data[ 2 ];\r\n\t\t\t\tdata[ 2 ] = tmp;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'ZtoX':\r\n\r\n\t\t\t\tvar tmp = data[ 0 ];\r\n\t\t\t\tdata[ 0 ] = data[ 1 ];\r\n\t\t\t\tdata[ 1 ] = data[ 2 ];\r\n\t\t\t\tdata[ 2 ] = tmp;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'ZtoY':\r\n\r\n\t\t\t\tvar tmp = data[ 1 ];\r\n\t\t\t\tdata[ 1 ] = data[ 2 ];\r\n\t\t\t\tdata[ 2 ] = sign * tmp;\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction getConvertedTranslation( axis, data ) {\r\n\r\n\t\tif ( options.convertUpAxis !== true || colladaUp === options.upAxis ) {\r\n\r\n\t\t\treturn data;\r\n\r\n\t\t}\r\n\r\n\t\tswitch ( axis ) {\r\n\t\t\tcase 'X':\r\n\t\t\t\tdata = upConversion === 'XtoY' ? data * -1 : data;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'Y':\r\n\t\t\t\tdata = upConversion === 'YtoZ' || upConversion === 'YtoX' ? data * -1 : data;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'Z':\r\n\t\t\t\tdata = upConversion === 'ZtoY' ? data * -1 : data ;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\t}\r\n\r\n\tfunction getConvertedVec3( data, offset ) {\r\n\r\n\t\tvar arr = [ data[ offset ], data[ offset + 1 ], data[ offset + 2 ] ];\r\n\t\tfixCoords( arr, -1 );\r\n\t\treturn new THREE.Vector3( arr[ 0 ], arr[ 1 ], arr[ 2 ] );\r\n\r\n\t}\r\n\r\n\tfunction getConvertedMat4( data ) {\r\n\r\n\t\tif ( options.convertUpAxis ) {\r\n\r\n\t\t\t// First fix rotation and scale\r\n\r\n\t\t\t// Columns first\r\n\t\t\tvar arr = [ data[ 0 ], data[ 4 ], data[ 8 ] ];\r\n\t\t\tfixCoords( arr, -1 );\r\n\t\t\tdata[ 0 ] = arr[ 0 ];\r\n\t\t\tdata[ 4 ] = arr[ 1 ];\r\n\t\t\tdata[ 8 ] = arr[ 2 ];\r\n\t\t\tarr = [ data[ 1 ], data[ 5 ], data[ 9 ] ];\r\n\t\t\tfixCoords( arr, -1 );\r\n\t\t\tdata[ 1 ] = arr[ 0 ];\r\n\t\t\tdata[ 5 ] = arr[ 1 ];\r\n\t\t\tdata[ 9 ] = arr[ 2 ];\r\n\t\t\tarr = [ data[ 2 ], data[ 6 ], data[ 10 ] ];\r\n\t\t\tfixCoords( arr, -1 );\r\n\t\t\tdata[ 2 ] = arr[ 0 ];\r\n\t\t\tdata[ 6 ] = arr[ 1 ];\r\n\t\t\tdata[ 10 ] = arr[ 2 ];\r\n\t\t\t// Rows second\r\n\t\t\tarr = [ data[ 0 ], data[ 1 ], data[ 2 ] ];\r\n\t\t\tfixCoords( arr, -1 );\r\n\t\t\tdata[ 0 ] = arr[ 0 ];\r\n\t\t\tdata[ 1 ] = arr[ 1 ];\r\n\t\t\tdata[ 2 ] = arr[ 2 ];\r\n\t\t\tarr = [ data[ 4 ], data[ 5 ], data[ 6 ] ];\r\n\t\t\tfixCoords( arr, -1 );\r\n\t\t\tdata[ 4 ] = arr[ 0 ];\r\n\t\t\tdata[ 5 ] = arr[ 1 ];\r\n\t\t\tdata[ 6 ] = arr[ 2 ];\r\n\t\t\tarr = [ data[ 8 ], data[ 9 ], data[ 10 ] ];\r\n\t\t\tfixCoords( arr, -1 );\r\n\t\t\tdata[ 8 ] = arr[ 0 ];\r\n\t\t\tdata[ 9 ] = arr[ 1 ];\r\n\t\t\tdata[ 10 ] = arr[ 2 ];\r\n\r\n\t\t\t// Now fix translation\r\n\t\t\tarr = [ data[ 3 ], data[ 7 ], data[ 11 ] ];\r\n\t\t\tfixCoords( arr, -1 );\r\n\t\t\tdata[ 3 ] = arr[ 0 ];\r\n\t\t\tdata[ 7 ] = arr[ 1 ];\r\n\t\t\tdata[ 11 ] = arr[ 2 ];\r\n\r\n\t\t}\r\n\r\n\t\treturn new THREE.Matrix4().set(\r\n\t\t\tdata[0], data[1], data[2], data[3],\r\n\t\t\tdata[4], data[5], data[6], data[7],\r\n\t\t\tdata[8], data[9], data[10], data[11],\r\n\t\t\tdata[12], data[13], data[14], data[15]\r\n\t\t\t);\r\n\r\n\t}\r\n\r\n\tfunction getConvertedIndex( index ) {\r\n\r\n\t\tif ( index > -1 && index < 3 ) {\r\n\r\n\t\t\tvar members = [ 'X', 'Y', 'Z' ],\r\n\t\t\t\tindices = { X: 0, Y: 1, Z: 2 };\r\n\r\n\t\t\tindex = getConvertedMember( members[ index ] );\r\n\t\t\tindex = indices[ index ];\r\n\r\n\t\t}\r\n\r\n\t\treturn index;\r\n\r\n\t}\r\n\r\n\tfunction getConvertedMember( member ) {\r\n\r\n\t\tif ( options.convertUpAxis ) {\r\n\r\n\t\t\tswitch ( member ) {\r\n\r\n\t\t\t\tcase 'X':\r\n\r\n\t\t\t\t\tswitch ( upConversion ) {\r\n\r\n\t\t\t\t\t\tcase 'XtoY':\r\n\t\t\t\t\t\tcase 'XtoZ':\r\n\t\t\t\t\t\tcase 'YtoX':\r\n\r\n\t\t\t\t\t\t\tmember = 'Y';\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase 'ZtoX':\r\n\r\n\t\t\t\t\t\t\tmember = 'Z';\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'Y':\r\n\r\n\t\t\t\t\tswitch ( upConversion ) {\r\n\r\n\t\t\t\t\t\tcase 'XtoY':\r\n\t\t\t\t\t\tcase 'YtoX':\r\n\t\t\t\t\t\tcase 'ZtoX':\r\n\r\n\t\t\t\t\t\t\tmember = 'X';\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase 'XtoZ':\r\n\t\t\t\t\t\tcase 'YtoZ':\r\n\t\t\t\t\t\tcase 'ZtoY':\r\n\r\n\t\t\t\t\t\t\tmember = 'Z';\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'Z':\r\n\r\n\t\t\t\t\tswitch ( upConversion ) {\r\n\r\n\t\t\t\t\t\tcase 'XtoZ':\r\n\r\n\t\t\t\t\t\t\tmember = 'X';\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase 'YtoZ':\r\n\t\t\t\t\t\tcase 'ZtoX':\r\n\t\t\t\t\t\tcase 'ZtoY':\r\n\r\n\t\t\t\t\t\t\tmember = 'Y';\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn member;\r\n\r\n\t}\r\n\r\n\treturn {\r\n\r\n\t\tload: load,\r\n\t\tparse: parse,\r\n\t\tsetPreferredShading: setPreferredShading,\r\n\t\tapplySkin: applySkin,\r\n\t\tgeometries : geometries,\r\n\t\toptions: options\r\n\r\n\t};\r\n\r\n};\r\n\r\nexport { ColladaLoader }\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/loaders/ColladaLoader.js","import * as THREE from 'three';\r\n\r\n// https://github.com/mrdoob/three.js/blob/dev/examples/js/loaders/OBJLoader.js\r\n\r\nconst DDSLoader = function () {\r\n\r\n\tthis._parser = DDSLoader.parse;\r\n\r\n};\r\n\r\nDDSLoader.prototype = Object.create( THREE.CompressedTextureLoader.prototype );\r\nDDSLoader.prototype.constructor = DDSLoader;\r\n\r\nDDSLoader.parse = function ( buffer, loadMipmaps ) {\r\n\r\n\tvar dds = { mipmaps: [], width: 0, height: 0, format: null, mipmapCount: 1 };\r\n\r\n\t// Adapted from @toji's DDS utils\r\n\t// https://github.com/toji/webgl-texture-utils/blob/master/texture-util/dds.js\r\n\r\n\t// All values and structures referenced from:\r\n\t// http://msdn.microsoft.com/en-us/library/bb943991.aspx/\r\n\r\n\tvar DDS_MAGIC = 0x20534444;\r\n\r\n\tvar DDSD_CAPS = 0x1,\r\n\t\tDDSD_HEIGHT = 0x2,\r\n\t\tDDSD_WIDTH = 0x4,\r\n\t\tDDSD_PITCH = 0x8,\r\n\t\tDDSD_PIXELFORMAT = 0x1000,\r\n\t\tDDSD_MIPMAPCOUNT = 0x20000,\r\n\t\tDDSD_LINEARSIZE = 0x80000,\r\n\t\tDDSD_DEPTH = 0x800000;\r\n\r\n\tvar DDSCAPS_COMPLEX = 0x8,\r\n\t\tDDSCAPS_MIPMAP = 0x400000,\r\n\t\tDDSCAPS_TEXTURE = 0x1000;\r\n\r\n\tvar DDSCAPS2_CUBEMAP = 0x200,\r\n\t\tDDSCAPS2_CUBEMAP_POSITIVEX = 0x400,\r\n\t\tDDSCAPS2_CUBEMAP_NEGATIVEX = 0x800,\r\n\t\tDDSCAPS2_CUBEMAP_POSITIVEY = 0x1000,\r\n\t\tDDSCAPS2_CUBEMAP_NEGATIVEY = 0x2000,\r\n\t\tDDSCAPS2_CUBEMAP_POSITIVEZ = 0x4000,\r\n\t\tDDSCAPS2_CUBEMAP_NEGATIVEZ = 0x8000,\r\n\t\tDDSCAPS2_VOLUME = 0x200000;\r\n\r\n\tvar DDPF_ALPHAPIXELS = 0x1,\r\n\t\tDDPF_ALPHA = 0x2,\r\n\t\tDDPF_FOURCC = 0x4,\r\n\t\tDDPF_RGB = 0x40,\r\n\t\tDDPF_YUV = 0x200,\r\n\t\tDDPF_LUMINANCE = 0x20000;\r\n\r\n\tfunction fourCCToInt32( value ) {\r\n\r\n\t\treturn value.charCodeAt( 0 ) +\r\n\t\t\t( value.charCodeAt( 1 ) << 8 ) +\r\n\t\t\t( value.charCodeAt( 2 ) << 16 ) +\r\n\t\t\t( value.charCodeAt( 3 ) << 24 );\r\n\r\n\t}\r\n\r\n\tfunction int32ToFourCC( value ) {\r\n\r\n\t\treturn String.fromCharCode(\r\n\t\t\tvalue & 0xff,\r\n\t\t\t( value >> 8 ) & 0xff,\r\n\t\t\t( value >> 16 ) & 0xff,\r\n\t\t\t( value >> 24 ) & 0xff\r\n\t\t);\r\n\r\n\t}\r\n\r\n\tfunction loadARGBMip( buffer, dataOffset, width, height ) {\r\n\r\n\t\tvar dataLength = width * height * 4;\r\n\t\tvar srcBuffer = new Uint8Array( buffer, dataOffset, dataLength );\r\n\t\tvar byteArray = new Uint8Array( dataLength );\r\n\t\tvar dst = 0;\r\n\t\tvar src = 0;\r\n\t\tfor ( var y = 0; y < height; y ++ ) {\r\n\r\n\t\t\tfor ( var x = 0; x < width; x ++ ) {\r\n\r\n\t\t\t\tvar b = srcBuffer[ src ]; src ++;\r\n\t\t\t\tvar g = srcBuffer[ src ]; src ++;\r\n\t\t\t\tvar r = srcBuffer[ src ]; src ++;\r\n\t\t\t\tvar a = srcBuffer[ src ]; src ++;\r\n\t\t\t\tbyteArray[ dst ] = r; dst ++;\t//r\r\n\t\t\t\tbyteArray[ dst ] = g; dst ++;\t//g\r\n\t\t\t\tbyteArray[ dst ] = b; dst ++;\t//b\r\n\t\t\t\tbyteArray[ dst ] = a; dst ++;\t//a\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\treturn byteArray;\r\n\r\n\t}\r\n\r\n\tvar FOURCC_DXT1 = fourCCToInt32( \"DXT1\" );\r\n\tvar FOURCC_DXT3 = fourCCToInt32( \"DXT3\" );\r\n\tvar FOURCC_DXT5 = fourCCToInt32( \"DXT5\" );\r\n\tvar FOURCC_ETC1 = fourCCToInt32( \"ETC1\" );\r\n\r\n\tvar headerLengthInt = 31; // The header length in 32 bit ints\r\n\r\n\t// Offsets into the header array\r\n\r\n\tvar off_magic = 0;\r\n\r\n\tvar off_size = 1;\r\n\tvar off_flags = 2;\r\n\tvar off_height = 3;\r\n\tvar off_width = 4;\r\n\r\n\tvar off_mipmapCount = 7;\r\n\r\n\tvar off_pfFlags = 20;\r\n\tvar off_pfFourCC = 21;\r\n\tvar off_RGBBitCount = 22;\r\n\tvar off_RBitMask = 23;\r\n\tvar off_GBitMask = 24;\r\n\tvar off_BBitMask = 25;\r\n\tvar off_ABitMask = 26;\r\n\r\n\tvar off_caps = 27;\r\n\tvar off_caps2 = 28;\r\n\tvar off_caps3 = 29;\r\n\tvar off_caps4 = 30;\r\n\r\n\t// Parse header\r\n\r\n\tvar header = new Int32Array( buffer, 0, headerLengthInt );\r\n\r\n\tif ( header[ off_magic ] !== DDS_MAGIC ) {\r\n\r\n\t\tconsole.error( 'DDSLoader.parse: Invalid magic number in DDS header.' );\r\n\t\treturn dds;\r\n\r\n\t}\r\n\r\n\tif ( ! header[ off_pfFlags ] & DDPF_FOURCC ) {\r\n\r\n\t\tconsole.error( 'DDSLoader.parse: Unsupported format, must contain a FourCC code.' );\r\n\t\treturn dds;\r\n\r\n\t}\r\n\r\n\tvar blockBytes;\r\n\r\n\tvar fourCC = header[ off_pfFourCC ];\r\n\r\n\tvar isRGBAUncompressed = false;\r\n\r\n\tswitch ( fourCC ) {\r\n\r\n\t\tcase FOURCC_DXT1:\r\n\r\n\t\t\tblockBytes = 8;\r\n\t\t\tdds.format = THREE.RGB_S3TC_DXT1_Format;\r\n\t\t\tbreak;\r\n\r\n\t\tcase FOURCC_DXT3:\r\n\r\n\t\t\tblockBytes = 16;\r\n\t\t\tdds.format = THREE.RGBA_S3TC_DXT3_Format;\r\n\t\t\tbreak;\r\n\r\n\t\tcase FOURCC_DXT5:\r\n\r\n\t\t\tblockBytes = 16;\r\n\t\t\tdds.format = THREE.RGBA_S3TC_DXT5_Format;\r\n\t\t\tbreak;\r\n\r\n\t\tcase FOURCC_ETC1:\r\n\r\n\t\t\tblockBytes = 8;\r\n\t\t\tdds.format = THREE.RGB_ETC1_Format;\r\n\t\t\tbreak;\r\n\r\n\t\tdefault:\r\n\r\n\t\t\tif ( header[ off_RGBBitCount ] === 32\r\n\t\t\t\t&& header[ off_RBitMask ] & 0xff0000\r\n\t\t\t\t&& header[ off_GBitMask ] & 0xff00\r\n\t\t\t\t&& header[ off_BBitMask ] & 0xff\r\n\t\t\t\t&& header[ off_ABitMask ] & 0xff000000  ) {\r\n\r\n\t\t\t\tisRGBAUncompressed = true;\r\n\t\t\t\tblockBytes = 64;\r\n\t\t\t\tdds.format = THREE.RGBAFormat;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconsole.error( 'DDSLoader.parse: Unsupported FourCC code ', int32ToFourCC( fourCC ) );\r\n\t\t\t\treturn dds;\r\n\r\n\t\t\t}\r\n\t}\r\n\r\n\tdds.mipmapCount = 1;\r\n\r\n\tif ( header[ off_flags ] & DDSD_MIPMAPCOUNT && loadMipmaps !== false ) {\r\n\r\n\t\tdds.mipmapCount = Math.max( 1, header[ off_mipmapCount ] );\r\n\r\n\t}\r\n\r\n\tvar caps2 = header[ off_caps2 ];\r\n\tdds.isCubemap = caps2 & DDSCAPS2_CUBEMAP ? true : false;\r\n\tif ( dds.isCubemap && (\r\n\t\t! ( caps2 & DDSCAPS2_CUBEMAP_POSITIVEX ) ||\r\n\t\t! ( caps2 & DDSCAPS2_CUBEMAP_NEGATIVEX ) ||\r\n\t\t! ( caps2 & DDSCAPS2_CUBEMAP_POSITIVEY ) ||\r\n\t\t! ( caps2 & DDSCAPS2_CUBEMAP_NEGATIVEY ) ||\r\n\t\t! ( caps2 & DDSCAPS2_CUBEMAP_POSITIVEZ ) ||\r\n\t\t! ( caps2 & DDSCAPS2_CUBEMAP_NEGATIVEZ )\r\n\t\t) ) {\r\n\r\n\t\tconsole.error( 'DDSLoader.parse: Incomplete cubemap faces' );\r\n\t\treturn dds;\r\n\r\n\t}\r\n\r\n\tdds.width = header[ off_width ];\r\n\tdds.height = header[ off_height ];\r\n\r\n\tvar dataOffset = header[ off_size ] + 4;\r\n\r\n\t// Extract mipmaps buffers\r\n\r\n\tvar faces = dds.isCubemap ? 6 : 1;\r\n\r\n\tfor ( var face = 0; face < faces; face ++ ) {\r\n\r\n\t\tvar width = dds.width;\r\n\t\tvar height = dds.height;\r\n\r\n\t\tfor ( var i = 0; i < dds.mipmapCount; i ++ ) {\r\n\r\n\t\t\tif ( isRGBAUncompressed ) {\r\n\r\n\t\t\t\tvar byteArray = loadARGBMip( buffer, dataOffset, width, height );\r\n\t\t\t\tvar dataLength = byteArray.length;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvar dataLength = Math.max( 4, width ) / 4 * Math.max( 4, height ) / 4 * blockBytes;\r\n\t\t\t\tvar byteArray = new Uint8Array( buffer, dataOffset, dataLength );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar mipmap = { \"data\": byteArray, \"width\": width, \"height\": height };\r\n\t\t\tdds.mipmaps.push( mipmap );\r\n\r\n\t\t\tdataOffset += dataLength;\r\n\r\n\t\t\twidth = Math.max( width >> 1, 1 );\r\n\t\t\theight = Math.max( height >> 1, 1 );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn dds;\r\n\r\n};\r\n\r\nexport { DDSLoader };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/loaders/DDSLoader.js","import * as THREE from 'three';\r\nimport { DDSLoader } from './DDSLoader'\r\n\r\n// https://github.com/mrdoob/three.js/blob/dev/examples/js/loaders/MTLLoader.js\r\n\r\nconst LoaderHandlers = THREE.Loader.Handlers;\r\nLoaderHandlers.add( /\\.dds$/i, new DDSLoader() );\r\n\r\nconst MTLLoader = function ( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\r\n};\r\n\r\nMTLLoader.prototype = {\r\n\r\n\tconstructor: MTLLoader,\r\n\r\n\t/**\r\n\t * Loads and parses a MTL asset from a URL.\r\n\t *\r\n\t * @param {String} url - URL to the MTL file.\r\n\t * @param {Function} [onLoad] - Callback invoked with the loaded object.\r\n\t * @param {Function} [onProgress] - Callback for download progress.\r\n\t * @param {Function} [onError] - Callback for download errors.\r\n\t *\r\n\t * @see setPath setTexturePath\r\n\t *\r\n\t * @note In order for relative texture references to resolve correctly\r\n\t * you must call setPath and/or setTexturePath explicitly prior to load.\r\n\t */\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar loader = new THREE.FileLoader( this.manager );\r\n\t\tloader.setPath( this.path );\r\n\t\tloader.load( url, function ( text ) {\r\n\r\n\t\t\tonLoad( scope.parse( text ) );\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * Set base path for resolving references.\r\n\t * If set this path will be prepended to each loaded and found reference.\r\n\t *\r\n\t * @see setTexturePath\r\n\t * @param {String} path\r\n\t *\r\n\t * @example\r\n\t *     mtlLoader.setPath( 'assets/obj/' );\r\n\t *     mtlLoader.load( 'my.mtl', ... );\r\n\t */\r\n\tsetPath: function ( path ) {\r\n\r\n\t\tthis.path = path;\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * Set base path for resolving texture references.\r\n\t * If set this path will be prepended found texture reference.\r\n\t * If not set and setPath is, it will be used as texture base path.\r\n\t *\r\n\t * @see setPath\r\n\t * @param {String} path\r\n\t *\r\n\t * @example\r\n\t *     mtlLoader.setPath( 'assets/obj/' );\r\n\t *     mtlLoader.setTexturePath( 'assets/textures/' );\r\n\t *     mtlLoader.load( 'my.mtl', ... );\r\n\t */\r\n\tsetTexturePath: function ( path ) {\r\n\r\n\t\tthis.texturePath = path;\r\n\r\n\t},\r\n\r\n\tsetBaseUrl: function ( path ) {\r\n\r\n\t\tconsole.warn( 'MTLLoader: .setBaseUrl() is deprecated. Use .setTexturePath( path ) for texture path or .setPath( path ) for general base path instead.' );\r\n\r\n\t\tthis.setTexturePath( path );\r\n\r\n\t},\r\n\r\n\tsetCrossOrigin: function ( value ) {\r\n\r\n\t\tthis.crossOrigin = value;\r\n\r\n\t},\r\n\r\n\tsetMaterialOptions: function ( value ) {\r\n\r\n\t\tthis.materialOptions = value;\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * Parses a MTL file.\r\n\t *\r\n\t * @param {String} text - Content of MTL file\r\n\t * @return {MTLLoader.MaterialCreator}\r\n\t *\r\n\t * @see setPath setTexturePath\r\n\t *\r\n\t * @note In order for relative texture references to resolve correctly\r\n\t * you must call setPath and/or setTexturePath explicitly prior to parse.\r\n\t */\r\n\tparse: function ( text ) {\r\n\r\n\t\tvar lines = text.split( '\\n' );\r\n\t\tvar info = {};\r\n\t\tvar delimiter_pattern = /\\s+/;\r\n\t\tvar materialsInfo = {};\r\n\r\n\t\tfor ( var i = 0; i < lines.length; i ++ ) {\r\n\r\n\t\t\tvar line = lines[ i ];\r\n\t\t\tline = line.trim();\r\n\r\n\t\t\tif ( line.length === 0 || line.charAt( 0 ) === '#' ) {\r\n\r\n\t\t\t\t// Blank line or comment ignore\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar pos = line.indexOf( ' ' );\r\n\r\n\t\t\tvar key = ( pos >= 0 ) ? line.substring( 0, pos ) : line;\r\n\t\t\tkey = key.toLowerCase();\r\n\r\n\t\t\tvar value = ( pos >= 0 ) ? line.substring( pos + 1 ) : '';\r\n\t\t\tvalue = value.trim();\r\n\r\n\t\t\tif ( key === 'newmtl' ) {\r\n\r\n\t\t\t\t// New material\r\n\r\n\t\t\t\tinfo = { name: value };\r\n\t\t\t\tmaterialsInfo[ value ] = info;\r\n\r\n\t\t\t} else if ( info ) {\r\n\r\n\t\t\t\tif ( key === 'ka' || key === 'kd' || key === 'ks' ) {\r\n\r\n\t\t\t\t\tvar ss = value.split( delimiter_pattern, 3 );\r\n\t\t\t\t\tinfo[ key ] = [ parseFloat( ss[ 0 ] ), parseFloat( ss[ 1 ] ), parseFloat( ss[ 2 ] ) ];\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tinfo[ key ] = value;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar materialCreator = new MTLLoader.MaterialCreator( this.texturePath || this.path, this.materialOptions );\r\n\t\tmaterialCreator.setCrossOrigin( this.crossOrigin );\r\n\t\tmaterialCreator.setManager( this.manager );\r\n\t\tmaterialCreator.setMaterials( materialsInfo );\r\n\t\treturn materialCreator;\r\n\r\n\t}\r\n\r\n};\r\n\r\n/**\r\n * Create a new THREE-MTLLoader.MaterialCreator\r\n * @param baseUrl - Url relative to which textures are loaded\r\n * @param options - Set of options on how to construct the materials\r\n *                  side: Which side to apply the material\r\n *                        THREE.FrontSide (default), THREE.BackSide, THREE.DoubleSide\r\n *                  wrap: What type of wrapping to apply for textures\r\n *                        THREE.RepeatWrapping (default), THREE.ClampToEdgeWrapping, THREE.MirroredRepeatWrapping\r\n *                  normalizeRGB: RGBs need to be normalized to 0-1 from 0-255\r\n *                                Default: false, assumed to be already normalized\r\n *                  ignoreZeroRGBs: Ignore values of RGBs (Ka,Kd,Ks) that are all 0's\r\n *                                  Default: false\r\n * @constructor\r\n */\r\n\r\nMTLLoader.MaterialCreator = function ( baseUrl, options ) {\r\n\r\n\tthis.baseUrl = baseUrl || '';\r\n\tthis.options = options;\r\n\tthis.materialsInfo = {};\r\n\tthis.materials = {};\r\n\tthis.materialsArray = [];\r\n\tthis.nameLookup = {};\r\n\r\n\tthis.side = ( this.options && this.options.side ) ? this.options.side : THREE.FrontSide;\r\n\tthis.wrap = ( this.options && this.options.wrap ) ? this.options.wrap : THREE.RepeatWrapping;\r\n\r\n};\r\n\r\nMTLLoader.MaterialCreator.prototype = {\r\n\r\n\tconstructor: MTLLoader.MaterialCreator,\r\n\r\n\tcrossOrigin: 'Anonymous',\r\n\r\n\tsetCrossOrigin: function ( value ) {\r\n\r\n\t\tthis.crossOrigin = value;\r\n\r\n\t},\r\n\r\n\tsetManager: function ( value ) {\r\n\r\n\t\tthis.manager = value;\r\n\r\n\t},\r\n\r\n\tsetMaterials: function ( materialsInfo ) {\r\n\r\n\t\tthis.materialsInfo = this.convert( materialsInfo );\r\n\t\tthis.materials = {};\r\n\t\tthis.materialsArray = [];\r\n\t\tthis.nameLookup = {};\r\n\r\n\t},\r\n\r\n\tconvert: function ( materialsInfo ) {\r\n\r\n\t\tif ( ! this.options ) return materialsInfo;\r\n\r\n\t\tvar converted = {};\r\n\r\n\t\tfor ( var mn in materialsInfo ) {\r\n\r\n\t\t\t// Convert materials info into normalized form based on options\r\n\r\n\t\t\tvar mat = materialsInfo[ mn ];\r\n\r\n\t\t\tvar covmat = {};\r\n\r\n\t\t\tconverted[ mn ] = covmat;\r\n\r\n\t\t\tfor ( var prop in mat ) {\r\n\r\n\t\t\t\tvar save = true;\r\n\t\t\t\tvar value = mat[ prop ];\r\n\t\t\t\tvar lprop = prop.toLowerCase();\r\n\r\n\t\t\t\tswitch ( lprop ) {\r\n\r\n\t\t\t\t\tcase 'kd':\r\n\t\t\t\t\tcase 'ka':\r\n\t\t\t\t\tcase 'ks':\r\n\r\n\t\t\t\t\t\t// Diffuse color (color under white light) using RGB values\r\n\r\n\t\t\t\t\t\tif ( this.options && this.options.normalizeRGB ) {\r\n\r\n\t\t\t\t\t\t\tvalue = [ value[ 0 ] / 255, value[ 1 ] / 255, value[ 2 ] / 255 ];\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif ( this.options && this.options.ignoreZeroRGBs ) {\r\n\r\n\t\t\t\t\t\t\tif ( value[ 0 ] === 0 && value[ 1 ] === 0 && value[ 2 ] === 0 ) {\r\n\r\n\t\t\t\t\t\t\t\t// ignore\r\n\r\n\t\t\t\t\t\t\t\tsave = false;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault:\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( save ) {\r\n\r\n\t\t\t\t\tcovmat[ lprop ] = value;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn converted;\r\n\r\n\t},\r\n\r\n\tpreload: function () {\r\n\r\n\t\tfor ( var mn in this.materialsInfo ) {\r\n\r\n\t\t\tthis.create( mn );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tgetIndex: function ( materialName ) {\r\n\r\n\t\treturn this.nameLookup[ materialName ];\r\n\r\n\t},\r\n\r\n\tgetAsArray: function () {\r\n\r\n\t\tvar index = 0;\r\n\r\n\t\tfor ( var mn in this.materialsInfo ) {\r\n\r\n\t\t\tthis.materialsArray[ index ] = this.create( mn );\r\n\t\t\tthis.nameLookup[ mn ] = index;\r\n\t\t\tindex ++;\r\n\r\n\t\t}\r\n\r\n\t\treturn this.materialsArray;\r\n\r\n\t},\r\n\r\n\tcreate: function ( materialName ) {\r\n\r\n\t\tif ( this.materials[ materialName ] === undefined ) {\r\n\r\n\t\t\tthis.createMaterial_( materialName );\r\n\r\n\t\t}\r\n\r\n\t\treturn this.materials[ materialName ];\r\n\r\n\t},\r\n\r\n\tcreateMaterial_: function ( materialName ) {\r\n\r\n\t\t// Create material\r\n\r\n\t\tvar scope = this;\r\n\t\tvar mat = this.materialsInfo[ materialName ];\r\n\t\tvar params = {\r\n\r\n\t\t\tname: materialName,\r\n\t\t\tside: this.side\r\n\r\n\t\t};\r\n\r\n\t\tfunction resolveURL( baseUrl, url ) {\r\n\r\n\t\t\tif ( typeof url !== 'string' || url === '' )\r\n\t\t\t\treturn '';\r\n\r\n\t\t\t// Absolute URL\r\n\t\t\tif ( /^https?:\\/\\//i.test( url ) ) return url;\r\n\r\n\t\t\treturn baseUrl + url;\r\n\r\n\t\t}\r\n\r\n\t\tfunction setMapForType( mapType, value ) {\r\n\r\n\t\t\tif ( params[ mapType ] ) return; // Keep the first encountered texture\r\n\r\n\t\t\tvar texParams = scope.getTextureParams( value, params );\r\n\t\t\tvar map = scope.loadTexture( resolveURL( scope.baseUrl, texParams.url ) );\r\n\r\n\t\t\tmap.repeat.copy( texParams.scale );\r\n\t\t\tmap.offset.copy( texParams.offset );\r\n\r\n\t\t\tmap.wrapS = scope.wrap;\r\n\t\t\tmap.wrapT = scope.wrap;\r\n\r\n\t\t\tparams[ mapType ] = map;\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var prop in mat ) {\r\n\r\n\t\t\tvar value = mat[ prop ];\r\n\t\t\tvar n;\r\n\r\n\t\t\tif ( value === '' ) continue;\r\n\r\n\t\t\tswitch ( prop.toLowerCase() ) {\r\n\r\n\t\t\t\t// Ns is material specular exponent\r\n\r\n\t\t\t\tcase 'kd':\r\n\r\n\t\t\t\t\t// Diffuse color (color under white light) using RGB values\r\n\r\n\t\t\t\t\tparams.color = new THREE.Color().fromArray( value );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'ks':\r\n\r\n\t\t\t\t\t// Specular color (color when light is reflected from shiny surface) using RGB values\r\n\t\t\t\t\tparams.specular = new THREE.Color().fromArray( value );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'map_kd':\r\n\r\n\t\t\t\t\t// Diffuse texture map\r\n\r\n\t\t\t\t\tsetMapForType( \"map\", value );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'map_ks':\r\n\r\n\t\t\t\t\t// Specular map\r\n\r\n\t\t\t\t\tsetMapForType( \"specularMap\", value );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'norm':\r\n\r\n\t\t\t\t\tsetMapForType( \"normalMap\", value );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'map_bump':\r\n\t\t\t\tcase 'bump':\r\n\r\n\t\t\t\t\t// Bump texture map\r\n\r\n\t\t\t\t\tsetMapForType( \"bumpMap\", value );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'ns':\r\n\r\n\t\t\t\t\t// The specular exponent (defines the focus of the specular highlight)\r\n\t\t\t\t\t// A high exponent results in a tight, concentrated highlight. Ns values normally range from 0 to 1000.\r\n\r\n\t\t\t\t\tparams.shininess = parseFloat( value );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'd':\r\n\t\t\t\t\tn = parseFloat(value);\r\n\r\n\t\t\t\t\tif ( n < 1 ) {\r\n\r\n\t\t\t\t\t\tparams.opacity = n;\r\n\t\t\t\t\t\tparams.transparent = true;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'tr':\r\n\t\t\t\t\tn = parseFloat(value);\r\n\r\n\t\t\t\t\tif ( n > 0 ) {\r\n\r\n\t\t\t\t\t\tparams.opacity = 1 - n;\r\n\t\t\t\t\t\tparams.transparent = true;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.materials[ materialName ] = new THREE.MeshPhongMaterial( params );\r\n\t\treturn this.materials[ materialName ];\r\n\r\n\t},\r\n\r\n\tgetTextureParams: function ( value, matParams ) {\r\n\r\n\t\tvar texParams = {\r\n\r\n\t\t\tscale: new THREE.Vector2( 1, 1 ),\r\n\t\t\toffset: new THREE.Vector2( 0, 0 )\r\n\r\n\t\t };\r\n\r\n\t\tvar items = value.split( /\\s+/ );\r\n\t\tvar pos;\r\n\r\n\t\tpos = items.indexOf( '-bm' );\r\n\r\n\t\tif ( pos >= 0 ) {\r\n\r\n\t\t\tmatParams.bumpScale = parseFloat( items[ pos + 1 ] );\r\n\t\t\titems.splice( pos, 2 );\r\n\r\n\t\t}\r\n\r\n\t\tpos = items.indexOf( '-s' );\r\n\r\n\t\tif ( pos >= 0 ) {\r\n\r\n\t\t\ttexParams.scale.set( parseFloat( items[ pos + 1 ] ), parseFloat( items[ pos + 2 ] ) );\r\n\t\t\titems.splice( pos, 4 ); // we expect 3 parameters here!\r\n\r\n\t\t}\r\n\r\n\t\tpos = items.indexOf( '-o' );\r\n\r\n\t\tif ( pos >= 0 ) {\r\n\r\n\t\t\ttexParams.offset.set( parseFloat( items[ pos + 1 ] ), parseFloat( items[ pos + 2 ] ) );\r\n\t\t\titems.splice( pos, 4 ); // we expect 3 parameters here!\r\n\r\n\t\t}\r\n\r\n\t\ttexParams.url = items.join( ' ' ).trim();\r\n\t\treturn texParams;\r\n\r\n\t},\r\n\r\n\tloadTexture: function ( url, mapping, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar texture;\r\n\t\tvar loader = LoaderHandlers.get( url );\r\n\t\tvar manager = ( this.manager !== undefined ) ? this.manager : THREE.DefaultLoadingManager;\r\n\r\n\t\tif ( loader === null ) {\r\n\r\n\t\t\tloader = new THREE.TextureLoader( manager );\r\n\r\n\t\t}\r\n\r\n\t\tif ( loader.setCrossOrigin ) loader.setCrossOrigin( this.crossOrigin );\r\n\t\ttexture = loader.load( url, onLoad, onProgress, onError );\r\n\r\n\t\tif ( mapping !== undefined ) texture.mapping = mapping;\r\n\r\n\t\treturn texture;\r\n\r\n\t}\r\n\r\n};\r\n\r\nexport { MTLLoader };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/loaders/MTLLoader.js","import * as THREE from 'three';\r\n\r\n// https://github.com/mrdoob/three.js/blob/dev/examples/js/loaders/OBJLoader.js\r\n\r\nconst OBJLoader = function ( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\r\n\tthis.materials = null;\r\n\r\n\tthis.regexp = {\r\n\t\t// v float float float\r\n\t\tvertex_pattern           : /^v\\s+([\\d|\\.|\\+|\\-|e|E]+)\\s+([\\d|\\.|\\+|\\-|e|E]+)\\s+([\\d|\\.|\\+|\\-|e|E]+)/,\r\n\t\t// vn float float float\r\n\t\tnormal_pattern           : /^vn\\s+([\\d|\\.|\\+|\\-|e|E]+)\\s+([\\d|\\.|\\+|\\-|e|E]+)\\s+([\\d|\\.|\\+|\\-|e|E]+)/,\r\n\t\t// vt float float\r\n\t\tuv_pattern               : /^vt\\s+([\\d|\\.|\\+|\\-|e|E]+)\\s+([\\d|\\.|\\+|\\-|e|E]+)/,\r\n\t\t// f vertex vertex vertex\r\n\t\tface_vertex              : /^f\\s+(-?\\d+)\\s+(-?\\d+)\\s+(-?\\d+)(?:\\s+(-?\\d+))?/,\r\n\t\t// f vertex/uv vertex/uv vertex/uv\r\n\t\tface_vertex_uv           : /^f\\s+(-?\\d+)\\/(-?\\d+)\\s+(-?\\d+)\\/(-?\\d+)\\s+(-?\\d+)\\/(-?\\d+)(?:\\s+(-?\\d+)\\/(-?\\d+))?/,\r\n\t\t// f vertex/uv/normal vertex/uv/normal vertex/uv/normal\r\n\t\tface_vertex_uv_normal    : /^f\\s+(-?\\d+)\\/(-?\\d+)\\/(-?\\d+)\\s+(-?\\d+)\\/(-?\\d+)\\/(-?\\d+)\\s+(-?\\d+)\\/(-?\\d+)\\/(-?\\d+)(?:\\s+(-?\\d+)\\/(-?\\d+)\\/(-?\\d+))?/,\r\n\t\t// f vertex//normal vertex//normal vertex//normal\r\n\t\tface_vertex_normal       : /^f\\s+(-?\\d+)\\/\\/(-?\\d+)\\s+(-?\\d+)\\/\\/(-?\\d+)\\s+(-?\\d+)\\/\\/(-?\\d+)(?:\\s+(-?\\d+)\\/\\/(-?\\d+))?/,\r\n\t\t// o object_name | g group_name\r\n\t\tobject_pattern           : /^[og]\\s*(.+)?/,\r\n\t\t// s boolean\r\n\t\tsmoothing_pattern        : /^s\\s+(\\d+|on|off)/,\r\n\t\t// mtllib file_reference\r\n\t\tmaterial_library_pattern : /^mtllib /,\r\n\t\t// usemtl material_name\r\n\t\tmaterial_use_pattern     : /^usemtl /\r\n\t};\r\n\r\n};\r\n\r\nOBJLoader.prototype = {\r\n\r\n\tconstructor: OBJLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar loader = new THREE.FileLoader( scope.manager );\r\n\t\tloader.setPath( this.path );\r\n\t\tloader.load( url, function ( text ) {\r\n\r\n\t\t\tonLoad( scope.parse( text ) );\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t},\r\n\r\n\tsetPath: function ( value ) {\r\n\r\n\t\tthis.path = value;\r\n\r\n\t},\r\n\r\n\tsetMaterials: function ( materials ) {\r\n\r\n\t\tthis.materials = materials;\r\n\r\n\t},\r\n\r\n\t_createParserState : function () {\r\n\r\n\t\tvar state = {\r\n\t\t\tobjects  : [],\r\n\t\t\tobject   : {},\r\n\r\n\t\t\tvertices : [],\r\n\t\t\tnormals  : [],\r\n\t\t\tuvs      : [],\r\n\r\n\t\t\tmaterialLibraries : [],\r\n\r\n\t\t\tstartObject: function ( name, fromDeclaration ) {\r\n\r\n\t\t\t\t// If the current object (initial from reset) is not from a g/o declaration in the parsed\r\n\t\t\t\t// file. We need to use it for the first parsed g/o to keep things in sync.\r\n\t\t\t\tif ( this.object && this.object.fromDeclaration === false ) {\r\n\r\n\t\t\t\t\tthis.object.name = name;\r\n\t\t\t\t\tthis.object.fromDeclaration = ( fromDeclaration !== false );\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar previousMaterial = ( this.object && typeof this.object.currentMaterial === 'function' ? this.object.currentMaterial() : undefined );\r\n\r\n\t\t\t\tif ( this.object && typeof this.object._finalize === 'function' ) {\r\n\r\n\t\t\t\t\tthis.object._finalize( true );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.object = {\r\n\t\t\t\t\tname : name || '',\r\n\t\t\t\t\tfromDeclaration : ( fromDeclaration !== false ),\r\n\r\n\t\t\t\t\tgeometry : {\r\n\t\t\t\t\t\tvertices : [],\r\n\t\t\t\t\t\tnormals  : [],\r\n\t\t\t\t\t\tuvs      : []\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmaterials : [],\r\n\t\t\t\t\tsmooth : true,\r\n\r\n\t\t\t\t\tstartMaterial : function( name, libraries ) {\r\n\r\n\t\t\t\t\t\tvar previous = this._finalize( false );\r\n\r\n\t\t\t\t\t\t// New usemtl declaration overwrites an inherited material, except if faces were declared\r\n\t\t\t\t\t\t// after the material, then it must be preserved for proper MultiMaterial continuation.\r\n\t\t\t\t\t\tif ( previous && ( previous.inherited || previous.groupCount <= 0 ) ) {\r\n\r\n\t\t\t\t\t\t\tthis.materials.splice( previous.index, 1 );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar material = {\r\n\t\t\t\t\t\t\tindex      : this.materials.length,\r\n\t\t\t\t\t\t\tname       : name || '',\r\n\t\t\t\t\t\t\tmtllib     : ( Array.isArray( libraries ) && libraries.length > 0 ? libraries[ libraries.length - 1 ] : '' ),\r\n\t\t\t\t\t\t\tsmooth     : ( previous !== undefined ? previous.smooth : this.smooth ),\r\n\t\t\t\t\t\t\tgroupStart : ( previous !== undefined ? previous.groupEnd : 0 ),\r\n\t\t\t\t\t\t\tgroupEnd   : -1,\r\n\t\t\t\t\t\t\tgroupCount : -1,\r\n\t\t\t\t\t\t\tinherited  : false,\r\n\r\n\t\t\t\t\t\t\tclone : function( index ) {\r\n\t\t\t\t\t\t\t\tvar cloned = {\r\n\t\t\t\t\t\t\t\t\tindex      : ( typeof index === 'number' ? index : this.index ),\r\n\t\t\t\t\t\t\t\t\tname       : this.name,\r\n\t\t\t\t\t\t\t\t\tmtllib     : this.mtllib,\r\n\t\t\t\t\t\t\t\t\tsmooth     : this.smooth,\r\n\t\t\t\t\t\t\t\t\tgroupStart : 0,\r\n\t\t\t\t\t\t\t\t\tgroupEnd   : -1,\r\n\t\t\t\t\t\t\t\t\tgroupCount : -1,\r\n\t\t\t\t\t\t\t\t\tinherited  : false\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\tcloned.clone = this.clone.bind(cloned);\r\n\t\t\t\t\t\t\t\treturn cloned;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\tthis.materials.push( material );\r\n\r\n\t\t\t\t\t\treturn material;\r\n\r\n\t\t\t\t\t},\r\n\r\n\t\t\t\t\tcurrentMaterial : function() {\r\n\r\n\t\t\t\t\t\tif ( this.materials.length > 0 ) {\r\n\t\t\t\t\t\t\treturn this.materials[ this.materials.length - 1 ];\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\treturn undefined;\r\n\r\n\t\t\t\t\t},\r\n\r\n\t\t\t\t\t_finalize : function( end ) {\r\n\r\n\t\t\t\t\t\tvar lastMultiMaterial = this.currentMaterial();\r\n\t\t\t\t\t\tif ( lastMultiMaterial && lastMultiMaterial.groupEnd === -1 ) {\r\n\r\n\t\t\t\t\t\t\tlastMultiMaterial.groupEnd = this.geometry.vertices.length / 3;\r\n\t\t\t\t\t\t\tlastMultiMaterial.groupCount = lastMultiMaterial.groupEnd - lastMultiMaterial.groupStart;\r\n\t\t\t\t\t\t\tlastMultiMaterial.inherited = false;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// Ignore objects tail materials if no face declarations followed them before a new o/g started.\r\n\t\t\t\t\t\tif ( end && this.materials.length > 1 ) {\r\n\r\n\t\t\t\t\t\t\tfor ( var mi = this.materials.length - 1; mi >= 0; mi-- ) {\r\n\t\t\t\t\t\t\t\tif ( this.materials[mi].groupCount <= 0 ) {\r\n\t\t\t\t\t\t\t\t\tthis.materials.splice( mi, 1 );\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// Guarantee at least one empty material, this makes the creation later more straight forward.\r\n\t\t\t\t\t\tif ( end && this.materials.length === 0 ) {\r\n\r\n\t\t\t\t\t\t\tthis.materials.push({\r\n\t\t\t\t\t\t\t\tname   : '',\r\n\t\t\t\t\t\t\t\tsmooth : this.smooth\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\treturn lastMultiMaterial;\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\t// Inherit previous objects material.\r\n\t\t\t\t// Spec tells us that a declared material must be set to all objects until a new material is declared.\r\n\t\t\t\t// If a usemtl declaration is encountered while this new object is being parsed, it will\r\n\t\t\t\t// overwrite the inherited material. Exception being that there was already face declarations\r\n\t\t\t\t// to the inherited material, then it will be preserved for proper MultiMaterial continuation.\r\n\r\n\t\t\t\tif ( previousMaterial && previousMaterial.name && typeof previousMaterial.clone === \"function\" ) {\r\n\r\n\t\t\t\t\tvar declared = previousMaterial.clone( 0 );\r\n\t\t\t\t\tdeclared.inherited = true;\r\n\t\t\t\t\tthis.object.materials.push( declared );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.objects.push( this.object );\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfinalize : function() {\r\n\r\n\t\t\t\tif ( this.object && typeof this.object._finalize === 'function' ) {\r\n\r\n\t\t\t\t\tthis.object._finalize( true );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\tparseVertexIndex: function ( value, len ) {\r\n\r\n\t\t\t\tvar index = parseInt( value, 10 );\r\n\t\t\t\treturn ( index >= 0 ? index - 1 : index + len / 3 ) * 3;\r\n\r\n\t\t\t},\r\n\r\n\t\t\tparseNormalIndex: function ( value, len ) {\r\n\r\n\t\t\t\tvar index = parseInt( value, 10 );\r\n\t\t\t\treturn ( index >= 0 ? index - 1 : index + len / 3 ) * 3;\r\n\r\n\t\t\t},\r\n\r\n\t\t\tparseUVIndex: function ( value, len ) {\r\n\r\n\t\t\t\tvar index = parseInt( value, 10 );\r\n\t\t\t\treturn ( index >= 0 ? index - 1 : index + len / 2 ) * 2;\r\n\r\n\t\t\t},\r\n\r\n\t\t\taddVertex: function ( a, b, c ) {\r\n\r\n\t\t\t\tvar src = this.vertices;\r\n\t\t\t\tvar dst = this.object.geometry.vertices;\r\n\r\n\t\t\t\tdst.push( src[ a + 0 ] );\r\n\t\t\t\tdst.push( src[ a + 1 ] );\r\n\t\t\t\tdst.push( src[ a + 2 ] );\r\n\t\t\t\tdst.push( src[ b + 0 ] );\r\n\t\t\t\tdst.push( src[ b + 1 ] );\r\n\t\t\t\tdst.push( src[ b + 2 ] );\r\n\t\t\t\tdst.push( src[ c + 0 ] );\r\n\t\t\t\tdst.push( src[ c + 1 ] );\r\n\t\t\t\tdst.push( src[ c + 2 ] );\r\n\r\n\t\t\t},\r\n\r\n\t\t\taddVertexLine: function ( a ) {\r\n\r\n\t\t\t\tvar src = this.vertices;\r\n\t\t\t\tvar dst = this.object.geometry.vertices;\r\n\r\n\t\t\t\tdst.push( src[ a + 0 ] );\r\n\t\t\t\tdst.push( src[ a + 1 ] );\r\n\t\t\t\tdst.push( src[ a + 2 ] );\r\n\r\n\t\t\t},\r\n\r\n\t\t\taddNormal : function ( a, b, c ) {\r\n\r\n\t\t\t\tvar src = this.normals;\r\n\t\t\t\tvar dst = this.object.geometry.normals;\r\n\r\n\t\t\t\tdst.push( src[ a + 0 ] );\r\n\t\t\t\tdst.push( src[ a + 1 ] );\r\n\t\t\t\tdst.push( src[ a + 2 ] );\r\n\t\t\t\tdst.push( src[ b + 0 ] );\r\n\t\t\t\tdst.push( src[ b + 1 ] );\r\n\t\t\t\tdst.push( src[ b + 2 ] );\r\n\t\t\t\tdst.push( src[ c + 0 ] );\r\n\t\t\t\tdst.push( src[ c + 1 ] );\r\n\t\t\t\tdst.push( src[ c + 2 ] );\r\n\r\n\t\t\t},\r\n\r\n\t\t\taddUV: function ( a, b, c ) {\r\n\r\n\t\t\t\tvar src = this.uvs;\r\n\t\t\t\tvar dst = this.object.geometry.uvs;\r\n\r\n\t\t\t\tdst.push( src[ a + 0 ] );\r\n\t\t\t\tdst.push( src[ a + 1 ] );\r\n\t\t\t\tdst.push( src[ b + 0 ] );\r\n\t\t\t\tdst.push( src[ b + 1 ] );\r\n\t\t\t\tdst.push( src[ c + 0 ] );\r\n\t\t\t\tdst.push( src[ c + 1 ] );\r\n\r\n\t\t\t},\r\n\r\n\t\t\taddUVLine: function ( a ) {\r\n\r\n\t\t\t\tvar src = this.uvs;\r\n\t\t\t\tvar dst = this.object.geometry.uvs;\r\n\r\n\t\t\t\tdst.push( src[ a + 0 ] );\r\n\t\t\t\tdst.push( src[ a + 1 ] );\r\n\r\n\t\t\t},\r\n\r\n\t\t\taddFace: function ( a, b, c, d, ua, ub, uc, ud, na, nb, nc, nd ) {\r\n\r\n\t\t\t\tvar vLen = this.vertices.length;\r\n\r\n\t\t\t\tvar ia = this.parseVertexIndex( a, vLen );\r\n\t\t\t\tvar ib = this.parseVertexIndex( b, vLen );\r\n\t\t\t\tvar ic = this.parseVertexIndex( c, vLen );\r\n\t\t\t\tvar id;\r\n\r\n\t\t\t\tif ( d === undefined ) {\r\n\r\n\t\t\t\t\tthis.addVertex( ia, ib, ic );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tid = this.parseVertexIndex( d, vLen );\r\n\r\n\t\t\t\t\tthis.addVertex( ia, ib, id );\r\n\t\t\t\t\tthis.addVertex( ib, ic, id );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( ua !== undefined ) {\r\n\r\n\t\t\t\t\tvar uvLen = this.uvs.length;\r\n\r\n\t\t\t\t\tia = this.parseUVIndex( ua, uvLen );\r\n\t\t\t\t\tib = this.parseUVIndex( ub, uvLen );\r\n\t\t\t\t\tic = this.parseUVIndex( uc, uvLen );\r\n\r\n\t\t\t\t\tif ( d === undefined ) {\r\n\r\n\t\t\t\t\t\tthis.addUV( ia, ib, ic );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tid = this.parseUVIndex( ud, uvLen );\r\n\r\n\t\t\t\t\t\tthis.addUV( ia, ib, id );\r\n\t\t\t\t\t\tthis.addUV( ib, ic, id );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( na !== undefined ) {\r\n\r\n\t\t\t\t\t// Normals are many times the same. If so, skip function call and parseInt.\r\n\t\t\t\t\tvar nLen = this.normals.length;\r\n\t\t\t\t\tia = this.parseNormalIndex( na, nLen );\r\n\r\n\t\t\t\t\tib = na === nb ? ia : this.parseNormalIndex( nb, nLen );\r\n\t\t\t\t\tic = na === nc ? ia : this.parseNormalIndex( nc, nLen );\r\n\r\n\t\t\t\t\tif ( d === undefined ) {\r\n\r\n\t\t\t\t\t\tthis.addNormal( ia, ib, ic );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tid = this.parseNormalIndex( nd, nLen );\r\n\r\n\t\t\t\t\t\tthis.addNormal( ia, ib, id );\r\n\t\t\t\t\t\tthis.addNormal( ib, ic, id );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\taddLineGeometry: function ( vertices, uvs ) {\r\n\r\n\t\t\t\tthis.object.geometry.type = 'Line';\r\n\r\n\t\t\t\tvar vLen = this.vertices.length;\r\n\t\t\t\tvar uvLen = this.uvs.length;\r\n\r\n\t\t\t\tfor ( var vi = 0, l = vertices.length; vi < l; vi ++ ) {\r\n\r\n\t\t\t\t\tthis.addVertexLine( this.parseVertexIndex( vertices[ vi ], vLen ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor ( var uvi = 0, l = uvs.length; uvi < l; uvi ++ ) {\r\n\r\n\t\t\t\t\tthis.addUVLine( this.parseUVIndex( uvs[ uvi ], uvLen ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t\tstate.startObject( '', false );\r\n\r\n\t\treturn state;\r\n\r\n\t},\r\n\r\n\tparse: function ( text ) {\r\n\r\n\t\tconsole.time( 'OBJLoader' );\r\n\r\n\t\tvar state = this._createParserState();\r\n\r\n\t\tif ( text.indexOf( '\\r\\n' ) !== - 1 ) {\r\n\r\n\t\t\t// This is faster than String.split with regex that splits on both\r\n\t\t\ttext = text.replace( /\\r\\n/g, '\\n' );\r\n\r\n\t\t}\r\n\r\n\t\tif ( text.indexOf( '\\\\\\n' ) !== - 1) {\r\n\r\n\t\t\t// join lines separated by a line continuation character (\\)\r\n\t\t\ttext = text.replace( /\\\\\\n/g, '' );\r\n\r\n\t\t}\r\n\r\n\t\tvar lines = text.split( '\\n' );\r\n\t\tvar line = '', lineFirstChar = '', lineSecondChar = '';\r\n\t\tvar lineLength = 0;\r\n\t\tvar result = [];\r\n\r\n\t\t// Faster to just trim left side of the line. Use if available.\r\n\t\tvar trimLeft = ( typeof ''.trimLeft === 'function' );\r\n\r\n\t\tfor ( var i = 0, l = lines.length; i < l; i ++ ) {\r\n\r\n\t\t\tline = lines[ i ];\r\n\r\n\t\t\tline = trimLeft ? line.trimLeft() : line.trim();\r\n\r\n\t\t\tlineLength = line.length;\r\n\r\n\t\t\tif ( lineLength === 0 ) continue;\r\n\r\n\t\t\tlineFirstChar = line.charAt( 0 );\r\n\r\n\t\t\t// @todo invoke passed in handler if any\r\n\t\t\tif ( lineFirstChar === '#' ) continue;\r\n\r\n\t\t\tif ( lineFirstChar === 'v' ) {\r\n\r\n\t\t\t\tlineSecondChar = line.charAt( 1 );\r\n\r\n\t\t\t\tif ( lineSecondChar === ' ' && ( result = this.regexp.vertex_pattern.exec( line ) ) !== null ) {\r\n\r\n\t\t\t\t\t// 0                  1      2      3\r\n\t\t\t\t\t// [\"v 1.0 2.0 3.0\", \"1.0\", \"2.0\", \"3.0\"]\r\n\r\n\t\t\t\t\tstate.vertices.push(\r\n\t\t\t\t\t\tparseFloat( result[ 1 ] ),\r\n\t\t\t\t\t\tparseFloat( result[ 2 ] ),\r\n\t\t\t\t\t\tparseFloat( result[ 3 ] )\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t} else if ( lineSecondChar === 'n' && ( result = this.regexp.normal_pattern.exec( line ) ) !== null ) {\r\n\r\n\t\t\t\t\t// 0                   1      2      3\r\n\t\t\t\t\t// [\"vn 1.0 2.0 3.0\", \"1.0\", \"2.0\", \"3.0\"]\r\n\r\n\t\t\t\t\tstate.normals.push(\r\n\t\t\t\t\t\tparseFloat( result[ 1 ] ),\r\n\t\t\t\t\t\tparseFloat( result[ 2 ] ),\r\n\t\t\t\t\t\tparseFloat( result[ 3 ] )\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t} else if ( lineSecondChar === 't' && ( result = this.regexp.uv_pattern.exec( line ) ) !== null ) {\r\n\r\n\t\t\t\t\t// 0               1      2\r\n\t\t\t\t\t// [\"vt 0.1 0.2\", \"0.1\", \"0.2\"]\r\n\r\n\t\t\t\t\tstate.uvs.push(\r\n\t\t\t\t\t\tparseFloat( result[ 1 ] ),\r\n\t\t\t\t\t\tparseFloat( result[ 2 ] )\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tthrow new Error( \"Unexpected vertex/normal/uv line: '\" + line  + \"'\" );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( lineFirstChar === \"f\" ) {\r\n\r\n\t\t\t\tif ( ( result = this.regexp.face_vertex_uv_normal.exec( line ) ) !== null ) {\r\n\r\n\t\t\t\t\t// f vertex/uv/normal vertex/uv/normal vertex/uv/normal\r\n\t\t\t\t\t// 0                        1    2    3    4    5    6    7    8    9   10         11         12\r\n\t\t\t\t\t// [\"f 1/1/1 2/2/2 3/3/3\", \"1\", \"1\", \"1\", \"2\", \"2\", \"2\", \"3\", \"3\", \"3\", undefined, undefined, undefined]\r\n\r\n\t\t\t\t\tstate.addFace(\r\n\t\t\t\t\t\tresult[ 1 ], result[ 4 ], result[ 7 ], result[ 10 ],\r\n\t\t\t\t\t\tresult[ 2 ], result[ 5 ], result[ 8 ], result[ 11 ],\r\n\t\t\t\t\t\tresult[ 3 ], result[ 6 ], result[ 9 ], result[ 12 ]\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t} else if ( ( result = this.regexp.face_vertex_uv.exec( line ) ) !== null ) {\r\n\r\n\t\t\t\t\t// f vertex/uv vertex/uv vertex/uv\r\n\t\t\t\t\t// 0                  1    2    3    4    5    6   7          8\r\n\t\t\t\t\t// [\"f 1/1 2/2 3/3\", \"1\", \"1\", \"2\", \"2\", \"3\", \"3\", undefined, undefined]\r\n\r\n\t\t\t\t\tstate.addFace(\r\n\t\t\t\t\t\tresult[ 1 ], result[ 3 ], result[ 5 ], result[ 7 ],\r\n\t\t\t\t\t\tresult[ 2 ], result[ 4 ], result[ 6 ], result[ 8 ]\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t} else if ( ( result = this.regexp.face_vertex_normal.exec( line ) ) !== null ) {\r\n\r\n\t\t\t\t\t// f vertex//normal vertex//normal vertex//normal\r\n\t\t\t\t\t// 0                     1    2    3    4    5    6   7          8\r\n\t\t\t\t\t// [\"f 1//1 2//2 3//3\", \"1\", \"1\", \"2\", \"2\", \"3\", \"3\", undefined, undefined]\r\n\r\n\t\t\t\t\tstate.addFace(\r\n\t\t\t\t\t\tresult[ 1 ], result[ 3 ], result[ 5 ], result[ 7 ],\r\n\t\t\t\t\t\tundefined, undefined, undefined, undefined,\r\n\t\t\t\t\t\tresult[ 2 ], result[ 4 ], result[ 6 ], result[ 8 ]\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t} else if ( ( result = this.regexp.face_vertex.exec( line ) ) !== null ) {\r\n\r\n\t\t\t\t\t// f vertex vertex vertex\r\n\t\t\t\t\t// 0            1    2    3   4\r\n\t\t\t\t\t// [\"f 1 2 3\", \"1\", \"2\", \"3\", undefined]\r\n\r\n\t\t\t\t\tstate.addFace(\r\n\t\t\t\t\t\tresult[ 1 ], result[ 2 ], result[ 3 ], result[ 4 ]\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tthrow new Error( \"Unexpected face line: '\" + line  + \"'\" );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( lineFirstChar === \"l\" ) {\r\n\r\n\t\t\t\tvar lineParts = line.substring( 1 ).trim().split( \" \" );\r\n\t\t\t\tvar lineVertices = [], lineUVs = [];\r\n\r\n\t\t\t\tif ( line.indexOf( \"/\" ) === - 1 ) {\r\n\r\n\t\t\t\t\tlineVertices = lineParts;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tfor ( var li = 0, llen = lineParts.length; li < llen; li ++ ) {\r\n\r\n\t\t\t\t\t\tvar parts = lineParts[ li ].split( \"/\" );\r\n\r\n\t\t\t\t\t\tif ( parts[ 0 ] !== \"\" ) lineVertices.push( parts[ 0 ] );\r\n\t\t\t\t\t\tif ( parts[ 1 ] !== \"\" ) lineUVs.push( parts[ 1 ] );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t\tstate.addLineGeometry( lineVertices, lineUVs );\r\n\r\n\t\t\t} else if ( ( result = this.regexp.object_pattern.exec( line ) ) !== null ) {\r\n\r\n\t\t\t\t// o object_name\r\n\t\t\t\t// or\r\n\t\t\t\t// g group_name\r\n\r\n\t\t\t\t// WORKAROUND: https://bugs.chromium.org/p/v8/issues/detail?id=2869\r\n\t\t\t\t// var name = result[ 0 ].substr( 1 ).trim();\r\n\t\t\t\tvar name = ( \" \" + result[ 0 ].substr( 1 ).trim() ).substr( 1 );\r\n\r\n\t\t\t\tstate.startObject( name );\r\n\r\n\t\t\t} else if ( this.regexp.material_use_pattern.test( line ) ) {\r\n\r\n\t\t\t\t// material\r\n\r\n\t\t\t\tstate.object.startMaterial( line.substring( 7 ).trim(), state.materialLibraries );\r\n\r\n\t\t\t} else if ( this.regexp.material_library_pattern.test( line ) ) {\r\n\r\n\t\t\t\t// mtl file\r\n\r\n\t\t\t\tstate.materialLibraries.push( line.substring( 7 ).trim() );\r\n\r\n\t\t\t} else if ( ( result = this.regexp.smoothing_pattern.exec( line ) ) !== null ) {\r\n\r\n\t\t\t\t// smooth shading\r\n\r\n\t\t\t\t// @todo Handle files that have varying smooth values for a set of faces inside one geometry,\r\n\t\t\t\t// but does not define a usemtl for each face set.\r\n\t\t\t\t// This should be detected and a dummy material created (later MultiMaterial and geometry groups).\r\n\t\t\t\t// This requires some care to not create extra material on each smooth value for \"normal\" obj files.\r\n\t\t\t\t// where explicit usemtl defines geometry groups.\r\n\t\t\t\t// Example asset: examples/models/obj/cerberus/Cerberus.obj\r\n\r\n\t\t\t\tvar value = result[ 1 ].trim().toLowerCase();\r\n\t\t\t\tstate.object.smooth = ( value === '1' || value === 'on' );\r\n\r\n\t\t\t\tvar material = state.object.currentMaterial();\r\n\t\t\t\tif ( material ) {\r\n\r\n\t\t\t\t\tmaterial.smooth = state.object.smooth;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// Handle null terminated files without exception\r\n\t\t\t\tif ( line === '\\0' ) continue;\r\n\r\n\t\t\t\tthrow new Error( \"Unexpected line: '\" + line  + \"'\" );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tstate.finalize();\r\n\r\n\t\tvar container = new THREE.Group();\r\n\t\tcontainer.materialLibraries = [].concat( state.materialLibraries );\r\n\r\n\t\tfor ( var i = 0, l = state.objects.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar object = state.objects[ i ];\r\n\t\t\tvar geometry = object.geometry;\r\n\t\t\tvar materials = object.materials;\r\n\t\t\tvar isLine = ( geometry.type === 'Line' );\r\n\r\n\t\t\t// Skip o/g line declarations that did not follow with any faces\r\n\t\t\tif ( geometry.vertices.length === 0 ) continue;\r\n\r\n\t\t\tvar buffergeometry = new THREE.BufferGeometry();\r\n\r\n\t\t\tbuffergeometry.addAttribute( 'position', new THREE.BufferAttribute( new Float32Array( geometry.vertices ), 3 ) );\r\n\r\n\t\t\tif ( geometry.normals.length > 0 ) {\r\n\r\n\t\t\t\tbuffergeometry.addAttribute( 'normal', new THREE.BufferAttribute( new Float32Array( geometry.normals ), 3 ) );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tbuffergeometry.computeVertexNormals();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( geometry.uvs.length > 0 ) {\r\n\r\n\t\t\t\tbuffergeometry.addAttribute( 'uv', new THREE.BufferAttribute( new Float32Array( geometry.uvs ), 2 ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Create materials\r\n\r\n\t\t\tvar createdMaterials = [];\r\n\r\n\t\t\tfor ( var mi = 0, miLen = materials.length; mi < miLen ; mi++ ) {\r\n\r\n\t\t\t\tvar sourceMaterial = materials[mi];\r\n\t\t\t\tvar material = undefined;\r\n\r\n\t\t\t\tif ( this.materials !== null ) {\r\n\r\n\t\t\t\t\tmaterial = this.materials.create( sourceMaterial.name );\r\n\r\n\t\t\t\t\t// mtl etc. loaders probably can't create line materials correctly, copy properties to a line material.\r\n\t\t\t\t\tif ( isLine && material && ! ( material instanceof THREE.LineBasicMaterial ) ) {\r\n\r\n\t\t\t\t\t\tvar materialLine = new THREE.LineBasicMaterial();\r\n\t\t\t\t\t\tmaterialLine.copy( material );\r\n\t\t\t\t\t\tmaterial = materialLine;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( ! material ) {\r\n\r\n\t\t\t\t\tmaterial = ( ! isLine ? new THREE.MeshPhongMaterial() : new THREE.LineBasicMaterial() );\r\n\t\t\t\t\tmaterial.name = sourceMaterial.name;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tmaterial.shading = sourceMaterial.smooth ? THREE.SmoothShading : THREE.FlatShading;\r\n\r\n\t\t\t\tcreatedMaterials.push(material);\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Create mesh\r\n\r\n\t\t\tvar mesh;\r\n\r\n\t\t\tif ( createdMaterials.length > 1 ) {\r\n\r\n\t\t\t\tfor ( var mi = 0, miLen = materials.length; mi < miLen ; mi++ ) {\r\n\r\n\t\t\t\t\tvar sourceMaterial = materials[mi];\r\n\t\t\t\t\tbuffergeometry.addGroup( sourceMaterial.groupStart, sourceMaterial.groupCount, mi );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tmesh = ( ! isLine ? new THREE.Mesh( buffergeometry, createdMaterials ) : new THREE.LineSegments( buffergeometry, createdMaterials ) );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tmesh = ( ! isLine ? new THREE.Mesh( buffergeometry, createdMaterials[ 0 ] ) : new THREE.LineSegments( buffergeometry, createdMaterials[ 0 ] ) );\r\n\t\t\t}\r\n\r\n\t\t\tmesh.name = object.name;\r\n\r\n\t\t\tcontainer.add( mesh );\r\n\r\n\t\t}\r\n\r\n\t\tconsole.timeEnd( 'OBJLoader' );\r\n\r\n\t\treturn container;\r\n\r\n\t}\r\n\r\n};\r\n\r\nexport { OBJLoader };\n\n\n// WEBPACK FOOTER //\n// ./src/loaders/OBJLoader.js","import * as THREE from 'three';\r\n\r\n// https://github.com/mrdoob/three.js/blob/dev/examples/js/loaders/STLLoader.js\r\n\r\nconst STLLoader = function ( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\r\n};\r\n\r\nSTLLoader.prototype = {\r\n\r\n\tconstructor: STLLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar loader = new THREE.FileLoader( scope.manager );\r\n\t\tloader.setResponseType( 'arraybuffer' );\r\n\t\tloader.load( url, function ( text ) {\r\n\r\n\t\t\tonLoad( scope.parse( text ) );\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t},\r\n\r\n\tparse: function ( data ) {\r\n\r\n\t\tvar isBinary = function () {\r\n\r\n\t\t\tvar expect, face_size, n_faces, reader;\r\n\t\t\treader = new DataView( binData );\r\n\t\t\tface_size = ( 32 / 8 * 3 ) + ( ( 32 / 8 * 3 ) * 3 ) + ( 16 / 8 );\r\n\t\t\tn_faces = reader.getUint32( 80, true );\r\n\t\t\texpect = 80 + ( 32 / 8 ) + ( n_faces * face_size );\r\n\r\n\t\t\tif ( expect === reader.byteLength ) {\r\n\r\n\t\t\t\treturn true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// An ASCII STL data must begin with 'solid ' as the first six bytes.\r\n\t\t\t// However, ASCII STLs lacking the SPACE after the 'd' are known to be\r\n\t\t\t// plentiful.  So, check the first 5 bytes for 'solid'.\r\n\r\n\t\t\t// US-ASCII ordinal values for 's', 'o', 'l', 'i', 'd'\r\n\t\t\tvar solid = [ 115, 111, 108, 105, 100 ];\r\n\r\n\t\t\tfor ( var i = 0; i < 5; i ++ ) {\r\n\r\n\t\t\t\t// If solid[ i ] does not match the i-th byte, then it is not an\r\n\t\t\t\t// ASCII STL; hence, it is binary and return true.\r\n\r\n\t\t\t\tif ( solid[ i ] != reader.getUint8( i, false ) ) return true;\r\n\r\n \t\t\t}\r\n\r\n\t\t\t// First 5 bytes read \"solid\"; declare it to be an ASCII STL\r\n\t\t\treturn false;\r\n\r\n\t\t};\r\n\r\n\t\tvar binData = this.ensureBinary( data );\r\n\r\n\t\treturn isBinary() ? this.parseBinary( binData ) : this.parseASCII( this.ensureString( data ) );\r\n\r\n\t},\r\n\r\n\tparseBinary: function ( data ) {\r\n\r\n\t\tvar reader = new DataView( data );\r\n\t\tvar faces = reader.getUint32( 80, true );\r\n\r\n\t\tvar r, g, b, hasColors = false, colors;\r\n\t\tvar defaultR, defaultG, defaultB, alpha;\r\n\r\n\t\t// process STL header\r\n\t\t// check for default color in header (\"COLOR=rgba\" sequence).\r\n\r\n\t\tfor ( var index = 0; index < 80 - 10; index ++ ) {\r\n\r\n\t\t\tif ( ( reader.getUint32( index, false ) == 0x434F4C4F /*COLO*/ ) &&\r\n\t\t\t\t( reader.getUint8( index + 4 ) == 0x52 /*'R'*/ ) &&\r\n\t\t\t\t( reader.getUint8( index + 5 ) == 0x3D /*'='*/ ) ) {\r\n\r\n\t\t\t\thasColors = true;\r\n\t\t\t\tcolors = [];\r\n\r\n\t\t\t\tdefaultR = reader.getUint8( index + 6 ) / 255;\r\n\t\t\t\tdefaultG = reader.getUint8( index + 7 ) / 255;\r\n\t\t\t\tdefaultB = reader.getUint8( index + 8 ) / 255;\r\n\t\t\t\talpha = reader.getUint8( index + 9 ) / 255;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar dataOffset = 84;\r\n\t\tvar faceLength = 12 * 4 + 2;\r\n\r\n\t\tvar geometry = new THREE.BufferGeometry();\r\n\r\n\t\tvar vertices = [];\r\n\t\tvar normals = [];\r\n\r\n\t\tfor ( var face = 0; face < faces; face ++ ) {\r\n\r\n\t\t\tvar start = dataOffset + face * faceLength;\r\n\t\t\tvar normalX = reader.getFloat32( start, true );\r\n\t\t\tvar normalY = reader.getFloat32( start + 4, true );\r\n\t\t\tvar normalZ = reader.getFloat32( start + 8, true );\r\n\r\n\t\t\tif ( hasColors ) {\r\n\r\n\t\t\t\tvar packedColor = reader.getUint16( start + 48, true );\r\n\r\n\t\t\t\tif ( ( packedColor & 0x8000 ) === 0 ) {\r\n\r\n\t\t\t\t\t// facet has its own unique color\r\n\r\n\t\t\t\t\tr = ( packedColor & 0x1F ) / 31;\r\n\t\t\t\t\tg = ( ( packedColor >> 5 ) & 0x1F ) / 31;\r\n\t\t\t\t\tb = ( ( packedColor >> 10 ) & 0x1F ) / 31;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tr = defaultR;\r\n\t\t\t\t\tg = defaultG;\r\n\t\t\t\t\tb = defaultB;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var i = 1; i <= 3; i ++ ) {\r\n\r\n\t\t\t\tvar vertexstart = start + i * 12;\r\n\r\n\t\t\t\tvertices.push( reader.getFloat32( vertexstart, true ) );\r\n\t\t\t\tvertices.push( reader.getFloat32( vertexstart + 4, true ) );\r\n\t\t\t\tvertices.push( reader.getFloat32( vertexstart + 8, true ) );\r\n\r\n\t\t\t\tnormals.push( normalX, normalY, normalZ );\r\n\r\n\t\t\t\tif ( hasColors ) {\r\n\r\n\t\t\t\t\tcolors.push( r, g, b );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tgeometry.addAttribute( 'position', new THREE.BufferAttribute( new Float32Array( vertices ), 3 ) );\r\n\t\tgeometry.addAttribute( 'normal', new THREE.BufferAttribute( new Float32Array( normals ), 3 ) );\r\n\r\n\t\tif ( hasColors ) {\r\n\r\n\t\t\tgeometry.addAttribute( 'color', new THREE.BufferAttribute( new Float32Array( colors ), 3 ) );\r\n\t\t\tgeometry.hasColors = true;\r\n\t\t\tgeometry.alpha = alpha;\r\n\r\n\t\t}\r\n\r\n\t\treturn geometry;\r\n\r\n\t},\r\n\r\n\tparseASCII: function ( data ) {\r\n\r\n\t\tvar geometry, length, patternFace, patternNormal, patternVertex, result, text;\r\n\t\tgeometry = new THREE.BufferGeometry();\r\n\t\tpatternFace = /facet([\\s\\S]*?)endfacet/g;\r\n\r\n\t\tvar vertices = [];\r\n\t\tvar normals = [];\r\n\r\n\t\tvar normal = new THREE.Vector3();\r\n\r\n\t\twhile ( ( result = patternFace.exec( data ) ) !== null ) {\r\n\r\n\t\t\ttext = result[ 0 ];\r\n\t\t\tpatternNormal = /normal[\\s]+([\\-+]?[0-9]+\\.?[0-9]*([eE][\\-+]?[0-9]+)?)+[\\s]+([\\-+]?[0-9]*\\.?[0-9]+([eE][\\-+]?[0-9]+)?)+[\\s]+([\\-+]?[0-9]*\\.?[0-9]+([eE][\\-+]?[0-9]+)?)+/g;\r\n\r\n\t\t\twhile ( ( result = patternNormal.exec( text ) ) !== null ) {\r\n\r\n\t\t\t\tnormal.x = parseFloat( result[ 1 ] );\r\n\t\t\t\tnormal.y = parseFloat( result[ 3 ] );\r\n\t\t\t\tnormal.z = parseFloat( result[ 5 ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tpatternVertex = /vertex[\\s]+([\\-+]?[0-9]+\\.?[0-9]*([eE][\\-+]?[0-9]+)?)+[\\s]+([\\-+]?[0-9]*\\.?[0-9]+([eE][\\-+]?[0-9]+)?)+[\\s]+([\\-+]?[0-9]*\\.?[0-9]+([eE][\\-+]?[0-9]+)?)+/g;\r\n\r\n\t\t\twhile ( ( result = patternVertex.exec( text ) ) !== null ) {\r\n\r\n\t\t\t\tvertices.push( parseFloat( result[ 1 ] ), parseFloat( result[ 3 ] ), parseFloat( result[ 5 ] ) );\r\n\t\t\t\tnormals.push( normal.x, normal.y, normal.z );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tgeometry.addAttribute( 'position', new THREE.BufferAttribute( new Float32Array( vertices ), 3 ) );\r\n\t\tgeometry.addAttribute( 'normal', new THREE.BufferAttribute( new Float32Array( normals ), 3 ) );\r\n\r\n\t\treturn geometry;\r\n\r\n\t},\r\n\r\n\tensureString: function ( buf ) {\r\n\r\n\t\tif ( typeof buf !== \"string\" ) {\r\n\r\n\t\t\tvar array_buffer = new Uint8Array( buf );\r\n\t\t\tvar strArray = [];\r\n\t\t\tfor ( var i = 0; i < buf.byteLength; i ++ ) {\r\n\r\n\t\t\t\tstrArray.push(String.fromCharCode( array_buffer[ i ] )); // implicitly assumes little-endian\r\n\r\n\t\t\t}\r\n\t\t\treturn strArray.join('');\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn buf;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tensureBinary: function ( buf ) {\r\n\r\n\t\tif ( typeof buf === \"string\" ) {\r\n\r\n\t\t\tvar array_buffer = new Uint8Array( buf.length );\r\n\t\t\tfor ( var i = 0; i < buf.length; i ++ ) {\r\n\r\n\t\t\t\tarray_buffer[ i ] = buf.charCodeAt( i ) & 0xff; // implicitly assumes little-endian\r\n\r\n\t\t\t}\r\n\t\t\treturn array_buffer.buffer || array_buffer;\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn buf;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\nexport { STLLoader };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/loaders/STLLoader.js","var Component = require(\"!../node_modules/_vue-loader@11.3.4@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=script&index=0!./model-mixin.vue\"),\n  /* template */\n  require(\"!!../node_modules/_vue-loader@11.3.4@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-b82a4cf6\\\"}!../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=template&index=0!./model-mixin.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/model-mixin.vue\n// module id = 6\n// module chunks = 1","import { Box3, Vector3, Vector2, BufferAttribute } from 'three';\r\n\r\nlet box = new Box3();\r\n\r\nfunction getSize( object ) {\r\n\r\n    box.setFromObject( object );\r\n\r\n    return box.getSize();\r\n}\r\n\r\nfunction getCenter( object ) {\r\n\r\n    box.setFromObject( object );\r\n\r\n    return box.getCenter();\r\n}\r\n\r\nfunction lightsDiff( lights, oldLights ) {\r\n\r\n}\r\n\r\nfunction toIndexed ( bufferGeometry ) {\r\n\r\n    var raw_positions = bufferGeometry.getAttribute( 'position' ).array;\r\n\r\n    var raw_uvs;\r\n    var hasUV = bufferGeometry.getAttribute( 'uv' ) !== undefined;\r\n    if ( hasUV ) raw_uvs = bufferGeometry.getAttribute( 'uv' ).array;\r\n\r\n    var raw_normals;\r\n    var hasNormal = bufferGeometry.getAttribute( 'normal' ) !== undefined;\r\n    if ( hasNormal ) raw_normals = bufferGeometry.getAttribute( 'normal' ).array;\r\n\r\n    var indices = [];\r\n    var vertices = [];\r\n    var normals = [];\r\n    var uvs = [];\r\n\r\n    var face, face_normalss, face_uvs, tmp_indices;\r\n\r\n    var v0 = new Vector3();\r\n    var v1 = new Vector3();\r\n    var v2 = new Vector3();\r\n\r\n    var n0 = new Vector3();\r\n    var n1 = new Vector3();\r\n    var n2 = new Vector3();\r\n\r\n    var uv0 = new Vector2();\r\n    var uv1 = new Vector2();\r\n    var uv2 = new Vector2();\r\n\r\n    for ( var i = 0; i < raw_positions.length; i += 9 ) {\r\n\r\n        v0.x = raw_positions[ i ];\r\n        v0.y = raw_positions[ i + 1 ];\r\n        v0.z = raw_positions[ i + 2 ];\r\n\r\n        v1.x = raw_positions[ i + 3 ];\r\n        v1.y = raw_positions[ i + 4 ];\r\n        v1.z = raw_positions[ i + 5 ];\r\n\r\n        v2.x = raw_positions[ i + 6 ];\r\n        v2.y = raw_positions[ i + 7 ];\r\n        v2.z = raw_positions[ i + 8 ];\r\n\r\n        face = [ v0, v1, v2 ];\r\n\r\n        if ( hasNormal ) {\r\n\r\n            n0.x = raw_normals[ i ];\r\n            n0.y = raw_normals[ i + 1 ];\r\n            n0.z = raw_normals[ i + 2 ];\r\n\r\n            n1.x = raw_normals[ i + 3 ];\r\n            n1.y = raw_normals[ i + 4 ];\r\n            n1.z = raw_normals[ i + 5 ];\r\n\r\n            n2.x = raw_normals[ i + 6 ];\r\n            n2.y = raw_normals[ i + 7 ];\r\n            n2.z = raw_normals[ i + 8 ];\r\n\r\n            face_normalss = [ n0, n1, n2 ];\r\n\r\n        }\r\n\r\n        if ( hasUV ) {\r\n\r\n            uv0.x = raw_uvs[ i ];\r\n            uv0.y = raw_uvs[ i + 1 ];\r\n\r\n            uv1.x = raw_uvs[ i + 2 ];\r\n            uv1.y = raw_uvs[ i + 3 ];\r\n\r\n            uv2.x = raw_uvs[ i + 4 ];\r\n            uv2.y = raw_uvs[ i + 5 ];\r\n\r\n            face_uvs = [ uv0, uv1, uv2 ];\r\n\r\n        }\r\n\r\n        tmp_indices = [];\r\n\r\n        face.forEach( function ( v, i ) {\r\n\r\n            var id = exists( v, vertices );\r\n            if ( id == -1 ) {\r\n\r\n                id = vertices.length;\r\n                vertices.push( v.clone() );\r\n\r\n                if ( hasNormal ) normals.push( face_normalss[ i ].clone() );\r\n                if ( hasUV ) uvs.push( face_uvs[ i ].clone() );\r\n\r\n            }\r\n            tmp_indices.push( id );\r\n\r\n        } );\r\n\r\n        indices.push( tmp_indices[ 0 ], tmp_indices[ 1 ], tmp_indices[ 2 ] );\r\n\r\n    }\r\n\r\n    var positionBuffer = new Float32Array( vertices.length * 3 );\r\n    if ( hasNormal ) var normalBuffer = new Float32Array( vertices.length * 3 );\r\n    if ( hasUV ) var uvBuffer = new Float32Array( vertices.length * 2 );\r\n\r\n    var i2 = 0;\r\n    var i3 = 0;\r\n    for ( i = 0; i < vertices.length; i++ ) {\r\n\r\n        i3 = i * 3;\r\n\r\n        positionBuffer[ i3 ] = vertices[ i ].x;\r\n        positionBuffer[ i3 + 1 ] = vertices[ i ].y;\r\n        positionBuffer[ i3 + 2 ] = vertices[ i ].z;\r\n\r\n        if ( hasNormal ) {\r\n\r\n            normalBuffer[ i3 ] = normals[ i ].x;\r\n            normalBuffer[ i3 + 1 ] = normals[ i ].y;\r\n            normalBuffer[ i3 + 2 ] = normals[ i ].z;\r\n\r\n        }\r\n\r\n        if ( hasUV ) {\r\n\r\n            i2 = i * 2;\r\n            uvBuffer[ i2 ] = uvs[ i ].x;\r\n            uvBuffer[ i2 + 1 ] = uvs[ i ].y;\r\n\r\n        }\r\n\r\n    }\r\n\r\n    bufferGeometry.addAttribute( 'position', new BufferAttribute( positionBuffer, 3 ) );\r\n    if ( hasNormal ) bufferGeometry.addAttribute( 'normal', new BufferAttribute( normalBuffer, 3 ) );\r\n    if ( hasUV ) bufferGeometry.addAttribute( 'uv', new BufferAttribute( uvBuffer, 2 ) );\r\n    bufferGeometry.setIndex( new BufferAttribute( new Uint32Array( indices ), 1 ) );\r\n    return bufferGeometry;\r\n\r\n    function exists( v, vertices ) {\r\n        for ( var i = 0; i < vertices.length; i++ ) {\r\n            if ( v.equals( vertices[ i ] ) ) return i;\r\n        }\r\n        return -1;\r\n    }\r\n}\r\n\r\nexport { getSize, getCenter, toIndexed }\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/util.js","exports = module.exports = require(\"../../node_modules/_css-loader@0.28.4@css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \".background-text{position:absolute;top:50%;left:0;z-index:1;width:100%;-webkit-transform:translateY(-50%);transform:translateY(-50%);text-align:center;font-size:60px}.background-buttons{position:absolute;top:0;left:10px;z-index:3}.background-buttons>p{margin-top:15px;color:#000}.background-buttons>button{background:#fff;padding:4px 6px;margin-top:5px;outline:none;border:1px solid #c4c4c4}.model-box{position:relative;z-index:2}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_css-loader@0.28.4@css-loader?{\"minimize\":true}!./~/_vue-loader@11.3.4@vue-loader/lib/style-compiler?{\"id\":\"data-v-4d9d1678\",\"scoped\":false,\"hasInlineConfig\":false}!./~/_vue-loader@11.3.4@vue-loader/lib/selector.js?type=styles&index=0!./examples/pages/demo-background.vue\n// module id = 72\n// module chunks = 1","exports = module.exports = require(\"../../node_modules/_css-loader@0.28.4@css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \".demo-block{width:100%;height:100%;background-color:#fff;border-radius:3px}.demo-block .demo-block-preview{width:50%;height:100%;float:left;position:relative}.demo-block .demo-block-code{width:50%;height:100%;background:#f9fafc;border-left:1px solid #dfe2e7;font-size:13px;float:left}.demo-block .demo-block-code pre code{font:normal 10pt Consolas,Monaco,monospace}.demo-block .demo-block-code .demo-block-code-box{width:100%;height:50%;position:relative;overflow:hidden}.demo-block .demo-block-code-box:after{content:\\\"\\\";display:block;position:absolute;bottom:0;left:0;width:90%;height:1px;background:-webkit-linear-gradient(left,#dfe2e7 80%,rgba(223,226,231,0))}.demo-block .demo-block-code-box h3{width:100%;padding:10px 20px;font-size:16px;font-weight:700;position:absolute}.demo-block .demo-block-code-box-content{position:absolute;top:40px;bottom:10px;left:20px;right:20px;overflow:auto}.demo-block .demo-block-code code{position:absolute;top:0;left:0}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_css-loader@0.28.4@css-loader?{\"minimize\":true}!./~/_vue-loader@11.3.4@vue-loader/lib/style-compiler?{\"id\":\"data-v-5d8f5ef3\",\"scoped\":false,\"hasInlineConfig\":false}!./~/_vue-loader@11.3.4@vue-loader/lib/selector.js?type=styles&index=0!./examples/components/demo-block.vue\n// module id = 73\n// module chunks = 1","exports = module.exports = require(\"../node_modules/_css-loader@0.28.4@css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \"*{margin:0;border:0;padding:0;box-sizing:border-box}li,ol,ul{list-style:none}a{color:#657180;text-decoration:none}.examples,body,html{width:100%;height:100%;color:#657180}body{background:#eee;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Helvetica,PingFang SC,Hiragino Sans GB,Microsoft YaHei,SimSun,sans-serif;background:#fff}.examples-header{position:absolute;top:0;width:100%;background:#f3f6fb;text-shadow:0 1px 0 hsla(0,0%,100%,.5);border-bottom:1px solid #dfe2e7;padding:15px 15px 15px 30px;line-height:20px}.examples-header .title{font-weight:700;font-size:18px;display:inline-block}.examples-header .github{color:#39f;display:inline-block;font-size:12px;float:right}.examples-content{width:100%;height:100%;padding-top:52px;overflow:hidden}.examples-menu{float:left;width:230px;height:100%;border-right:1px solid #dfe2e7;padding:10px 30px}.examples-menu .examples-menu-item{display:block;width:100%;height:30px;line-height:30px;font-size:14px;cursor:pointer}.examples-menu .examples-menu-item>a{display:block;width:100%;height:100%}.examples-menu .examples-menu-title{display:block;width:100%;padding:6px 0;margin-top:10px;font-size:14px;font-weight:700}.examples-menu .examples-menu-item:hover>a{color:#39f}.examples-pages{height:100%;overflow:hidden}.example-loading{position:absolute;top:0;left:0;width:100%;height:100%;text-align:center}.example-loading:before{border-radius:100%;margin:2px;border:3px solid #20a0ff;border-bottom-color:transparent;height:36px;width:36px;-webkit-animation:loading-rotate .75s 0s linear infinite;animation:loading-rotate .75s 0s linear infinite}.example-loading:after,.example-loading:before{content:\\\"\\\";display:inline-block;vertical-align:middle}.example-loading:after{height:100%;width:0}@-webkit-keyframes loading-rotate{0%{-webkit-transform:rotate(0) scale(1);transform:rotate(0) scale(1)}50%{-webkit-transform:rotate(180deg) scale(.6);transform:rotate(180deg) scale(.6)}to{-webkit-transform:rotate(1turn) scale(1);transform:rotate(1turn) scale(1)}}@keyframes loading-rotate{0%{-webkit-transform:rotate(0) scale(1);transform:rotate(0) scale(1)}50%{-webkit-transform:rotate(180deg) scale(.6);transform:rotate(180deg) scale(.6)}to{-webkit-transform:rotate(1turn) scale(1);transform:rotate(1turn) scale(1)}}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_css-loader@0.28.4@css-loader?{\"minimize\":true}!./~/_vue-loader@11.3.4@vue-loader/lib/style-compiler?{\"id\":\"data-v-7a736b78\",\"scoped\":false,\"hasInlineConfig\":false}!./~/_vue-loader@11.3.4@vue-loader/lib/selector.js?type=styles&index=0!./examples/App.vue\n// module id = 74\n// module chunks = 1"],"sourceRoot":""}