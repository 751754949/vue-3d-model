{"version":3,"sources":["webpack:///static/js/app.94f30d1e6d06f1e8d513.js","webpack:///./src/model-obj.vue","webpack:///./examples/components/demo-block.vue","webpack:///./src/model-collada.vue","webpack:///./examples/router/index.js","webpack:///./examples/App.vue","webpack:///./examples/pages/demo-background.vue","webpack:///./examples/index.js","webpack:///./examples/pages/demo-basic.vue","webpack:///./examples/pages/demo-collada.vue","webpack:///./examples/pages/demo-event.vue","webpack:///./examples/pages/demo-obj.vue","webpack:///./examples/pages/demo-rotate.vue","webpack:///./examples/pages/demo-stl.vue","webpack:///./src/model-stl.vue","webpack:///./src/model-three.vue","webpack:///./examples/pages/demo-stl.vue?ec03","webpack:///./examples/pages/demo-obj.vue?36e0","webpack:///App.vue","webpack:///./examples/pages/demo-basic.vue?1bd2","webpack:///./examples/pages/demo-background.vue?486b","webpack:///./examples/components/demo-block.vue?b978","webpack:///./examples/pages/demo-collada.vue?eca3","webpack:///./examples/pages/demo-rotate.vue?ee2b","webpack:///./examples/App.vue?3f0c","webpack:///./src/model-mixin.vue?997a","webpack:///./examples/pages/demo-event.vue?853b","webpack:///./examples/pages/demo-background.vue?ab96","webpack:///demo-block.vue","webpack:///./examples/components/demo-block.vue?7ecb","webpack:///./examples/App.vue?f2b2","webpack:///demo-background.vue","webpack:///demo-basic.vue","webpack:///demo-collada.vue","webpack:///demo-event.vue","webpack:///demo-obj.vue","webpack:///demo-rotate.vue","webpack:///demo-stl.vue","webpack:///model-collada.vue","webpack:///model-mixin.vue","webpack:///model-obj.vue","webpack:///model-stl.vue","webpack:///model-three.vue","webpack:///./src/controls/OrbitControls.js","webpack:///./src/loaders/ColladaLoader.js","webpack:///./src/loaders/OBJLoader.js","webpack:///./src/loaders/STLLoader.js","webpack:///./src/model-mixin.vue","webpack:///./src/util.js","webpack:///./examples/pages/demo-background.vue?4f59","webpack:///./examples/components/demo-block.vue?5dbb","webpack:///./examples/App.vue?4909"],"names":["webpackJsonp","10","module","exports","__webpack_require__","Component","2","22","23","__webpack_exports__","__WEBPACK_IMPORTED_MODULE_0_vue__","__WEBPACK_IMPORTED_MODULE_1_vue_router__","__WEBPACK_IMPORTED_MODULE_2__pages_demo_basic__","__WEBPACK_IMPORTED_MODULE_2__pages_demo_basic___default","n","__WEBPACK_IMPORTED_MODULE_3__pages_demo_event__","__WEBPACK_IMPORTED_MODULE_3__pages_demo_event___default","__WEBPACK_IMPORTED_MODULE_4__pages_demo_background__","__WEBPACK_IMPORTED_MODULE_4__pages_demo_background___default","__WEBPACK_IMPORTED_MODULE_5__pages_demo_rotate__","__WEBPACK_IMPORTED_MODULE_5__pages_demo_rotate___default","__WEBPACK_IMPORTED_MODULE_6__pages_demo_obj__","__WEBPACK_IMPORTED_MODULE_6__pages_demo_obj___default","__WEBPACK_IMPORTED_MODULE_7__pages_demo_stl__","__WEBPACK_IMPORTED_MODULE_7__pages_demo_stl___default","__WEBPACK_IMPORTED_MODULE_8__pages_demo_collada__","__WEBPACK_IMPORTED_MODULE_8__pages_demo_collada___default","use","routes","path","name","component","a","redirect","24","249","25","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_1__App_vue__","__WEBPACK_IMPORTED_MODULE_1__App_vue___default","__WEBPACK_IMPORTED_MODULE_2__router__","el","router","render","h","250","251","252","253","254","255","256","257","258","_vm","this","_h","$createElement","_c","_self","attrs","vue-code","code","html-code","htmlCode","slot","backgroundAlpha","src","on","on-load","onLoad","_v","directives","rawName","expression","staticClass","staticRenderFns","259","26","260","261","click","$event","bgColor","bgAlpha","backgroundColor","262","_t","ref","_s","_f","vueCode","263","264","rotation","265","_m","to","href","266","staticStyle","width","height","margin","border","padding","color","267","on-mousemove","onMouseMove","269","content","i","locals","27","__WEBPACK_IMPORTED_MODULE_0_highlight_js_styles_github_css__","__WEBPACK_IMPORTED_MODULE_1_highlight_js__","__WEBPACK_IMPORTED_MODULE_1_highlight_js___default","codeHandler","replace","props","String","type","default","mounted","highlightBlock","$refs","data","filters","val","components","270","271","28","__WEBPACK_IMPORTED_MODULE_0__components_demo_block__","__WEBPACK_IMPORTED_MODULE_0__components_demo_block___default","__WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue__","__WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue___default","loading","methods","setBackground","alpha","ModelObj","DemoBlock","29","__WEBPACK_IMPORTED_MODULE_1__src_model_three_vue__","__WEBPACK_IMPORTED_MODULE_1__src_model_three_vue___default","ModelThree","30","__WEBPACK_IMPORTED_MODULE_1__src_model_collada_vue__","__WEBPACK_IMPORTED_MODULE_1__src_model_collada_vue___default","ModelCollada","31","intersected","event","console","log","material","setStyle","object","32","33","x","y","z","rotate","requestAnimationFrame","34","__WEBPACK_IMPORTED_MODULE_1__src_model_stl_vue__","__WEBPACK_IMPORTED_MODULE_1__src_model_stl_vue___default","ModelStl","35","__WEBPACK_IMPORTED_MODULE_0__loaders_ColladaLoader__","__WEBPACK_IMPORTED_MODULE_2__model_mixin_vue__","__WEBPACK_IMPORTED_MODULE_2__model_mixin_vue___default","mixins","lights","Array","position","skyColor","groundColor","intensity","smoothing","Boolean","loader","options","convertUpAxis","load","_this","scene","remove","collada","add","updateCamera","$emit","err","36","__WEBPACK_IMPORTED_MODULE_0_three__","__WEBPACK_IMPORTED_MODULE_1__util__","__WEBPACK_IMPORTED_MODULE_2__controls_OrbitControls__","suportWebGL","canvas","document","createElement","window","WebGLRenderingContext","getContext","e","Number","scale","cameraPosition","cameraRotation","cameraUp","cameraLookAt","controllable","size","raycaster","mouse","camera","renderer","controls","allLights","clock","performance","Date","computed","hasListener","events","_events","result","forEach","length","created","addEventListener","onResize","undefined","$el","offsetWidth","offsetHeight","antialias","shadowMap","enabled","update","onMouseDown","onMouseUp","onClick","animate","beforeDestroy","removeEventListener","watch","deep","handler","set","oldVal","updateLights","updateRenderer","updateControls","$nextTick","pick","clientX","clientY","rect","getBoundingClientRect","left","top","setFromCamera","intersects","intersectObject","updateModel","copy","matrixWorldNeedsUpdate","setSize","setPixelRatio","devicePixelRatio","setClearColor","getHex","setClearAlpha","distance","center","aspect","updateProjectionMatrix","lookAt","target","_this2","apply","item","toLowerCase","light","_color","_intensity","decay","PointLight","_color2","_intensity2","_intensity3","push","dispose","_this3","process","37","__WEBPACK_IMPORTED_MODULE_0__loaders_OBJLoader__","traverse","child","geometry","computeVertexNormals","38","__WEBPACK_IMPORTED_MODULE_0__loaders_STLLoader__","__WEBPACK_IMPORTED_MODULE_1__model_mixin_vue__","__WEBPACK_IMPORTED_MODULE_1__model_mixin_vue___default","__WEBPACK_IMPORTED_MODULE_2_three__","39","40","d","OrbitControls","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_create__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_create___default","__WEBPACK_IMPORTED_MODULE_1_three__","domElement","getAutoRotationAngle","Math","PI","scope","autoRotateSpeed","getZoomScale","pow","zoomSpeed","rotateLeft","angle","sphericalDelta","theta","rotateUp","phi","dollyIn","dollyScale","zoom","max","minZoom","min","maxZoom","zoomChanged","warn","enableZoom","dollyOut","handleMouseDownRotate","rotateStart","handleMouseDownDolly","dollyStart","handleMouseDownPan","panStart","handleMouseMoveRotate","rotateEnd","rotateDelta","subVectors","element","body","clientWidth","rotateSpeed","clientHeight","handleMouseMoveDolly","dollyEnd","dollyDelta","handleMouseMovePan","panEnd","panDelta","pan","handleMouseUp","handleMouseWheel","deltaY","handleKeyDown","keyCode","keys","UP","keyPanSpeed","BOTTOM","LEFT","RIGHT","handleTouchStartRotate","touches","pageX","pageY","handleTouchStartDolly","dx","dy","sqrt","handleTouchStartPan","handleTouchMoveRotate","handleTouchMoveDolly","handleTouchMovePan","handleTouchEnd","preventDefault","button","mouseButtons","ORBIT","enableRotate","state","STATE","ROTATE","ZOOM","DOLLY","PAN","enablePan","NONE","dispatchEvent","startEvent","endEvent","onMouseWheel","stopPropagation","onKeyDown","enableKeys","onTouchStart","TOUCH_ROTATE","TOUCH_DOLLY","TOUCH_PAN","onTouchMove","onTouchEnd","onContextMenu","minDistance","maxDistance","Infinity","minPolarAngle","maxPolarAngle","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","autoRotate","MIDDLE","target0","clone","position0","zoom0","getPolarAngle","spherical","getAzimuthalAngle","saveState","reset","changeEvent","offset","quat","setFromUnitVectors","up","quatInverse","inverse","lastPosition","lastQuaternion","sub","applyQuaternion","setFromVector3","makeSafe","radius","panOffset","setFromSpherical","distanceToSquared","EPS","dot","quaternion","panLeft","v","objectMatrix","setFromMatrixColumn","multiplyScalar","panUp","deltaX","targetDistance","tan","fov","matrix","right","bottom","prototype","constructor","41","ColladaLoader","url","readyCallback","progressCallback","failCallback","implementation","createDocument","request","XMLHttpRequest","onreadystatechange","readyState","status","response","readyCallbackFunc","parse","error","getResponseHeader","total","loaded","responseText","open","send","alert","text","callBack","COLLADA","DOMParser","parseFromString","parts","split","pop","baseUrl","join","parseAsset","setUpConversion","images","parseLib","_Image","materials","Material","effects","Effect","geometries","Geometry","cameras","Camera","Light","controllers","Controller","animations","Animation","visualScenes","VisualScene","kinematicsModels","KinematicsModel","morphs","skins","visualScene","parseScene","nodes","createSceneGraph","colladaUnit","createAnimations","kinematicsModel","parseKinematicsModel","createKinematics","animData","kinematics","dae","setPreferredShading","shading","preferredShading","elements","querySelectorAll","childNodes","nodeName","meter","getAttribute","parseFloat","colladaUp","textContent","charAt","q","classSpec","prefix","lib","elementsLength","j","daeElement","id","sceneElement","kinematicsModelElement","recurseHierarchy","node","getChildById","colladaId","newData","fps","hierarchy","sids","il","time","children","jl","calcAnimationBounds","ID","start","end","frames","animation","sampler","create","startTime","endTime","input","createMorph","ctrl","morphCtrl","InstanceController","morph","targets","target_id","daeGeometry","mesh","primitives","vertices","morphTargets","setupSkeleton","bones","frame","parent","world","localworld","channels","channel","m","output","multiplyMatrices","setupSkinningMatrices","skin","bone","found","joints","sid","inv","invBindMatrices","invBindMatrix","skinningMatrix","animatrix","weights","k","w","joint","flattenSkeleton","skeleton","list","walk","parentid","decompose","pos","scl","rotq","skinToBindPose","skinController","skinned","vidx","index","weight","o","s","applyMatrix4","applySkin","instanceCtrl","animationBounds","getChildBySid","bonelist","sortedbones","bindShapeMatrix","skinIndices","skinWeights","indicies","animationdata","key","rot","jointMap","getJointValue","jointIndex","jointData","setJointValue","limits","static","threejsNode","axis","transforms","m1","transform","indexOf","multiply","makeRotationAxis","degToRad","makeTranslation","obj","elementsFloat32Arr","slice","call","elementsRowMajor","querySelector","nodeType","visualTarget","parseInt","visualTargetElement","parentVisualElement","parentElement","parentVisualElementId","colladaNode","zeroPosition","morphController","controller","source","inst_geom","InstanceGeometry","instance_material","second","double_sided_materials","first_material","instance_geometry","instance_materials","used_materials","used_materials_array","num_materials","mat","effect_id","instance_effect","shader","material3js","doubleSided","symbol","_copied_material","side","opacity","geom","geometry3js","faces","face","materialIndex","daeMaterial","skinning","isLineStrip","instance_camera","cparams","cam","yfov","aspect_ratio","znear","zfar","instance_light","lparams","technique","falloff_angle","layer","centerGeometry","delta","getLibraryNode","attObj","attributes","getNamedItem","getChannelsForNode","bakeAnimations","member","fullSid","getTransformBySid","arrIndices","getConvertedIndex","getConvertedMember","getData","findKey","Key","timeNdx","findTimeNdx","splice","addTarget","hasTarget","interpolateKeys","retVal","ndx","prevKey","getPrevKeyWith","nextKey","getNextKeyWith","prevTarget","getTarget","nextData","prevData","init_from","Morph","method","Skin","Node","Transform","InstanceMaterial","Mesh","Polygons","count","inputs","vcount","p","Polylist","LineStrips","Triangles","Accessor","stride","params","Vertices","Input","semantic","Source","ColorOrTexture","setRGB","random","texture","texcoord","texOpts","Shader","effect","Surface","format","Sampler2D","wrap_s","wrap_t","minfilter","magfilter","mipfilter","surface","InstanceEffect","Channel","dotSyntax","arrSyntax","Sampler","strideOut","interpolation","duration","InstanceCamera","InstanceLight","links","Joint","middlePosition","Link","attachments","Attachment","_source","sources","_bools","str","raw","_strings","l","_floats","_ints","_trimString","_attr_as_int","defaultValue","hasAttribute","loadTextureImage","image","needsUpdate","extractDoubleSided","upAxis","upConversion","fixCoords","sign","tmp","getConvertedTranslation","getConvertedVec3","arr","getConvertedMat4","members","indices","X","Y","Z","subdivideFaces","defaultEnvMap","parseInputs","read","f","parseJoints","parseWeights","numBones","vertex_weights","influence","recursive","getChannelForTransform","transformSid","shift","info","iNode","updateMatrix","identity","convert","n11","n21","n31","n41","n12","n22","n32","n42","n13","n23","n33","n43","n14","n24","n34","n44","propName","toString","instances","instance","vertexData","primitive","setVertices","handlePrimitive","calcNormals","idx32","numParams","pList","vcIndex","maxOffset","texture_sets","pCount","vs","ns","ts","cs","accessor","NORMAL","len","TEXCOORD","COLOR","uv","uvArr","clr","faceVertexUvs","param","isColor","isTexture","opaque","rgba","offsetU","offsetV","repeatU","repeatV","wrapU","wrapV","parseTexture","toUpperCase","bumpType","transparent","transparencyLevel","r","g","b","transparency","diffuse","ambient","specular","emission","bump","normal","prop","cot","samplerId","Handlers","get","wrapS","wrapT","repeat","emissive","parseTechnique","parseProfileCOMMON","parseNewparam","_image","parseExtra","parseExtraTechnique","anim","opt_sid","interpolate","nextTarget","parseOptics","perspective","xfov","orthographic","xmag","ymag","parseCommon","profile","axisElement","_axis","jointTypes","42","OBJLoader","manager","regexp","vertex_pattern","normal_pattern","uv_pattern","face_vertex","face_vertex_uv","face_vertex_uv_normal","face_vertex_normal","object_pattern","smoothing_pattern","material_library_pattern","material_use_pattern","onProgress","onError","setPath","setMaterials","_createParserState","objects","normals","uvs","materialLibraries","startObject","fromDeclaration","previousMaterial","currentMaterial","_finalize","smooth","startMaterial","libraries","previous","inherited","groupCount","mtllib","isArray","groupStart","groupEnd","cloned","bind","lastMultiMaterial","mi","declared","finalize","parseVertexIndex","parseNormalIndex","parseUVIndex","addVertex","c","dst","addVertexLine","addNormal","addUV","addUVLine","addFace","ua","ub","uc","ud","na","nb","nc","nd","vLen","ia","ib","ic","uvLen","nLen","addLineGeometry","vi","uvi","lines","line","lineFirstChar","lineSecondChar","trimLeft","trim","exec","Error","lineParts","substring","lineVertices","lineUVs","li","llen","substr","test","container","concat","isLine","buffergeometry","addAttribute","Float32Array","createdMaterials","miLen","sourceMaterial","materialLine","addGroup","timeEnd","43","STLLoader","setResponseType","binData","ensureBinary","face_size","n_faces","reader","DataView","getUint32","byteLength","solid","getUint8","parseBinary","parseASCII","ensureString","colors","defaultR","defaultG","defaultB","hasColors","normalX","getFloat32","normalY","normalZ","packedColor","getUint16","vertexstart","patternFace","patternNormal","patternVertex","buf","array_buffer","Uint8Array","strArray","fromCharCode","charCodeAt","buffer","5","6","getSize","box","setFromObject","getCenter","toIndexed","bufferGeometry","exists","equals","raw_uvs","raw_positions","array","hasUV","raw_normals","hasNormal","face_normalss","face_uvs","tmp_indices","v0","v1","v2","n0","n1","n2","uv0","uv1","uv2","positionBuffer","normalBuffer","uvBuffer","i2","i3","setIndex","Uint32Array","67","68","69","70"],"mappings":"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","file":"static/js/app.94f30d1e6d06f1e8d513.js","sourcesContent":["webpackJsonp([1],{\n\n/***/ 10:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(37),\n  /* template */\n  null,\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 2:\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(270)\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(27),\n  /* template */\n  __webpack_require__(262),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 22:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(35),\n  /* template */\n  null,\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 23:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(12);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vue_router__ = __webpack_require__(268);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__pages_demo_basic__ = __webpack_require__(250);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__pages_demo_basic___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__pages_demo_basic__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__pages_demo_event__ = __webpack_require__(252);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__pages_demo_event___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3__pages_demo_event__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__pages_demo_background__ = __webpack_require__(249);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__pages_demo_background___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4__pages_demo_background__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__pages_demo_rotate__ = __webpack_require__(254);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__pages_demo_rotate___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5__pages_demo_rotate__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__pages_demo_obj__ = __webpack_require__(253);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__pages_demo_obj___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6__pages_demo_obj__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__pages_demo_stl__ = __webpack_require__(255);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__pages_demo_stl___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7__pages_demo_stl__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__pages_demo_collada__ = __webpack_require__(251);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__pages_demo_collada___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_8__pages_demo_collada__);\n\n\n\n\n\n\n\n\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */].use(__WEBPACK_IMPORTED_MODULE_1_vue_router__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (new __WEBPACK_IMPORTED_MODULE_1_vue_router__[\"a\" /* default */]({\n    routes: [{\n        path: '/demo-basic',\n        name: 'demo-basic',\n        component: __WEBPACK_IMPORTED_MODULE_2__pages_demo_basic___default.a\n    }, {\n        path: '/demo-event',\n        name: 'demo-event',\n        component: __WEBPACK_IMPORTED_MODULE_3__pages_demo_event___default.a\n    }, {\n        path: '/demo-background',\n        name: 'demo-background',\n        component: __WEBPACK_IMPORTED_MODULE_4__pages_demo_background___default.a\n    }, {\n        path: '/demo-rotate',\n        name: 'demo-rotate',\n        component: __WEBPACK_IMPORTED_MODULE_5__pages_demo_rotate___default.a\n    }, {\n        path: '/demo-obj',\n        name: 'demo-obj',\n        component: __WEBPACK_IMPORTED_MODULE_6__pages_demo_obj___default.a\n    }, {\n        path: '/demo-stl',\n        name: 'demo-stl',\n        component: __WEBPACK_IMPORTED_MODULE_7__pages_demo_stl___default.a\n    }, {\n        path: '/demo-collada',\n        name: 'demo-collada',\n        component: __WEBPACK_IMPORTED_MODULE_8__pages_demo_collada___default.a\n    }, {\n        path: '*',\n        redirect: '/demo-basic'\n    }]\n}));\n\n/***/ }),\n\n/***/ 24:\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(271)\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(26),\n  /* template */\n  __webpack_require__(265),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 249:\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(269)\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(28),\n  /* template */\n  __webpack_require__(261),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 25:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(12);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__App_vue__ = __webpack_require__(24);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__App_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__App_vue__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__router__ = __webpack_require__(23);\n\n\n\n\nnew __WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */]({\n  el: '#app',\n  router: __WEBPACK_IMPORTED_MODULE_2__router__[\"a\" /* default */],\n  render: function render(h) {\n    return h(__WEBPACK_IMPORTED_MODULE_1__App_vue___default.a);\n  }\n});\n\n/***/ }),\n\n/***/ 250:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(29),\n  /* template */\n  __webpack_require__(260),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 251:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(30),\n  /* template */\n  __webpack_require__(263),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 252:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(31),\n  /* template */\n  __webpack_require__(267),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 253:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(32),\n  /* template */\n  __webpack_require__(259),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 254:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(33),\n  /* template */\n  __webpack_require__(264),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 255:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(34),\n  /* template */\n  __webpack_require__(258),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 256:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(38),\n  /* template */\n  null,\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 257:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(39),\n  /* template */\n  null,\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 258:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('model-stl', {\n    attrs: {\n      \"backgroundAlpha\": 0,\n      \"src\": \"static/models/stl/gear.stl\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"example-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 259:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('model-obj', {\n    attrs: {\n      \"backgroundAlpha\": 0,\n      \"src\": \"static/models/obj/tree.obj\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"example-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 26:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'app'\n});\n\n/***/ }),\n\n/***/ 260:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('model-three', {\n    attrs: {\n      \"backgroundAlpha\": 0,\n      \"src\": \"static/models/json/scene.json\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"example-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 261:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('p', {\n    staticClass: \"background-text\"\n  }, [_vm._v(\"\\n            Vue\"), _c('br'), _vm._v(\"3D\"), _c('br'), _vm._v(\"Model\"), _c('br'), _vm._v(\"Background\\n        \")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"background-buttons\"\n  }, [_c('p', [_vm._v(\"Color\")]), _vm._v(\" \"), _c('button', {\n    on: {\n      \"click\": function($event) {\n        _vm.bgColor = '#ff0'\n      }\n    }\n  }, [_vm._v(\"#ff0\")]), _vm._v(\" \"), _c('button', {\n    on: {\n      \"click\": function($event) {\n        _vm.bgColor = '#f00'\n      }\n    }\n  }, [_vm._v(\"#f00\")]), _vm._v(\" \"), _c('button', {\n    on: {\n      \"click\": function($event) {\n        _vm.bgColor = '#13ce66'\n      }\n    }\n  }, [_vm._v(\"#13ce66\")]), _vm._v(\" \"), _c('p', [_vm._v(\"Alpha\")]), _vm._v(\" \"), _c('button', {\n    on: {\n      \"click\": function($event) {\n        _vm.bgAlpha = 0.5\n      }\n    }\n  }, [_vm._v(\"0.5\")]), _vm._v(\" \"), _c('button', {\n    on: {\n      \"click\": function($event) {\n        _vm.bgAlpha = 1\n      }\n    }\n  }, [_vm._v(\"1\")]), _vm._v(\" \"), _c('button', {\n    on: {\n      \"click\": function($event) {\n        _vm.bgAlpha = 0\n      }\n    }\n  }, [_vm._v(\"0\")])]), _vm._v(\" \"), _c('model-obj', {\n    staticClass: \"model-box\",\n    attrs: {\n      \"backgroundAlpha\": _vm.bgAlpha,\n      \"backgroundColor\": _vm.bgColor,\n      \"src\": \"static/models/obj/tree.obj\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"example-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 262:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"demo-block\"\n  }, [_c('div', {\n    staticClass: \"demo-block-preview\"\n  }, [_vm._t(\"preview\")], 2), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code\"\n  }, [_c('div', {\n    staticClass: \"demo-block-code-box\"\n  }, [_c('h3', [_vm._v(\"Vue Component & Webpack\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code-box-content\"\n  }, [_c('pre', [_vm._v(\"                    \"), _c('code', {\n    ref: \"vueCode\",\n    staticClass: \"html\"\n  }, [_vm._v(_vm._s(_vm._f(\"code\")(_vm.vueCode)))]), _vm._v(\"\\n                \")])])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code-box\"\n  }, [_c('h3', [_vm._v(\"HTML & JS\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code-box-content\"\n  }, [_c('pre', [_vm._v(\"                    \"), _c('code', {\n    ref: \"htmlCode\",\n    staticClass: \"html\"\n  }, [_vm._v(_vm._s(_vm._f(\"code\")(_vm.htmlCode)))]), _vm._v(\"\\n                \")])])])])])\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 263:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('model-collada', {\n    attrs: {\n      \"backgroundAlpha\": 0,\n      \"src\": \"static/models/collada/elf/elf.dae\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"example-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 264:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('model-collada', {\n    attrs: {\n      \"rotation\": _vm.rotation,\n      \"src\": \"static/models/collada/elf/elf.dae\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"example-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 265:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"examples\"\n  }, [_vm._m(0), _vm._v(\" \"), _c('div', {\n    staticClass: \"examples-content\"\n  }, [_c('ul', {\n    staticClass: \"examples-menu\"\n  }, [_c('li', {\n    staticClass: \"examples-menu-title\"\n  }, [_vm._v(\"Examples\")]), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-basic\"\n    }\n  }, [_vm._v(\"basic\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-rotate\"\n    }\n  }, [_vm._v(\"rotate\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-background\"\n    }\n  }, [_vm._v(\"background\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-title\"\n  }, [_vm._v(\"Events\")]), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-event\"\n    }\n  }, [_vm._v(\"mousemove\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-title\"\n  }, [_vm._v(\"Model Formats\")]), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-basic\"\n    }\n  }, [_vm._v(\"JSON Model (.json)\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-obj\"\n    }\n  }, [_vm._v(\"OBJ Model (.obj)\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-stl\"\n    }\n  }, [_vm._v(\"STL Model (.stl)\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-collada\"\n    }\n  }, [_vm._v(\"Collada Model (.dae)\")])], 1)]), _vm._v(\" \"), _c('div', {\n    staticClass: \"examples-pages\"\n  }, [_c('router-view')], 1)])])\n},staticRenderFns: [function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"examples-header\"\n  }, [_c('a', {\n    staticClass: \"title\",\n    attrs: {\n      \"href\": \"https://github.com/hujiulong/vue-3d-model\"\n    }\n  }, [_vm._v(\"Vue3DModel\")]), _vm._v(\" \"), _c('a', {\n    staticClass: \"github\",\n    attrs: {\n      \"href\": \"https://github.com/hujiulong/vue-3d-model\"\n    }\n  }, [_vm._v(\"View on GitHub\")])])\n}]}\n\n/***/ }),\n\n/***/ 266:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticStyle: {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"border\": \"0\",\n      \"padding\": \"0\"\n    }\n  }, [(_vm.suportWebGL) ? _c('canvas', {\n    ref: \"canvas\",\n    staticStyle: {\n      \"width\": \"100%\",\n      \"height\": \"100%\"\n    }\n  }) : _c('div', [_vm._t(\"default\", [_vm._v(\"\\n            Your browser does not seem to support \"), _c('a', {\n    staticStyle: {\n      \"color\": \"#000\"\n    },\n    attrs: {\n      \"href\": \"http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation\"\n    }\n  }, [_vm._v(\"WebGL\")]), _vm._v(\".\"), _c('br'), _vm._v(\"'\\n        \")])], 2)])\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 267:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('model-obj', {\n    ref: \"model\",\n    attrs: {\n      \"backgroundAlpha\": 0,\n      \"src\": \"static/models/obj/tree.obj\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad,\n      \"on-mousemove\": _vm.onMouseMove\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"example-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 269:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(67);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(11)(\"7ef4e056\", content, true);\n\n/***/ }),\n\n/***/ 27:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_highlight_js_styles_github_css__ = __webpack_require__(70);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_highlight_js_styles_github_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_highlight_js_styles_github_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_highlight_js__ = __webpack_require__(72);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_highlight_js___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_highlight_js__);\n\n\n\n\n\nvar codeHandler = function codeHandler(code) {\n    var scripts = '<script src=\"vue.js\"></script>\\n \\xA0 \\xA0<script src=\"vue-3d-model.min.js\"></script>';\n\n    return code.replace(/#scripts#/ig, scripts);\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'app',\n    props: {\n        vueCode: String,\n        htmlCode: {\n            type: String,\n            default: '// TODO'\n        }\n    },\n    mounted: function mounted() {\n        __WEBPACK_IMPORTED_MODULE_1_highlight_js___default.a.highlightBlock(this.$refs.vueCode);\n        __WEBPACK_IMPORTED_MODULE_1_highlight_js___default.a.highlightBlock(this.$refs.htmlCode);\n    },\n    data: function data() {\n        return {};\n    },\n\n    filters: {\n        code: function code(val) {\n            return codeHandler(val);\n        }\n    },\n    components: {}\n});\n\n/***/ }),\n\n/***/ 270:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(68);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(11)(\"ef4a88ea\", content, true);\n\n/***/ }),\n\n/***/ 271:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(69);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(11)(\"c86a7b1a\", content, true);\n\n/***/ }),\n\n/***/ 28:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__components_demo_block__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue__ = __webpack_require__(10);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue__);\n\n\n\n\n\nvar code = '\\n<template>\\n    <p class=\"background-text\">\\n        Vue<br>3D<br>Model<br>Background\\n    </p>\\n    <div class=\"background-buttons\">\\n        <p>Color</p>\\n        <button @click=\"bgColor = \\'#ff0\\'\">#ff0</button>\\n        <button @click=\"bgColor = \\'#f00\\'\">#f00</button>\\n        <button @click=\"bgColor = \\'#13ce66\\'\">#13ce66</button>\\n        <p>Alpha</p>\\n        <button @click=\"bgAlpha = 0.5\">0.5</button>\\n        <button @click=\"bgAlpha = 1\">1</button>\\n        <button @click=\"bgAlpha = 0\">0</button>\\n    </div>\\n    <model-obj\\n        :backgroundAlpha=\"bgAlpha\"\\n        :backgroundColor=\"bgColor\"\\n        src=\"static/models/obj/tree.obj\"></model-obj>\\n</template>\\n\\n<script>\\n    import { ModelObj } from \\'vue-3d-model\\'\\n\\n    export default {\\n        data () {\\n            return {\\n                bgColor: \\'#ff0\\',\\n                bgAlpha: 0.5\\n            }\\n        },\\n        components: {\\n            ModelObj\\n        }\\n    }\\n</script>\\n';\n\nvar htmlCode = '\\n<body>\\n    <div id=\"app\">\\n        <p class=\"background-text\">\\n            Vue<br>3D<br>Model<br>Background\\n        </p>\\n        <div class=\"background-buttons\">\\n            <p>Color</p>\\n            <button @click=\"bgColor = \\'#ff0\\'\">#ff0</button>\\n            <button @click=\"bgColor = \\'#f00\\'\">#f00</button>\\n            <button @click=\"bgColor = \\'#13ce66\\'\">#13ce66</button>\\n            <p>Alpha</p>\\n            <button @click=\"bgAlpha = 0.5\">0.5</button>\\n            <button @click=\"bgAlpha = 1\">1</button>\\n            <button @click=\"bgAlpha = 0\">0</button>\\n        </div>\\n        <model-obj\\n            :backgroundAlpha=\"bgAlpha\"\\n            :backgroundColor=\"bgColor\"\\n            src=\"static/models/obj/tree.obj\"></model-obj>\\n    </div>\\n    #scripts#\\n    <script>\\n        new Vue({\\n            el: \\'#app\\',\\n            data: {\\n                bgColor: \\'#ff0\\',\\n                bgAlpha: 0.5\\n            }\\n        })\\n    </script>\\n</body>\\n';\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'demo-background',\n    data: function data() {\n        return {\n            code: code,\n            htmlCode: htmlCode,\n            loading: true,\n            bgColor: '#ff0',\n            bgAlpha: 0.5\n        };\n    },\n\n    methods: {\n        onLoad: function onLoad() {\n            this.loading = false;\n        },\n        setBackground: function setBackground(color, alpha) {}\n    },\n    components: {\n        ModelObj: __WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue___default.a,\n        DemoBlock: __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default.a\n    }\n});\n\n/***/ }),\n\n/***/ 29:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__components_demo_block__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_model_three_vue__ = __webpack_require__(257);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_model_three_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__src_model_three_vue__);\n\n\n\n\n\nvar code = '\\n<template>\\n    <model-three src=\"static/models/json/scene.json\"></model-three>\\n</template>\\n\\n<script>\\n    import { ModelThree } from \\'vue-3d-model\\'\\n\\n    export default {\\n        components: {\\n            ModelThree\\n        }\\n    }\\n</script>\\n';\n\nvar htmlCode = '\\n<body>\\n    <div id=\"app\">\\n        <model-three src=\"static/models/json/scene.json\"></model-three>\\n    </div>\\n    #scripts#\\n    <script>\\n        new Vue({\\n            el: \\'#app\\'\\n        })\\n    </script>\\n</body>\\n';\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'demo-basic',\n    data: function data() {\n        return {\n            code: code,\n            htmlCode: htmlCode,\n            loading: true\n        };\n    },\n\n    methods: {\n        onLoad: function onLoad() {\n            this.loading = false;\n        }\n    },\n    components: {\n        ModelThree: __WEBPACK_IMPORTED_MODULE_1__src_model_three_vue___default.a,\n        DemoBlock: __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default.a\n    }\n});\n\n/***/ }),\n\n/***/ 30:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__components_demo_block__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_model_collada_vue__ = __webpack_require__(22);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_model_collada_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__src_model_collada_vue__);\n\n\n\n\n\nvar code = '\\n<template>\\n    <model-collada src=\"static/models/collada/elf.dae\"></model-collada>\\n</template>\\n\\n<script>\\n    import { ModelCollada } from \\'vue-3d-model\\'\\n\\n    export default {\\n        components: {\\n            ModelCollada\\n        }\\n    }\\n</script>\\n';\n\nvar htmlCode = '\\n<body>\\n    <div id=\"app\">\\n        <model-collada src=\"static/models/collada/elf.dae\"></model-collada>\\n    </div>\\n    #scripts#\\n    <script>\\n        new Vue({\\n            el: \\'#app\\'\\n        })\\n    </script>\\n</body>\\n';\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'demo-collada',\n    data: function data() {\n        return {\n            code: code,\n            htmlCode: htmlCode,\n            loading: true\n        };\n    },\n\n    methods: {\n        onLoad: function onLoad() {\n            this.loading = false;\n        }\n    },\n    components: {\n        ModelCollada: __WEBPACK_IMPORTED_MODULE_1__src_model_collada_vue___default.a,\n        DemoBlock: __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default.a\n    }\n});\n\n/***/ }),\n\n/***/ 31:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__components_demo_block__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue__ = __webpack_require__(10);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue__);\n\n\n\n\n\nvar code = '\\n\\n<template>\\n    <model-obj \\n        src=\"static/models/obj/tree.obj\"\\n        @on-mousemove=\"onMouseMove\">\\n    </model-obj>\\n</template>\\n\\n<script>\\n    import { ModelObj } from \\'vue-3d-model\\'\\n\\n    export default {\\n        data () {\\n            return {\\n                intersected: null\\n            }\\n        },\\n        methods: {\\n            onMouseMove ( event ) {\\n\\n                console.log( event );   // event: { distance, face, faceIndex, point, index, uv, object }\\n\\n                if ( !event ) {\\n\\n                    if ( this.intersected ) {\\n                        this.intersected.material.color.setStyle( \\'#fff\\' );\\n                    }\\n\\n                    this.intersected = null;\\n                    return;\\n                }\\n\\n                this.intersected = event.object;\\n                this.intersected.material.color.setStyle( \\'#13ce66\\' );\\n            }\\n        },\\n        components: {\\n            ModelObj\\n        }\\n    }\\n</script>\\n\\n';\n\nvar htmlCode = '\\n<body>\\n    <div id=\"app\">\\n        <model-obj \\n            src=\"static/models/obj/tree.obj\"\\n            @on-mousemove=\"onMouseMove\">\\n        </model-obj>\\n    </div>\\n    #scripts#\\n    <script>\\n        new Vue({\\n            el: \\'#app\\',\\n            data: {\\n                intersected: null\\n            },\\n            methods: {\\n                onMouseMove ( event ) {\\n\\n                    console.log( event );   // event: { distance, face, faceIndex, point, index, uv, object }\\n\\n                    if ( !event ) {\\n\\n                        if ( this.intersected ) {\\n                            this.intersected.material.color.setStyle( \\'#fff\\' );\\n                        }\\n\\n                        this.intersected = null;\\n                        return;\\n                    }\\n\\n                    this.intersected = event.object;\\n                    this.intersected.material.color.setStyle( \\'#13ce66\\' );\\n                }\\n            }\\n        })\\n    </script>\\n</body>\\n';\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'demo-gltf',\n    data: function data() {\n        return {\n            code: code,\n            htmlCode: htmlCode,\n            loading: true,\n            intersected: null\n        };\n    },\n\n    methods: {\n        onLoad: function onLoad() {\n            this.loading = false;\n        },\n        onMouseMove: function onMouseMove(event) {\n\n            console.log(event);\n\n            if (!event) {\n\n                if (this.intersected) {\n                    this.intersected.material.color.setStyle('#fff');\n                }\n\n                this.intersected = null;\n                return;\n            }\n\n            this.intersected = event.object;\n            this.intersected.material.color.setStyle('#13ce66');\n        }\n    },\n    components: {\n        ModelObj: __WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue___default.a,\n        DemoBlock: __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default.a\n    }\n});\n\n/***/ }),\n\n/***/ 32:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__components_demo_block__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue__ = __webpack_require__(10);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue__);\n\n\n\n\n\nvar code = '\\n<template>\\n    <model-obj src=\"static/models/obj/tree.obj\"></model-obj>\\n</template>\\n\\n<script>\\n    import { ModelObj } from \\'vue-3d-model\\'\\n\\n    export default {\\n        components: {\\n            ModelObj\\n        }\\n    }\\n</script>\\n';\n\nvar htmlCode = '\\n<body>\\n    <div id=\"app\">\\n        <model-obj src=\"static/models/obj/tree.obj\"></model-obj>\\n    </div>\\n    #scripts#\\n    <script>\\n        new Vue({\\n            el: \\'#app\\'\\n        })\\n    </script>\\n</body>\\n';\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'demo-obj',\n    data: function data() {\n        return {\n            code: code,\n            htmlCode: htmlCode,\n            loading: true\n        };\n    },\n\n    methods: {\n        onLoad: function onLoad() {\n            this.loading = false;\n        }\n    },\n    components: {\n        ModelObj: __WEBPACK_IMPORTED_MODULE_1__src_model_obj_vue___default.a,\n        DemoBlock: __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default.a\n    }\n});\n\n/***/ }),\n\n/***/ 33:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__components_demo_block__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_model_collada_vue__ = __webpack_require__(22);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_model_collada_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__src_model_collada_vue__);\n\n\n\n\n\nvar code = '\\n<template>\\n    <model-collada\\n        :rotation=\"rotation\"\\n        @on-load=\"onLoad\"\\n        src=\"static/models/collada/elf.dae\"></model-collada>\\n</template>\\n\\n<script>\\n    import { ModelCollada } from \\'vue-3d-model\\'\\n\\n    export default {\\n        data: {\\n            rotation: {\\n                x: 0,\\n                y: 0,\\n                z: 0\\n            }\\n        },\\n        methods: {\\n            onLoad () {\\n                this.rotate();\\n            },\\n            rotate () {\\n                this.rotation.y += 0.01;\\n                requestAnimationFrame( this.rotate );\\n            }\\n        },\\n        components: {\\n            ModelCollada\\n        }\\n    }\\n</script>\\n';\n\nvar htmlCode = '\\n<body>\\n    <div id=\"app\">\\n        <model-collada\\n            :rotation=\"rotation\"\\n            @on-load=\"onLoad\"\\n            src=\"static/models/collada/elf.dae\"></model-collada>\\n    </div>\\n    #scripts#\\n    <script>\\n        new Vue({\\n            el: \\'#app\\',\\n            data: {\\n                rotation: {\\n                    x: 0,\\n                    y: 0,\\n                    z: 0\\n                }\\n            },\\n            methods: {\\n                onLoad () {\\n                    this.rotate();\\n                },\\n                rotate () {\\n                    this.rotation.y += 0.01;\\n                    requestAnimationFrame( this.rotate );\\n                }\\n            }\\n        })\\n    </script>\\n</body>\\n';\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'demo-rotate',\n    data: function data() {\n        return {\n            code: code,\n            htmlCode: htmlCode,\n            loading: true,\n            rotation: {\n                x: 0,\n                y: 0,\n                z: 0\n            }\n        };\n    },\n\n    methods: {\n        onLoad: function onLoad() {\n            this.loading = false;\n            this.rotate();\n        },\n        rotate: function rotate() {\n            requestAnimationFrame(this.rotate);\n            this.rotation.y += 0.01;\n        }\n    },\n    components: {\n        ModelCollada: __WEBPACK_IMPORTED_MODULE_1__src_model_collada_vue___default.a,\n        DemoBlock: __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default.a\n    }\n});\n\n/***/ }),\n\n/***/ 34:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__components_demo_block__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_model_stl_vue__ = __webpack_require__(256);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_model_stl_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__src_model_stl_vue__);\n\n\n\n\n\nvar code = '\\n<template>\\n    <model-stl src=\"static/models/stl/slotted_disk.stl\"></model-stl>\\n</template>\\n\\n<script>\\n    import { ModelStl } from \\'vue-3d-model\\'\\n\\n    export default {\\n        components: {\\n            ModelStl\\n        }\\n    }\\n</script>\\n';\n\nvar htmlCode = '\\n<body>\\n    <div id=\"app\">\\n        <model-stl src=\"static/models/stl/slotted_disk.stl\"></model-stl>\\n    </div>\\n    #scripts#\\n    <script>\\n        new Vue({\\n            el: \\'#app\\'\\n        })\\n    </script>\\n</body>\\n';\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'demo-stl',\n    data: function data() {\n        return {\n            code: code,\n            htmlCode: htmlCode,\n            loading: true\n        };\n    },\n\n    methods: {\n        onLoad: function onLoad() {\n            this.loading = false;\n        }\n    },\n    components: {\n        ModelStl: __WEBPACK_IMPORTED_MODULE_1__src_model_stl_vue___default.a,\n        DemoBlock: __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default.a\n    }\n});\n\n/***/ }),\n\n/***/ 35:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__loaders_ColladaLoader__ = __webpack_require__(41);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__util__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__model_mixin_vue__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__model_mixin_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__model_mixin_vue__);\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'model-collada',\n    mixins: [__WEBPACK_IMPORTED_MODULE_2__model_mixin_vue___default.a],\n    props: {\n        lights: {\n            type: Array,\n            default: function _default() {\n                return [{\n                    type: 'HemisphereLight',\n                    position: { x: 0, y: 1, z: 0 },\n                    skyColor: 0xaaaaff,\n                    groundColor: 0x806060,\n                    intensity: 0.2\n                }, {\n                    type: 'DirectionalLight',\n                    position: { x: 1, y: 1, z: 1 },\n                    color: 0xffffff,\n                    intensity: 0.8\n                }];\n            }\n        },\n        smoothing: {\n            type: Boolean,\n            default: false\n        }\n    },\n    data: function data() {\n\n        var loader = new __WEBPACK_IMPORTED_MODULE_0__loaders_ColladaLoader__[\"a\" /* ColladaLoader */]();\n        loader.options.convertUpAxis = true;\n\n        return {\n            loader: loader\n        };\n    },\n\n    methods: {\n        load: function load() {\n            var _this = this;\n\n            if (!this.src) return;\n\n            if (this.object) {\n                this.scene.remove(this.object);\n            }\n\n            this.loader.load(this.src, function (collada) {\n\n                _this.object = collada.scene;\n\n                _this.scene.add(_this.object);\n\n                _this.updateCamera();\n\n                _this.$emit('on-load');\n            }, function (err) {\n\n                _this.$emit('on-error', err);\n            });\n        }\n    }\n});\n\n/***/ }),\n\n/***/ 36:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_three__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__util__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__controls_OrbitControls__ = __webpack_require__(40);\n\n\n\n\n\n\nvar suportWebGL = function () {\n\n    try {\n        var canvas = document.createElement('canvas');\n        return !!(window.WebGLRenderingContext && (canvas.getContext('webgl') || canvas.getContext('experimental-webgl')));\n    } catch (e) {\n        return false;\n    }\n}();\n\nvar handler = null;\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    props: {\n        src: {\n            type: String\n        },\n        width: {\n            type: Number\n        },\n        height: {\n            type: Number\n        },\n        position: {\n            type: Object,\n            default: function _default() {\n                return { x: 0, y: 0, z: 0 };\n            }\n        },\n        rotation: {\n            type: Object,\n            default: function _default() {\n                return { x: 0, y: 0, z: 0 };\n            }\n        },\n        scale: {\n            type: Object,\n            default: function _default() {\n                return { x: 1, y: 1, z: 1 };\n            }\n        },\n        lights: {\n            type: Array,\n            default: function _default() {\n                return [];\n            }\n        },\n        cameraPosition: {\n            type: Object\n        },\n        cameraRotation: {\n            type: Object\n        },\n        cameraUp: {\n            type: Object\n        },\n        cameraLookAt: {\n            type: Object\n        },\n        backgroundColor: {\n            default: 0xffffff\n        },\n        backgroundAlpha: {\n            type: Number,\n            default: 1\n        },\n        controllable: {\n            type: Boolean,\n            default: true\n        }\n    },\n    data: function data() {\n        return {\n            suportWebGL: suportWebGL,\n            size: {\n                width: this.width,\n                height: this.height\n            },\n            object: null,\n            raycaster: new __WEBPACK_IMPORTED_MODULE_0_three__[\"H\" /* Raycaster */](),\n            mouse: new __WEBPACK_IMPORTED_MODULE_0_three__[\"v\" /* Vector2 */](),\n            camera: new __WEBPACK_IMPORTED_MODULE_0_three__[\"p\" /* PerspectiveCamera */](45, 1, 0.001, 100000),\n            scene: new __WEBPACK_IMPORTED_MODULE_0_three__[\"I\" /* Scene */](),\n            renderer: null,\n            controls: null,\n            allLights: [],\n            clock: typeof performance === 'undefined' ? Date : performance\n        };\n    },\n\n    computed: {\n        hasListener: function hasListener() {\n            var events = this._events;\n            var result = {};\n\n            ['on-mousemove', 'on-mouseup', 'on-mousedown', 'on-click'].forEach(function (name) {\n                result[name] = !!events[name] && events[name].length > 0;\n            });\n\n            return result;\n        }\n    },\n    created: function created() {\n        window.addEventListener('resize', this.onResize, false);\n    },\n    mounted: function mounted() {\n\n        if (this.width === undefined || this.height === undefined) {\n            this.size = {\n                width: this.$el.offsetWidth,\n                height: this.$el.offsetHeight\n            };\n        }\n\n        this.renderer = new __WEBPACK_IMPORTED_MODULE_0_three__[\"J\" /* WebGLRenderer */]({ antialias: true, alpha: true, canvas: this.$refs.canvas });\n        this.renderer.shadowMap.enabled = true;\n\n        this.load();\n        this.update();\n\n        this.$el.addEventListener('mousedown', this.onMouseDown, false);\n        this.$el.addEventListener('mousemove', this.onMouseMove, false);\n        this.$el.addEventListener('mouseup', this.onMouseUp, false);\n        this.$el.addEventListener('click', this.onClick, false);\n\n        this.animate();\n    },\n    beforeDestroy: function beforeDestroy() {\n\n        this.$el.removeEventListener('mousedown', this.onMouseDown, false);\n        this.$el.removeEventListener('mousemove', this.onMouseMove, false);\n        this.$el.removeEventListener('mouseup', this.onMouseUp, false);\n        this.$el.removeEventListener('click', this.onClick, false);\n    },\n\n    watch: {\n        src: function src() {\n            this.load();\n        },\n\n        rotation: {\n            deep: true,\n            handler: function handler(val) {\n                if (!this.object) return;\n                this.object.rotation.set(val.x, val.y, val.z);\n            }\n        },\n        position: {\n            deep: true,\n            handler: function handler(val) {\n                if (!this.object) return;\n                this.object.position.set(val.x, val.y, val.z);\n            }\n        },\n        scale: {\n            deep: true,\n            handler: function handler(val) {\n                if (!this.object) return;\n                this.object.scale.set(val.x, val.y, val.z);\n            }\n        },\n        lights: {\n            deep: true,\n            handler: function handler(val, oldVal) {\n                this.updateLights();\n            }\n        },\n        size: {\n            deep: true,\n            handler: function handler(val) {\n                this.updateCamera();\n                this.updateRenderer();\n            }\n        },\n        controllable: function controllable() {\n            this.updateControls();\n        },\n        backgroundAlpha: function backgroundAlpha() {\n            this.updateRenderer();\n        },\n        backgroundColor: function backgroundColor() {\n            this.updateRenderer();\n        }\n    },\n    methods: {\n        onResize: function onResize() {\n            var _this = this;\n\n            if (this.width === undefined || this.height === undefined) {\n\n                this.$nextTick(function () {\n                    _this.size = {\n                        width: _this.$el.offsetWidth,\n                        height: _this.$el.offsetHeight\n                    };\n                });\n            }\n        },\n        onMouseDown: function onMouseDown(event) {\n\n            if (!this.hasListener['on-mousedown']) return;\n\n            var intersected = this.pick(event.clientX, event.clientY);\n            this.$emit('on-mousedown', intersected);\n        },\n        onMouseMove: function onMouseMove(event) {\n\n            if (!this.hasListener['on-mousemove']) return;\n\n            var intersected = this.pick(event.clientX, event.clientY);\n            this.$emit('on-mousemove', intersected);\n        },\n        onMouseUp: function onMouseUp(event) {\n\n            if (!this.hasListener['on-mouseup']) return;\n\n            var intersected = this.pick(event.clientX, event.clientY);\n            this.$emit('on-mouseup', intersected);\n        },\n        onClick: function onClick(event) {\n\n            if (!this.hasListener['on-click']) return;\n\n            var intersected = this.pick(event.clientX, event.clientY);\n            this.$emit('on-click', intersected);\n        },\n        pick: function pick(x, y) {\n\n            if (!this.object) return;\n\n            var rect = this.$el.getBoundingClientRect();\n\n            x -= rect.left;\n            y -= rect.top;\n\n            this.mouse.x = x / this.size.width * 2 - 1;\n            this.mouse.y = -(y / this.size.height) * 2 + 1;\n\n            this.raycaster.setFromCamera(this.mouse, this.camera);\n\n            var intersects = this.raycaster.intersectObject(this.object, true);\n\n            return (intersects && intersects.length) > 0 ? intersects[0] : null;\n        },\n        update: function update() {\n\n            this.updateRenderer();\n            this.updateModel();\n            this.updateCamera();\n            this.updateLights();\n            this.updateControls();\n        },\n        updateModel: function updateModel() {\n\n            var object = this.object;\n\n            if (!object) return;\n\n            object.position.copy(this.position);\n            object.rotation.copy(this.rotation);\n            object.scale.copy(this.scale);\n\n            object.matrixWorldNeedsUpdate = true;\n        },\n        updateRenderer: function updateRenderer() {\n\n            var renderer = this.renderer;\n\n            renderer.setSize(this.size.width, this.size.height);\n            renderer.setPixelRatio(window.devicePixelRatio || 1);\n            renderer.setClearColor(new __WEBPACK_IMPORTED_MODULE_0_three__[\"w\" /* Color */](this.backgroundColor).getHex());\n            renderer.setClearAlpha(this.backgroundAlpha);\n        },\n        updateCamera: function updateCamera() {\n\n            var camera = this.camera;\n            var object = this.object;\n\n            var distance = 0;\n            var center = null;\n\n            camera.aspect = this.size.width / this.size.height;\n            camera.updateProjectionMatrix();\n\n            if (!this.cameraLookAt && !this.cameraPosition && !this.cameraRotation && !this.cameraUp) {\n\n                if (!object) return;\n\n                distance = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__util__[\"a\" /* getSize */])(object).length();\n                center = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__util__[\"b\" /* getCenter */])(object);\n\n                camera.position.set(0, 0, 0);\n                camera.position.z = distance;\n                camera.position.add(center);\n                camera.lookAt(center);\n            } else {}\n\n            if (this.controls && center) this.controls.target.copy(center);\n        },\n        updateLights: function updateLights() {\n            var _this2 = this;\n\n            this.scene.remove.apply(this.scene, this.allLights);\n\n            this.allLights = [];\n\n            this.lights.forEach(function (item) {\n\n                if (!item.type) return;\n\n                var type = item.type.toLowerCase();\n\n                var light = null;\n\n                if (type === 'ambient' || type === 'ambientlight') {\n\n                    var color = item.color || 0x404040;\n                    var intensity = item.intensity || 1;\n\n                    light = new __WEBPACK_IMPORTED_MODULE_0_three__[\"t\" /* AmbientLight */](color, intensity);\n                } else if (type === 'point' || type === 'pointlight') {\n\n                    var _color = item.color || 0xffffff;\n                    var _intensity = item.intensity || 1;\n                    var distance = item.distance || 0;\n                    var decay = item.decay || 1;\n\n                    light = new PointLight(_color, _intensity, distance, decay);\n\n                    if (item.position) {\n                        light.position.copy(item.position);\n                    }\n                } else if (type === 'directional' || type === 'directionallight') {\n\n                    var _color2 = item.color || 0xffffff;\n                    var _intensity2 = item.intensity || 1;\n\n                    light = new __WEBPACK_IMPORTED_MODULE_0_three__[\"q\" /* DirectionalLight */](_color2, _intensity2);\n\n                    if (item.position) {\n                        light.position.copy(item.position);\n                    }\n\n                    if (item.target) {\n                        light.target.copy(item.target);\n                    }\n                } else if (type === 'hemisphere' || type === 'hemispherelight') {\n\n                    var skyColor = item.skyColor || 0xffffff;\n                    var groundColor = item.groundColor || 0xffffff;\n                    var _intensity3 = item.intensity || 1;\n\n                    light = new __WEBPACK_IMPORTED_MODULE_0_three__[\"K\" /* HemisphereLight */](skyColor, groundColor, _intensity3);\n\n                    if (item.position) {\n                        light.position.copy(item.position);\n                    }\n                }\n\n                _this2.allLights.push(light);\n                _this2.scene.add(light);\n            });\n        },\n        updateControls: function updateControls() {\n\n            if (this.controllable && this.controls) return;\n\n            if (this.controllable) {\n\n                if (this.controls) return;\n\n                this.controls = new __WEBPACK_IMPORTED_MODULE_2__controls_OrbitControls__[\"a\" /* OrbitControls */](this.camera, this.$el);\n                this.controls.type = 'orbit';\n            } else {\n\n                if (this.controls) {\n\n                    this.controls.dispose();\n                    this.controls = null;\n                }\n            }\n        },\n        load: function load() {\n            var _this3 = this;\n\n            if (!this.src) return;\n\n            if (this.object) {\n                this.scene.remove(this.object);\n            }\n\n            this.loader.load(this.src, function (object) {\n\n                if (_this3.process) {\n                    _this3.process(object);\n                }\n\n                _this3.object = object;\n\n                _this3.scene.add(_this3.object);\n\n                _this3.updateCamera();\n\n                _this3.$emit('on-load');\n            }, function (err) {\n\n                _this3.$emit('on-error', err);\n            });\n        },\n        animate: function animate() {\n            requestAnimationFrame(this.animate);\n            this.render();\n        },\n        render: function render() {\n            this.renderer.render(this.scene, this.camera);\n        }\n    }\n});\n\n/***/ }),\n\n/***/ 37:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__loaders_OBJLoader__ = __webpack_require__(42);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__util__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__model_mixin_vue__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__model_mixin_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__model_mixin_vue__);\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'model-obj',\n    mixins: [__WEBPACK_IMPORTED_MODULE_2__model_mixin_vue___default.a],\n    props: {\n        lights: {\n            type: Array,\n            default: function _default() {\n                return [{\n                    type: 'HemisphereLight',\n                    position: { x: 0, y: 1, z: 0 },\n                    skyColor: 0xaaaaff,\n                    groundColor: 0x806060,\n                    intensity: 0.2\n                }, {\n                    type: 'DirectionalLight',\n                    position: { x: 1, y: 1, z: 1 },\n                    color: 0xffffff,\n                    intensity: 0.8\n                }];\n            }\n        },\n        smoothing: {\n            type: Boolean,\n            default: false\n        }\n    },\n    data: function data() {\n        return {\n            loader: new __WEBPACK_IMPORTED_MODULE_0__loaders_OBJLoader__[\"a\" /* OBJLoader */]()\n        };\n    },\n\n    methods: {\n        process: function process(object) {\n            if (this.smoothing) {\n                object.traverse(function (child) {\n                    if (child.geometry) {\n                        child.geometry = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__util__[\"c\" /* toIndexed */])(child.geometry);\n                        child.geometry.computeVertexNormals();\n                    }\n                });\n            }\n        }\n    }\n});\n\n/***/ }),\n\n/***/ 38:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__loaders_STLLoader__ = __webpack_require__(43);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__model_mixin_vue__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__model_mixin_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__model_mixin_vue__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_three__ = __webpack_require__(1);\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'model-stl',\n    mixins: [__WEBPACK_IMPORTED_MODULE_1__model_mixin_vue___default.a],\n    props: {\n        lights: {\n            type: Array,\n            default: function _default() {\n                return [{\n                    type: 'HemisphereLight',\n                    position: { x: 0, y: 1, z: 0 },\n                    skyColor: 0xaaaaff,\n                    groundColor: 0x806060,\n                    intensity: 0.2\n                }, {\n                    type: 'DirectionalLight',\n                    position: { x: 1, y: 1, z: 1 },\n                    color: 0xffffff,\n                    intensity: 0.8\n                }];\n            }\n        }\n    },\n    data: function data() {\n        return {\n            loader: new __WEBPACK_IMPORTED_MODULE_0__loaders_STLLoader__[\"a\" /* STLLoader */]()\n        };\n    },\n\n    methods: {\n        load: function load() {\n            var _this = this;\n\n            if (!this.src) return;\n\n            if (this.object) {\n                this.scene.remove(this.object);\n            }\n\n            this.loader.load(this.src, function (geometry) {\n\n                _this.object = new __WEBPACK_IMPORTED_MODULE_2_three__[\"n\" /* Mesh */](geometry, new __WEBPACK_IMPORTED_MODULE_2_three__[\"F\" /* MeshPhongMaterial */]());\n\n                _this.scene.add(_this.object);\n\n                _this.updateCamera();\n\n                _this.$emit('on-load');\n            }, function (err) {\n\n                _this.$emit('on-error', err);\n            });\n        }\n    }\n});\n\n/***/ }),\n\n/***/ 39:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_three__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__model_mixin_vue__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__model_mixin_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__model_mixin_vue__);\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'model-three',\n    mixins: [__WEBPACK_IMPORTED_MODULE_1__model_mixin_vue___default.a],\n    data: function data() {\n        return {\n            loader: new __WEBPACK_IMPORTED_MODULE_0_three__[\"X\" /* ObjectLoader */]()\n        };\n    }\n});\n\n/***/ }),\n\n/***/ 40:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return OrbitControls; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_create__ = __webpack_require__(13);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_create___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_create__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_three__ = __webpack_require__(1);\n\n\n\nvar OrbitControls = function OrbitControls(object, domElement) {\n\n\t\tthis.object = object;\n\n\t\tthis.domElement = domElement !== undefined ? domElement : document;\n\n\t\tthis.enabled = true;\n\n\t\tthis.target = new __WEBPACK_IMPORTED_MODULE_1_three__[\"d\" /* Vector3 */]();\n\n\t\tthis.minDistance = 0;\n\t\tthis.maxDistance = Infinity;\n\n\t\tthis.minZoom = 0;\n\t\tthis.maxZoom = Infinity;\n\n\t\tthis.minPolarAngle = 0;\n\t\tthis.maxPolarAngle = Math.PI;\n\t\tthis.minAzimuthAngle = -Infinity;\n\t\tthis.maxAzimuthAngle = Infinity;\n\t\tthis.enableDamping = false;\n\t\tthis.dampingFactor = 0.25;\n\n\t\tthis.enableZoom = true;\n\t\tthis.zoomSpeed = 1.0;\n\n\t\tthis.enableRotate = true;\n\t\tthis.rotateSpeed = 1.0;\n\n\t\tthis.enablePan = true;\n\t\tthis.keyPanSpeed = 7.0;\n\t\tthis.autoRotate = false;\n\t\tthis.autoRotateSpeed = 2.0;\n\t\tthis.enableKeys = true;\n\n\t\tthis.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 };\n\n\t\tthis.mouseButtons = { ORBIT: __WEBPACK_IMPORTED_MODULE_1_three__[\"L\" /* MOUSE */].LEFT, ZOOM: __WEBPACK_IMPORTED_MODULE_1_three__[\"L\" /* MOUSE */].MIDDLE, PAN: __WEBPACK_IMPORTED_MODULE_1_three__[\"L\" /* MOUSE */].RIGHT };\n\n\t\tthis.target0 = this.target.clone();\n\t\tthis.position0 = this.object.position.clone();\n\t\tthis.zoom0 = this.object.zoom;\n\n\t\tthis.getPolarAngle = function () {\n\n\t\t\t\treturn spherical.phi;\n\t\t};\n\n\t\tthis.getAzimuthalAngle = function () {\n\n\t\t\t\treturn spherical.theta;\n\t\t};\n\n\t\tthis.saveState = function () {\n\n\t\t\t\tscope.target0.copy(scope.target);\n\t\t\t\tscope.position0.copy(scope.object.position);\n\t\t\t\tscope.zoom0 = scope.object.zoom;\n\t\t};\n\n\t\tthis.reset = function () {\n\n\t\t\t\tscope.target.copy(scope.target0);\n\t\t\t\tscope.object.position.copy(scope.position0);\n\t\t\t\tscope.object.zoom = scope.zoom0;\n\n\t\t\t\tscope.object.updateProjectionMatrix();\n\t\t\t\tscope.dispatchEvent(changeEvent);\n\n\t\t\t\tscope.update();\n\n\t\t\t\tstate = STATE.NONE;\n\t\t};\n\n\t\tthis.update = function () {\n\n\t\t\t\tvar offset = new __WEBPACK_IMPORTED_MODULE_1_three__[\"d\" /* Vector3 */]();\n\n\t\t\t\tvar quat = new __WEBPACK_IMPORTED_MODULE_1_three__[\"e\" /* Quaternion */]().setFromUnitVectors(object.up, new __WEBPACK_IMPORTED_MODULE_1_three__[\"d\" /* Vector3 */](0, 1, 0));\n\t\t\t\tvar quatInverse = quat.clone().inverse();\n\n\t\t\t\tvar lastPosition = new __WEBPACK_IMPORTED_MODULE_1_three__[\"d\" /* Vector3 */]();\n\t\t\t\tvar lastQuaternion = new __WEBPACK_IMPORTED_MODULE_1_three__[\"e\" /* Quaternion */]();\n\n\t\t\t\treturn function update() {\n\n\t\t\t\t\t\tvar position = scope.object.position;\n\n\t\t\t\t\t\toffset.copy(position).sub(scope.target);\n\n\t\t\t\t\t\toffset.applyQuaternion(quat);\n\n\t\t\t\t\t\tspherical.setFromVector3(offset);\n\n\t\t\t\t\t\tif (scope.autoRotate && state === STATE.NONE) {\n\n\t\t\t\t\t\t\t\trotateLeft(getAutoRotationAngle());\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tspherical.theta += sphericalDelta.theta;\n\t\t\t\t\t\tspherical.phi += sphericalDelta.phi;\n\n\t\t\t\t\t\tspherical.theta = Math.max(scope.minAzimuthAngle, Math.min(scope.maxAzimuthAngle, spherical.theta));\n\n\t\t\t\t\t\tspherical.phi = Math.max(scope.minPolarAngle, Math.min(scope.maxPolarAngle, spherical.phi));\n\n\t\t\t\t\t\tspherical.makeSafe();\n\n\t\t\t\t\t\tspherical.radius *= scale;\n\n\t\t\t\t\t\tspherical.radius = Math.max(scope.minDistance, Math.min(scope.maxDistance, spherical.radius));\n\n\t\t\t\t\t\tscope.target.add(panOffset);\n\n\t\t\t\t\t\toffset.setFromSpherical(spherical);\n\n\t\t\t\t\t\toffset.applyQuaternion(quatInverse);\n\n\t\t\t\t\t\tposition.copy(scope.target).add(offset);\n\n\t\t\t\t\t\tscope.object.lookAt(scope.target);\n\n\t\t\t\t\t\tif (scope.enableDamping === true) {\n\n\t\t\t\t\t\t\t\tsphericalDelta.theta *= 1 - scope.dampingFactor;\n\t\t\t\t\t\t\t\tsphericalDelta.phi *= 1 - scope.dampingFactor;\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tsphericalDelta.set(0, 0, 0);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tscale = 1;\n\t\t\t\t\t\tpanOffset.set(0, 0, 0);\n\n\t\t\t\t\t\tif (zoomChanged || lastPosition.distanceToSquared(scope.object.position) > EPS || 8 * (1 - lastQuaternion.dot(scope.object.quaternion)) > EPS) {\n\n\t\t\t\t\t\t\t\tscope.dispatchEvent(changeEvent);\n\n\t\t\t\t\t\t\t\tlastPosition.copy(scope.object.position);\n\t\t\t\t\t\t\t\tlastQuaternion.copy(scope.object.quaternion);\n\t\t\t\t\t\t\t\tzoomChanged = false;\n\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn false;\n\t\t\t\t};\n\t\t}();\n\n\t\tthis.dispose = function () {\n\n\t\t\t\tscope.domElement.removeEventListener('contextmenu', onContextMenu, false);\n\t\t\t\tscope.domElement.removeEventListener('mousedown', onMouseDown, false);\n\t\t\t\tscope.domElement.removeEventListener('wheel', onMouseWheel, false);\n\n\t\t\t\tscope.domElement.removeEventListener('touchstart', onTouchStart, false);\n\t\t\t\tscope.domElement.removeEventListener('touchend', onTouchEnd, false);\n\t\t\t\tscope.domElement.removeEventListener('touchmove', onTouchMove, false);\n\n\t\t\t\tdocument.removeEventListener('mousemove', onMouseMove, false);\n\t\t\t\tdocument.removeEventListener('mouseup', onMouseUp, false);\n\n\t\t\t\twindow.removeEventListener('keydown', onKeyDown, false);\n\t\t};\n\n\t\tvar scope = this;\n\n\t\tvar changeEvent = { type: 'change' };\n\t\tvar startEvent = { type: 'start' };\n\t\tvar endEvent = { type: 'end' };\n\n\t\tvar STATE = { NONE: -1, ROTATE: 0, DOLLY: 1, PAN: 2, TOUCH_ROTATE: 3, TOUCH_DOLLY: 4, TOUCH_PAN: 5 };\n\n\t\tvar state = STATE.NONE;\n\n\t\tvar EPS = 0.000001;\n\n\t\tvar spherical = new __WEBPACK_IMPORTED_MODULE_1_three__[\"M\" /* Spherical */]();\n\t\tvar sphericalDelta = new __WEBPACK_IMPORTED_MODULE_1_three__[\"M\" /* Spherical */]();\n\n\t\tvar scale = 1;\n\t\tvar panOffset = new __WEBPACK_IMPORTED_MODULE_1_three__[\"d\" /* Vector3 */]();\n\t\tvar zoomChanged = false;\n\n\t\tvar rotateStart = new __WEBPACK_IMPORTED_MODULE_1_three__[\"v\" /* Vector2 */]();\n\t\tvar rotateEnd = new __WEBPACK_IMPORTED_MODULE_1_three__[\"v\" /* Vector2 */]();\n\t\tvar rotateDelta = new __WEBPACK_IMPORTED_MODULE_1_three__[\"v\" /* Vector2 */]();\n\n\t\tvar panStart = new __WEBPACK_IMPORTED_MODULE_1_three__[\"v\" /* Vector2 */]();\n\t\tvar panEnd = new __WEBPACK_IMPORTED_MODULE_1_three__[\"v\" /* Vector2 */]();\n\t\tvar panDelta = new __WEBPACK_IMPORTED_MODULE_1_three__[\"v\" /* Vector2 */]();\n\n\t\tvar dollyStart = new __WEBPACK_IMPORTED_MODULE_1_three__[\"v\" /* Vector2 */]();\n\t\tvar dollyEnd = new __WEBPACK_IMPORTED_MODULE_1_three__[\"v\" /* Vector2 */]();\n\t\tvar dollyDelta = new __WEBPACK_IMPORTED_MODULE_1_three__[\"v\" /* Vector2 */]();\n\n\t\tfunction getAutoRotationAngle() {\n\n\t\t\t\treturn 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n\t\t}\n\n\t\tfunction getZoomScale() {\n\n\t\t\t\treturn Math.pow(0.95, scope.zoomSpeed);\n\t\t}\n\n\t\tfunction rotateLeft(angle) {\n\n\t\t\t\tsphericalDelta.theta -= angle;\n\t\t}\n\n\t\tfunction rotateUp(angle) {\n\n\t\t\t\tsphericalDelta.phi -= angle;\n\t\t}\n\n\t\tvar panLeft = function () {\n\n\t\t\t\tvar v = new __WEBPACK_IMPORTED_MODULE_1_three__[\"d\" /* Vector3 */]();\n\n\t\t\t\treturn function panLeft(distance, objectMatrix) {\n\n\t\t\t\t\t\tv.setFromMatrixColumn(objectMatrix, 0);\n\t\t\t\t\t\tv.multiplyScalar(-distance);\n\n\t\t\t\t\t\tpanOffset.add(v);\n\t\t\t\t};\n\t\t}();\n\n\t\tvar panUp = function () {\n\n\t\t\t\tvar v = new __WEBPACK_IMPORTED_MODULE_1_three__[\"d\" /* Vector3 */]();\n\n\t\t\t\treturn function panUp(distance, objectMatrix) {\n\n\t\t\t\t\t\tv.setFromMatrixColumn(objectMatrix, 1);\n\t\t\t\t\t\tv.multiplyScalar(distance);\n\n\t\t\t\t\t\tpanOffset.add(v);\n\t\t\t\t};\n\t\t}();\n\n\t\tvar pan = function () {\n\n\t\t\t\tvar offset = new __WEBPACK_IMPORTED_MODULE_1_three__[\"d\" /* Vector3 */]();\n\n\t\t\t\treturn function pan(deltaX, deltaY) {\n\n\t\t\t\t\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t\t\t\t\t\tif (scope.object instanceof __WEBPACK_IMPORTED_MODULE_1_three__[\"p\" /* PerspectiveCamera */]) {\n\t\t\t\t\t\t\t\tvar position = scope.object.position;\n\t\t\t\t\t\t\t\toffset.copy(position).sub(scope.target);\n\t\t\t\t\t\t\t\tvar targetDistance = offset.length();\n\n\t\t\t\t\t\t\t\ttargetDistance *= Math.tan(scope.object.fov / 2 * Math.PI / 180.0);\n\n\t\t\t\t\t\t\t\tpanLeft(2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix);\n\t\t\t\t\t\t\t\tpanUp(2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix);\n\t\t\t\t\t\t} else if (scope.object instanceof __WEBPACK_IMPORTED_MODULE_1_three__[\"N\" /* OrthographicCamera */]) {\n\t\t\t\t\t\t\t\tpanLeft(deltaX * (scope.object.right - scope.object.left) / scope.object.zoom / element.clientWidth, scope.object.matrix);\n\t\t\t\t\t\t\t\tpanUp(deltaY * (scope.object.top - scope.object.bottom) / scope.object.zoom / element.clientHeight, scope.object.matrix);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tconsole.warn('WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.');\n\t\t\t\t\t\t\t\tscope.enablePan = false;\n\t\t\t\t\t\t}\n\t\t\t\t};\n\t\t}();\n\n\t\tfunction dollyIn(dollyScale) {\n\n\t\t\t\tif (scope.object instanceof __WEBPACK_IMPORTED_MODULE_1_three__[\"p\" /* PerspectiveCamera */]) {\n\n\t\t\t\t\t\tscale /= dollyScale;\n\t\t\t\t} else if (scope.object instanceof __WEBPACK_IMPORTED_MODULE_1_three__[\"N\" /* OrthographicCamera */]) {\n\n\t\t\t\t\t\tscope.object.zoom = Math.max(scope.minZoom, Math.min(scope.maxZoom, scope.object.zoom * dollyScale));\n\t\t\t\t\t\tscope.object.updateProjectionMatrix();\n\t\t\t\t\t\tzoomChanged = true;\n\t\t\t\t} else {\n\n\t\t\t\t\t\tconsole.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.');\n\t\t\t\t\t\tscope.enableZoom = false;\n\t\t\t\t}\n\t\t}\n\n\t\tfunction dollyOut(dollyScale) {\n\n\t\t\t\tif (scope.object instanceof __WEBPACK_IMPORTED_MODULE_1_three__[\"p\" /* PerspectiveCamera */]) {\n\n\t\t\t\t\t\tscale *= dollyScale;\n\t\t\t\t} else if (scope.object instanceof __WEBPACK_IMPORTED_MODULE_1_three__[\"N\" /* OrthographicCamera */]) {\n\n\t\t\t\t\t\tscope.object.zoom = Math.max(scope.minZoom, Math.min(scope.maxZoom, scope.object.zoom / dollyScale));\n\t\t\t\t\t\tscope.object.updateProjectionMatrix();\n\t\t\t\t\t\tzoomChanged = true;\n\t\t\t\t} else {\n\n\t\t\t\t\t\tconsole.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.');\n\t\t\t\t\t\tscope.enableZoom = false;\n\t\t\t\t}\n\t\t}\n\n\t\tfunction handleMouseDownRotate(event) {\n\n\t\t\t\trotateStart.set(event.clientX, event.clientY);\n\t\t}\n\n\t\tfunction handleMouseDownDolly(event) {\n\n\t\t\t\tdollyStart.set(event.clientX, event.clientY);\n\t\t}\n\n\t\tfunction handleMouseDownPan(event) {\n\n\t\t\t\tpanStart.set(event.clientX, event.clientY);\n\t\t}\n\n\t\tfunction handleMouseMoveRotate(event) {\n\n\t\t\t\trotateEnd.set(event.clientX, event.clientY);\n\t\t\t\trotateDelta.subVectors(rotateEnd, rotateStart);\n\n\t\t\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t\t\t\trotateLeft(2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed);\n\n\t\t\t\trotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed);\n\n\t\t\t\trotateStart.copy(rotateEnd);\n\n\t\t\t\tscope.update();\n\t\t}\n\n\t\tfunction handleMouseMoveDolly(event) {\n\n\t\t\t\tdollyEnd.set(event.clientX, event.clientY);\n\n\t\t\t\tdollyDelta.subVectors(dollyEnd, dollyStart);\n\n\t\t\t\tif (dollyDelta.y > 0) {\n\n\t\t\t\t\t\tdollyIn(getZoomScale());\n\t\t\t\t} else if (dollyDelta.y < 0) {\n\n\t\t\t\t\t\tdollyOut(getZoomScale());\n\t\t\t\t}\n\n\t\t\t\tdollyStart.copy(dollyEnd);\n\n\t\t\t\tscope.update();\n\t\t}\n\n\t\tfunction handleMouseMovePan(event) {\n\n\t\t\t\tpanEnd.set(event.clientX, event.clientY);\n\n\t\t\t\tpanDelta.subVectors(panEnd, panStart);\n\n\t\t\t\tpan(panDelta.x, panDelta.y);\n\n\t\t\t\tpanStart.copy(panEnd);\n\n\t\t\t\tscope.update();\n\t\t}\n\n\t\tfunction handleMouseUp(event) {}\n\n\t\tfunction handleMouseWheel(event) {\n\n\t\t\t\tif (event.deltaY < 0) {\n\n\t\t\t\t\t\tdollyOut(getZoomScale());\n\t\t\t\t} else if (event.deltaY > 0) {\n\n\t\t\t\t\t\tdollyIn(getZoomScale());\n\t\t\t\t}\n\n\t\t\t\tscope.update();\n\t\t}\n\n\t\tfunction handleKeyDown(event) {\n\n\t\t\t\tswitch (event.keyCode) {\n\n\t\t\t\t\t\tcase scope.keys.UP:\n\t\t\t\t\t\t\t\tpan(0, scope.keyPanSpeed);\n\t\t\t\t\t\t\t\tscope.update();\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase scope.keys.BOTTOM:\n\t\t\t\t\t\t\t\tpan(0, -scope.keyPanSpeed);\n\t\t\t\t\t\t\t\tscope.update();\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase scope.keys.LEFT:\n\t\t\t\t\t\t\t\tpan(scope.keyPanSpeed, 0);\n\t\t\t\t\t\t\t\tscope.update();\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase scope.keys.RIGHT:\n\t\t\t\t\t\t\t\tpan(-scope.keyPanSpeed, 0);\n\t\t\t\t\t\t\t\tscope.update();\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\t\t}\n\n\t\tfunction handleTouchStartRotate(event) {\n\n\t\t\t\trotateStart.set(event.touches[0].pageX, event.touches[0].pageY);\n\t\t}\n\n\t\tfunction handleTouchStartDolly(event) {\n\n\t\t\t\tvar dx = event.touches[0].pageX - event.touches[1].pageX;\n\t\t\t\tvar dy = event.touches[0].pageY - event.touches[1].pageY;\n\n\t\t\t\tvar distance = Math.sqrt(dx * dx + dy * dy);\n\n\t\t\t\tdollyStart.set(0, distance);\n\t\t}\n\n\t\tfunction handleTouchStartPan(event) {\n\n\t\t\t\tpanStart.set(event.touches[0].pageX, event.touches[0].pageY);\n\t\t}\n\n\t\tfunction handleTouchMoveRotate(event) {\n\n\t\t\t\trotateEnd.set(event.touches[0].pageX, event.touches[0].pageY);\n\t\t\t\trotateDelta.subVectors(rotateEnd, rotateStart);\n\n\t\t\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t\t\t\trotateLeft(2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed);\n\n\t\t\t\trotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed);\n\n\t\t\t\trotateStart.copy(rotateEnd);\n\n\t\t\t\tscope.update();\n\t\t}\n\n\t\tfunction handleTouchMoveDolly(event) {\n\n\t\t\t\tvar dx = event.touches[0].pageX - event.touches[1].pageX;\n\t\t\t\tvar dy = event.touches[0].pageY - event.touches[1].pageY;\n\n\t\t\t\tvar distance = Math.sqrt(dx * dx + dy * dy);\n\n\t\t\t\tdollyEnd.set(0, distance);\n\n\t\t\t\tdollyDelta.subVectors(dollyEnd, dollyStart);\n\n\t\t\t\tif (dollyDelta.y > 0) {\n\n\t\t\t\t\t\tdollyOut(getZoomScale());\n\t\t\t\t} else if (dollyDelta.y < 0) {\n\n\t\t\t\t\t\tdollyIn(getZoomScale());\n\t\t\t\t}\n\n\t\t\t\tdollyStart.copy(dollyEnd);\n\n\t\t\t\tscope.update();\n\t\t}\n\n\t\tfunction handleTouchMovePan(event) {\n\n\t\t\t\tpanEnd.set(event.touches[0].pageX, event.touches[0].pageY);\n\n\t\t\t\tpanDelta.subVectors(panEnd, panStart);\n\n\t\t\t\tpan(panDelta.x, panDelta.y);\n\n\t\t\t\tpanStart.copy(panEnd);\n\n\t\t\t\tscope.update();\n\t\t}\n\n\t\tfunction handleTouchEnd(event) {}\n\n\t\tfunction onMouseDown(event) {\n\n\t\t\t\tif (scope.enabled === false) return;\n\n\t\t\t\tevent.preventDefault();\n\n\t\t\t\tswitch (event.button) {\n\n\t\t\t\t\t\tcase scope.mouseButtons.ORBIT:\n\n\t\t\t\t\t\t\t\tif (scope.enableRotate === false) return;\n\n\t\t\t\t\t\t\t\thandleMouseDownRotate(event);\n\n\t\t\t\t\t\t\t\tstate = STATE.ROTATE;\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase scope.mouseButtons.ZOOM:\n\n\t\t\t\t\t\t\t\tif (scope.enableZoom === false) return;\n\n\t\t\t\t\t\t\t\thandleMouseDownDolly(event);\n\n\t\t\t\t\t\t\t\tstate = STATE.DOLLY;\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase scope.mouseButtons.PAN:\n\n\t\t\t\t\t\t\t\tif (scope.enablePan === false) return;\n\n\t\t\t\t\t\t\t\thandleMouseDownPan(event);\n\n\t\t\t\t\t\t\t\tstate = STATE.PAN;\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\tif (state !== STATE.NONE) {\n\n\t\t\t\t\t\tdocument.addEventListener('mousemove', onMouseMove, false);\n\t\t\t\t\t\tdocument.addEventListener('mouseup', onMouseUp, false);\n\n\t\t\t\t\t\tscope.dispatchEvent(startEvent);\n\t\t\t\t}\n\t\t}\n\n\t\tfunction onMouseMove(event) {\n\n\t\t\t\tif (scope.enabled === false) return;\n\n\t\t\t\tevent.preventDefault();\n\n\t\t\t\tswitch (state) {\n\n\t\t\t\t\t\tcase STATE.ROTATE:\n\n\t\t\t\t\t\t\t\tif (scope.enableRotate === false) return;\n\n\t\t\t\t\t\t\t\thandleMouseMoveRotate(event);\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase STATE.DOLLY:\n\n\t\t\t\t\t\t\t\tif (scope.enableZoom === false) return;\n\n\t\t\t\t\t\t\t\thandleMouseMoveDolly(event);\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase STATE.PAN:\n\n\t\t\t\t\t\t\t\tif (scope.enablePan === false) return;\n\n\t\t\t\t\t\t\t\thandleMouseMovePan(event);\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\t\t}\n\n\t\tfunction onMouseUp(event) {\n\n\t\t\t\tif (scope.enabled === false) return;\n\n\t\t\t\thandleMouseUp(event);\n\n\t\t\t\tdocument.removeEventListener('mousemove', onMouseMove, false);\n\t\t\t\tdocument.removeEventListener('mouseup', onMouseUp, false);\n\n\t\t\t\tscope.dispatchEvent(endEvent);\n\n\t\t\t\tstate = STATE.NONE;\n\t\t}\n\n\t\tfunction onMouseWheel(event) {\n\n\t\t\t\tif (scope.enabled === false || scope.enableZoom === false || state !== STATE.NONE && state !== STATE.ROTATE) return;\n\n\t\t\t\tevent.preventDefault();\n\t\t\t\tevent.stopPropagation();\n\n\t\t\t\thandleMouseWheel(event);\n\n\t\t\t\tscope.dispatchEvent(startEvent);\n\t\t\t\tscope.dispatchEvent(endEvent);\n\t\t}\n\n\t\tfunction onKeyDown(event) {\n\n\t\t\t\tif (scope.enabled === false || scope.enableKeys === false || scope.enablePan === false) return;\n\n\t\t\t\thandleKeyDown(event);\n\t\t}\n\n\t\tfunction onTouchStart(event) {\n\n\t\t\t\tif (scope.enabled === false) return;\n\n\t\t\t\tswitch (event.touches.length) {\n\n\t\t\t\t\t\tcase 1:\n\n\t\t\t\t\t\t\t\tif (scope.enableRotate === false) return;\n\n\t\t\t\t\t\t\t\thandleTouchStartRotate(event);\n\n\t\t\t\t\t\t\t\tstate = STATE.TOUCH_ROTATE;\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 2:\n\n\t\t\t\t\t\t\t\tif (scope.enableZoom === false) return;\n\n\t\t\t\t\t\t\t\thandleTouchStartDolly(event);\n\n\t\t\t\t\t\t\t\tstate = STATE.TOUCH_DOLLY;\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 3:\n\n\t\t\t\t\t\t\t\tif (scope.enablePan === false) return;\n\n\t\t\t\t\t\t\t\thandleTouchStartPan(event);\n\n\t\t\t\t\t\t\t\tstate = STATE.TOUCH_PAN;\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t\t}\n\n\t\t\t\tif (state !== STATE.NONE) {\n\n\t\t\t\t\t\tscope.dispatchEvent(startEvent);\n\t\t\t\t}\n\t\t}\n\n\t\tfunction onTouchMove(event) {\n\n\t\t\t\tif (scope.enabled === false) return;\n\n\t\t\t\tevent.preventDefault();\n\t\t\t\tevent.stopPropagation();\n\n\t\t\t\tswitch (event.touches.length) {\n\n\t\t\t\t\t\tcase 1:\n\n\t\t\t\t\t\t\t\tif (scope.enableRotate === false) return;\n\t\t\t\t\t\t\t\tif (state !== STATE.TOUCH_ROTATE) return;\n\n\t\t\t\t\t\t\t\thandleTouchMoveRotate(event);\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 2:\n\n\t\t\t\t\t\t\t\tif (scope.enableZoom === false) return;\n\t\t\t\t\t\t\t\tif (state !== STATE.TOUCH_DOLLY) return;\n\n\t\t\t\t\t\t\t\thandleTouchMoveDolly(event);\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 3:\n\n\t\t\t\t\t\t\t\tif (scope.enablePan === false) return;\n\t\t\t\t\t\t\t\tif (state !== STATE.TOUCH_PAN) return;\n\n\t\t\t\t\t\t\t\thandleTouchMovePan(event);\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t\t}\n\t\t}\n\n\t\tfunction onTouchEnd(event) {\n\n\t\t\t\tif (scope.enabled === false) return;\n\n\t\t\t\thandleTouchEnd(event);\n\n\t\t\t\tscope.dispatchEvent(endEvent);\n\n\t\t\t\tstate = STATE.NONE;\n\t\t}\n\n\t\tfunction onContextMenu(event) {\n\n\t\t\t\tevent.preventDefault();\n\t\t}\n\n\t\tscope.domElement.addEventListener('contextmenu', onContextMenu, false);\n\n\t\tscope.domElement.addEventListener('mousedown', onMouseDown, false);\n\t\tscope.domElement.addEventListener('wheel', onMouseWheel, false);\n\n\t\tscope.domElement.addEventListener('touchstart', onTouchStart, false);\n\t\tscope.domElement.addEventListener('touchend', onTouchEnd, false);\n\t\tscope.domElement.addEventListener('touchmove', onTouchMove, false);\n\n\t\twindow.addEventListener('keydown', onKeyDown, false);\n\n\t\tthis.update();\n};\n\nOrbitControls.prototype = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_create___default()(__WEBPACK_IMPORTED_MODULE_1_three__[\"O\" /* EventDispatcher */].prototype);\nOrbitControls.prototype.constructor = OrbitControls;\n\n\n\n/***/ }),\n\n/***/ 41:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return ColladaLoader; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_create__ = __webpack_require__(13);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_create___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_create__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_three__ = __webpack_require__(1);\n\n\n\nvar ColladaLoader = function ColladaLoader() {\n\n\t\tvar COLLADA = null;\n\t\tvar scene = null;\n\t\tvar visualScene;\n\t\tvar kinematicsModel;\n\n\t\tvar readyCallbackFunc = null;\n\n\t\tvar sources = {};\n\t\tvar images = {};\n\t\tvar animations = {};\n\t\tvar controllers = {};\n\t\tvar geometries = {};\n\t\tvar materials = {};\n\t\tvar effects = {};\n\t\tvar cameras = {};\n\t\tvar lights = {};\n\n\t\tvar animData;\n\t\tvar kinematics;\n\t\tvar visualScenes;\n\t\tvar kinematicsModels;\n\t\tvar baseUrl;\n\t\tvar morphs;\n\t\tvar skins;\n\n\t\tvar flip_uv = true;\n\t\tvar preferredShading = __WEBPACK_IMPORTED_MODULE_1_three__[\"a\" /* SmoothShading */];\n\n\t\tvar options = {\n\t\t\t\tcenterGeometry: false,\n\n\t\t\t\tconvertUpAxis: false,\n\n\t\t\t\tsubdivideFaces: true,\n\n\t\t\t\tupAxis: 'Y',\n\n\t\t\t\tdefaultEnvMap: null\n\n\t\t};\n\n\t\tvar colladaUnit = 1.0;\n\t\tvar colladaUp = 'Y';\n\t\tvar upConversion = null;\n\n\t\tfunction load(url, readyCallback, progressCallback, failCallback) {\n\n\t\t\t\tvar length = 0;\n\n\t\t\t\tif (document.implementation && document.implementation.createDocument) {\n\n\t\t\t\t\t\tvar request = new XMLHttpRequest();\n\n\t\t\t\t\t\trequest.onreadystatechange = function () {\n\n\t\t\t\t\t\t\t\tif (request.readyState === 4) {\n\n\t\t\t\t\t\t\t\t\t\tif (request.status === 0 || request.status === 200) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (request.response) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treadyCallbackFunc = readyCallback;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tparse(request.response, undefined, url);\n\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (failCallback) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfailCallback({ type: 'error', url: url });\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.error(\"ColladaLoader: Empty or non-existing file (\" + url + \")\");\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (failCallback) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfailCallback({ type: 'error', url: url });\n\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.error('ColladaLoader: Couldn\\'t load \"' + url + '\" (' + request.status + ')');\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else if (request.readyState === 3) {\n\n\t\t\t\t\t\t\t\t\t\tif (progressCallback) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (length === 0) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlength = request.getResponseHeader(\"Content-Length\");\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\tprogressCallback({ total: length, loaded: request.responseText.length });\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\trequest.open(\"GET\", url, true);\n\t\t\t\t\t\trequest.send(null);\n\t\t\t\t} else {\n\n\t\t\t\t\t\talert(\"Don't know how to parse XML!\");\n\t\t\t\t}\n\t\t}\n\n\t\tfunction parse(text, callBack, url) {\n\n\t\t\t\tCOLLADA = new DOMParser().parseFromString(text, 'text/xml');\n\t\t\t\tcallBack = callBack || readyCallbackFunc;\n\n\t\t\t\tif (url !== undefined) {\n\n\t\t\t\t\t\tvar parts = url.split('/');\n\t\t\t\t\t\tparts.pop();\n\t\t\t\t\t\tbaseUrl = (parts.length < 1 ? '.' : parts.join('/')) + '/';\n\t\t\t\t}\n\n\t\t\t\tparseAsset();\n\t\t\t\tsetUpConversion();\n\t\t\t\timages = parseLib(\"library_images image\", _Image, \"image\");\n\t\t\t\tmaterials = parseLib(\"library_materials material\", Material, \"material\");\n\t\t\t\teffects = parseLib(\"library_effects effect\", Effect, \"effect\");\n\t\t\t\tgeometries = parseLib(\"library_geometries geometry\", Geometry, \"geometry\");\n\t\t\t\tcameras = parseLib(\"library_cameras camera\", Camera, \"camera\");\n\t\t\t\tlights = parseLib(\"library_lights light\", Light, \"light\");\n\t\t\t\tcontrollers = parseLib(\"library_controllers controller\", Controller, \"controller\");\n\t\t\t\tanimations = parseLib(\"library_animations animation\", Animation, \"animation\");\n\t\t\t\tvisualScenes = parseLib(\"library_visual_scenes visual_scene\", VisualScene, \"visual_scene\");\n\t\t\t\tkinematicsModels = parseLib(\"library_kinematics_models kinematics_model\", KinematicsModel, \"kinematics_model\");\n\n\t\t\t\tmorphs = [];\n\t\t\t\tskins = [];\n\n\t\t\t\tvisualScene = parseScene();\n\t\t\t\tscene = new __WEBPACK_IMPORTED_MODULE_1_three__[\"b\" /* Group */]();\n\n\t\t\t\tfor (var i = 0; i < visualScene.nodes.length; i++) {\n\n\t\t\t\t\t\tscene.add(createSceneGraph(visualScene.nodes[i]));\n\t\t\t\t}\n\n\t\t\t\tscene.scale.multiplyScalar(colladaUnit);\n\n\t\t\t\tcreateAnimations();\n\n\t\t\t\tkinematicsModel = parseKinematicsModel();\n\t\t\t\tcreateKinematics();\n\n\t\t\t\tvar result = {\n\n\t\t\t\t\t\tscene: scene,\n\t\t\t\t\t\tmorphs: morphs,\n\t\t\t\t\t\tskins: skins,\n\t\t\t\t\t\tanimations: animData,\n\t\t\t\t\t\tkinematics: kinematics,\n\t\t\t\t\t\tdae: {\n\t\t\t\t\t\t\t\timages: images,\n\t\t\t\t\t\t\t\tmaterials: materials,\n\t\t\t\t\t\t\t\tcameras: cameras,\n\t\t\t\t\t\t\t\tlights: lights,\n\t\t\t\t\t\t\t\teffects: effects,\n\t\t\t\t\t\t\t\tgeometries: geometries,\n\t\t\t\t\t\t\t\tcontrollers: controllers,\n\t\t\t\t\t\t\t\tanimations: animations,\n\t\t\t\t\t\t\t\tvisualScenes: visualScenes,\n\t\t\t\t\t\t\t\tvisualScene: visualScene,\n\t\t\t\t\t\t\t\tscene: visualScene,\n\t\t\t\t\t\t\t\tkinematicsModels: kinematicsModels,\n\t\t\t\t\t\t\t\tkinematicsModel: kinematicsModel\n\t\t\t\t\t\t}\n\n\t\t\t\t};\n\n\t\t\t\tif (callBack) {\n\n\t\t\t\t\t\tcallBack(result);\n\t\t\t\t}\n\n\t\t\t\treturn result;\n\t\t}\n\n\t\tfunction setPreferredShading(shading) {\n\n\t\t\t\tpreferredShading = shading;\n\t\t}\n\n\t\tfunction parseAsset() {\n\n\t\t\t\tvar elements = COLLADA.querySelectorAll('asset');\n\n\t\t\t\tvar element = elements[0];\n\n\t\t\t\tif (element && element.childNodes) {\n\n\t\t\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\t\t\tvar child = element.childNodes[i];\n\n\t\t\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\t\t\tcase 'unit':\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar meter = child.getAttribute('meter');\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (meter) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolladaUnit = parseFloat(meter);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\tcase 'up_axis':\n\n\t\t\t\t\t\t\t\t\t\t\t\tcolladaUp = child.textContent.charAt(0);\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t}\n\t\t}\n\n\t\tfunction parseLib(q, classSpec, prefix) {\n\n\t\t\t\tvar elements = COLLADA.querySelectorAll(q);\n\n\t\t\t\tvar lib = {};\n\n\t\t\t\tvar i = 0;\n\n\t\t\t\tvar elementsLength = elements.length;\n\n\t\t\t\tfor (var j = 0; j < elementsLength; j++) {\n\n\t\t\t\t\t\tvar element = elements[j];\n\t\t\t\t\t\tvar daeElement = new classSpec().parse(element);\n\n\t\t\t\t\t\tif (!daeElement.id || daeElement.id.length === 0) daeElement.id = prefix + i++;\n\t\t\t\t\t\tlib[daeElement.id] = daeElement;\n\t\t\t\t}\n\n\t\t\t\treturn lib;\n\t\t}\n\n\t\tfunction parseScene() {\n\n\t\t\t\tvar sceneElement = COLLADA.querySelectorAll('scene instance_visual_scene')[0];\n\n\t\t\t\tif (sceneElement) {\n\n\t\t\t\t\t\tvar url = sceneElement.getAttribute('url').replace(/^#/, '');\n\t\t\t\t\t\treturn visualScenes[url.length > 0 ? url : 'visual_scene0'];\n\t\t\t\t} else {\n\n\t\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t}\n\n\t\tfunction parseKinematicsModel() {\n\n\t\t\t\tvar kinematicsModelElement = COLLADA.querySelectorAll('instance_kinematics_model')[0];\n\n\t\t\t\tif (kinematicsModelElement) {\n\n\t\t\t\t\t\tvar url = kinematicsModelElement.getAttribute('url').replace(/^#/, '');\n\t\t\t\t\t\treturn kinematicsModels[url.length > 0 ? url : 'kinematics_model0'];\n\t\t\t\t} else {\n\n\t\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t}\n\n\t\tfunction createAnimations() {\n\n\t\t\t\tanimData = [];\n\n\t\t\t\trecurseHierarchy(scene);\n\t\t}\n\n\t\tfunction recurseHierarchy(node) {\n\n\t\t\t\tvar n = visualScene.getChildById(node.colladaId, true),\n\t\t\t\t    newData = null;\n\n\t\t\t\tif (n && n.keys) {\n\n\t\t\t\t\t\tnewData = {\n\t\t\t\t\t\t\t\tfps: 60,\n\t\t\t\t\t\t\t\thierarchy: [{\n\t\t\t\t\t\t\t\t\t\tnode: n,\n\t\t\t\t\t\t\t\t\t\tkeys: n.keys,\n\t\t\t\t\t\t\t\t\t\tsids: n.sids\n\t\t\t\t\t\t\t\t}],\n\t\t\t\t\t\t\t\tnode: node,\n\t\t\t\t\t\t\t\tname: 'animation_' + node.name,\n\t\t\t\t\t\t\t\tlength: 0\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tanimData.push(newData);\n\n\t\t\t\t\t\tfor (var i = 0, il = n.keys.length; i < il; i++) {\n\n\t\t\t\t\t\t\t\tnewData.length = Math.max(newData.length, n.keys[i].time);\n\t\t\t\t\t\t}\n\t\t\t\t} else {\n\n\t\t\t\t\t\tnewData = {\n\t\t\t\t\t\t\t\thierarchy: [{\n\t\t\t\t\t\t\t\t\t\tkeys: [],\n\t\t\t\t\t\t\t\t\t\tsids: []\n\t\t\t\t\t\t\t\t}]\n\t\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\tfor (var i = 0, il = node.children.length; i < il; i++) {\n\n\t\t\t\t\t\tvar d = recurseHierarchy(node.children[i]);\n\n\t\t\t\t\t\tfor (var j = 0, jl = d.hierarchy.length; j < jl; j++) {\n\n\t\t\t\t\t\t\t\tnewData.hierarchy.push({\n\t\t\t\t\t\t\t\t\t\tkeys: [],\n\t\t\t\t\t\t\t\t\t\tsids: []\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn newData;\n\t\t}\n\n\t\tfunction calcAnimationBounds() {\n\n\t\t\t\tvar start = 1000000;\n\t\t\t\tvar end = -start;\n\t\t\t\tvar frames = 0;\n\t\t\t\tvar ID;\n\t\t\t\tfor (var id in animations) {\n\n\t\t\t\t\t\tvar animation = animations[id];\n\t\t\t\t\t\tID = ID || animation.id;\n\t\t\t\t\t\tfor (var i = 0; i < animation.sampler.length; i++) {\n\n\t\t\t\t\t\t\t\tvar sampler = animation.sampler[i];\n\n\t\t\t\t\t\t\t\tsampler.create();\n\n\t\t\t\t\t\t\t\tstart = Math.min(start, sampler.startTime);\n\t\t\t\t\t\t\t\tend = Math.max(end, sampler.endTime);\n\t\t\t\t\t\t\t\tframes = Math.max(frames, sampler.input.length);\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn { start: start, end: end, frames: frames, ID: ID };\n\t\t}\n\n\t\tfunction createMorph(geometry, ctrl) {\n\n\t\t\t\tvar morphCtrl = ctrl instanceof InstanceController ? controllers[ctrl.url] : ctrl;\n\n\t\t\t\tif (!morphCtrl || !morphCtrl.morph) {\n\n\t\t\t\t\t\tconsole.log(\"could not find morph controller!\");\n\t\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar morph = morphCtrl.morph;\n\n\t\t\t\tfor (var i = 0; i < morph.targets.length; i++) {\n\n\t\t\t\t\t\tvar target_id = morph.targets[i];\n\t\t\t\t\t\tvar daeGeometry = geometries[target_id];\n\n\t\t\t\t\t\tif (!daeGeometry.mesh || !daeGeometry.mesh.primitives || !daeGeometry.mesh.primitives.length) {\n\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar target = daeGeometry.mesh.primitives[0].geometry;\n\n\t\t\t\t\t\tif (target.vertices.length === geometry.vertices.length) {\n\n\t\t\t\t\t\t\t\tgeometry.morphTargets.push({ name: \"target_1\", vertices: target.vertices });\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tgeometry.morphTargets.push({ name: \"target_Z\", vertices: geometry.vertices });\n\t\t}\n\n\t\tfunction createSkin(geometry, ctrl, applyBindShape) {\n\n\t\t\t\tvar skinCtrl = controllers[ctrl.url];\n\n\t\t\t\tif (!skinCtrl || !skinCtrl.skin) {\n\n\t\t\t\t\t\tconsole.log(\"could not find skin controller!\");\n\t\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (!ctrl.skeleton || !ctrl.skeleton.length) {\n\n\t\t\t\t\t\tconsole.log(\"could not find the skeleton for the skin!\");\n\t\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar skin = skinCtrl.skin;\n\t\t\t\tvar skeleton = visualScene.getChildById(ctrl.skeleton[0]);\n\t\t\t\tvar hierarchy = [];\n\n\t\t\t\tapplyBindShape = applyBindShape !== undefined ? applyBindShape : true;\n\n\t\t\t\tvar bones = [];\n\t\t\t\tgeometry.skinWeights = [];\n\t\t\t\tgeometry.skinIndices = [];\n\n\t\t\t\tif (applyBindShape) {\n\n\t\t\t\t\t\tfor (var i = 0; i < geometry.vertices.length; i++) {\n\n\t\t\t\t\t\t\t\tgeometry.vertices[i].applyMatrix4(skin.bindShapeMatrix);\n\t\t\t\t\t\t}\n\t\t\t\t}\n\t\t}\n\n\t\tfunction setupSkeleton(node, bones, frame, parent) {\n\n\t\t\t\tnode.world = node.world || new __WEBPACK_IMPORTED_MODULE_1_three__[\"c\" /* Matrix4 */]();\n\t\t\t\tnode.localworld = node.localworld || new __WEBPACK_IMPORTED_MODULE_1_three__[\"c\" /* Matrix4 */]();\n\t\t\t\tnode.world.copy(node.matrix);\n\t\t\t\tnode.localworld.copy(node.matrix);\n\n\t\t\t\tif (node.channels && node.channels.length) {\n\n\t\t\t\t\t\tvar channel = node.channels[0];\n\t\t\t\t\t\tvar m = channel.sampler.output[frame];\n\n\t\t\t\t\t\tif (m instanceof __WEBPACK_IMPORTED_MODULE_1_three__[\"c\" /* Matrix4 */]) {\n\n\t\t\t\t\t\t\t\tnode.world.copy(m);\n\t\t\t\t\t\t\t\tnode.localworld.copy(m);\n\t\t\t\t\t\t\t\tif (frame === 0) node.matrix.copy(m);\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (parent) {\n\n\t\t\t\t\t\tnode.world.multiplyMatrices(parent, node.world);\n\t\t\t\t}\n\n\t\t\t\tbones.push(node);\n\n\t\t\t\tfor (var i = 0; i < node.nodes.length; i++) {\n\n\t\t\t\t\t\tsetupSkeleton(node.nodes[i], bones, frame, node.world);\n\t\t\t\t}\n\t\t}\n\n\t\tfunction setupSkinningMatrices(bones, skin) {\n\n\t\t\t\tfor (var i = 0; i < bones.length; i++) {\n\n\t\t\t\t\t\tvar bone = bones[i];\n\t\t\t\t\t\tvar found = -1;\n\n\t\t\t\t\t\tif (bone.type != 'JOINT') continue;\n\n\t\t\t\t\t\tfor (var j = 0; j < skin.joints.length; j++) {\n\n\t\t\t\t\t\t\t\tif (bone.sid === skin.joints[j]) {\n\n\t\t\t\t\t\t\t\t\t\tfound = j;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (found >= 0) {\n\n\t\t\t\t\t\t\t\tvar inv = skin.invBindMatrices[found];\n\n\t\t\t\t\t\t\t\tbone.invBindMatrix = inv;\n\t\t\t\t\t\t\t\tbone.skinningMatrix = new __WEBPACK_IMPORTED_MODULE_1_three__[\"c\" /* Matrix4 */]();\n\t\t\t\t\t\t\t\tbone.skinningMatrix.multiplyMatrices(bone.world, inv);\n\t\t\t\t\t\t\t\tbone.animatrix = new __WEBPACK_IMPORTED_MODULE_1_three__[\"c\" /* Matrix4 */]();\n\n\t\t\t\t\t\t\t\tbone.animatrix.copy(bone.localworld);\n\t\t\t\t\t\t\t\tbone.weights = [];\n\n\t\t\t\t\t\t\t\tfor (var j = 0; j < skin.weights.length; j++) {\n\n\t\t\t\t\t\t\t\t\t\tfor (var k = 0; k < skin.weights[j].length; k++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar w = skin.weights[j][k];\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (w.joint === found) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbone.weights.push(w);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tconsole.warn(\"ColladaLoader: Could not find joint '\" + bone.sid + \"'.\");\n\n\t\t\t\t\t\t\t\tbone.skinningMatrix = new __WEBPACK_IMPORTED_MODULE_1_three__[\"c\" /* Matrix4 */]();\n\t\t\t\t\t\t\t\tbone.weights = [];\n\t\t\t\t\t\t}\n\t\t\t\t}\n\t\t}\n\n\t\tfunction flattenSkeleton(skeleton) {\n\n\t\t\t\tvar list = [];\n\t\t\t\tvar walk = function walk(parentid, node, list) {\n\n\t\t\t\t\t\tvar bone = {};\n\t\t\t\t\t\tbone.name = node.sid;\n\t\t\t\t\t\tbone.parent = parentid;\n\t\t\t\t\t\tbone.matrix = node.matrix;\n\t\t\t\t\t\tvar data = [new __WEBPACK_IMPORTED_MODULE_1_three__[\"d\" /* Vector3 */](), new __WEBPACK_IMPORTED_MODULE_1_three__[\"e\" /* Quaternion */](), new __WEBPACK_IMPORTED_MODULE_1_three__[\"d\" /* Vector3 */]()];\n\t\t\t\t\t\tbone.matrix.decompose(data[0], data[1], data[2]);\n\n\t\t\t\t\t\tbone.pos = [data[0].x, data[0].y, data[0].z];\n\n\t\t\t\t\t\tbone.scl = [data[2].x, data[2].y, data[2].z];\n\t\t\t\t\t\tbone.rotq = [data[1].x, data[1].y, data[1].z, data[1].w];\n\t\t\t\t\t\tlist.push(bone);\n\n\t\t\t\t\t\tfor (var i in node.nodes) {\n\n\t\t\t\t\t\t\t\twalk(node.sid, node.nodes[i], list);\n\t\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\twalk(-1, skeleton, list);\n\t\t\t\treturn list;\n\t\t}\n\n\t\tfunction skinToBindPose(geometry, skeleton, skinController) {\n\n\t\t\t\tvar bones = [];\n\t\t\t\tsetupSkeleton(skeleton, bones, -1);\n\t\t\t\tsetupSkinningMatrices(bones, skinController.skin);\n\t\t\t\tvar v = new __WEBPACK_IMPORTED_MODULE_1_three__[\"d\" /* Vector3 */]();\n\t\t\t\tvar skinned = [];\n\n\t\t\t\tfor (var i = 0; i < geometry.vertices.length; i++) {\n\n\t\t\t\t\t\tskinned.push(new __WEBPACK_IMPORTED_MODULE_1_three__[\"d\" /* Vector3 */]());\n\t\t\t\t}\n\n\t\t\t\tfor (i = 0; i < bones.length; i++) {\n\n\t\t\t\t\t\tif (bones[i].type != 'JOINT') continue;\n\n\t\t\t\t\t\tfor (var j = 0; j < bones[i].weights.length; j++) {\n\n\t\t\t\t\t\t\t\tvar w = bones[i].weights[j];\n\t\t\t\t\t\t\t\tvar vidx = w.index;\n\t\t\t\t\t\t\t\tvar weight = w.weight;\n\n\t\t\t\t\t\t\t\tvar o = geometry.vertices[vidx];\n\t\t\t\t\t\t\t\tvar s = skinned[vidx];\n\n\t\t\t\t\t\t\t\tv.x = o.x;\n\t\t\t\t\t\t\t\tv.y = o.y;\n\t\t\t\t\t\t\t\tv.z = o.z;\n\n\t\t\t\t\t\t\t\tv.applyMatrix4(bones[i].skinningMatrix);\n\n\t\t\t\t\t\t\t\ts.x += v.x * weight;\n\t\t\t\t\t\t\t\ts.y += v.y * weight;\n\t\t\t\t\t\t\t\ts.z += v.z * weight;\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfor (var i = 0; i < geometry.vertices.length; i++) {\n\n\t\t\t\t\t\tgeometry.vertices[i] = skinned[i];\n\t\t\t\t}\n\t\t}\n\n\t\tfunction applySkin(geometry, instanceCtrl, frame) {\n\n\t\t\t\tif (frame === undefined) frame = 40;\n\n\t\t\t\tvar skinController = controllers[instanceCtrl.url];\n\n\t\t\t\tif (!skinController || !skinController.skin) {\n\n\t\t\t\t\t\tconsole.log('ColladaLoader: Could not find skin controller.');\n\t\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (!instanceCtrl.skeleton || !instanceCtrl.skeleton.length) {\n\n\t\t\t\t\t\tconsole.log('ColladaLoader: Could not find the skeleton for the skin. ');\n\t\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar animationBounds = calcAnimationBounds();\n\t\t\t\tvar skeleton = visualScene.getChildById(instanceCtrl.skeleton[0], true) || visualScene.getChildBySid(instanceCtrl.skeleton[0], true);\n\n\t\t\t\tvar bonelist = flattenSkeleton(skeleton);\n\t\t\t\tvar joints = skinController.skin.joints;\n\n\t\t\t\tvar sortedbones = [];\n\t\t\t\tfor (var i = 0; i < joints.length; i++) {\n\n\t\t\t\t\t\tfor (var j = 0; j < bonelist.length; j++) {\n\n\t\t\t\t\t\t\t\tif (bonelist[j].name === joints[i]) {\n\n\t\t\t\t\t\t\t\t\t\tsortedbones[i] = bonelist[j];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfor (var i = 0; i < sortedbones.length; i++) {\n\n\t\t\t\t\t\tfor (var j = 0; j < sortedbones.length; j++) {\n\n\t\t\t\t\t\t\t\tif (sortedbones[i].parent === sortedbones[j].name) {\n\n\t\t\t\t\t\t\t\t\t\tsortedbones[i].parent = j;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvar i, j, w, vidx, weight;\n\t\t\t\tvar v = new __WEBPACK_IMPORTED_MODULE_1_three__[\"d\" /* Vector3 */](),\n\t\t\t\t    o,\n\t\t\t\t    s;\n\n\t\t\t\tfor (i = 0; i < geometry.vertices.length; i++) {\n\t\t\t\t\t\tgeometry.vertices[i].applyMatrix4(skinController.skin.bindShapeMatrix);\n\t\t\t\t}\n\n\t\t\t\tvar skinIndices = [];\n\t\t\t\tvar skinWeights = [];\n\t\t\t\tvar weights = skinController.skin.weights;\n\n\t\t\t\tfor (var i = 0; i < weights.length; i++) {\n\n\t\t\t\t\t\tvar indicies = new __WEBPACK_IMPORTED_MODULE_1_three__[\"f\" /* Vector4 */](weights[i][0] ? weights[i][0].joint : 0, weights[i][1] ? weights[i][1].joint : 0, weights[i][2] ? weights[i][2].joint : 0, weights[i][3] ? weights[i][3].joint : 0);\n\t\t\t\t\t\tvar weight = new __WEBPACK_IMPORTED_MODULE_1_three__[\"f\" /* Vector4 */](weights[i][0] ? weights[i][0].weight : 0, weights[i][1] ? weights[i][1].weight : 0, weights[i][2] ? weights[i][2].weight : 0, weights[i][3] ? weights[i][3].weight : 0);\n\n\t\t\t\t\t\tskinIndices.push(indicies);\n\t\t\t\t\t\tskinWeights.push(weight);\n\t\t\t\t}\n\n\t\t\t\tgeometry.skinIndices = skinIndices;\n\t\t\t\tgeometry.skinWeights = skinWeights;\n\t\t\t\tgeometry.bones = sortedbones;\n\n\t\t\t\tvar animationdata = { \"name\": animationBounds.ID, \"fps\": 30, \"length\": animationBounds.frames / 30, \"hierarchy\": [] };\n\n\t\t\t\tfor (var j = 0; j < sortedbones.length; j++) {\n\n\t\t\t\t\t\tanimationdata.hierarchy.push({ parent: sortedbones[j].parent, name: sortedbones[j].name, keys: [] });\n\t\t\t\t}\n\n\t\t\t\tconsole.log('ColladaLoader:', animationBounds.ID + ' has ' + sortedbones.length + ' bones.');\n\n\t\t\t\tskinToBindPose(geometry, skeleton, skinController);\n\n\t\t\t\tfor (frame = 0; frame < animationBounds.frames; frame++) {\n\n\t\t\t\t\t\tvar bones = [];\n\t\t\t\t\t\tvar skinned = [];\n\n\n\t\t\t\t\t\tsetupSkeleton(skeleton, bones, frame);\n\t\t\t\t\t\tsetupSkinningMatrices(bones, skinController.skin);\n\n\t\t\t\t\t\tfor (var i = 0; i < bones.length; i++) {\n\n\t\t\t\t\t\t\t\tfor (var j = 0; j < animationdata.hierarchy.length; j++) {\n\n\t\t\t\t\t\t\t\t\t\tif (animationdata.hierarchy[j].name === bones[i].sid) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar key = {};\n\t\t\t\t\t\t\t\t\t\t\t\tkey.time = frame / 30;\n\t\t\t\t\t\t\t\t\t\t\t\tkey.matrix = bones[i].animatrix;\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (frame === 0) bones[i].matrix = key.matrix;\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar data = [new __WEBPACK_IMPORTED_MODULE_1_three__[\"d\" /* Vector3 */](), new __WEBPACK_IMPORTED_MODULE_1_three__[\"e\" /* Quaternion */](), new __WEBPACK_IMPORTED_MODULE_1_three__[\"d\" /* Vector3 */]()];\n\t\t\t\t\t\t\t\t\t\t\t\tkey.matrix.decompose(data[0], data[1], data[2]);\n\n\t\t\t\t\t\t\t\t\t\t\t\tkey.pos = [data[0].x, data[0].y, data[0].z];\n\n\t\t\t\t\t\t\t\t\t\t\t\tkey.scl = [data[2].x, data[2].y, data[2].z];\n\t\t\t\t\t\t\t\t\t\t\t\tkey.rot = data[1];\n\n\t\t\t\t\t\t\t\t\t\t\t\tanimationdata.hierarchy[j].keys.push(key);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tgeometry.animation = animationdata;\n\t\t\t\t}\n\t\t}\n\n\t\tfunction createKinematics() {\n\n\t\t\t\tif (kinematicsModel && kinematicsModel.joints.length === 0) {\n\t\t\t\t\t\tkinematics = undefined;\n\t\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar jointMap = {};\n\n\t\t\t\tvar _addToMap = function _addToMap(jointIndex, parentVisualElement) {\n\n\t\t\t\t\t\tvar parentVisualElementId = parentVisualElement.getAttribute('id');\n\t\t\t\t\t\tvar colladaNode = visualScene.getChildById(parentVisualElementId, true);\n\t\t\t\t\t\tvar joint = kinematicsModel.joints[jointIndex];\n\n\t\t\t\t\t\tscene.traverse(function (node) {\n\n\t\t\t\t\t\t\t\tif (node.colladaId == parentVisualElementId) {\n\n\t\t\t\t\t\t\t\t\t\tjointMap[jointIndex] = {\n\t\t\t\t\t\t\t\t\t\t\t\tnode: node,\n\t\t\t\t\t\t\t\t\t\t\t\ttransforms: colladaNode.transforms,\n\t\t\t\t\t\t\t\t\t\t\t\tjoint: joint,\n\t\t\t\t\t\t\t\t\t\t\t\tposition: joint.zeroPosition\n\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t};\n\n\t\t\t\tkinematics = {\n\n\t\t\t\t\t\tjoints: kinematicsModel && kinematicsModel.joints,\n\n\t\t\t\t\t\tgetJointValue: function getJointValue(jointIndex) {\n\n\t\t\t\t\t\t\t\tvar jointData = jointMap[jointIndex];\n\n\t\t\t\t\t\t\t\tif (jointData) {\n\n\t\t\t\t\t\t\t\t\t\treturn jointData.position;\n\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\tconsole.log('getJointValue: joint ' + jointIndex + ' doesn\\'t exist');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\n\t\t\t\t\t\tsetJointValue: function setJointValue(jointIndex, value) {\n\n\t\t\t\t\t\t\t\tvar jointData = jointMap[jointIndex];\n\n\t\t\t\t\t\t\t\tif (jointData) {\n\n\t\t\t\t\t\t\t\t\t\tvar joint = jointData.joint;\n\n\t\t\t\t\t\t\t\t\t\tif (value > joint.limits.max || value < joint.limits.min) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('setJointValue: joint ' + jointIndex + ' value ' + value + ' outside of limits (min: ' + joint.limits.min + ', max: ' + joint.limits.max + ')');\n\t\t\t\t\t\t\t\t\t\t} else if (joint.static) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('setJointValue: joint ' + jointIndex + ' is static');\n\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar threejsNode = jointData.node;\n\t\t\t\t\t\t\t\t\t\t\t\tvar axis = joint.axis;\n\t\t\t\t\t\t\t\t\t\t\t\tvar transforms = jointData.transforms;\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar matrix = new __WEBPACK_IMPORTED_MODULE_1_three__[\"c\" /* Matrix4 */]();\n\t\t\t\t\t\t\t\t\t\t\t\tvar m1 = new __WEBPACK_IMPORTED_MODULE_1_three__[\"c\" /* Matrix4 */]();\n\n\t\t\t\t\t\t\t\t\t\t\t\tfor (i = 0; i < transforms.length; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar transform = transforms[i];\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (transform.sid && transform.sid.indexOf('joint' + jointIndex) !== -1) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tswitch (joint.type) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'revolute':\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmatrix.multiply(m1.makeRotationAxis(axis, __WEBPACK_IMPORTED_MODULE_1_three__[\"g\" /* Math */].degToRad(value)));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'prismatic':\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmatrix.multiply(m1.makeTranslation(axis.x * value, axis.y * value, axis.z * value));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.warn('setJointValue: unknown joint type: ' + joint.type);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tswitch (transform.type) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'matrix':\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmatrix.multiply(transform.obj);\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'translate':\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmatrix.multiply(m1.makeTranslation(transform.obj.x, transform.obj.y, transform.obj.z));\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'rotate':\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmatrix.multiply(m1.makeRotationAxis(transform.obj, transform.angle));\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar elementsFloat32Arr = matrix.elements;\n\t\t\t\t\t\t\t\t\t\t\t\tvar elements = Array.prototype.slice.call(elementsFloat32Arr);\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar elementsRowMajor = [elements[0], elements[4], elements[8], elements[12], elements[1], elements[5], elements[9], elements[13], elements[2], elements[6], elements[10], elements[14], elements[3], elements[7], elements[11], elements[15]];\n\n\t\t\t\t\t\t\t\t\t\t\t\tthreejsNode.matrix.set.apply(threejsNode.matrix, elementsRowMajor);\n\t\t\t\t\t\t\t\t\t\t\t\tthreejsNode.matrix.decompose(threejsNode.position, threejsNode.quaternion, threejsNode.scale);\n\n\t\t\t\t\t\t\t\t\t\t\t\tjointMap[jointIndex].position = value;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\tconsole.log('setJointValue: joint ' + jointIndex + ' doesn\\'t exist');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t};\n\n\t\t\t\tvar element = COLLADA.querySelector('scene instance_kinematics_scene');\n\n\t\t\t\tif (element) {\n\n\t\t\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\t\t\tvar child = element.childNodes[i];\n\n\t\t\t\t\t\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\t\t\tcase 'bind_joint_axis':\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar visualTarget = child.getAttribute('target').split('/').pop();\n\t\t\t\t\t\t\t\t\t\t\t\tvar axis = child.querySelector('axis param').textContent;\n\t\t\t\t\t\t\t\t\t\t\t\tvar jointIndex = parseInt(axis.split('joint').pop().split('.')[0]);\n\t\t\t\t\t\t\t\t\t\t\t\tvar visualTargetElement = COLLADA.querySelector('[sid=\"' + visualTarget + '\"]');\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (visualTargetElement) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar parentVisualElement = visualTargetElement.parentElement;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t_addToMap(jointIndex, parentVisualElement);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t}\n\t\t}\n\n\t\tfunction createSceneGraph(node, parent) {\n\n\t\t\t\tvar obj = new __WEBPACK_IMPORTED_MODULE_1_three__[\"h\" /* Object3D */]();\n\t\t\t\tvar skinned = false;\n\t\t\t\tvar skinController;\n\t\t\t\tvar morphController;\n\t\t\t\tvar i, j;\n\n\t\t\t\tfor (i = 0; i < node.controllers.length; i++) {\n\n\t\t\t\t\t\tvar controller = controllers[node.controllers[i].url];\n\n\t\t\t\t\t\tswitch (controller.type) {\n\n\t\t\t\t\t\t\t\tcase 'skin':\n\n\t\t\t\t\t\t\t\t\t\tif (geometries[controller.skin.source]) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar inst_geom = new InstanceGeometry();\n\n\t\t\t\t\t\t\t\t\t\t\t\tinst_geom.url = controller.skin.source;\n\t\t\t\t\t\t\t\t\t\t\t\tinst_geom.instance_material = node.controllers[i].instance_material;\n\n\t\t\t\t\t\t\t\t\t\t\t\tnode.geometries.push(inst_geom);\n\t\t\t\t\t\t\t\t\t\t\t\tskinned = true;\n\t\t\t\t\t\t\t\t\t\t\t\tskinController = node.controllers[i];\n\t\t\t\t\t\t\t\t\t\t} else if (controllers[controller.skin.source]) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar second = controllers[controller.skin.source];\n\t\t\t\t\t\t\t\t\t\t\t\tmorphController = second;\n\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (second.morph && geometries[second.morph.source]) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar inst_geom = new InstanceGeometry();\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tinst_geom.url = second.morph.source;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tinst_geom.instance_material = node.controllers[i].instance_material;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnode.geometries.push(inst_geom);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'morph':\n\n\t\t\t\t\t\t\t\t\t\tif (geometries[controller.morph.source]) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar inst_geom = new InstanceGeometry();\n\n\t\t\t\t\t\t\t\t\t\t\t\tinst_geom.url = controller.morph.source;\n\t\t\t\t\t\t\t\t\t\t\t\tinst_geom.instance_material = node.controllers[i].instance_material;\n\n\t\t\t\t\t\t\t\t\t\t\t\tnode.geometries.push(inst_geom);\n\t\t\t\t\t\t\t\t\t\t\t\tmorphController = node.controllers[i];\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tconsole.log('ColladaLoader: Morph-controller partially supported.');\n\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvar double_sided_materials = {};\n\n\t\t\t\tfor (i = 0; i < node.geometries.length; i++) {\n\n\t\t\t\t\t\tvar instance_geometry = node.geometries[i];\n\t\t\t\t\t\tvar instance_materials = instance_geometry.instance_material;\n\t\t\t\t\t\tvar geometry = geometries[instance_geometry.url];\n\t\t\t\t\t\tvar used_materials = {};\n\t\t\t\t\t\tvar used_materials_array = [];\n\t\t\t\t\t\tvar num_materials = 0;\n\t\t\t\t\t\tvar first_material;\n\n\t\t\t\t\t\tif (geometry) {\n\n\t\t\t\t\t\t\t\tif (!geometry.mesh || !geometry.mesh.primitives) continue;\n\n\t\t\t\t\t\t\t\tif (obj.name.length === 0) {\n\n\t\t\t\t\t\t\t\t\t\tobj.name = geometry.id;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (instance_materials) {\n\n\t\t\t\t\t\t\t\t\t\tfor (j = 0; j < instance_materials.length; j++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar instance_material = instance_materials[j];\n\t\t\t\t\t\t\t\t\t\t\t\tvar mat = materials[instance_material.target];\n\t\t\t\t\t\t\t\t\t\t\t\tvar effect_id = mat.instance_effect.url;\n\t\t\t\t\t\t\t\t\t\t\t\tvar shader = effects[effect_id].shader;\n\t\t\t\t\t\t\t\t\t\t\t\tvar material3js = shader.material;\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (geometry.doubleSided) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (!(instance_material.symbol in double_sided_materials)) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar _copied_material = material3js.clone();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t_copied_material.side = __WEBPACK_IMPORTED_MODULE_1_three__[\"i\" /* DoubleSide */];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdouble_sided_materials[instance_material.symbol] = _copied_material;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmaterial3js = double_sided_materials[instance_material.symbol];\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\tmaterial3js.opacity = !material3js.opacity ? 1 : material3js.opacity;\n\t\t\t\t\t\t\t\t\t\t\t\tused_materials[instance_material.symbol] = num_materials;\n\t\t\t\t\t\t\t\t\t\t\t\tused_materials_array.push(material3js);\n\t\t\t\t\t\t\t\t\t\t\t\tfirst_material = material3js;\n\t\t\t\t\t\t\t\t\t\t\t\tfirst_material.name = mat.name === null || mat.name === '' ? mat.id : mat.name;\n\t\t\t\t\t\t\t\t\t\t\t\tnum_materials++;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tvar mesh;\n\t\t\t\t\t\t\t\tvar material = first_material || new __WEBPACK_IMPORTED_MODULE_1_three__[\"j\" /* MeshLambertMaterial */]({ color: 0xdddddd, side: geometry.doubleSided ? __WEBPACK_IMPORTED_MODULE_1_three__[\"i\" /* DoubleSide */] : __WEBPACK_IMPORTED_MODULE_1_three__[\"k\" /* FrontSide */] });\n\t\t\t\t\t\t\t\tvar geom = geometry.mesh.geometry3js;\n\n\t\t\t\t\t\t\t\tif (num_materials > 1) {\n\n\t\t\t\t\t\t\t\t\t\tmaterial = new __WEBPACK_IMPORTED_MODULE_1_three__[\"l\" /* MultiMaterial */](used_materials_array);\n\n\t\t\t\t\t\t\t\t\t\tfor (j = 0; j < geom.faces.length; j++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar face = geom.faces[j];\n\t\t\t\t\t\t\t\t\t\t\t\tface.materialIndex = used_materials[face.daeMaterial];\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (skinController !== undefined) {\n\n\t\t\t\t\t\t\t\t\t\tapplySkin(geom, skinController);\n\n\t\t\t\t\t\t\t\t\t\tif (geom.morphTargets.length > 0) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tmaterial.morphTargets = true;\n\t\t\t\t\t\t\t\t\t\t\t\tmaterial.skinning = false;\n\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t\tmaterial.morphTargets = false;\n\t\t\t\t\t\t\t\t\t\t\t\tmaterial.skinning = true;\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tmesh = new __WEBPACK_IMPORTED_MODULE_1_three__[\"m\" /* SkinnedMesh */](geom, material, false);\n\n\t\t\t\t\t\t\t\t\t\tmesh.name = 'skin_' + skins.length;\n\n\t\t\t\t\t\t\t\t\t\tskins.push(mesh);\n\t\t\t\t\t\t\t\t} else if (morphController !== undefined) {\n\n\t\t\t\t\t\t\t\t\t\tcreateMorph(geom, morphController);\n\n\t\t\t\t\t\t\t\t\t\tmaterial.morphTargets = true;\n\n\t\t\t\t\t\t\t\t\t\tmesh = new __WEBPACK_IMPORTED_MODULE_1_three__[\"n\" /* Mesh */](geom, material);\n\t\t\t\t\t\t\t\t\t\tmesh.name = 'morph_' + morphs.length;\n\n\t\t\t\t\t\t\t\t\t\tmorphs.push(mesh);\n\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\tif (geom.isLineStrip === true) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tmesh = new __WEBPACK_IMPORTED_MODULE_1_three__[\"o\" /* Line */](geom);\n\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t\tmesh = new __WEBPACK_IMPORTED_MODULE_1_three__[\"n\" /* Mesh */](geom, material);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tobj.add(mesh);\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfor (i = 0; i < node.cameras.length; i++) {\n\n\t\t\t\t\t\tvar instance_camera = node.cameras[i];\n\t\t\t\t\t\tvar cparams = cameras[instance_camera.url];\n\n\t\t\t\t\t\tvar cam = new __WEBPACK_IMPORTED_MODULE_1_three__[\"p\" /* PerspectiveCamera */](cparams.yfov, parseFloat(cparams.aspect_ratio), parseFloat(cparams.znear), parseFloat(cparams.zfar));\n\n\t\t\t\t\t\tobj.add(cam);\n\t\t\t\t}\n\n\t\t\t\tfor (i = 0; i < node.lights.length; i++) {\n\n\t\t\t\t\t\tvar light = null;\n\t\t\t\t\t\tvar instance_light = node.lights[i];\n\t\t\t\t\t\tvar lparams = lights[instance_light.url];\n\n\t\t\t\t\t\tif (lparams && lparams.technique) {\n\n\t\t\t\t\t\t\t\tvar color = lparams.color.getHex();\n\t\t\t\t\t\t\t\tvar intensity = lparams.intensity;\n\t\t\t\t\t\t\t\tvar distance = lparams.distance;\n\t\t\t\t\t\t\t\tvar angle = lparams.falloff_angle;\n\n\t\t\t\t\t\t\t\tswitch (lparams.technique) {\n\n\t\t\t\t\t\t\t\t\t\tcase 'directional':\n\n\t\t\t\t\t\t\t\t\t\t\t\tlight = new __WEBPACK_IMPORTED_MODULE_1_three__[\"q\" /* DirectionalLight */](color, intensity, distance);\n\t\t\t\t\t\t\t\t\t\t\t\tlight.position.set(0, 0, 1);\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\tcase 'point':\n\n\t\t\t\t\t\t\t\t\t\t\t\tlight = new __WEBPACK_IMPORTED_MODULE_1_three__[\"r\" /* PointLight */](color, intensity, distance);\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\tcase 'spot':\n\n\t\t\t\t\t\t\t\t\t\t\t\tlight = new __WEBPACK_IMPORTED_MODULE_1_three__[\"s\" /* SpotLight */](color, intensity, distance, angle);\n\t\t\t\t\t\t\t\t\t\t\t\tlight.position.set(0, 0, 1);\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\tcase 'ambient':\n\n\t\t\t\t\t\t\t\t\t\t\t\tlight = new __WEBPACK_IMPORTED_MODULE_1_three__[\"t\" /* AmbientLight */](color);\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (light) {\n\t\t\t\t\t\t\t\tobj.add(light);\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tobj.name = node.name || node.id || \"\";\n\t\t\t\tobj.colladaId = node.id || \"\";\n\t\t\t\tobj.layer = node.layer || \"\";\n\t\t\t\tobj.matrix = node.matrix;\n\t\t\t\tobj.matrix.decompose(obj.position, obj.quaternion, obj.scale);\n\n\t\t\t\tif (options.centerGeometry && obj.geometry) {\n\n\t\t\t\t\t\tvar delta = obj.geometry.center();\n\t\t\t\t\t\tdelta.multiply(obj.scale);\n\t\t\t\t\t\tdelta.applyQuaternion(obj.quaternion);\n\n\t\t\t\t\t\tobj.position.sub(delta);\n\t\t\t\t}\n\n\t\t\t\tfor (i = 0; i < node.nodes.length; i++) {\n\n\t\t\t\t\t\tobj.add(createSceneGraph(node.nodes[i], node));\n\t\t\t\t}\n\n\t\t\t\treturn obj;\n\t\t}\n\n\t\tfunction getJointId(skin, id) {\n\n\t\t\t\tfor (var i = 0; i < skin.joints.length; i++) {\n\n\t\t\t\t\t\tif (skin.joints[i] === id) {\n\n\t\t\t\t\t\t\t\treturn i;\n\t\t\t\t\t\t}\n\t\t\t\t}\n\t\t}\n\n\t\tfunction getLibraryNode(id) {\n\n\t\t\t\tvar nodes = COLLADA.querySelectorAll('library_nodes node');\n\n\t\t\t\tfor (var i = 0; i < nodes.length; i++) {\n\n\t\t\t\t\t\tvar attObj = nodes[i].attributes.getNamedItem('id');\n\n\t\t\t\t\t\tif (attObj && attObj.value === id) {\n\n\t\t\t\t\t\t\t\treturn nodes[i];\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn undefined;\n\t\t}\n\n\t\tfunction getChannelsForNode(node) {\n\n\t\t\t\tvar channels = [];\n\t\t\t\tvar startTime = 1000000;\n\t\t\t\tvar endTime = -1000000;\n\n\t\t\t\tfor (var id in animations) {\n\n\t\t\t\t\t\tvar animation = animations[id];\n\n\t\t\t\t\t\tfor (var i = 0; i < animation.channel.length; i++) {\n\n\t\t\t\t\t\t\t\tvar channel = animation.channel[i];\n\t\t\t\t\t\t\t\tvar sampler = animation.sampler[i];\n\t\t\t\t\t\t\t\tvar id = channel.target.split('/')[0];\n\n\t\t\t\t\t\t\t\tif (id == node.id) {\n\n\t\t\t\t\t\t\t\t\t\tsampler.create();\n\t\t\t\t\t\t\t\t\t\tchannel.sampler = sampler;\n\t\t\t\t\t\t\t\t\t\tstartTime = Math.min(startTime, sampler.startTime);\n\t\t\t\t\t\t\t\t\t\tendTime = Math.max(endTime, sampler.endTime);\n\t\t\t\t\t\t\t\t\t\tchannels.push(channel);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (channels.length) {\n\n\t\t\t\t\t\tnode.startTime = startTime;\n\t\t\t\t\t\tnode.endTime = endTime;\n\t\t\t\t}\n\n\t\t\t\treturn channels;\n\t\t}\n\n\t\tfunction calcFrameDuration(node) {\n\n\t\t\t\tvar minT = 10000000;\n\n\t\t\t\tfor (var i = 0; i < node.channels.length; i++) {\n\n\t\t\t\t\t\tvar sampler = node.channels[i].sampler;\n\n\t\t\t\t\t\tfor (var j = 0; j < sampler.input.length - 1; j++) {\n\n\t\t\t\t\t\t\t\tvar t0 = sampler.input[j];\n\t\t\t\t\t\t\t\tvar t1 = sampler.input[j + 1];\n\t\t\t\t\t\t\t\tminT = Math.min(minT, t1 - t0);\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn minT;\n\t\t}\n\n\t\tfunction calcMatrixAt(node, t) {\n\n\t\t\t\tvar animated = {};\n\n\t\t\t\tvar i, j;\n\n\t\t\t\tfor (i = 0; i < node.channels.length; i++) {\n\n\t\t\t\t\t\tvar channel = node.channels[i];\n\t\t\t\t\t\tanimated[channel.sid] = channel;\n\t\t\t\t}\n\n\t\t\t\tvar matrix = new __WEBPACK_IMPORTED_MODULE_1_three__[\"c\" /* Matrix4 */]();\n\n\t\t\t\tfor (i = 0; i < node.transforms.length; i++) {\n\n\t\t\t\t\t\tvar transform = node.transforms[i];\n\t\t\t\t\t\tvar channel = animated[transform.sid];\n\n\t\t\t\t\t\tif (channel !== undefined) {\n\n\t\t\t\t\t\t\t\tvar sampler = channel.sampler;\n\t\t\t\t\t\t\t\tvar value;\n\n\t\t\t\t\t\t\t\tfor (j = 0; j < sampler.input.length - 1; j++) {\n\n\t\t\t\t\t\t\t\t\t\tif (sampler.input[j + 1] > t) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvalue = sampler.output[j];\n\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (value !== undefined) {\n\n\t\t\t\t\t\t\t\t\t\tif (value instanceof __WEBPACK_IMPORTED_MODULE_1_three__[\"c\" /* Matrix4 */]) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tmatrix.multiplyMatrices(matrix, value);\n\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t\tmatrix.multiplyMatrices(matrix, transform.matrix);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\tmatrix.multiplyMatrices(matrix, transform.matrix);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tmatrix.multiplyMatrices(matrix, transform.matrix);\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn matrix;\n\t\t}\n\n\t\tfunction bakeAnimations(node) {\n\n\t\t\t\tif (node.channels && node.channels.length) {\n\n\t\t\t\t\t\tvar keys = [],\n\t\t\t\t\t\t    sids = [];\n\n\t\t\t\t\t\tfor (var i = 0, il = node.channels.length; i < il; i++) {\n\n\t\t\t\t\t\t\t\tvar channel = node.channels[i],\n\t\t\t\t\t\t\t\t    fullSid = channel.fullSid,\n\t\t\t\t\t\t\t\t    sampler = channel.sampler,\n\t\t\t\t\t\t\t\t    input = sampler.input,\n\t\t\t\t\t\t\t\t    transform = node.getTransformBySid(channel.sid),\n\t\t\t\t\t\t\t\t    member;\n\n\t\t\t\t\t\t\t\tif (channel.arrIndices) {\n\n\t\t\t\t\t\t\t\t\t\tmember = [];\n\n\t\t\t\t\t\t\t\t\t\tfor (var j = 0, jl = channel.arrIndices.length; j < jl; j++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tmember[j] = getConvertedIndex(channel.arrIndices[j]);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\tmember = getConvertedMember(channel.member);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (transform) {\n\n\t\t\t\t\t\t\t\t\t\tif (sids.indexOf(fullSid) === -1) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tsids.push(fullSid);\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tfor (var j = 0, jl = input.length; j < jl; j++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar time = input[j],\n\t\t\t\t\t\t\t\t\t\t\t\t    data = sampler.getData(transform.type, j, member),\n\t\t\t\t\t\t\t\t\t\t\t\t    key = findKey(keys, time);\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (!key) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey = new Key(time);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar timeNdx = findTimeNdx(keys, time);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tkeys.splice(timeNdx === -1 ? keys.length : timeNdx, 0, key);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\tkey.addTarget(fullSid, transform, member, data);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\tconsole.log('Could not find transform \"' + channel.sid + '\" in node ' + node.id);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfor (var i = 0; i < sids.length; i++) {\n\n\t\t\t\t\t\t\t\tvar sid = sids[i];\n\n\t\t\t\t\t\t\t\tfor (var j = 0; j < keys.length; j++) {\n\n\t\t\t\t\t\t\t\t\t\tvar key = keys[j];\n\n\t\t\t\t\t\t\t\t\t\tif (!key.hasTarget(sid)) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tinterpolateKeys(keys, key, j, sid);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tnode.keys = keys;\n\t\t\t\t\t\tnode.sids = sids;\n\t\t\t\t}\n\t\t}\n\n\t\tfunction findKey(keys, time) {\n\n\t\t\t\tvar retVal = null;\n\n\t\t\t\tfor (var i = 0, il = keys.length; i < il && retVal === null; i++) {\n\n\t\t\t\t\t\tvar key = keys[i];\n\n\t\t\t\t\t\tif (key.time === time) {\n\n\t\t\t\t\t\t\t\tretVal = key;\n\t\t\t\t\t\t} else if (key.time > time) {\n\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn retVal;\n\t\t}\n\n\t\tfunction findTimeNdx(keys, time) {\n\n\t\t\t\tvar ndx = -1;\n\n\t\t\t\tfor (var i = 0, il = keys.length; i < il && ndx === -1; i++) {\n\n\t\t\t\t\t\tvar key = keys[i];\n\n\t\t\t\t\t\tif (key.time >= time) {\n\n\t\t\t\t\t\t\t\tndx = i;\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn ndx;\n\t\t}\n\n\t\tfunction interpolateKeys(keys, key, ndx, fullSid) {\n\n\t\t\t\tvar prevKey = getPrevKeyWith(keys, fullSid, ndx ? ndx - 1 : 0),\n\t\t\t\t    nextKey = getNextKeyWith(keys, fullSid, ndx + 1);\n\n\t\t\t\tif (prevKey && nextKey) {\n\n\t\t\t\t\t\tvar scale = (key.time - prevKey.time) / (nextKey.time - prevKey.time),\n\t\t\t\t\t\t    prevTarget = prevKey.getTarget(fullSid),\n\t\t\t\t\t\t    nextData = nextKey.getTarget(fullSid).data,\n\t\t\t\t\t\t    prevData = prevTarget.data,\n\t\t\t\t\t\t    data;\n\n\t\t\t\t\t\tif (prevTarget.type === 'matrix') {\n\n\t\t\t\t\t\t\t\tdata = prevData;\n\t\t\t\t\t\t} else if (prevData.length) {\n\n\t\t\t\t\t\t\t\tdata = [];\n\n\t\t\t\t\t\t\t\tfor (var i = 0; i < prevData.length; ++i) {\n\n\t\t\t\t\t\t\t\t\t\tdata[i] = prevData[i] + (nextData[i] - prevData[i]) * scale;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tdata = prevData + (nextData - prevData) * scale;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tkey.addTarget(fullSid, prevTarget.transform, prevTarget.member, data);\n\t\t\t\t}\n\t\t}\n\n\t\tfunction getNextKeyWith(keys, fullSid, ndx) {\n\n\t\t\t\tfor (; ndx < keys.length; ndx++) {\n\n\t\t\t\t\t\tvar key = keys[ndx];\n\n\t\t\t\t\t\tif (key.hasTarget(fullSid)) {\n\n\t\t\t\t\t\t\t\treturn key;\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\t\t}\n\n\t\tfunction getPrevKeyWith(keys, fullSid, ndx) {\n\n\t\t\t\tndx = ndx >= 0 ? ndx : ndx + keys.length;\n\n\t\t\t\tfor (; ndx >= 0; ndx--) {\n\n\t\t\t\t\t\tvar key = keys[ndx];\n\n\t\t\t\t\t\tif (key.hasTarget(fullSid)) {\n\n\t\t\t\t\t\t\t\treturn key;\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\t\t}\n\n\t\tfunction _Image() {\n\n\t\t\t\tthis.id = \"\";\n\t\t\t\tthis.init_from = \"\";\n\t\t}\n\n\t\t_Image.prototype.parse = function (element) {\n\n\t\t\t\tthis.id = element.getAttribute('id');\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tvar child = element.childNodes[i];\n\n\t\t\t\t\t\tif (child.nodeName === 'init_from') {\n\n\t\t\t\t\t\t\t\tthis.init_from = child.textContent;\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn this;\n\t\t};\n\n\t\tfunction Controller() {\n\n\t\t\t\tthis.id = \"\";\n\t\t\t\tthis.name = \"\";\n\t\t\t\tthis.type = \"\";\n\t\t\t\tthis.skin = null;\n\t\t\t\tthis.morph = null;\n\t\t}\n\n\t\tController.prototype.parse = function (element) {\n\n\t\t\t\tthis.id = element.getAttribute('id');\n\t\t\t\tthis.name = element.getAttribute('name');\n\t\t\t\tthis.type = \"none\";\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tvar child = element.childNodes[i];\n\n\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\tcase 'skin':\n\n\t\t\t\t\t\t\t\t\t\tthis.skin = new Skin().parse(child);\n\t\t\t\t\t\t\t\t\t\tthis.type = child.nodeName;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'morph':\n\n\t\t\t\t\t\t\t\t\t\tthis.morph = new Morph().parse(child);\n\t\t\t\t\t\t\t\t\t\tthis.type = child.nodeName;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn this;\n\t\t};\n\n\t\tfunction Morph() {\n\n\t\t\t\tthis.method = null;\n\t\t\t\tthis.source = null;\n\t\t\t\tthis.targets = null;\n\t\t\t\tthis.weights = null;\n\t\t}\n\n\t\tMorph.prototype.parse = function (element) {\n\n\t\t\t\tvar sources = {};\n\t\t\t\tvar inputs = [];\n\t\t\t\tvar i;\n\n\t\t\t\tthis.method = element.getAttribute('method');\n\t\t\t\tthis.source = element.getAttribute('source').replace(/^#/, '');\n\n\t\t\t\tfor (i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tvar child = element.childNodes[i];\n\t\t\t\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\tcase 'source':\n\n\t\t\t\t\t\t\t\t\t\tvar source = new Source().parse(child);\n\t\t\t\t\t\t\t\t\t\tsources[source.id] = source;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'targets':\n\n\t\t\t\t\t\t\t\t\t\tinputs = this.parseInputs(child);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\t\t\t\tconsole.log(child.nodeName);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfor (i = 0; i < inputs.length; i++) {\n\n\t\t\t\t\t\tvar input = inputs[i];\n\t\t\t\t\t\tvar source = sources[input.source];\n\n\t\t\t\t\t\tswitch (input.semantic) {\n\n\t\t\t\t\t\t\t\tcase 'MORPH_TARGET':\n\n\t\t\t\t\t\t\t\t\t\tthis.targets = source.read();\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'MORPH_WEIGHT':\n\n\t\t\t\t\t\t\t\t\t\tthis.weights = source.read();\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn this;\n\t\t};\n\n\t\tMorph.prototype.parseInputs = function (element) {\n\n\t\t\t\tvar inputs = [];\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tvar child = element.childNodes[i];\n\t\t\t\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\tcase 'input':\n\n\t\t\t\t\t\t\t\t\t\tinputs.push(new Input().parse(child));\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn inputs;\n\t\t};\n\n\t\tfunction Skin() {\n\n\t\t\t\tthis.source = \"\";\n\t\t\t\tthis.bindShapeMatrix = null;\n\t\t\t\tthis.invBindMatrices = [];\n\t\t\t\tthis.joints = [];\n\t\t\t\tthis.weights = [];\n\t\t}\n\n\t\tSkin.prototype.parse = function (element) {\n\n\t\t\t\tvar sources = {};\n\t\t\t\tvar joints, weights;\n\n\t\t\t\tthis.source = element.getAttribute('source').replace(/^#/, '');\n\t\t\t\tthis.invBindMatrices = [];\n\t\t\t\tthis.joints = [];\n\t\t\t\tthis.weights = [];\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tvar child = element.childNodes[i];\n\t\t\t\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\tcase 'bind_shape_matrix':\n\n\t\t\t\t\t\t\t\t\t\tvar f = _floats(child.textContent);\n\t\t\t\t\t\t\t\t\t\tthis.bindShapeMatrix = getConvertedMat4(f);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'source':\n\n\t\t\t\t\t\t\t\t\t\tvar src = new Source().parse(child);\n\t\t\t\t\t\t\t\t\t\tsources[src.id] = src;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'joints':\n\n\t\t\t\t\t\t\t\t\t\tjoints = child;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'vertex_weights':\n\n\t\t\t\t\t\t\t\t\t\tweights = child;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\t\t\t\tconsole.log(child.nodeName);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.parseJoints(joints, sources);\n\t\t\t\tthis.parseWeights(weights, sources);\n\n\t\t\t\treturn this;\n\t\t};\n\n\t\tSkin.prototype.parseJoints = function (element, sources) {\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tvar child = element.childNodes[i];\n\t\t\t\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\tcase 'input':\n\n\t\t\t\t\t\t\t\t\t\tvar input = new Input().parse(child);\n\t\t\t\t\t\t\t\t\t\tvar source = sources[input.source];\n\n\t\t\t\t\t\t\t\t\t\tif (input.semantic === 'JOINT') {\n\n\t\t\t\t\t\t\t\t\t\t\t\tthis.joints = source.read();\n\t\t\t\t\t\t\t\t\t\t} else if (input.semantic === 'INV_BIND_MATRIX') {\n\n\t\t\t\t\t\t\t\t\t\t\t\tthis.invBindMatrices = source.read();\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t}\n\t\t};\n\n\t\tSkin.prototype.parseWeights = function (element, sources) {\n\n\t\t\t\tvar v,\n\t\t\t\t    vcount,\n\t\t\t\t    inputs = [];\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tvar child = element.childNodes[i];\n\t\t\t\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\tcase 'input':\n\n\t\t\t\t\t\t\t\t\t\tinputs.push(new Input().parse(child));\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'v':\n\n\t\t\t\t\t\t\t\t\t\tv = _ints(child.textContent);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'vcount':\n\n\t\t\t\t\t\t\t\t\t\tvcount = _ints(child.textContent);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvar index = 0;\n\n\t\t\t\tfor (var i = 0; i < vcount.length; i++) {\n\n\t\t\t\t\t\tvar numBones = vcount[i];\n\t\t\t\t\t\tvar vertex_weights = [];\n\n\t\t\t\t\t\tfor (var j = 0; j < numBones; j++) {\n\n\t\t\t\t\t\t\t\tvar influence = {};\n\n\t\t\t\t\t\t\t\tfor (var k = 0; k < inputs.length; k++) {\n\n\t\t\t\t\t\t\t\t\t\tvar input = inputs[k];\n\t\t\t\t\t\t\t\t\t\tvar value = v[index + input.offset];\n\n\t\t\t\t\t\t\t\t\t\tswitch (input.semantic) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tcase 'JOINT':\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tinfluence.joint = value;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\tcase 'WEIGHT':\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tinfluence.weight = sources[input.source].data[value];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tvertex_weights.push(influence);\n\t\t\t\t\t\t\t\tindex += inputs.length;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfor (var j = 0; j < vertex_weights.length; j++) {\n\n\t\t\t\t\t\t\t\tvertex_weights[j].index = i;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.weights.push(vertex_weights);\n\t\t\t\t}\n\t\t};\n\n\t\tfunction VisualScene() {\n\n\t\t\t\tthis.id = \"\";\n\t\t\t\tthis.name = \"\";\n\t\t\t\tthis.nodes = [];\n\t\t\t\tthis.scene = new __WEBPACK_IMPORTED_MODULE_1_three__[\"b\" /* Group */]();\n\t\t}\n\n\t\tVisualScene.prototype.getChildById = function (id, recursive) {\n\n\t\t\t\tfor (var i = 0; i < this.nodes.length; i++) {\n\n\t\t\t\t\t\tvar node = this.nodes[i].getChildById(id, recursive);\n\n\t\t\t\t\t\tif (node) {\n\n\t\t\t\t\t\t\t\treturn node;\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\t\t};\n\n\t\tVisualScene.prototype.getChildBySid = function (sid, recursive) {\n\n\t\t\t\tfor (var i = 0; i < this.nodes.length; i++) {\n\n\t\t\t\t\t\tvar node = this.nodes[i].getChildBySid(sid, recursive);\n\n\t\t\t\t\t\tif (node) {\n\n\t\t\t\t\t\t\t\treturn node;\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\t\t};\n\n\t\tVisualScene.prototype.parse = function (element) {\n\n\t\t\t\tthis.id = element.getAttribute('id');\n\t\t\t\tthis.name = element.getAttribute('name');\n\t\t\t\tthis.nodes = [];\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tvar child = element.childNodes[i];\n\t\t\t\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\tcase 'node':\n\n\t\t\t\t\t\t\t\t\t\tthis.nodes.push(new Node().parse(child));\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn this;\n\t\t};\n\n\t\tfunction Node() {\n\n\t\t\t\tthis.id = \"\";\n\t\t\t\tthis.name = \"\";\n\t\t\t\tthis.sid = \"\";\n\t\t\t\tthis.nodes = [];\n\t\t\t\tthis.controllers = [];\n\t\t\t\tthis.transforms = [];\n\t\t\t\tthis.geometries = [];\n\t\t\t\tthis.channels = [];\n\t\t\t\tthis.matrix = new __WEBPACK_IMPORTED_MODULE_1_three__[\"c\" /* Matrix4 */]();\n\t\t}\n\n\t\tNode.prototype.getChannelForTransform = function (transformSid) {\n\n\t\t\t\tfor (var i = 0; i < this.channels.length; i++) {\n\n\t\t\t\t\t\tvar channel = this.channels[i];\n\t\t\t\t\t\tvar parts = channel.target.split('/');\n\t\t\t\t\t\tvar id = parts.shift();\n\t\t\t\t\t\tvar sid = parts.shift();\n\t\t\t\t\t\tvar dotSyntax = sid.indexOf(\".\") >= 0;\n\t\t\t\t\t\tvar arrSyntax = sid.indexOf(\"(\") >= 0;\n\t\t\t\t\t\tvar arrIndices;\n\n\t\t\t\t\t\tif (dotSyntax) {\n\n\t\t\t\t\t\t\t\tparts = sid.split(\".\");\n\t\t\t\t\t\t\t\tsid = parts.shift();\n\t\t\t\t\t\t} else if (arrSyntax) {\n\n\t\t\t\t\t\t\t\tarrIndices = sid.split(\"(\");\n\t\t\t\t\t\t\t\tsid = arrIndices.shift();\n\n\t\t\t\t\t\t\t\tfor (var j = 0; j < arrIndices.length; j++) {\n\n\t\t\t\t\t\t\t\t\t\tarrIndices[j] = parseInt(arrIndices[j].replace(/\\)/, ''));\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (sid === transformSid) {\n\n\t\t\t\t\t\t\t\tchannel.info = { sid: sid, dotSyntax: dotSyntax, arrSyntax: arrSyntax, arrIndices: arrIndices };\n\t\t\t\t\t\t\t\treturn channel;\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\t\t};\n\n\t\tNode.prototype.getChildById = function (id, recursive) {\n\n\t\t\t\tif (this.id === id) {\n\n\t\t\t\t\t\treturn this;\n\t\t\t\t}\n\n\t\t\t\tif (recursive) {\n\n\t\t\t\t\t\tfor (var i = 0; i < this.nodes.length; i++) {\n\n\t\t\t\t\t\t\t\tvar n = this.nodes[i].getChildById(id, recursive);\n\n\t\t\t\t\t\t\t\tif (n) {\n\n\t\t\t\t\t\t\t\t\t\treturn n;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\t\t};\n\n\t\tNode.prototype.getChildBySid = function (sid, recursive) {\n\n\t\t\t\tif (this.sid === sid) {\n\n\t\t\t\t\t\treturn this;\n\t\t\t\t}\n\n\t\t\t\tif (recursive) {\n\n\t\t\t\t\t\tfor (var i = 0; i < this.nodes.length; i++) {\n\n\t\t\t\t\t\t\t\tvar n = this.nodes[i].getChildBySid(sid, recursive);\n\n\t\t\t\t\t\t\t\tif (n) {\n\n\t\t\t\t\t\t\t\t\t\treturn n;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\t\t};\n\n\t\tNode.prototype.getTransformBySid = function (sid) {\n\n\t\t\t\tfor (var i = 0; i < this.transforms.length; i++) {\n\n\t\t\t\t\t\tif (this.transforms[i].sid === sid) return this.transforms[i];\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\t\t};\n\n\t\tNode.prototype.parse = function (element) {\n\n\t\t\t\tvar url;\n\n\t\t\t\tthis.id = element.getAttribute('id');\n\t\t\t\tthis.sid = element.getAttribute('sid');\n\t\t\t\tthis.name = element.getAttribute('name');\n\t\t\t\tthis.type = element.getAttribute('type');\n\t\t\t\tthis.layer = element.getAttribute('layer');\n\n\t\t\t\tthis.type = this.type === 'JOINT' ? this.type : 'NODE';\n\n\t\t\t\tthis.nodes = [];\n\t\t\t\tthis.transforms = [];\n\t\t\t\tthis.geometries = [];\n\t\t\t\tthis.cameras = [];\n\t\t\t\tthis.lights = [];\n\t\t\t\tthis.controllers = [];\n\t\t\t\tthis.matrix = new __WEBPACK_IMPORTED_MODULE_1_three__[\"c\" /* Matrix4 */]();\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tvar child = element.childNodes[i];\n\t\t\t\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\tcase 'node':\n\n\t\t\t\t\t\t\t\t\t\tthis.nodes.push(new Node().parse(child));\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'instance_camera':\n\n\t\t\t\t\t\t\t\t\t\tthis.cameras.push(new InstanceCamera().parse(child));\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'instance_controller':\n\n\t\t\t\t\t\t\t\t\t\tthis.controllers.push(new InstanceController().parse(child));\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'instance_geometry':\n\n\t\t\t\t\t\t\t\t\t\tthis.geometries.push(new InstanceGeometry().parse(child));\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'instance_light':\n\n\t\t\t\t\t\t\t\t\t\tthis.lights.push(new InstanceLight().parse(child));\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'instance_node':\n\n\t\t\t\t\t\t\t\t\t\turl = child.getAttribute('url').replace(/^#/, '');\n\t\t\t\t\t\t\t\t\t\tvar iNode = getLibraryNode(url);\n\n\t\t\t\t\t\t\t\t\t\tif (iNode) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tthis.nodes.push(new Node().parse(iNode));\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'rotate':\n\t\t\t\t\t\t\t\tcase 'translate':\n\t\t\t\t\t\t\t\tcase 'scale':\n\t\t\t\t\t\t\t\tcase 'matrix':\n\t\t\t\t\t\t\t\tcase 'lookat':\n\t\t\t\t\t\t\t\tcase 'skew':\n\n\t\t\t\t\t\t\t\t\t\tthis.transforms.push(new Transform().parse(child));\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'extra':\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\t\t\t\tconsole.log(child.nodeName);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.channels = getChannelsForNode(this);\n\t\t\t\tbakeAnimations(this);\n\n\t\t\t\tthis.updateMatrix();\n\n\t\t\t\treturn this;\n\t\t};\n\n\t\tNode.prototype.updateMatrix = function () {\n\n\t\t\t\tthis.matrix.identity();\n\n\t\t\t\tfor (var i = 0; i < this.transforms.length; i++) {\n\n\t\t\t\t\t\tthis.transforms[i].apply(this.matrix);\n\t\t\t\t}\n\t\t};\n\n\t\tfunction Transform() {\n\n\t\t\t\tthis.sid = \"\";\n\t\t\t\tthis.type = \"\";\n\t\t\t\tthis.data = [];\n\t\t\t\tthis.obj = null;\n\t\t}\n\n\t\tTransform.prototype.parse = function (element) {\n\n\t\t\t\tthis.sid = element.getAttribute('sid');\n\t\t\t\tthis.type = element.nodeName;\n\t\t\t\tthis.data = _floats(element.textContent);\n\t\t\t\tthis.convert();\n\n\t\t\t\treturn this;\n\t\t};\n\n\t\tTransform.prototype.convert = function () {\n\n\t\t\t\tswitch (this.type) {\n\n\t\t\t\t\t\tcase 'matrix':\n\n\t\t\t\t\t\t\t\tthis.obj = getConvertedMat4(this.data);\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'rotate':\n\n\t\t\t\t\t\t\t\tthis.angle = __WEBPACK_IMPORTED_MODULE_1_three__[\"g\" /* Math */].degToRad(this.data[3]);\n\n\t\t\t\t\t\tcase 'translate':\n\n\t\t\t\t\t\t\t\tfixCoords(this.data, -1);\n\t\t\t\t\t\t\t\tthis.obj = new __WEBPACK_IMPORTED_MODULE_1_three__[\"d\" /* Vector3 */](this.data[0], this.data[1], this.data[2]);\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'scale':\n\n\t\t\t\t\t\t\t\tfixCoords(this.data, 1);\n\t\t\t\t\t\t\t\tthis.obj = new __WEBPACK_IMPORTED_MODULE_1_three__[\"d\" /* Vector3 */](this.data[0], this.data[1], this.data[2]);\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tconsole.log('Can not convert Transform of type ' + this.type);\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\t\t};\n\n\t\tTransform.prototype.apply = function () {\n\n\t\t\t\tvar m1 = new __WEBPACK_IMPORTED_MODULE_1_three__[\"c\" /* Matrix4 */]();\n\n\t\t\t\treturn function (matrix) {\n\n\t\t\t\t\t\tswitch (this.type) {\n\n\t\t\t\t\t\t\t\tcase 'matrix':\n\n\t\t\t\t\t\t\t\t\t\tmatrix.multiply(this.obj);\n\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'translate':\n\n\t\t\t\t\t\t\t\t\t\tmatrix.multiply(m1.makeTranslation(this.obj.x, this.obj.y, this.obj.z));\n\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'rotate':\n\n\t\t\t\t\t\t\t\t\t\tmatrix.multiply(m1.makeRotationAxis(this.obj, this.angle));\n\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'scale':\n\n\t\t\t\t\t\t\t\t\t\tmatrix.scale(this.obj);\n\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t};\n\t\t}();\n\n\t\tTransform.prototype.update = function (data, member) {\n\n\t\t\t\tvar members = ['X', 'Y', 'Z', 'ANGLE'];\n\n\t\t\t\tswitch (this.type) {\n\n\t\t\t\t\t\tcase 'matrix':\n\n\t\t\t\t\t\t\t\tif (!member) {\n\n\t\t\t\t\t\t\t\t\t\tthis.obj.copy(data);\n\t\t\t\t\t\t\t\t} else if (member.length === 1) {\n\n\t\t\t\t\t\t\t\t\t\tswitch (member[0]) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tcase 0:\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.obj.n11 = data[0];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.obj.n21 = data[1];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.obj.n31 = data[2];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.obj.n41 = data[3];\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\tcase 1:\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.obj.n12 = data[0];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.obj.n22 = data[1];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.obj.n32 = data[2];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.obj.n42 = data[3];\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\tcase 2:\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.obj.n13 = data[0];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.obj.n23 = data[1];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.obj.n33 = data[2];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.obj.n43 = data[3];\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\tcase 3:\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.obj.n14 = data[0];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.obj.n24 = data[1];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.obj.n34 = data[2];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.obj.n44 = data[3];\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else if (member.length === 2) {\n\n\t\t\t\t\t\t\t\t\t\tvar propName = 'n' + (member[0] + 1) + (member[1] + 1);\n\t\t\t\t\t\t\t\t\t\tthis.obj[propName] = data;\n\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\tconsole.log('Incorrect addressing of matrix in transform.');\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'translate':\n\t\t\t\t\t\tcase 'scale':\n\n\t\t\t\t\t\t\t\tif (Object.prototype.toString.call(member) === '[object Array]') {\n\n\t\t\t\t\t\t\t\t\t\tmember = members[member[0]];\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tswitch (member) {\n\n\t\t\t\t\t\t\t\t\t\tcase 'X':\n\n\t\t\t\t\t\t\t\t\t\t\t\tthis.obj.x = data;\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\tcase 'Y':\n\n\t\t\t\t\t\t\t\t\t\t\t\tthis.obj.y = data;\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\tcase 'Z':\n\n\t\t\t\t\t\t\t\t\t\t\t\tthis.obj.z = data;\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\t\t\t\t\t\tthis.obj.x = data[0];\n\t\t\t\t\t\t\t\t\t\t\t\tthis.obj.y = data[1];\n\t\t\t\t\t\t\t\t\t\t\t\tthis.obj.z = data[2];\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'rotate':\n\n\t\t\t\t\t\t\t\tif (Object.prototype.toString.call(member) === '[object Array]') {\n\n\t\t\t\t\t\t\t\t\t\tmember = members[member[0]];\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tswitch (member) {\n\n\t\t\t\t\t\t\t\t\t\tcase 'X':\n\n\t\t\t\t\t\t\t\t\t\t\t\tthis.obj.x = data;\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\tcase 'Y':\n\n\t\t\t\t\t\t\t\t\t\t\t\tthis.obj.y = data;\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\tcase 'Z':\n\n\t\t\t\t\t\t\t\t\t\t\t\tthis.obj.z = data;\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\tcase 'ANGLE':\n\n\t\t\t\t\t\t\t\t\t\t\t\tthis.angle = __WEBPACK_IMPORTED_MODULE_1_three__[\"g\" /* Math */].degToRad(data);\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\t\t\t\t\t\tthis.obj.x = data[0];\n\t\t\t\t\t\t\t\t\t\t\t\tthis.obj.y = data[1];\n\t\t\t\t\t\t\t\t\t\t\t\tthis.obj.z = data[2];\n\t\t\t\t\t\t\t\t\t\t\t\tthis.angle = __WEBPACK_IMPORTED_MODULE_1_three__[\"g\" /* Math */].degToRad(data[3]);\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\t\t};\n\n\t\tfunction InstanceController() {\n\n\t\t\t\tthis.url = \"\";\n\t\t\t\tthis.skeleton = [];\n\t\t\t\tthis.instance_material = [];\n\t\t}\n\n\t\tInstanceController.prototype.parse = function (element) {\n\n\t\t\t\tthis.url = element.getAttribute('url').replace(/^#/, '');\n\t\t\t\tthis.skeleton = [];\n\t\t\t\tthis.instance_material = [];\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tvar child = element.childNodes[i];\n\t\t\t\t\t\tif (child.nodeType !== 1) continue;\n\n\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\tcase 'skeleton':\n\n\t\t\t\t\t\t\t\t\t\tthis.skeleton.push(child.textContent.replace(/^#/, ''));\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'bind_material':\n\n\t\t\t\t\t\t\t\t\t\tvar instances = child.querySelectorAll('instance_material');\n\n\t\t\t\t\t\t\t\t\t\tfor (var j = 0; j < instances.length; j++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar instance = instances[j];\n\t\t\t\t\t\t\t\t\t\t\t\tthis.instance_material.push(new InstanceMaterial().parse(instance));\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'extra':\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn this;\n\t\t};\n\n\t\tfunction InstanceMaterial() {\n\n\t\t\t\tthis.symbol = \"\";\n\t\t\t\tthis.target = \"\";\n\t\t}\n\n\t\tInstanceMaterial.prototype.parse = function (element) {\n\n\t\t\t\tthis.symbol = element.getAttribute('symbol');\n\t\t\t\tthis.target = element.getAttribute('target').replace(/^#/, '');\n\t\t\t\treturn this;\n\t\t};\n\n\t\tfunction InstanceGeometry() {\n\n\t\t\t\tthis.url = \"\";\n\t\t\t\tthis.instance_material = [];\n\t\t}\n\n\t\tInstanceGeometry.prototype.parse = function (element) {\n\n\t\t\t\tthis.url = element.getAttribute('url').replace(/^#/, '');\n\t\t\t\tthis.instance_material = [];\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tvar child = element.childNodes[i];\n\t\t\t\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\t\t\t\tif (child.nodeName === 'bind_material') {\n\n\t\t\t\t\t\t\t\tvar instances = child.querySelectorAll('instance_material');\n\n\t\t\t\t\t\t\t\tfor (var j = 0; j < instances.length; j++) {\n\n\t\t\t\t\t\t\t\t\t\tvar instance = instances[j];\n\t\t\t\t\t\t\t\t\t\tthis.instance_material.push(new InstanceMaterial().parse(instance));\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn this;\n\t\t};\n\n\t\tfunction Geometry() {\n\n\t\t\t\tthis.id = \"\";\n\t\t\t\tthis.mesh = null;\n\t\t}\n\n\t\tGeometry.prototype.parse = function (element) {\n\n\t\t\t\tthis.id = element.getAttribute('id');\n\n\t\t\t\textractDoubleSided(this, element);\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tvar child = element.childNodes[i];\n\n\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\tcase 'mesh':\n\n\t\t\t\t\t\t\t\t\t\tthis.mesh = new Mesh(this).parse(child);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'extra':\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn this;\n\t\t};\n\n\t\tfunction Mesh(geometry) {\n\n\t\t\t\tthis.geometry = geometry.id;\n\t\t\t\tthis.primitives = [];\n\t\t\t\tthis.vertices = null;\n\t\t\t\tthis.geometry3js = null;\n\t\t}\n\n\t\tMesh.prototype.parse = function (element) {\n\n\t\t\t\tthis.primitives = [];\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tvar child = element.childNodes[i];\n\n\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\tcase 'source':\n\n\t\t\t\t\t\t\t\t\t\t_source(child);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'vertices':\n\n\t\t\t\t\t\t\t\t\t\tthis.vertices = new Vertices().parse(child);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'linestrips':\n\n\t\t\t\t\t\t\t\t\t\tthis.primitives.push(new LineStrips().parse(child));\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'triangles':\n\n\t\t\t\t\t\t\t\t\t\tthis.primitives.push(new Triangles().parse(child));\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'polygons':\n\n\t\t\t\t\t\t\t\t\t\tthis.primitives.push(new Polygons().parse(child));\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'polylist':\n\n\t\t\t\t\t\t\t\t\t\tthis.primitives.push(new Polylist().parse(child));\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.geometry3js = new __WEBPACK_IMPORTED_MODULE_1_three__[\"u\" /* Geometry */]();\n\n\t\t\t\tif (this.vertices === null) {\n\n\t\t\t\t\t\treturn this;\n\t\t\t\t}\n\n\t\t\t\tvar vertexData = sources[this.vertices.input['POSITION'].source].data;\n\n\t\t\t\tfor (var i = 0; i < vertexData.length; i += 3) {\n\n\t\t\t\t\t\tthis.geometry3js.vertices.push(getConvertedVec3(vertexData, i).clone());\n\t\t\t\t}\n\n\t\t\t\tfor (var i = 0; i < this.primitives.length; i++) {\n\n\t\t\t\t\t\tvar primitive = this.primitives[i];\n\t\t\t\t\t\tprimitive.setVertices(this.vertices);\n\t\t\t\t\t\tthis.handlePrimitive(primitive, this.geometry3js);\n\t\t\t\t}\n\n\t\t\t\tif (this.geometry3js.calcNormals) {\n\n\t\t\t\t\t\tthis.geometry3js.computeVertexNormals();\n\t\t\t\t\t\tdelete this.geometry3js.calcNormals;\n\t\t\t\t}\n\n\t\t\t\treturn this;\n\t\t};\n\n\t\tMesh.prototype.handlePrimitive = function (primitive, geom) {\n\n\t\t\t\tif (primitive instanceof LineStrips) {\n\n\t\t\t\t\t\tgeom.isLineStrip = true;\n\t\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar j,\n\t\t\t\t    k,\n\t\t\t\t    pList = primitive.p,\n\t\t\t\t    inputs = primitive.inputs;\n\t\t\t\tvar input, index, idx32;\n\t\t\t\tvar source, numParams;\n\t\t\t\tvar vcount,\n\t\t\t\t    vcIndex = 0,\n\t\t\t\t    maxOffset = 0;\n\t\t\t\tvar texture_sets = [];\n\n\t\t\t\tfor (j = 0; j < inputs.length; j++) {\n\n\t\t\t\t\t\tinput = inputs[j];\n\n\t\t\t\t\t\tvar offset = input.offset + 1;\n\t\t\t\t\t\tmaxOffset = maxOffset < offset ? offset : maxOffset;\n\n\t\t\t\t\t\tswitch (input.semantic) {\n\n\t\t\t\t\t\t\t\tcase 'TEXCOORD':\n\t\t\t\t\t\t\t\t\t\ttexture_sets.push(input.set);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfor (var pCount = 0; pCount < pList.length; ++pCount) {\n\n\t\t\t\t\t\tvar p = pList[pCount],\n\t\t\t\t\t\t    i = 0;\n\n\t\t\t\t\t\twhile (i < p.length) {\n\n\t\t\t\t\t\t\t\tvar vs = [];\n\t\t\t\t\t\t\t\tvar ns = [];\n\t\t\t\t\t\t\t\tvar ts = null;\n\t\t\t\t\t\t\t\tvar cs = [];\n\n\t\t\t\t\t\t\t\tif (primitive.vcount) {\n\n\t\t\t\t\t\t\t\t\t\tvcount = primitive.vcount.length ? primitive.vcount[vcIndex++] : primitive.vcount;\n\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\tvcount = p.length / maxOffset;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tfor (j = 0; j < vcount; j++) {\n\n\t\t\t\t\t\t\t\t\t\tfor (k = 0; k < inputs.length; k++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tinput = inputs[k];\n\t\t\t\t\t\t\t\t\t\t\t\tsource = sources[input.source];\n\n\t\t\t\t\t\t\t\t\t\t\t\tindex = p[i + j * maxOffset + input.offset];\n\t\t\t\t\t\t\t\t\t\t\t\tnumParams = source.accessor.params.length;\n\t\t\t\t\t\t\t\t\t\t\t\tidx32 = index * numParams;\n\n\t\t\t\t\t\t\t\t\t\t\t\tswitch (input.semantic) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'VERTEX':\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvs.push(index);\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'NORMAL':\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tns.push(getConvertedVec3(source.data, idx32));\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'TEXCOORD':\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tts = ts || {};\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (ts[input.set] === undefined) ts[input.set] = [];\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tts[input.set].push(new __WEBPACK_IMPORTED_MODULE_1_three__[\"v\" /* Vector2 */](source.data[idx32], source.data[idx32 + 1]));\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'COLOR':\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcs.push(new __WEBPACK_IMPORTED_MODULE_1_three__[\"w\" /* Color */]().setRGB(source.data[idx32], source.data[idx32 + 1], source.data[idx32 + 2]));\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (ns.length === 0) {\n\t\t\t\t\t\t\t\t\t\tinput = this.vertices.input.NORMAL;\n\n\t\t\t\t\t\t\t\t\t\tif (input) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tsource = sources[input.source];\n\t\t\t\t\t\t\t\t\t\t\t\tnumParams = source.accessor.params.length;\n\n\t\t\t\t\t\t\t\t\t\t\t\tfor (var ndx = 0, len = vs.length; ndx < len; ndx++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tns.push(getConvertedVec3(source.data, vs[ndx] * numParams));\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t\tgeom.calcNormals = true;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (!ts) {\n\n\t\t\t\t\t\t\t\t\t\tts = {};\n\n\t\t\t\t\t\t\t\t\t\tinput = this.vertices.input.TEXCOORD;\n\n\t\t\t\t\t\t\t\t\t\tif (input) {\n\n\t\t\t\t\t\t\t\t\t\t\t\ttexture_sets.push(input.set);\n\t\t\t\t\t\t\t\t\t\t\t\tsource = sources[input.source];\n\t\t\t\t\t\t\t\t\t\t\t\tnumParams = source.accessor.params.length;\n\n\t\t\t\t\t\t\t\t\t\t\t\tfor (var ndx = 0, len = vs.length; ndx < len; ndx++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tidx32 = vs[ndx] * numParams;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (ts[input.set] === undefined) ts[input.set] = [];\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tts[input.set].push(new __WEBPACK_IMPORTED_MODULE_1_three__[\"v\" /* Vector2 */](source.data[idx32], 1.0 - source.data[idx32 + 1]));\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (cs.length === 0) {\n\t\t\t\t\t\t\t\t\t\tinput = this.vertices.input.COLOR;\n\n\t\t\t\t\t\t\t\t\t\tif (input) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tsource = sources[input.source];\n\t\t\t\t\t\t\t\t\t\t\t\tnumParams = source.accessor.params.length;\n\n\t\t\t\t\t\t\t\t\t\t\t\tfor (var ndx = 0, len = vs.length; ndx < len; ndx++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tidx32 = vs[ndx] * numParams;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcs.push(new __WEBPACK_IMPORTED_MODULE_1_three__[\"w\" /* Color */]().setRGB(source.data[idx32], source.data[idx32 + 1], source.data[idx32 + 2]));\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tvar face = null,\n\t\t\t\t\t\t\t\t    faces = [],\n\t\t\t\t\t\t\t\t    uv,\n\t\t\t\t\t\t\t\t    uvArr;\n\n\t\t\t\t\t\t\t\tif (vcount === 3) {\n\n\t\t\t\t\t\t\t\t\t\tfaces.push(new __WEBPACK_IMPORTED_MODULE_1_three__[\"x\" /* Face3 */](vs[0], vs[1], vs[2], ns, cs.length ? cs : new __WEBPACK_IMPORTED_MODULE_1_three__[\"w\" /* Color */]()));\n\t\t\t\t\t\t\t\t} else if (vcount === 4) {\n\n\t\t\t\t\t\t\t\t\t\tfaces.push(new __WEBPACK_IMPORTED_MODULE_1_three__[\"x\" /* Face3 */](vs[0], vs[1], vs[3], ns.length ? [ns[0].clone(), ns[1].clone(), ns[3].clone()] : [], cs.length ? [cs[0], cs[1], cs[3]] : new __WEBPACK_IMPORTED_MODULE_1_three__[\"w\" /* Color */]()));\n\n\t\t\t\t\t\t\t\t\t\tfaces.push(new __WEBPACK_IMPORTED_MODULE_1_three__[\"x\" /* Face3 */](vs[1], vs[2], vs[3], ns.length ? [ns[1].clone(), ns[2].clone(), ns[3].clone()] : [], cs.length ? [cs[1], cs[2], cs[3]] : new __WEBPACK_IMPORTED_MODULE_1_three__[\"w\" /* Color */]()));\n\t\t\t\t\t\t\t\t} else if (vcount > 4 && options.subdivideFaces) {\n\n\t\t\t\t\t\t\t\t\t\tvar clr = cs.length ? cs : new __WEBPACK_IMPORTED_MODULE_1_three__[\"w\" /* Color */](),\n\t\t\t\t\t\t\t\t\t\t    vec1,\n\t\t\t\t\t\t\t\t\t\t    vec2,\n\t\t\t\t\t\t\t\t\t\t    vec3,\n\t\t\t\t\t\t\t\t\t\t    v1,\n\t\t\t\t\t\t\t\t\t\t    v2,\n\t\t\t\t\t\t\t\t\t\t    norm;\n\n\t\t\t\t\t\t\t\t\t\tfor (k = 1; k < vcount - 1;) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tfaces.push(new __WEBPACK_IMPORTED_MODULE_1_three__[\"x\" /* Face3 */](vs[0], vs[k], vs[k + 1], ns.length ? [ns[0].clone(), ns[k++].clone(), ns[k].clone()] : [], clr));\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (faces.length) {\n\n\t\t\t\t\t\t\t\t\t\tfor (var ndx = 0, len = faces.length; ndx < len; ndx++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tface = faces[ndx];\n\t\t\t\t\t\t\t\t\t\t\t\tface.daeMaterial = primitive.material;\n\t\t\t\t\t\t\t\t\t\t\t\tgeom.faces.push(face);\n\n\t\t\t\t\t\t\t\t\t\t\t\tfor (k = 0; k < texture_sets.length; k++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tuv = ts[texture_sets[k]];\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (vcount > 4) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuvArr = [uv[0], uv[ndx + 1], uv[ndx + 2]];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else if (vcount === 4) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (ndx === 0) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuvArr = [uv[0], uv[1], uv[3]];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuvArr = [uv[1].clone(), uv[2], uv[3].clone()];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuvArr = [uv[0], uv[1], uv[2]];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (geom.faceVertexUvs[k] === undefined) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgeom.faceVertexUvs[k] = [];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tgeom.faceVertexUvs[k].push(uvArr);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\tconsole.log('dropped face with vcount ' + vcount + ' for geometry with id: ' + geom.id);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\ti += maxOffset * vcount;\n\t\t\t\t\t\t}\n\t\t\t\t}\n\t\t};\n\n\t\tfunction Polygons() {\n\n\t\t\t\tthis.material = \"\";\n\t\t\t\tthis.count = 0;\n\t\t\t\tthis.inputs = [];\n\t\t\t\tthis.vcount = null;\n\t\t\t\tthis.p = [];\n\t\t\t\tthis.geometry = new __WEBPACK_IMPORTED_MODULE_1_three__[\"u\" /* Geometry */]();\n\t\t}\n\n\t\tPolygons.prototype.setVertices = function (vertices) {\n\n\t\t\t\tfor (var i = 0; i < this.inputs.length; i++) {\n\n\t\t\t\t\t\tif (this.inputs[i].source === vertices.id) {\n\n\t\t\t\t\t\t\t\tthis.inputs[i].source = vertices.input['POSITION'].source;\n\t\t\t\t\t\t}\n\t\t\t\t}\n\t\t};\n\n\t\tPolygons.prototype.parse = function (element) {\n\n\t\t\t\tthis.material = element.getAttribute('material');\n\t\t\t\tthis.count = _attr_as_int(element, 'count', 0);\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tvar child = element.childNodes[i];\n\n\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\tcase 'input':\n\n\t\t\t\t\t\t\t\t\t\tthis.inputs.push(new Input().parse(element.childNodes[i]));\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'vcount':\n\n\t\t\t\t\t\t\t\t\t\tthis.vcount = _ints(child.textContent);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'p':\n\n\t\t\t\t\t\t\t\t\t\tthis.p.push(_ints(child.textContent));\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'ph':\n\n\t\t\t\t\t\t\t\t\t\tconsole.warn('polygon holes not yet supported!');\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn this;\n\t\t};\n\n\t\tfunction Polylist() {\n\n\t\t\t\tPolygons.call(this);\n\n\t\t\t\tthis.vcount = [];\n\t\t}\n\n\t\tPolylist.prototype = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_create___default()(Polygons.prototype);\n\t\tPolylist.prototype.constructor = Polylist;\n\n\t\tfunction LineStrips() {\n\n\t\t\t\tPolygons.call(this);\n\n\t\t\t\tthis.vcount = 1;\n\t\t}\n\n\t\tLineStrips.prototype = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_create___default()(Polygons.prototype);\n\t\tLineStrips.prototype.constructor = LineStrips;\n\n\t\tfunction Triangles() {\n\n\t\t\t\tPolygons.call(this);\n\n\t\t\t\tthis.vcount = 3;\n\t\t}\n\n\t\tTriangles.prototype = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_create___default()(Polygons.prototype);\n\t\tTriangles.prototype.constructor = Triangles;\n\n\t\tfunction Accessor() {\n\n\t\t\t\tthis.source = \"\";\n\t\t\t\tthis.count = 0;\n\t\t\t\tthis.stride = 0;\n\t\t\t\tthis.params = [];\n\t\t}\n\n\t\tAccessor.prototype.parse = function (element) {\n\n\t\t\t\tthis.params = [];\n\t\t\t\tthis.source = element.getAttribute('source');\n\t\t\t\tthis.count = _attr_as_int(element, 'count', 0);\n\t\t\t\tthis.stride = _attr_as_int(element, 'stride', 0);\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tvar child = element.childNodes[i];\n\n\t\t\t\t\t\tif (child.nodeName === 'param') {\n\n\t\t\t\t\t\t\t\tvar param = {};\n\t\t\t\t\t\t\t\tparam['name'] = child.getAttribute('name');\n\t\t\t\t\t\t\t\tparam['type'] = child.getAttribute('type');\n\t\t\t\t\t\t\t\tthis.params.push(param);\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn this;\n\t\t};\n\n\t\tfunction Vertices() {\n\n\t\t\t\tthis.input = {};\n\t\t}\n\n\t\tVertices.prototype.parse = function (element) {\n\n\t\t\t\tthis.id = element.getAttribute('id');\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tif (element.childNodes[i].nodeName === 'input') {\n\n\t\t\t\t\t\t\t\tvar input = new Input().parse(element.childNodes[i]);\n\t\t\t\t\t\t\t\tthis.input[input.semantic] = input;\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn this;\n\t\t};\n\n\t\tfunction Input() {\n\n\t\t\t\tthis.semantic = \"\";\n\t\t\t\tthis.offset = 0;\n\t\t\t\tthis.source = \"\";\n\t\t\t\tthis.set = 0;\n\t\t}\n\n\t\tInput.prototype.parse = function (element) {\n\n\t\t\t\tthis.semantic = element.getAttribute('semantic');\n\t\t\t\tthis.source = element.getAttribute('source').replace(/^#/, '');\n\t\t\t\tthis.set = _attr_as_int(element, 'set', -1);\n\t\t\t\tthis.offset = _attr_as_int(element, 'offset', 0);\n\n\t\t\t\tif (this.semantic === 'TEXCOORD' && this.set < 0) {\n\n\t\t\t\t\t\tthis.set = 0;\n\t\t\t\t}\n\n\t\t\t\treturn this;\n\t\t};\n\n\t\tfunction Source(id) {\n\n\t\t\t\tthis.id = id;\n\t\t\t\tthis.type = null;\n\t\t}\n\n\t\tSource.prototype.parse = function (element) {\n\n\t\t\t\tthis.id = element.getAttribute('id');\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tvar child = element.childNodes[i];\n\n\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\tcase 'bool_array':\n\n\t\t\t\t\t\t\t\t\t\tthis.data = _bools(child.textContent);\n\t\t\t\t\t\t\t\t\t\tthis.type = child.nodeName;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'float_array':\n\n\t\t\t\t\t\t\t\t\t\tthis.data = _floats(child.textContent);\n\t\t\t\t\t\t\t\t\t\tthis.type = child.nodeName;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'int_array':\n\n\t\t\t\t\t\t\t\t\t\tthis.data = _ints(child.textContent);\n\t\t\t\t\t\t\t\t\t\tthis.type = child.nodeName;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'IDREF_array':\n\t\t\t\t\t\t\t\tcase 'Name_array':\n\n\t\t\t\t\t\t\t\t\t\tthis.data = _strings(child.textContent);\n\t\t\t\t\t\t\t\t\t\tthis.type = child.nodeName;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'technique_common':\n\n\t\t\t\t\t\t\t\t\t\tfor (var j = 0; j < child.childNodes.length; j++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (child.childNodes[j].nodeName === 'accessor') {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.accessor = new Accessor().parse(child.childNodes[j]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn this;\n\t\t};\n\n\t\tSource.prototype.read = function () {\n\n\t\t\t\tvar result = [];\n\n\t\t\t\tvar param = this.accessor.params[0];\n\n\t\t\t\tswitch (param.type) {\n\n\t\t\t\t\t\tcase 'IDREF':\n\t\t\t\t\t\tcase 'Name':case 'name':\n\t\t\t\t\t\tcase 'float':\n\n\t\t\t\t\t\t\t\treturn this.data;\n\n\t\t\t\t\t\tcase 'float4x4':\n\n\t\t\t\t\t\t\t\tfor (var j = 0; j < this.data.length; j += 16) {\n\n\t\t\t\t\t\t\t\t\t\tvar s = this.data.slice(j, j + 16);\n\t\t\t\t\t\t\t\t\t\tvar m = getConvertedMat4(s);\n\t\t\t\t\t\t\t\t\t\tresult.push(m);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\t\tconsole.log('ColladaLoader: Source: Read dont know how to read ' + param.type + '.');\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\treturn result;\n\t\t};\n\n\t\tfunction Material() {\n\n\t\t\t\tthis.id = \"\";\n\t\t\t\tthis.name = \"\";\n\t\t\t\tthis.instance_effect = null;\n\t\t}\n\n\t\tMaterial.prototype.parse = function (element) {\n\n\t\t\t\tthis.id = element.getAttribute('id');\n\t\t\t\tthis.name = element.getAttribute('name');\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tif (element.childNodes[i].nodeName === 'instance_effect') {\n\n\t\t\t\t\t\t\t\tthis.instance_effect = new InstanceEffect().parse(element.childNodes[i]);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn this;\n\t\t};\n\n\t\tfunction ColorOrTexture() {\n\n\t\t\t\tthis.color = new __WEBPACK_IMPORTED_MODULE_1_three__[\"w\" /* Color */]();\n\t\t\t\tthis.color.setRGB(Math.random(), Math.random(), Math.random());\n\t\t\t\tthis.color.a = 1.0;\n\n\t\t\t\tthis.texture = null;\n\t\t\t\tthis.texcoord = null;\n\t\t\t\tthis.texOpts = null;\n\t\t}\n\n\t\tColorOrTexture.prototype.isColor = function () {\n\n\t\t\t\treturn this.texture === null;\n\t\t};\n\n\t\tColorOrTexture.prototype.isTexture = function () {\n\n\t\t\t\treturn this.texture != null;\n\t\t};\n\n\t\tColorOrTexture.prototype.parse = function (element) {\n\n\t\t\t\tif (element.nodeName === 'transparent') {\n\n\t\t\t\t\t\tthis.opaque = element.getAttribute('opaque');\n\t\t\t\t}\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tvar child = element.childNodes[i];\n\t\t\t\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\tcase 'color':\n\n\t\t\t\t\t\t\t\t\t\tvar rgba = _floats(child.textContent);\n\t\t\t\t\t\t\t\t\t\tthis.color = new __WEBPACK_IMPORTED_MODULE_1_three__[\"w\" /* Color */]();\n\t\t\t\t\t\t\t\t\t\tthis.color.setRGB(rgba[0], rgba[1], rgba[2]);\n\t\t\t\t\t\t\t\t\t\tthis.color.a = rgba[3];\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'texture':\n\n\t\t\t\t\t\t\t\t\t\tthis.texture = child.getAttribute('texture');\n\t\t\t\t\t\t\t\t\t\tthis.texcoord = child.getAttribute('texcoord');\n\n\t\t\t\t\t\t\t\t\t\tthis.texOpts = {\n\t\t\t\t\t\t\t\t\t\t\t\toffsetU: 0,\n\t\t\t\t\t\t\t\t\t\t\t\toffsetV: 0,\n\t\t\t\t\t\t\t\t\t\t\t\trepeatU: 1,\n\t\t\t\t\t\t\t\t\t\t\t\trepeatV: 1,\n\t\t\t\t\t\t\t\t\t\t\t\twrapU: 1,\n\t\t\t\t\t\t\t\t\t\t\t\twrapV: 1\n\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\tthis.parseTexture(child);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn this;\n\t\t};\n\n\t\tColorOrTexture.prototype.parseTexture = function (element) {\n\n\t\t\t\tif (!element.childNodes) return this;\n\n\t\t\t\tif (element.childNodes[1] && element.childNodes[1].nodeName === 'extra') {\n\n\t\t\t\t\t\telement = element.childNodes[1];\n\n\t\t\t\t\t\tif (element.childNodes[1] && element.childNodes[1].nodeName === 'technique') {\n\n\t\t\t\t\t\t\t\telement = element.childNodes[1];\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tvar child = element.childNodes[i];\n\n\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\tcase 'offsetU':\n\t\t\t\t\t\t\t\tcase 'offsetV':\n\t\t\t\t\t\t\t\tcase 'repeatU':\n\t\t\t\t\t\t\t\tcase 'repeatV':\n\n\t\t\t\t\t\t\t\t\t\tthis.texOpts[child.nodeName] = parseFloat(child.textContent);\n\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'wrapU':\n\t\t\t\t\t\t\t\tcase 'wrapV':\n\n\t\t\t\t\t\t\t\t\t\tif (child.textContent.toUpperCase() === 'TRUE') {\n\n\t\t\t\t\t\t\t\t\t\t\t\tthis.texOpts[child.nodeName] = 1;\n\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t\tthis.texOpts[child.nodeName] = parseInt(child.textContent);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\t\t\t\tthis.texOpts[child.nodeName] = child.textContent;\n\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn this;\n\t\t};\n\n\t\tfunction Shader(type, effect) {\n\n\t\t\t\tthis.type = type;\n\t\t\t\tthis.effect = effect;\n\t\t\t\tthis.material = null;\n\t\t}\n\n\t\tShader.prototype.parse = function (element) {\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tvar child = element.childNodes[i];\n\t\t\t\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\tcase 'emission':\n\t\t\t\t\t\t\t\tcase 'diffuse':\n\t\t\t\t\t\t\t\tcase 'specular':\n\t\t\t\t\t\t\t\tcase 'transparent':\n\n\t\t\t\t\t\t\t\t\t\tthis[child.nodeName] = new ColorOrTexture().parse(child);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'bump':\n\t\t\t\t\t\t\t\t\t\tvar bumpType = child.getAttribute('bumptype');\n\t\t\t\t\t\t\t\t\t\tif (bumpType) {\n\t\t\t\t\t\t\t\t\t\t\t\tif (bumpType.toLowerCase() === \"heightfield\") {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis['bump'] = new ColorOrTexture().parse(child);\n\t\t\t\t\t\t\t\t\t\t\t\t} else if (bumpType.toLowerCase() === \"normalmap\") {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis['normal'] = new ColorOrTexture().parse(child);\n\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.error(\"Shader.prototype.parse: Invalid value for attribute 'bumptype' (\" + bumpType + \") - valid bumptypes are 'HEIGHTFIELD' and 'NORMALMAP' - defaulting to 'HEIGHTFIELD'\");\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis['bump'] = new ColorOrTexture().parse(child);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.warn(\"Shader.prototype.parse: Attribute 'bumptype' missing from bump node - defaulting to 'HEIGHTFIELD'\");\n\t\t\t\t\t\t\t\t\t\t\t\tthis['bump'] = new ColorOrTexture().parse(child);\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'shininess':\n\t\t\t\t\t\t\t\tcase 'reflectivity':\n\t\t\t\t\t\t\t\tcase 'index_of_refraction':\n\t\t\t\t\t\t\t\tcase 'transparency':\n\n\t\t\t\t\t\t\t\t\t\tvar f = child.querySelectorAll('float');\n\n\t\t\t\t\t\t\t\t\t\tif (f.length > 0) this[child.nodeName] = parseFloat(f[0].textContent);\n\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.create();\n\t\t\t\treturn this;\n\t\t};\n\n\t\tShader.prototype.create = function () {\n\n\t\t\t\tvar props = {};\n\n\t\t\t\tvar transparent = false;\n\n\t\t\t\tif (this['transparency'] !== undefined && this['transparent'] !== undefined) {\n\t\t\t\t\t\tvar transparentColor = this['transparent'];\n\t\t\t\t\t\tvar transparencyLevel = (this.transparent.color.r + this.transparent.color.g + this.transparent.color.b) / 3 * this.transparency;\n\n\t\t\t\t\t\tif (transparencyLevel > 0) {\n\t\t\t\t\t\t\t\ttransparent = true;\n\t\t\t\t\t\t\t\tprops['transparent'] = true;\n\t\t\t\t\t\t\t\tprops['opacity'] = 1 - transparencyLevel;\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvar keys = {\n\t\t\t\t\t\t'diffuse': 'map',\n\t\t\t\t\t\t'ambient': 'lightMap',\n\t\t\t\t\t\t'specular': 'specularMap',\n\t\t\t\t\t\t'emission': 'emissionMap',\n\t\t\t\t\t\t'bump': 'bumpMap',\n\t\t\t\t\t\t'normal': 'normalMap'\n\t\t\t\t};\n\n\t\t\t\tfor (var prop in this) {\n\n\t\t\t\t\t\tswitch (prop) {\n\n\t\t\t\t\t\t\t\tcase 'ambient':\n\t\t\t\t\t\t\t\tcase 'emission':\n\t\t\t\t\t\t\t\tcase 'diffuse':\n\t\t\t\t\t\t\t\tcase 'specular':\n\t\t\t\t\t\t\t\tcase 'bump':\n\t\t\t\t\t\t\t\tcase 'normal':\n\n\t\t\t\t\t\t\t\t\t\tvar cot = this[prop];\n\n\t\t\t\t\t\t\t\t\t\tif (cot instanceof ColorOrTexture) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (cot.isTexture()) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar samplerId = cot.texture;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar sampler = this.effect.sampler[samplerId];\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (sampler !== undefined && sampler.source !== undefined) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar surface = this.effect.surface[sampler.source];\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (surface !== undefined) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar image = images[surface.init_from];\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (image) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar url = baseUrl + image.init_from;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar texture;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar loader = __WEBPACK_IMPORTED_MODULE_1_three__[\"y\" /* Loader */].Handlers.get(url);\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (loader !== null) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttexture = loader.load(url);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttexture = new __WEBPACK_IMPORTED_MODULE_1_three__[\"z\" /* Texture */]();\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tloadTextureImage(texture, url);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (sampler.wrap_s === \"MIRROR\") {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttexture.wrapS = __WEBPACK_IMPORTED_MODULE_1_three__[\"A\" /* MirroredRepeatWrapping */];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else if (sampler.wrap_s === \"WRAP\" || cot.texOpts.wrapU) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttexture.wrapS = __WEBPACK_IMPORTED_MODULE_1_three__[\"B\" /* RepeatWrapping */];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttexture.wrapS = __WEBPACK_IMPORTED_MODULE_1_three__[\"C\" /* ClampToEdgeWrapping */];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (sampler.wrap_t === \"MIRROR\") {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttexture.wrapT = __WEBPACK_IMPORTED_MODULE_1_three__[\"A\" /* MirroredRepeatWrapping */];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else if (sampler.wrap_t === \"WRAP\" || cot.texOpts.wrapV) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttexture.wrapT = __WEBPACK_IMPORTED_MODULE_1_three__[\"B\" /* RepeatWrapping */];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttexture.wrapT = __WEBPACK_IMPORTED_MODULE_1_three__[\"C\" /* ClampToEdgeWrapping */];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttexture.offset.x = cot.texOpts.offsetU;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttexture.offset.y = cot.texOpts.offsetV;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttexture.repeat.x = cot.texOpts.repeatU;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttexture.repeat.y = cot.texOpts.repeatV;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tprops[keys[prop]] = texture;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (prop === 'emission') props['emissive'] = 0xffffff;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t} else if (prop === 'diffuse' || !transparent) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (prop === 'emission') {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tprops['emissive'] = cot.color.getHex();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tprops[prop] = cot.color.getHex();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'shininess':\n\n\t\t\t\t\t\t\t\t\t\tprops[prop] = this[prop];\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'reflectivity':\n\n\t\t\t\t\t\t\t\t\t\tprops[prop] = this[prop];\n\t\t\t\t\t\t\t\t\t\tif (props[prop] > 0.0) props['envMap'] = options.defaultEnvMap;\n\t\t\t\t\t\t\t\t\t\tprops['combine'] = __WEBPACK_IMPORTED_MODULE_1_three__[\"D\" /* MixOperation */];\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'index_of_refraction':\n\n\t\t\t\t\t\t\t\t\t\tprops['refractionRatio'] = this[prop];\n\t\t\t\t\t\t\t\t\t\tif (this[prop] !== 1.0) props['envMap'] = options.defaultEnvMap;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'transparency':\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tprops['shading'] = preferredShading;\n\t\t\t\tprops['side'] = this.effect.doubleSided ? __WEBPACK_IMPORTED_MODULE_1_three__[\"i\" /* DoubleSide */] : __WEBPACK_IMPORTED_MODULE_1_three__[\"k\" /* FrontSide */];\n\n\t\t\t\tif (props.diffuse !== undefined) {\n\n\t\t\t\t\t\tprops.color = props.diffuse;\n\t\t\t\t\t\tdelete props.diffuse;\n\t\t\t\t}\n\n\t\t\t\tswitch (this.type) {\n\n\t\t\t\t\t\tcase 'constant':\n\n\t\t\t\t\t\t\t\tif (props.emissive != undefined) props.color = props.emissive;\n\t\t\t\t\t\t\t\tthis.material = new __WEBPACK_IMPORTED_MODULE_1_three__[\"E\" /* MeshBasicMaterial */](props);\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'phong':\n\t\t\t\t\t\tcase 'blinn':\n\n\t\t\t\t\t\t\t\tthis.material = new __WEBPACK_IMPORTED_MODULE_1_three__[\"F\" /* MeshPhongMaterial */](props);\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'lambert':\n\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\t\tthis.material = new __WEBPACK_IMPORTED_MODULE_1_three__[\"j\" /* MeshLambertMaterial */](props);\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\treturn this.material;\n\t\t};\n\n\t\tfunction Surface(effect) {\n\n\t\t\t\tthis.effect = effect;\n\t\t\t\tthis.init_from = null;\n\t\t\t\tthis.format = null;\n\t\t}\n\n\t\tSurface.prototype.parse = function (element) {\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tvar child = element.childNodes[i];\n\t\t\t\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\tcase 'init_from':\n\n\t\t\t\t\t\t\t\t\t\tthis.init_from = child.textContent;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'format':\n\n\t\t\t\t\t\t\t\t\t\tthis.format = child.textContent;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\t\t\t\tconsole.log(\"unhandled Surface prop: \" + child.nodeName);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn this;\n\t\t};\n\n\t\tfunction Sampler2D(effect) {\n\n\t\t\t\tthis.effect = effect;\n\t\t\t\tthis.source = null;\n\t\t\t\tthis.wrap_s = null;\n\t\t\t\tthis.wrap_t = null;\n\t\t\t\tthis.minfilter = null;\n\t\t\t\tthis.magfilter = null;\n\t\t\t\tthis.mipfilter = null;\n\t\t}\n\n\t\tSampler2D.prototype.parse = function (element) {\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tvar child = element.childNodes[i];\n\t\t\t\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\tcase 'source':\n\n\t\t\t\t\t\t\t\t\t\tthis.source = child.textContent;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'minfilter':\n\n\t\t\t\t\t\t\t\t\t\tthis.minfilter = child.textContent;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'magfilter':\n\n\t\t\t\t\t\t\t\t\t\tthis.magfilter = child.textContent;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'mipfilter':\n\n\t\t\t\t\t\t\t\t\t\tthis.mipfilter = child.textContent;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'wrap_s':\n\n\t\t\t\t\t\t\t\t\t\tthis.wrap_s = child.textContent;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'wrap_t':\n\n\t\t\t\t\t\t\t\t\t\tthis.wrap_t = child.textContent;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\t\t\t\tconsole.log(\"unhandled Sampler2D prop: \" + child.nodeName);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn this;\n\t\t};\n\n\t\tfunction Effect() {\n\n\t\t\t\tthis.id = \"\";\n\t\t\t\tthis.name = \"\";\n\t\t\t\tthis.shader = null;\n\t\t\t\tthis.surface = {};\n\t\t\t\tthis.sampler = {};\n\t\t}\n\n\t\tEffect.prototype.create = function () {\n\n\t\t\t\tif (this.shader === null) {\n\n\t\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t};\n\n\t\tEffect.prototype.parse = function (element) {\n\n\t\t\t\tthis.id = element.getAttribute('id');\n\t\t\t\tthis.name = element.getAttribute('name');\n\n\t\t\t\textractDoubleSided(this, element);\n\n\t\t\t\tthis.shader = null;\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tvar child = element.childNodes[i];\n\t\t\t\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\tcase 'profile_COMMON':\n\n\t\t\t\t\t\t\t\t\t\tthis.parseTechnique(this.parseProfileCOMMON(child));\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn this;\n\t\t};\n\n\t\tEffect.prototype.parseNewparam = function (element) {\n\n\t\t\t\tvar sid = element.getAttribute('sid');\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tvar child = element.childNodes[i];\n\t\t\t\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\tcase 'surface':\n\n\t\t\t\t\t\t\t\t\t\tthis.surface[sid] = new Surface(this).parse(child);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'sampler2D':\n\n\t\t\t\t\t\t\t\t\t\tthis.sampler[sid] = new Sampler2D(this).parse(child);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'extra':\n\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\t\t\t\tconsole.log(child.nodeName);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\t\t};\n\n\t\tEffect.prototype.parseProfileCOMMON = function (element) {\n\n\t\t\t\tvar technique;\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tvar child = element.childNodes[i];\n\n\t\t\t\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\tcase 'profile_COMMON':\n\n\t\t\t\t\t\t\t\t\t\tthis.parseProfileCOMMON(child);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'technique':\n\n\t\t\t\t\t\t\t\t\t\ttechnique = child;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'newparam':\n\n\t\t\t\t\t\t\t\t\t\tthis.parseNewparam(child);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'image':\n\n\t\t\t\t\t\t\t\t\t\tvar _image = new _Image().parse(child);\n\t\t\t\t\t\t\t\t\t\timages[_image.id] = _image;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'extra':\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\t\t\t\tconsole.log(child.nodeName);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn technique;\n\t\t};\n\n\t\tEffect.prototype.parseTechnique = function (element) {\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tvar child = element.childNodes[i];\n\t\t\t\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\tcase 'constant':\n\t\t\t\t\t\t\t\tcase 'lambert':\n\t\t\t\t\t\t\t\tcase 'blinn':\n\t\t\t\t\t\t\t\tcase 'phong':\n\n\t\t\t\t\t\t\t\t\t\tthis.shader = new Shader(child.nodeName, this).parse(child);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase 'extra':\n\t\t\t\t\t\t\t\t\t\tthis.parseExtra(child);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\t\t};\n\n\t\tEffect.prototype.parseExtra = function (element) {\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tvar child = element.childNodes[i];\n\t\t\t\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\tcase 'technique':\n\t\t\t\t\t\t\t\t\t\tthis.parseExtraTechnique(child);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\t\t};\n\n\t\tEffect.prototype.parseExtraTechnique = function (element) {\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tvar child = element.childNodes[i];\n\t\t\t\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\tcase 'bump':\n\t\t\t\t\t\t\t\t\t\tthis.shader.parse(element);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\t\t};\n\n\t\tfunction InstanceEffect() {\n\n\t\t\t\tthis.url = \"\";\n\t\t}\n\n\t\tInstanceEffect.prototype.parse = function (element) {\n\n\t\t\t\tthis.url = element.getAttribute('url').replace(/^#/, '');\n\t\t\t\treturn this;\n\t\t};\n\n\t\tfunction Animation() {\n\n\t\t\t\tthis.id = \"\";\n\t\t\t\tthis.name = \"\";\n\t\t\t\tthis.source = {};\n\t\t\t\tthis.sampler = [];\n\t\t\t\tthis.channel = [];\n\t\t}\n\n\t\tAnimation.prototype.parse = function (element) {\n\n\t\t\t\tthis.id = element.getAttribute('id');\n\t\t\t\tthis.name = element.getAttribute('name');\n\t\t\t\tthis.source = {};\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tvar child = element.childNodes[i];\n\n\t\t\t\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\tcase 'animation':\n\n\t\t\t\t\t\t\t\t\t\tvar anim = new Animation().parse(child);\n\n\t\t\t\t\t\t\t\t\t\tfor (var src in anim.source) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tthis.source[src] = anim.source[src];\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tfor (var j = 0; j < anim.channel.length; j++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tthis.channel.push(anim.channel[j]);\n\t\t\t\t\t\t\t\t\t\t\t\tthis.sampler.push(anim.sampler[j]);\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'source':\n\n\t\t\t\t\t\t\t\t\t\tvar src = new Source().parse(child);\n\t\t\t\t\t\t\t\t\t\tthis.source[src.id] = src;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'sampler':\n\n\t\t\t\t\t\t\t\t\t\tthis.sampler.push(new Sampler(this).parse(child));\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'channel':\n\n\t\t\t\t\t\t\t\t\t\tthis.channel.push(new Channel(this).parse(child));\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn this;\n\t\t};\n\n\t\tfunction Channel(animation) {\n\n\t\t\t\tthis.animation = animation;\n\t\t\t\tthis.source = \"\";\n\t\t\t\tthis.target = \"\";\n\t\t\t\tthis.fullSid = null;\n\t\t\t\tthis.sid = null;\n\t\t\t\tthis.dotSyntax = null;\n\t\t\t\tthis.arrSyntax = null;\n\t\t\t\tthis.arrIndices = null;\n\t\t\t\tthis.member = null;\n\t\t}\n\n\t\tChannel.prototype.parse = function (element) {\n\n\t\t\t\tthis.source = element.getAttribute('source').replace(/^#/, '');\n\t\t\t\tthis.target = element.getAttribute('target');\n\n\t\t\t\tvar parts = this.target.split('/');\n\n\t\t\t\tvar id = parts.shift();\n\t\t\t\tvar sid = parts.shift();\n\n\t\t\t\tvar dotSyntax = sid.indexOf(\".\") >= 0;\n\t\t\t\tvar arrSyntax = sid.indexOf(\"(\") >= 0;\n\n\t\t\t\tif (dotSyntax) {\n\n\t\t\t\t\t\tparts = sid.split(\".\");\n\t\t\t\t\t\tthis.sid = parts.shift();\n\t\t\t\t\t\tthis.member = parts.shift();\n\t\t\t\t} else if (arrSyntax) {\n\n\t\t\t\t\t\tvar arrIndices = sid.split(\"(\");\n\t\t\t\t\t\tthis.sid = arrIndices.shift();\n\n\t\t\t\t\t\tfor (var j = 0; j < arrIndices.length; j++) {\n\n\t\t\t\t\t\t\t\tarrIndices[j] = parseInt(arrIndices[j].replace(/\\)/, ''));\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.arrIndices = arrIndices;\n\t\t\t\t} else {\n\n\t\t\t\t\t\tthis.sid = sid;\n\t\t\t\t}\n\n\t\t\t\tthis.fullSid = sid;\n\t\t\t\tthis.dotSyntax = dotSyntax;\n\t\t\t\tthis.arrSyntax = arrSyntax;\n\n\t\t\t\treturn this;\n\t\t};\n\n\t\tfunction Sampler(animation) {\n\n\t\t\t\tthis.id = \"\";\n\t\t\t\tthis.animation = animation;\n\t\t\t\tthis.inputs = [];\n\t\t\t\tthis.input = null;\n\t\t\t\tthis.output = null;\n\t\t\t\tthis.strideOut = null;\n\t\t\t\tthis.interpolation = null;\n\t\t\t\tthis.startTime = null;\n\t\t\t\tthis.endTime = null;\n\t\t\t\tthis.duration = 0;\n\t\t}\n\n\t\tSampler.prototype.parse = function (element) {\n\n\t\t\t\tthis.id = element.getAttribute('id');\n\t\t\t\tthis.inputs = [];\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tvar child = element.childNodes[i];\n\t\t\t\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\tcase 'input':\n\n\t\t\t\t\t\t\t\t\t\tthis.inputs.push(new Input().parse(child));\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn this;\n\t\t};\n\n\t\tSampler.prototype.create = function () {\n\n\t\t\t\tfor (var i = 0; i < this.inputs.length; i++) {\n\n\t\t\t\t\t\tvar input = this.inputs[i];\n\t\t\t\t\t\tvar source = this.animation.source[input.source];\n\n\t\t\t\t\t\tswitch (input.semantic) {\n\n\t\t\t\t\t\t\t\tcase 'INPUT':\n\n\t\t\t\t\t\t\t\t\t\tthis.input = source.read();\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'OUTPUT':\n\n\t\t\t\t\t\t\t\t\t\tthis.output = source.read();\n\t\t\t\t\t\t\t\t\t\tthis.strideOut = source.accessor.stride;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'INTERPOLATION':\n\n\t\t\t\t\t\t\t\t\t\tthis.interpolation = source.read();\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'IN_TANGENT':\n\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'OUT_TANGENT':\n\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\t\t\t\tconsole.log(input.semantic);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.startTime = 0;\n\t\t\t\tthis.endTime = 0;\n\t\t\t\tthis.duration = 0;\n\n\t\t\t\tif (this.input.length) {\n\n\t\t\t\t\t\tthis.startTime = 100000000;\n\t\t\t\t\t\tthis.endTime = -100000000;\n\n\t\t\t\t\t\tfor (var i = 0; i < this.input.length; i++) {\n\n\t\t\t\t\t\t\t\tthis.startTime = Math.min(this.startTime, this.input[i]);\n\t\t\t\t\t\t\t\tthis.endTime = Math.max(this.endTime, this.input[i]);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.duration = this.endTime - this.startTime;\n\t\t\t\t}\n\t\t};\n\n\t\tSampler.prototype.getData = function (type, ndx, member) {\n\n\t\t\t\tvar data;\n\n\t\t\t\tif (type === 'matrix' && this.strideOut === 16) {\n\n\t\t\t\t\t\tdata = this.output[ndx];\n\t\t\t\t} else if (this.strideOut > 1) {\n\n\t\t\t\t\t\tdata = [];\n\t\t\t\t\t\tndx *= this.strideOut;\n\n\t\t\t\t\t\tfor (var i = 0; i < this.strideOut; ++i) {\n\n\t\t\t\t\t\t\t\tdata[i] = this.output[ndx + i];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (this.strideOut === 3) {\n\n\t\t\t\t\t\t\t\tswitch (type) {\n\n\t\t\t\t\t\t\t\t\t\tcase 'rotate':\n\t\t\t\t\t\t\t\t\t\tcase 'translate':\n\n\t\t\t\t\t\t\t\t\t\t\t\tfixCoords(data, -1);\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\tcase 'scale':\n\n\t\t\t\t\t\t\t\t\t\t\t\tfixCoords(data, 1);\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (this.strideOut === 4 && type === 'matrix') {\n\n\t\t\t\t\t\t\t\tfixCoords(data, -1);\n\t\t\t\t\t\t}\n\t\t\t\t} else {\n\n\t\t\t\t\t\tdata = this.output[ndx];\n\n\t\t\t\t\t\tif (member && type === 'translate') {\n\t\t\t\t\t\t\t\tdata = getConvertedTranslation(member, data);\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn data;\n\t\t};\n\n\t\tfunction Key(time) {\n\n\t\t\t\tthis.targets = [];\n\t\t\t\tthis.time = time;\n\t\t}\n\n\t\tKey.prototype.addTarget = function (fullSid, transform, member, data) {\n\n\t\t\t\tthis.targets.push({\n\t\t\t\t\t\tsid: fullSid,\n\t\t\t\t\t\tmember: member,\n\t\t\t\t\t\ttransform: transform,\n\t\t\t\t\t\tdata: data\n\t\t\t\t});\n\t\t};\n\n\t\tKey.prototype.apply = function (opt_sid) {\n\n\t\t\t\tfor (var i = 0; i < this.targets.length; ++i) {\n\n\t\t\t\t\t\tvar target = this.targets[i];\n\n\t\t\t\t\t\tif (!opt_sid || target.sid === opt_sid) {\n\n\t\t\t\t\t\t\t\ttarget.transform.update(target.data, target.member);\n\t\t\t\t\t\t}\n\t\t\t\t}\n\t\t};\n\n\t\tKey.prototype.getTarget = function (fullSid) {\n\n\t\t\t\tfor (var i = 0; i < this.targets.length; ++i) {\n\n\t\t\t\t\t\tif (this.targets[i].sid === fullSid) {\n\n\t\t\t\t\t\t\t\treturn this.targets[i];\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\t\t};\n\n\t\tKey.prototype.hasTarget = function (fullSid) {\n\n\t\t\t\tfor (var i = 0; i < this.targets.length; ++i) {\n\n\t\t\t\t\t\tif (this.targets[i].sid === fullSid) {\n\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t};\n\n\t\tKey.prototype.interpolate = function (nextKey, time) {\n\n\t\t\t\tfor (var i = 0, l = this.targets.length; i < l; i++) {\n\n\t\t\t\t\t\tvar target = this.targets[i],\n\t\t\t\t\t\t    nextTarget = nextKey.getTarget(target.sid),\n\t\t\t\t\t\t    data;\n\n\t\t\t\t\t\tif (target.transform.type !== 'matrix' && nextTarget) {\n\n\t\t\t\t\t\t\t\tvar scale = (time - this.time) / (nextKey.time - this.time),\n\t\t\t\t\t\t\t\t    nextData = nextTarget.data,\n\t\t\t\t\t\t\t\t    prevData = target.data;\n\n\t\t\t\t\t\t\t\tif (scale < 0) scale = 0;\n\t\t\t\t\t\t\t\tif (scale > 1) scale = 1;\n\n\t\t\t\t\t\t\t\tif (prevData.length) {\n\n\t\t\t\t\t\t\t\t\t\tdata = [];\n\n\t\t\t\t\t\t\t\t\t\tfor (var j = 0; j < prevData.length; ++j) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tdata[j] = prevData[j] + (nextData[j] - prevData[j]) * scale;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\tdata = prevData + (nextData - prevData) * scale;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tdata = target.data;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ttarget.transform.update(data, target.member);\n\t\t\t\t}\n\t\t};\n\n\t\tfunction Camera() {\n\n\t\t\t\tthis.id = \"\";\n\t\t\t\tthis.name = \"\";\n\t\t\t\tthis.technique = \"\";\n\t\t}\n\n\t\tCamera.prototype.parse = function (element) {\n\n\t\t\t\tthis.id = element.getAttribute('id');\n\t\t\t\tthis.name = element.getAttribute('name');\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tvar child = element.childNodes[i];\n\t\t\t\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\tcase 'optics':\n\n\t\t\t\t\t\t\t\t\t\tthis.parseOptics(child);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn this;\n\t\t};\n\n\t\tCamera.prototype.parseOptics = function (element) {\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tif (element.childNodes[i].nodeName === 'technique_common') {\n\n\t\t\t\t\t\t\t\tvar technique = element.childNodes[i];\n\n\t\t\t\t\t\t\t\tfor (var j = 0; j < technique.childNodes.length; j++) {\n\n\t\t\t\t\t\t\t\t\t\tthis.technique = technique.childNodes[j].nodeName;\n\n\t\t\t\t\t\t\t\t\t\tif (this.technique === 'perspective') {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar perspective = technique.childNodes[j];\n\n\t\t\t\t\t\t\t\t\t\t\t\tfor (var k = 0; k < perspective.childNodes.length; k++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar param = perspective.childNodes[k];\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tswitch (param.nodeName) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'yfov':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.yfov = param.textContent;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'xfov':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.xfov = param.textContent;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'znear':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.znear = param.textContent;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'zfar':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.zfar = param.textContent;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'aspect_ratio':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.aspect_ratio = param.textContent;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t} else if (this.technique === 'orthographic') {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar orthographic = technique.childNodes[j];\n\n\t\t\t\t\t\t\t\t\t\t\t\tfor (var k = 0; k < orthographic.childNodes.length; k++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar param = orthographic.childNodes[k];\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tswitch (param.nodeName) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'xmag':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.xmag = param.textContent;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'ymag':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.ymag = param.textContent;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'znear':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.znear = param.textContent;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'zfar':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.zfar = param.textContent;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'aspect_ratio':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.aspect_ratio = param.textContent;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn this;\n\t\t};\n\n\t\tfunction InstanceCamera() {\n\n\t\t\t\tthis.url = \"\";\n\t\t}\n\n\t\tInstanceCamera.prototype.parse = function (element) {\n\n\t\t\t\tthis.url = element.getAttribute('url').replace(/^#/, '');\n\n\t\t\t\treturn this;\n\t\t};\n\n\t\tfunction Light() {\n\n\t\t\t\tthis.id = \"\";\n\t\t\t\tthis.name = \"\";\n\t\t\t\tthis.technique = \"\";\n\t\t}\n\n\t\tLight.prototype.parse = function (element) {\n\n\t\t\t\tthis.id = element.getAttribute('id');\n\t\t\t\tthis.name = element.getAttribute('name');\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tvar child = element.childNodes[i];\n\t\t\t\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\tcase 'technique_common':\n\n\t\t\t\t\t\t\t\t\t\tthis.parseCommon(child);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'technique':\n\n\t\t\t\t\t\t\t\t\t\tthis.parseTechnique(child);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn this;\n\t\t};\n\n\t\tLight.prototype.parseCommon = function (element) {\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tswitch (element.childNodes[i].nodeName) {\n\n\t\t\t\t\t\t\t\tcase 'directional':\n\t\t\t\t\t\t\t\tcase 'point':\n\t\t\t\t\t\t\t\tcase 'spot':\n\t\t\t\t\t\t\t\tcase 'ambient':\n\n\t\t\t\t\t\t\t\t\t\tthis.technique = element.childNodes[i].nodeName;\n\n\t\t\t\t\t\t\t\t\t\tvar light = element.childNodes[i];\n\n\t\t\t\t\t\t\t\t\t\tfor (var j = 0; j < light.childNodes.length; j++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar child = light.childNodes[j];\n\n\t\t\t\t\t\t\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'color':\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar rgba = _floats(child.textContent);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.color = new __WEBPACK_IMPORTED_MODULE_1_three__[\"w\" /* Color */](0);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.color.setRGB(rgba[0], rgba[1], rgba[2]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.color.a = rgba[3];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'falloff_angle':\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.falloff_angle = parseFloat(child.textContent);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'quadratic_attenuation':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar f = parseFloat(child.textContent);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.distance = f ? Math.sqrt(1 / f) : 0;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn this;\n\t\t};\n\n\t\tLight.prototype.parseTechnique = function (element) {\n\n\t\t\t\tthis.profile = element.getAttribute('profile');\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tvar child = element.childNodes[i];\n\n\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\tcase 'intensity':\n\n\t\t\t\t\t\t\t\t\t\tthis.intensity = parseFloat(child.textContent);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn this;\n\t\t};\n\n\t\tfunction InstanceLight() {\n\n\t\t\t\tthis.url = \"\";\n\t\t}\n\n\t\tInstanceLight.prototype.parse = function (element) {\n\n\t\t\t\tthis.url = element.getAttribute('url').replace(/^#/, '');\n\n\t\t\t\treturn this;\n\t\t};\n\n\t\tfunction KinematicsModel() {\n\n\t\t\t\tthis.id = '';\n\t\t\t\tthis.name = '';\n\t\t\t\tthis.joints = [];\n\t\t\t\tthis.links = [];\n\t\t}\n\n\t\tKinematicsModel.prototype.parse = function (element) {\n\n\t\t\t\tthis.id = element.getAttribute('id');\n\t\t\t\tthis.name = element.getAttribute('name');\n\t\t\t\tthis.joints = [];\n\t\t\t\tthis.links = [];\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tvar child = element.childNodes[i];\n\t\t\t\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\tcase 'technique_common':\n\n\t\t\t\t\t\t\t\t\t\tthis.parseCommon(child);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn this;\n\t\t};\n\n\t\tKinematicsModel.prototype.parseCommon = function (element) {\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tvar child = element.childNodes[i];\n\t\t\t\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\t\t\t\tswitch (element.childNodes[i].nodeName) {\n\n\t\t\t\t\t\t\t\tcase 'joint':\n\t\t\t\t\t\t\t\t\t\tthis.joints.push(new Joint().parse(child));\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'link':\n\t\t\t\t\t\t\t\t\t\tthis.links.push(new Link().parse(child));\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn this;\n\t\t};\n\n\t\tfunction Joint() {\n\n\t\t\t\tthis.sid = '';\n\t\t\t\tthis.name = '';\n\t\t\t\tthis.axis = new __WEBPACK_IMPORTED_MODULE_1_three__[\"d\" /* Vector3 */]();\n\t\t\t\tthis.limits = {\n\t\t\t\t\t\tmin: 0,\n\t\t\t\t\t\tmax: 0\n\t\t\t\t};\n\t\t\t\tthis.type = '';\n\t\t\t\tthis.static = false;\n\t\t\t\tthis.zeroPosition = 0.0;\n\t\t\t\tthis.middlePosition = 0.0;\n\t\t}\n\n\t\tJoint.prototype.parse = function (element) {\n\n\t\t\t\tthis.sid = element.getAttribute('sid');\n\t\t\t\tthis.name = element.getAttribute('name');\n\t\t\t\tthis.axis = new __WEBPACK_IMPORTED_MODULE_1_three__[\"d\" /* Vector3 */]();\n\t\t\t\tthis.limits = {\n\t\t\t\t\t\tmin: 0,\n\t\t\t\t\t\tmax: 0\n\t\t\t\t};\n\t\t\t\tthis.type = '';\n\t\t\t\tthis.static = false;\n\t\t\t\tthis.zeroPosition = 0.0;\n\t\t\t\tthis.middlePosition = 0.0;\n\n\t\t\t\tvar axisElement = element.querySelector('axis');\n\t\t\t\tvar _axis = _floats(axisElement.textContent);\n\t\t\t\tthis.axis = getConvertedVec3(_axis, 0);\n\n\t\t\t\tvar min = element.querySelector('limits min') ? parseFloat(element.querySelector('limits min').textContent) : -360;\n\t\t\t\tvar max = element.querySelector('limits max') ? parseFloat(element.querySelector('limits max').textContent) : 360;\n\n\t\t\t\tthis.limits = {\n\t\t\t\t\t\tmin: min,\n\t\t\t\t\t\tmax: max\n\t\t\t\t};\n\n\t\t\t\tvar jointTypes = ['prismatic', 'revolute'];\n\t\t\t\tfor (var i = 0; i < jointTypes.length; i++) {\n\n\t\t\t\t\t\tvar type = jointTypes[i];\n\n\t\t\t\t\t\tvar jointElement = element.querySelector(type);\n\n\t\t\t\t\t\tif (jointElement) {\n\n\t\t\t\t\t\t\t\tthis.type = type;\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (this.limits.min >= this.limits.max) {\n\n\t\t\t\t\t\tthis.static = true;\n\t\t\t\t}\n\n\t\t\t\tthis.middlePosition = (this.limits.min + this.limits.max) / 2.0;\n\t\t\t\treturn this;\n\t\t};\n\n\t\tfunction Link() {\n\n\t\t\t\tthis.sid = '';\n\t\t\t\tthis.name = '';\n\t\t\t\tthis.transforms = [];\n\t\t\t\tthis.attachments = [];\n\t\t}\n\n\t\tLink.prototype.parse = function (element) {\n\n\t\t\t\tthis.sid = element.getAttribute('sid');\n\t\t\t\tthis.name = element.getAttribute('name');\n\t\t\t\tthis.transforms = [];\n\t\t\t\tthis.attachments = [];\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tvar child = element.childNodes[i];\n\t\t\t\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\tcase 'attachment_full':\n\t\t\t\t\t\t\t\t\t\tthis.attachments.push(new Attachment().parse(child));\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'rotate':\n\t\t\t\t\t\t\t\tcase 'translate':\n\t\t\t\t\t\t\t\tcase 'matrix':\n\n\t\t\t\t\t\t\t\t\t\tthis.transforms.push(new Transform().parse(child));\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn this;\n\t\t};\n\n\t\tfunction Attachment() {\n\n\t\t\t\tthis.joint = '';\n\t\t\t\tthis.transforms = [];\n\t\t\t\tthis.links = [];\n\t\t}\n\n\t\tAttachment.prototype.parse = function (element) {\n\n\t\t\t\tthis.joint = element.getAttribute('joint').split('/').pop();\n\t\t\t\tthis.links = [];\n\n\t\t\t\tfor (var i = 0; i < element.childNodes.length; i++) {\n\n\t\t\t\t\t\tvar child = element.childNodes[i];\n\t\t\t\t\t\tif (child.nodeType != 1) continue;\n\n\t\t\t\t\t\tswitch (child.nodeName) {\n\n\t\t\t\t\t\t\t\tcase 'link':\n\t\t\t\t\t\t\t\t\t\tthis.links.push(new Link().parse(child));\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'rotate':\n\t\t\t\t\t\t\t\tcase 'translate':\n\t\t\t\t\t\t\t\tcase 'matrix':\n\n\t\t\t\t\t\t\t\t\t\tthis.transforms.push(new Transform().parse(child));\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn this;\n\t\t};\n\n\t\tfunction _source(element) {\n\n\t\t\t\tvar id = element.getAttribute('id');\n\n\t\t\t\tif (sources[id] != undefined) {\n\n\t\t\t\t\t\treturn sources[id];\n\t\t\t\t}\n\n\t\t\t\tsources[id] = new Source(id).parse(element);\n\t\t\t\treturn sources[id];\n\t\t}\n\n\t\tfunction _nsResolver(nsPrefix) {\n\n\t\t\t\tif (nsPrefix === \"dae\") {\n\n\t\t\t\t\t\treturn \"http://www.collada.org/2005/11/COLLADASchema\";\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\t\t}\n\n\t\tfunction _bools(str) {\n\n\t\t\t\tvar raw = _strings(str);\n\t\t\t\tvar data = [];\n\n\t\t\t\tfor (var i = 0, l = raw.length; i < l; i++) {\n\n\t\t\t\t\t\tdata.push(raw[i] === 'true' || raw[i] === '1' ? true : false);\n\t\t\t\t}\n\n\t\t\t\treturn data;\n\t\t}\n\n\t\tfunction _floats(str) {\n\n\t\t\t\tvar raw = _strings(str);\n\t\t\t\tvar data = [];\n\n\t\t\t\tfor (var i = 0, l = raw.length; i < l; i++) {\n\n\t\t\t\t\t\tdata.push(parseFloat(raw[i]));\n\t\t\t\t}\n\n\t\t\t\treturn data;\n\t\t}\n\n\t\tfunction _ints(str) {\n\n\t\t\t\tvar raw = _strings(str);\n\t\t\t\tvar data = [];\n\n\t\t\t\tfor (var i = 0, l = raw.length; i < l; i++) {\n\n\t\t\t\t\t\tdata.push(parseInt(raw[i], 10));\n\t\t\t\t}\n\n\t\t\t\treturn data;\n\t\t}\n\n\t\tfunction _strings(str) {\n\n\t\t\t\treturn str.length > 0 ? _trimString(str).split(/\\s+/) : [];\n\t\t}\n\n\t\tfunction _trimString(str) {\n\n\t\t\t\treturn str.replace(/^\\s+/, \"\").replace(/\\s+$/, \"\");\n\t\t}\n\n\t\tfunction _attr_as_float(element, name, defaultValue) {\n\n\t\t\t\tif (element.hasAttribute(name)) {\n\n\t\t\t\t\t\treturn parseFloat(element.getAttribute(name));\n\t\t\t\t} else {\n\n\t\t\t\t\t\treturn defaultValue;\n\t\t\t\t}\n\t\t}\n\n\t\tfunction _attr_as_int(element, name, defaultValue) {\n\n\t\t\t\tif (element.hasAttribute(name)) {\n\n\t\t\t\t\t\treturn parseInt(element.getAttribute(name), 10);\n\t\t\t\t} else {\n\n\t\t\t\t\t\treturn defaultValue;\n\t\t\t\t}\n\t\t}\n\n\t\tfunction _attr_as_string(element, name, defaultValue) {\n\n\t\t\t\tif (element.hasAttribute(name)) {\n\n\t\t\t\t\t\treturn element.getAttribute(name);\n\t\t\t\t} else {\n\n\t\t\t\t\t\treturn defaultValue;\n\t\t\t\t}\n\t\t}\n\n\t\tfunction _format_float(f, num) {\n\n\t\t\t\tif (f === undefined) {\n\n\t\t\t\t\t\tvar s = '0.';\n\n\t\t\t\t\t\twhile (s.length < num + 2) {\n\n\t\t\t\t\t\t\t\ts += '0';\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn s;\n\t\t\t\t}\n\n\t\t\t\tnum = num || 2;\n\n\t\t\t\tvar parts = f.toString().split('.');\n\t\t\t\tparts[1] = parts.length > 1 ? parts[1].substr(0, num) : \"0\";\n\n\t\t\t\twhile (parts[1].length < num) {\n\n\t\t\t\t\t\tparts[1] += '0';\n\t\t\t\t}\n\n\t\t\t\treturn parts.join('.');\n\t\t}\n\n\t\tfunction loadTextureImage(texture, url) {\n\n\t\t\t\tvar loader = new __WEBPACK_IMPORTED_MODULE_1_three__[\"G\" /* ImageLoader */]();\n\n\t\t\t\tloader.load(url, function (image) {\n\n\t\t\t\t\t\ttexture.image = image;\n\t\t\t\t\t\ttexture.needsUpdate = true;\n\t\t\t\t});\n\t\t}\n\n\t\tfunction extractDoubleSided(obj, element) {\n\n\t\t\t\tobj.doubleSided = false;\n\n\t\t\t\tvar node = element.querySelectorAll('extra double_sided')[0];\n\n\t\t\t\tif (node) {\n\n\t\t\t\t\t\tif (node && parseInt(node.textContent, 10) === 1) {\n\n\t\t\t\t\t\t\t\tobj.doubleSided = true;\n\t\t\t\t\t\t}\n\t\t\t\t}\n\t\t}\n\n\t\tfunction setUpConversion() {\n\n\t\t\t\tif (options.convertUpAxis !== true || colladaUp === options.upAxis) {\n\n\t\t\t\t\t\tupConversion = null;\n\t\t\t\t} else {\n\n\t\t\t\t\t\tswitch (colladaUp) {\n\n\t\t\t\t\t\t\t\tcase 'X':\n\n\t\t\t\t\t\t\t\t\t\tupConversion = options.upAxis === 'Y' ? 'XtoY' : 'XtoZ';\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'Y':\n\n\t\t\t\t\t\t\t\t\t\tupConversion = options.upAxis === 'X' ? 'YtoX' : 'YtoZ';\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'Z':\n\n\t\t\t\t\t\t\t\t\t\tupConversion = options.upAxis === 'X' ? 'ZtoX' : 'ZtoY';\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\t\t}\n\n\t\tfunction fixCoords(data, sign) {\n\n\t\t\t\tif (options.convertUpAxis !== true || colladaUp === options.upAxis) {\n\n\t\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tswitch (upConversion) {\n\n\t\t\t\t\t\tcase 'XtoY':\n\n\t\t\t\t\t\t\t\tvar tmp = data[0];\n\t\t\t\t\t\t\t\tdata[0] = sign * data[1];\n\t\t\t\t\t\t\t\tdata[1] = tmp;\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'XtoZ':\n\n\t\t\t\t\t\t\t\tvar tmp = data[2];\n\t\t\t\t\t\t\t\tdata[2] = data[1];\n\t\t\t\t\t\t\t\tdata[1] = data[0];\n\t\t\t\t\t\t\t\tdata[0] = tmp;\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'YtoX':\n\n\t\t\t\t\t\t\t\tvar tmp = data[0];\n\t\t\t\t\t\t\t\tdata[0] = data[1];\n\t\t\t\t\t\t\t\tdata[1] = sign * tmp;\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'YtoZ':\n\n\t\t\t\t\t\t\t\tvar tmp = data[1];\n\t\t\t\t\t\t\t\tdata[1] = sign * data[2];\n\t\t\t\t\t\t\t\tdata[2] = tmp;\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'ZtoX':\n\n\t\t\t\t\t\t\t\tvar tmp = data[0];\n\t\t\t\t\t\t\t\tdata[0] = data[1];\n\t\t\t\t\t\t\t\tdata[1] = data[2];\n\t\t\t\t\t\t\t\tdata[2] = tmp;\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'ZtoY':\n\n\t\t\t\t\t\t\t\tvar tmp = data[1];\n\t\t\t\t\t\t\t\tdata[1] = data[2];\n\t\t\t\t\t\t\t\tdata[2] = sign * tmp;\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\t\t}\n\n\t\tfunction getConvertedTranslation(axis, data) {\n\n\t\t\t\tif (options.convertUpAxis !== true || colladaUp === options.upAxis) {\n\n\t\t\t\t\t\treturn data;\n\t\t\t\t}\n\n\t\t\t\tswitch (axis) {\n\t\t\t\t\t\tcase 'X':\n\t\t\t\t\t\t\t\tdata = upConversion === 'XtoY' ? data * -1 : data;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'Y':\n\t\t\t\t\t\t\t\tdata = upConversion === 'YtoZ' || upConversion === 'YtoX' ? data * -1 : data;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'Z':\n\t\t\t\t\t\t\t\tdata = upConversion === 'ZtoY' ? data * -1 : data;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\treturn data;\n\t\t}\n\n\t\tfunction getConvertedVec3(data, offset) {\n\n\t\t\t\tvar arr = [data[offset], data[offset + 1], data[offset + 2]];\n\t\t\t\tfixCoords(arr, -1);\n\t\t\t\treturn new __WEBPACK_IMPORTED_MODULE_1_three__[\"d\" /* Vector3 */](arr[0], arr[1], arr[2]);\n\t\t}\n\n\t\tfunction getConvertedMat4(data) {\n\n\t\t\t\tif (options.convertUpAxis) {\n\t\t\t\t\t\tvar arr = [data[0], data[4], data[8]];\n\t\t\t\t\t\tfixCoords(arr, -1);\n\t\t\t\t\t\tdata[0] = arr[0];\n\t\t\t\t\t\tdata[4] = arr[1];\n\t\t\t\t\t\tdata[8] = arr[2];\n\t\t\t\t\t\tarr = [data[1], data[5], data[9]];\n\t\t\t\t\t\tfixCoords(arr, -1);\n\t\t\t\t\t\tdata[1] = arr[0];\n\t\t\t\t\t\tdata[5] = arr[1];\n\t\t\t\t\t\tdata[9] = arr[2];\n\t\t\t\t\t\tarr = [data[2], data[6], data[10]];\n\t\t\t\t\t\tfixCoords(arr, -1);\n\t\t\t\t\t\tdata[2] = arr[0];\n\t\t\t\t\t\tdata[6] = arr[1];\n\t\t\t\t\t\tdata[10] = arr[2];\n\n\t\t\t\t\t\tarr = [data[0], data[1], data[2]];\n\t\t\t\t\t\tfixCoords(arr, -1);\n\t\t\t\t\t\tdata[0] = arr[0];\n\t\t\t\t\t\tdata[1] = arr[1];\n\t\t\t\t\t\tdata[2] = arr[2];\n\t\t\t\t\t\tarr = [data[4], data[5], data[6]];\n\t\t\t\t\t\tfixCoords(arr, -1);\n\t\t\t\t\t\tdata[4] = arr[0];\n\t\t\t\t\t\tdata[5] = arr[1];\n\t\t\t\t\t\tdata[6] = arr[2];\n\t\t\t\t\t\tarr = [data[8], data[9], data[10]];\n\t\t\t\t\t\tfixCoords(arr, -1);\n\t\t\t\t\t\tdata[8] = arr[0];\n\t\t\t\t\t\tdata[9] = arr[1];\n\t\t\t\t\t\tdata[10] = arr[2];\n\n\t\t\t\t\t\tarr = [data[3], data[7], data[11]];\n\t\t\t\t\t\tfixCoords(arr, -1);\n\t\t\t\t\t\tdata[3] = arr[0];\n\t\t\t\t\t\tdata[7] = arr[1];\n\t\t\t\t\t\tdata[11] = arr[2];\n\t\t\t\t}\n\n\t\t\t\treturn new __WEBPACK_IMPORTED_MODULE_1_three__[\"c\" /* Matrix4 */]().set(data[0], data[1], data[2], data[3], data[4], data[5], data[6], data[7], data[8], data[9], data[10], data[11], data[12], data[13], data[14], data[15]);\n\t\t}\n\n\t\tfunction getConvertedIndex(index) {\n\n\t\t\t\tif (index > -1 && index < 3) {\n\n\t\t\t\t\t\tvar members = ['X', 'Y', 'Z'],\n\t\t\t\t\t\t    indices = { X: 0, Y: 1, Z: 2 };\n\n\t\t\t\t\t\tindex = getConvertedMember(members[index]);\n\t\t\t\t\t\tindex = indices[index];\n\t\t\t\t}\n\n\t\t\t\treturn index;\n\t\t}\n\n\t\tfunction getConvertedMember(member) {\n\n\t\t\t\tif (options.convertUpAxis) {\n\n\t\t\t\t\t\tswitch (member) {\n\n\t\t\t\t\t\t\t\tcase 'X':\n\n\t\t\t\t\t\t\t\t\t\tswitch (upConversion) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tcase 'XtoY':\n\t\t\t\t\t\t\t\t\t\t\t\tcase 'XtoZ':\n\t\t\t\t\t\t\t\t\t\t\t\tcase 'YtoX':\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmember = 'Y';\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\tcase 'ZtoX':\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmember = 'Z';\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'Y':\n\n\t\t\t\t\t\t\t\t\t\tswitch (upConversion) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tcase 'XtoY':\n\t\t\t\t\t\t\t\t\t\t\t\tcase 'YtoX':\n\t\t\t\t\t\t\t\t\t\t\t\tcase 'ZtoX':\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmember = 'X';\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\tcase 'XtoZ':\n\t\t\t\t\t\t\t\t\t\t\t\tcase 'YtoZ':\n\t\t\t\t\t\t\t\t\t\t\t\tcase 'ZtoY':\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmember = 'Z';\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'Z':\n\n\t\t\t\t\t\t\t\t\t\tswitch (upConversion) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tcase 'XtoZ':\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmember = 'X';\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\t\tcase 'YtoZ':\n\t\t\t\t\t\t\t\t\t\t\t\tcase 'ZtoX':\n\t\t\t\t\t\t\t\t\t\t\t\tcase 'ZtoY':\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmember = 'Y';\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn member;\n\t\t}\n\n\t\treturn {\n\n\t\t\t\tload: load,\n\t\t\t\tparse: parse,\n\t\t\t\tsetPreferredShading: setPreferredShading,\n\t\t\t\tapplySkin: applySkin,\n\t\t\t\tgeometries: geometries,\n\t\t\t\toptions: options\n\n\t\t};\n};\n\n\n\n/***/ }),\n\n/***/ 42:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return OBJLoader; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_three__ = __webpack_require__(1);\n\n\nvar OBJLoader = function OBJLoader(manager) {\n\n\t\t\t\tthis.manager = manager !== undefined ? manager : __WEBPACK_IMPORTED_MODULE_0_three__[\"R\" /* DefaultLoadingManager */];\n\n\t\t\t\tthis.materials = null;\n\n\t\t\t\tthis.regexp = {\n\t\t\t\t\t\t\t\tvertex_pattern: /^v\\s+([\\d|\\.|\\+|\\-|e|E]+)\\s+([\\d|\\.|\\+|\\-|e|E]+)\\s+([\\d|\\.|\\+|\\-|e|E]+)/,\n\n\t\t\t\t\t\t\t\tnormal_pattern: /^vn\\s+([\\d|\\.|\\+|\\-|e|E]+)\\s+([\\d|\\.|\\+|\\-|e|E]+)\\s+([\\d|\\.|\\+|\\-|e|E]+)/,\n\n\t\t\t\t\t\t\t\tuv_pattern: /^vt\\s+([\\d|\\.|\\+|\\-|e|E]+)\\s+([\\d|\\.|\\+|\\-|e|E]+)/,\n\n\t\t\t\t\t\t\t\tface_vertex: /^f\\s+(-?\\d+)\\s+(-?\\d+)\\s+(-?\\d+)(?:\\s+(-?\\d+))?/,\n\n\t\t\t\t\t\t\t\tface_vertex_uv: /^f\\s+(-?\\d+)\\/(-?\\d+)\\s+(-?\\d+)\\/(-?\\d+)\\s+(-?\\d+)\\/(-?\\d+)(?:\\s+(-?\\d+)\\/(-?\\d+))?/,\n\n\t\t\t\t\t\t\t\tface_vertex_uv_normal: /^f\\s+(-?\\d+)\\/(-?\\d+)\\/(-?\\d+)\\s+(-?\\d+)\\/(-?\\d+)\\/(-?\\d+)\\s+(-?\\d+)\\/(-?\\d+)\\/(-?\\d+)(?:\\s+(-?\\d+)\\/(-?\\d+)\\/(-?\\d+))?/,\n\n\t\t\t\t\t\t\t\tface_vertex_normal: /^f\\s+(-?\\d+)\\/\\/(-?\\d+)\\s+(-?\\d+)\\/\\/(-?\\d+)\\s+(-?\\d+)\\/\\/(-?\\d+)(?:\\s+(-?\\d+)\\/\\/(-?\\d+))?/,\n\n\t\t\t\t\t\t\t\tobject_pattern: /^[og]\\s*(.+)?/,\n\n\t\t\t\t\t\t\t\tsmoothing_pattern: /^s\\s+(\\d+|on|off)/,\n\n\t\t\t\t\t\t\t\tmaterial_library_pattern: /^mtllib /,\n\n\t\t\t\t\t\t\t\tmaterial_use_pattern: /^usemtl /\n\t\t\t\t};\n};\n\nOBJLoader.prototype = {\n\n\t\t\t\tconstructor: OBJLoader,\n\n\t\t\t\tload: function load(url, onLoad, onProgress, onError) {\n\n\t\t\t\t\t\t\t\tvar scope = this;\n\n\t\t\t\t\t\t\t\tvar loader = new __WEBPACK_IMPORTED_MODULE_0_three__[\"S\" /* FileLoader */](scope.manager);\n\t\t\t\t\t\t\t\tloader.setPath(this.path);\n\t\t\t\t\t\t\t\tloader.load(url, function (text) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tonLoad(scope.parse(text));\n\t\t\t\t\t\t\t\t}, onProgress, onError);\n\t\t\t\t},\n\n\t\t\t\tsetPath: function setPath(value) {\n\n\t\t\t\t\t\t\t\tthis.path = value;\n\t\t\t\t},\n\n\t\t\t\tsetMaterials: function setMaterials(materials) {\n\n\t\t\t\t\t\t\t\tthis.materials = materials;\n\t\t\t\t},\n\n\t\t\t\t_createParserState: function _createParserState() {\n\n\t\t\t\t\t\t\t\tvar state = {\n\t\t\t\t\t\t\t\t\t\t\t\tobjects: [],\n\t\t\t\t\t\t\t\t\t\t\t\tobject: {},\n\n\t\t\t\t\t\t\t\t\t\t\t\tvertices: [],\n\t\t\t\t\t\t\t\t\t\t\t\tnormals: [],\n\t\t\t\t\t\t\t\t\t\t\t\tuvs: [],\n\n\t\t\t\t\t\t\t\t\t\t\t\tmaterialLibraries: [],\n\n\t\t\t\t\t\t\t\t\t\t\t\tstartObject: function startObject(name, fromDeclaration) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (this.object && this.object.fromDeclaration === false) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.object.name = name;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.object.fromDeclaration = fromDeclaration !== false;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar previousMaterial = this.object && typeof this.object.currentMaterial === 'function' ? this.object.currentMaterial() : undefined;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (this.object && typeof this.object._finalize === 'function') {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.object._finalize(true);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.object = {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname: name || '',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfromDeclaration: fromDeclaration !== false,\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgeometry: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvertices: [],\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tnormals: [],\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuvs: []\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmaterials: [],\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsmooth: true,\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstartMaterial: function startMaterial(name, libraries) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar previous = this._finalize(false);\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (previous && (previous.inherited || previous.groupCount <= 0)) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.materials.splice(previous.index, 1);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar material = {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tindex: this.materials.length,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname: name || '',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmtllib: Array.isArray(libraries) && libraries.length > 0 ? libraries[libraries.length - 1] : '',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsmooth: previous !== undefined ? previous.smooth : this.smooth,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgroupStart: previous !== undefined ? previous.groupEnd : 0,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgroupEnd: -1,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgroupCount: -1,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tinherited: false,\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclone: function clone(index) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar cloned = {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tindex: typeof index === 'number' ? index : this.index,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname: this.name,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmtllib: this.mtllib,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsmooth: this.smooth,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgroupStart: 0,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgroupEnd: -1,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgroupCount: -1,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tinherited: false\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcloned.clone = this.clone.bind(cloned);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn cloned;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.materials.push(material);\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn material;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcurrentMaterial: function currentMaterial() {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (this.materials.length > 0) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn this.materials[this.materials.length - 1];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t_finalize: function _finalize(end) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar lastMultiMaterial = this.currentMaterial();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (lastMultiMaterial && lastMultiMaterial.groupEnd === -1) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlastMultiMaterial.groupEnd = this.geometry.vertices.length / 3;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlastMultiMaterial.groupCount = lastMultiMaterial.groupEnd - lastMultiMaterial.groupStart;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlastMultiMaterial.inherited = false;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (end && this.materials.length > 1) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfor (var mi = this.materials.length - 1; mi >= 0; mi--) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (this.materials[mi].groupCount <= 0) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.materials.splice(mi, 1);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (end && this.materials.length === 0) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.materials.push({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname: '',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsmooth: this.smooth\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn lastMultiMaterial;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (previousMaterial && previousMaterial.name && typeof previousMaterial.clone === \"function\") {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar declared = previousMaterial.clone(0);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdeclared.inherited = true;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.object.materials.push(declared);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.objects.push(this.object);\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\n\t\t\t\t\t\t\t\t\t\t\t\tfinalize: function finalize() {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (this.object && typeof this.object._finalize === 'function') {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.object._finalize(true);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\n\t\t\t\t\t\t\t\t\t\t\t\tparseVertexIndex: function parseVertexIndex(value, len) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar index = parseInt(value, 10);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (index >= 0 ? index - 1 : index + len / 3) * 3;\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\n\t\t\t\t\t\t\t\t\t\t\t\tparseNormalIndex: function parseNormalIndex(value, len) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar index = parseInt(value, 10);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (index >= 0 ? index - 1 : index + len / 3) * 3;\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\n\t\t\t\t\t\t\t\t\t\t\t\tparseUVIndex: function parseUVIndex(value, len) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar index = parseInt(value, 10);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (index >= 0 ? index - 1 : index + len / 2) * 2;\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\n\t\t\t\t\t\t\t\t\t\t\t\taddVertex: function addVertex(a, b, c) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar src = this.vertices;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar dst = this.object.geometry.vertices;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdst.push(src[a + 0]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdst.push(src[a + 1]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdst.push(src[a + 2]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdst.push(src[b + 0]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdst.push(src[b + 1]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdst.push(src[b + 2]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdst.push(src[c + 0]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdst.push(src[c + 1]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdst.push(src[c + 2]);\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\n\t\t\t\t\t\t\t\t\t\t\t\taddVertexLine: function addVertexLine(a) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar src = this.vertices;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar dst = this.object.geometry.vertices;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdst.push(src[a + 0]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdst.push(src[a + 1]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdst.push(src[a + 2]);\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\n\t\t\t\t\t\t\t\t\t\t\t\taddNormal: function addNormal(a, b, c) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar src = this.normals;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar dst = this.object.geometry.normals;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdst.push(src[a + 0]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdst.push(src[a + 1]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdst.push(src[a + 2]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdst.push(src[b + 0]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdst.push(src[b + 1]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdst.push(src[b + 2]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdst.push(src[c + 0]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdst.push(src[c + 1]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdst.push(src[c + 2]);\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\n\t\t\t\t\t\t\t\t\t\t\t\taddUV: function addUV(a, b, c) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar src = this.uvs;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar dst = this.object.geometry.uvs;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdst.push(src[a + 0]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdst.push(src[a + 1]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdst.push(src[b + 0]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdst.push(src[b + 1]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdst.push(src[c + 0]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdst.push(src[c + 1]);\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\n\t\t\t\t\t\t\t\t\t\t\t\taddUVLine: function addUVLine(a) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar src = this.uvs;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar dst = this.object.geometry.uvs;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdst.push(src[a + 0]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdst.push(src[a + 1]);\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\n\t\t\t\t\t\t\t\t\t\t\t\taddFace: function addFace(a, b, c, d, ua, ub, uc, ud, na, nb, nc, nd) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar vLen = this.vertices.length;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar ia = this.parseVertexIndex(a, vLen);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar ib = this.parseVertexIndex(b, vLen);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar ic = this.parseVertexIndex(c, vLen);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar id;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (d === undefined) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.addVertex(ia, ib, ic);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid = this.parseVertexIndex(d, vLen);\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.addVertex(ia, ib, id);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.addVertex(ib, ic, id);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (ua !== undefined) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar uvLen = this.uvs.length;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tia = this.parseUVIndex(ua, uvLen);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tib = this.parseUVIndex(ub, uvLen);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tic = this.parseUVIndex(uc, uvLen);\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (d === undefined) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.addUV(ia, ib, ic);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid = this.parseUVIndex(ud, uvLen);\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.addUV(ia, ib, id);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.addUV(ib, ic, id);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (na !== undefined) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar nLen = this.normals.length;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tia = this.parseNormalIndex(na, nLen);\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tib = na === nb ? ia : this.parseNormalIndex(nb, nLen);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tic = na === nc ? ia : this.parseNormalIndex(nc, nLen);\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (d === undefined) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.addNormal(ia, ib, ic);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid = this.parseNormalIndex(nd, nLen);\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.addNormal(ia, ib, id);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.addNormal(ib, ic, id);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\n\t\t\t\t\t\t\t\t\t\t\t\taddLineGeometry: function addLineGeometry(vertices, uvs) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.object.geometry.type = 'Line';\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar vLen = this.vertices.length;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar uvLen = this.uvs.length;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfor (var vi = 0, l = vertices.length; vi < l; vi++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.addVertexLine(this.parseVertexIndex(vertices[vi], vLen));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfor (var uvi = 0, l = uvs.length; uvi < l; uvi++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.addUVLine(this.parseUVIndex(uvs[uvi], uvLen));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\tstate.startObject('', false);\n\n\t\t\t\t\t\t\t\treturn state;\n\t\t\t\t},\n\n\t\t\t\tparse: function parse(text) {\n\n\t\t\t\t\t\t\t\tconsole.time('OBJLoader');\n\n\t\t\t\t\t\t\t\tvar state = this._createParserState();\n\n\t\t\t\t\t\t\t\tif (text.indexOf('\\r\\n') !== -1) {\n\t\t\t\t\t\t\t\t\t\t\t\ttext = text.replace(/\\r\\n/g, '\\n');\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (text.indexOf('\\\\\\n') !== -1) {\n\t\t\t\t\t\t\t\t\t\t\t\ttext = text.replace(/\\\\\\n/g, '');\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tvar lines = text.split('\\n');\n\t\t\t\t\t\t\t\tvar line = '',\n\t\t\t\t\t\t\t\t    lineFirstChar = '',\n\t\t\t\t\t\t\t\t    lineSecondChar = '';\n\t\t\t\t\t\t\t\tvar lineLength = 0;\n\t\t\t\t\t\t\t\tvar result = [];\n\n\t\t\t\t\t\t\t\tvar trimLeft = typeof ''.trimLeft === 'function';\n\n\t\t\t\t\t\t\t\tfor (var i = 0, l = lines.length; i < l; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tline = lines[i];\n\n\t\t\t\t\t\t\t\t\t\t\t\tline = trimLeft ? line.trimLeft() : line.trim();\n\n\t\t\t\t\t\t\t\t\t\t\t\tlineLength = line.length;\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (lineLength === 0) continue;\n\n\t\t\t\t\t\t\t\t\t\t\t\tlineFirstChar = line.charAt(0);\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (lineFirstChar === '#') continue;\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (lineFirstChar === 'v') {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlineSecondChar = line.charAt(1);\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (lineSecondChar === ' ' && (result = this.regexp.vertex_pattern.exec(line)) !== null) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstate.vertices.push(parseFloat(result[1]), parseFloat(result[2]), parseFloat(result[3]));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else if (lineSecondChar === 'n' && (result = this.regexp.normal_pattern.exec(line)) !== null) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstate.normals.push(parseFloat(result[1]), parseFloat(result[2]), parseFloat(result[3]));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else if (lineSecondChar === 't' && (result = this.regexp.uv_pattern.exec(line)) !== null) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstate.uvs.push(parseFloat(result[1]), parseFloat(result[2]));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthrow new Error(\"Unexpected vertex/normal/uv line: '\" + line + \"'\");\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t} else if (lineFirstChar === \"f\") {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif ((result = this.regexp.face_vertex_uv_normal.exec(line)) !== null) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstate.addFace(result[1], result[4], result[7], result[10], result[2], result[5], result[8], result[11], result[3], result[6], result[9], result[12]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else if ((result = this.regexp.face_vertex_uv.exec(line)) !== null) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstate.addFace(result[1], result[3], result[5], result[7], result[2], result[4], result[6], result[8]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else if ((result = this.regexp.face_vertex_normal.exec(line)) !== null) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstate.addFace(result[1], result[3], result[5], result[7], undefined, undefined, undefined, undefined, result[2], result[4], result[6], result[8]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else if ((result = this.regexp.face_vertex.exec(line)) !== null) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstate.addFace(result[1], result[2], result[3], result[4]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthrow new Error(\"Unexpected face line: '\" + line + \"'\");\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t} else if (lineFirstChar === \"l\") {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar lineParts = line.substring(1).trim().split(\" \");\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar lineVertices = [],\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    lineUVs = [];\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (line.indexOf(\"/\") === -1) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlineVertices = lineParts;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfor (var li = 0, llen = lineParts.length; li < llen; li++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar parts = lineParts[li].split(\"/\");\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (parts[0] !== \"\") lineVertices.push(parts[0]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (parts[1] !== \"\") lineUVs.push(parts[1]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstate.addLineGeometry(lineVertices, lineUVs);\n\t\t\t\t\t\t\t\t\t\t\t\t} else if ((result = this.regexp.object_pattern.exec(line)) !== null) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar name = (\" \" + result[0].substr(1).trim()).substr(1);\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstate.startObject(name);\n\t\t\t\t\t\t\t\t\t\t\t\t} else if (this.regexp.material_use_pattern.test(line)) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstate.object.startMaterial(line.substring(7).trim(), state.materialLibraries);\n\t\t\t\t\t\t\t\t\t\t\t\t} else if (this.regexp.material_library_pattern.test(line)) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstate.materialLibraries.push(line.substring(7).trim());\n\t\t\t\t\t\t\t\t\t\t\t\t} else if ((result = this.regexp.smoothing_pattern.exec(line)) !== null) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar value = result[1].trim().toLowerCase();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstate.object.smooth = value === '1' || value === 'on';\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar material = state.object.currentMaterial();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (material) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmaterial.smooth = state.object.smooth;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (line === '\\0') continue;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthrow new Error(\"Unexpected line: '\" + line + \"'\");\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tstate.finalize();\n\n\t\t\t\t\t\t\t\tvar container = new __WEBPACK_IMPORTED_MODULE_0_three__[\"b\" /* Group */]();\n\t\t\t\t\t\t\t\tcontainer.materialLibraries = [].concat(state.materialLibraries);\n\n\t\t\t\t\t\t\t\tfor (var i = 0, l = state.objects.length; i < l; i++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar object = state.objects[i];\n\t\t\t\t\t\t\t\t\t\t\t\tvar geometry = object.geometry;\n\t\t\t\t\t\t\t\t\t\t\t\tvar materials = object.materials;\n\t\t\t\t\t\t\t\t\t\t\t\tvar isLine = geometry.type === 'Line';\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (geometry.vertices.length === 0) continue;\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar buffergeometry = new __WEBPACK_IMPORTED_MODULE_0_three__[\"T\" /* BufferGeometry */]();\n\n\t\t\t\t\t\t\t\t\t\t\t\tbuffergeometry.addAttribute('position', new __WEBPACK_IMPORTED_MODULE_0_three__[\"Q\" /* BufferAttribute */](new Float32Array(geometry.vertices), 3));\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (geometry.normals.length > 0) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbuffergeometry.addAttribute('normal', new __WEBPACK_IMPORTED_MODULE_0_three__[\"Q\" /* BufferAttribute */](new Float32Array(geometry.normals), 3));\n\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbuffergeometry.computeVertexNormals();\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (geometry.uvs.length > 0) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbuffergeometry.addAttribute('uv', new __WEBPACK_IMPORTED_MODULE_0_three__[\"Q\" /* BufferAttribute */](new Float32Array(geometry.uvs), 2));\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar createdMaterials = [];\n\n\t\t\t\t\t\t\t\t\t\t\t\tfor (var mi = 0, miLen = materials.length; mi < miLen; mi++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar sourceMaterial = materials[mi];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar material = undefined;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (this.materials !== null) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmaterial = this.materials.create(sourceMaterial.name);\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (isLine && material && !(material instanceof __WEBPACK_IMPORTED_MODULE_0_three__[\"U\" /* LineBasicMaterial */])) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar materialLine = new __WEBPACK_IMPORTED_MODULE_0_three__[\"U\" /* LineBasicMaterial */]();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmaterialLine.copy(material);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmaterial = materialLine;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (!material) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmaterial = !isLine ? new __WEBPACK_IMPORTED_MODULE_0_three__[\"F\" /* MeshPhongMaterial */]() : new __WEBPACK_IMPORTED_MODULE_0_three__[\"U\" /* LineBasicMaterial */]();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmaterial.name = sourceMaterial.name;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmaterial.shading = sourceMaterial.smooth ? __WEBPACK_IMPORTED_MODULE_0_three__[\"a\" /* SmoothShading */] : __WEBPACK_IMPORTED_MODULE_0_three__[\"V\" /* FlatShading */];\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcreatedMaterials.push(material);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\tvar mesh;\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (createdMaterials.length > 1) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfor (var mi = 0, miLen = materials.length; mi < miLen; mi++) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar sourceMaterial = materials[mi];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbuffergeometry.addGroup(sourceMaterial.groupStart, sourceMaterial.groupCount, mi);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmesh = !isLine ? new __WEBPACK_IMPORTED_MODULE_0_three__[\"n\" /* Mesh */](buffergeometry, createdMaterials) : new __WEBPACK_IMPORTED_MODULE_0_three__[\"W\" /* LineSegments */](buffergeometry, createdMaterials);\n\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmesh = !isLine ? new __WEBPACK_IMPORTED_MODULE_0_three__[\"n\" /* Mesh */](buffergeometry, createdMaterials[0]) : new __WEBPACK_IMPORTED_MODULE_0_three__[\"W\" /* LineSegments */](buffergeometry, createdMaterials[0]);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\tmesh.name = object.name;\n\n\t\t\t\t\t\t\t\t\t\t\t\tcontainer.add(mesh);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tconsole.timeEnd('OBJLoader');\n\n\t\t\t\t\t\t\t\treturn container;\n\t\t\t\t}\n\n};\n\n\n\n/***/ }),\n\n/***/ 43:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return STLLoader; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_three__ = __webpack_require__(1);\n\n\nvar STLLoader = function STLLoader(manager) {\n\n\t\tthis.manager = manager !== undefined ? manager : __WEBPACK_IMPORTED_MODULE_0_three__[\"R\" /* DefaultLoadingManager */];\n};\n\nSTLLoader.prototype = {\n\n\t\tconstructor: STLLoader,\n\n\t\tload: function load(url, onLoad, onProgress, onError) {\n\n\t\t\t\tvar scope = this;\n\n\t\t\t\tvar loader = new __WEBPACK_IMPORTED_MODULE_0_three__[\"S\" /* FileLoader */](scope.manager);\n\t\t\t\tloader.setResponseType('arraybuffer');\n\t\t\t\tloader.load(url, function (text) {\n\n\t\t\t\t\t\tonLoad(scope.parse(text));\n\t\t\t\t}, onProgress, onError);\n\t\t},\n\n\t\tparse: function parse(data) {\n\n\t\t\t\tvar isBinary = function isBinary() {\n\n\t\t\t\t\t\tvar expect, face_size, n_faces, reader;\n\t\t\t\t\t\treader = new DataView(binData);\n\t\t\t\t\t\tface_size = 32 / 8 * 3 + 32 / 8 * 3 * 3 + 16 / 8;\n\t\t\t\t\t\tn_faces = reader.getUint32(80, true);\n\t\t\t\t\t\texpect = 80 + 32 / 8 + n_faces * face_size;\n\n\t\t\t\t\t\tif (expect === reader.byteLength) {\n\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar solid = [115, 111, 108, 105, 100];\n\n\t\t\t\t\t\tfor (var i = 0; i < 5; i++) {\n\n\t\t\t\t\t\t\t\tif (solid[i] != reader.getUint8(i, false)) return true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn false;\n\t\t\t\t};\n\n\t\t\t\tvar binData = this.ensureBinary(data);\n\n\t\t\t\treturn isBinary() ? this.parseBinary(binData) : this.parseASCII(this.ensureString(data));\n\t\t},\n\n\t\tparseBinary: function parseBinary(data) {\n\n\t\t\t\tvar reader = new DataView(data);\n\t\t\t\tvar faces = reader.getUint32(80, true);\n\n\t\t\t\tvar r,\n\t\t\t\t    g,\n\t\t\t\t    b,\n\t\t\t\t    hasColors = false,\n\t\t\t\t    colors;\n\t\t\t\tvar defaultR, defaultG, defaultB, alpha;\n\n\t\t\t\tfor (var index = 0; index < 80 - 10; index++) {\n\n\t\t\t\t\t\tif (reader.getUint32(index, false) == 0x434F4C4F && reader.getUint8(index + 4) == 0x52 && reader.getUint8(index + 5) == 0x3D) {\n\n\t\t\t\t\t\t\t\thasColors = true;\n\t\t\t\t\t\t\t\tcolors = [];\n\n\t\t\t\t\t\t\t\tdefaultR = reader.getUint8(index + 6) / 255;\n\t\t\t\t\t\t\t\tdefaultG = reader.getUint8(index + 7) / 255;\n\t\t\t\t\t\t\t\tdefaultB = reader.getUint8(index + 8) / 255;\n\t\t\t\t\t\t\t\talpha = reader.getUint8(index + 9) / 255;\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvar dataOffset = 84;\n\t\t\t\tvar faceLength = 12 * 4 + 2;\n\n\t\t\t\tvar geometry = new __WEBPACK_IMPORTED_MODULE_0_three__[\"T\" /* BufferGeometry */]();\n\n\t\t\t\tvar vertices = [];\n\t\t\t\tvar normals = [];\n\n\t\t\t\tfor (var face = 0; face < faces; face++) {\n\n\t\t\t\t\t\tvar start = dataOffset + face * faceLength;\n\t\t\t\t\t\tvar normalX = reader.getFloat32(start, true);\n\t\t\t\t\t\tvar normalY = reader.getFloat32(start + 4, true);\n\t\t\t\t\t\tvar normalZ = reader.getFloat32(start + 8, true);\n\n\t\t\t\t\t\tif (hasColors) {\n\n\t\t\t\t\t\t\t\tvar packedColor = reader.getUint16(start + 48, true);\n\n\t\t\t\t\t\t\t\tif ((packedColor & 0x8000) === 0) {\n\n\t\t\t\t\t\t\t\t\t\tr = (packedColor & 0x1F) / 31;\n\t\t\t\t\t\t\t\t\t\tg = (packedColor >> 5 & 0x1F) / 31;\n\t\t\t\t\t\t\t\t\t\tb = (packedColor >> 10 & 0x1F) / 31;\n\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\tr = defaultR;\n\t\t\t\t\t\t\t\t\t\tg = defaultG;\n\t\t\t\t\t\t\t\t\t\tb = defaultB;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfor (var i = 1; i <= 3; i++) {\n\n\t\t\t\t\t\t\t\tvar vertexstart = start + i * 12;\n\n\t\t\t\t\t\t\t\tvertices.push(reader.getFloat32(vertexstart, true));\n\t\t\t\t\t\t\t\tvertices.push(reader.getFloat32(vertexstart + 4, true));\n\t\t\t\t\t\t\t\tvertices.push(reader.getFloat32(vertexstart + 8, true));\n\n\t\t\t\t\t\t\t\tnormals.push(normalX, normalY, normalZ);\n\n\t\t\t\t\t\t\t\tif (hasColors) {\n\n\t\t\t\t\t\t\t\t\t\tcolors.push(r, g, b);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tgeometry.addAttribute('position', new __WEBPACK_IMPORTED_MODULE_0_three__[\"Q\" /* BufferAttribute */](new Float32Array(vertices), 3));\n\t\t\t\tgeometry.addAttribute('normal', new __WEBPACK_IMPORTED_MODULE_0_three__[\"Q\" /* BufferAttribute */](new Float32Array(normals), 3));\n\n\t\t\t\tif (hasColors) {\n\n\t\t\t\t\t\tgeometry.addAttribute('color', new __WEBPACK_IMPORTED_MODULE_0_three__[\"Q\" /* BufferAttribute */](new Float32Array(colors), 3));\n\t\t\t\t\t\tgeometry.hasColors = true;\n\t\t\t\t\t\tgeometry.alpha = alpha;\n\t\t\t\t}\n\n\t\t\t\treturn geometry;\n\t\t},\n\n\t\tparseASCII: function parseASCII(data) {\n\n\t\t\t\tvar geometry, length, patternFace, patternNormal, patternVertex, result, text;\n\t\t\t\tgeometry = new __WEBPACK_IMPORTED_MODULE_0_three__[\"T\" /* BufferGeometry */]();\n\t\t\t\tpatternFace = /facet([\\s\\S]*?)endfacet/g;\n\n\t\t\t\tvar vertices = [];\n\t\t\t\tvar normals = [];\n\n\t\t\t\tvar normal = new __WEBPACK_IMPORTED_MODULE_0_three__[\"d\" /* Vector3 */]();\n\n\t\t\t\twhile ((result = patternFace.exec(data)) !== null) {\n\n\t\t\t\t\t\ttext = result[0];\n\t\t\t\t\t\tpatternNormal = /normal[\\s]+([\\-+]?[0-9]+\\.?[0-9]*([eE][\\-+]?[0-9]+)?)+[\\s]+([\\-+]?[0-9]*\\.?[0-9]+([eE][\\-+]?[0-9]+)?)+[\\s]+([\\-+]?[0-9]*\\.?[0-9]+([eE][\\-+]?[0-9]+)?)+/g;\n\n\t\t\t\t\t\twhile ((result = patternNormal.exec(text)) !== null) {\n\n\t\t\t\t\t\t\t\tnormal.x = parseFloat(result[1]);\n\t\t\t\t\t\t\t\tnormal.y = parseFloat(result[3]);\n\t\t\t\t\t\t\t\tnormal.z = parseFloat(result[5]);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tpatternVertex = /vertex[\\s]+([\\-+]?[0-9]+\\.?[0-9]*([eE][\\-+]?[0-9]+)?)+[\\s]+([\\-+]?[0-9]*\\.?[0-9]+([eE][\\-+]?[0-9]+)?)+[\\s]+([\\-+]?[0-9]*\\.?[0-9]+([eE][\\-+]?[0-9]+)?)+/g;\n\n\t\t\t\t\t\twhile ((result = patternVertex.exec(text)) !== null) {\n\n\t\t\t\t\t\t\t\tvertices.push(parseFloat(result[1]), parseFloat(result[3]), parseFloat(result[5]));\n\t\t\t\t\t\t\t\tnormals.push(normal.x, normal.y, normal.z);\n\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tgeometry.addAttribute('position', new __WEBPACK_IMPORTED_MODULE_0_three__[\"Q\" /* BufferAttribute */](new Float32Array(vertices), 3));\n\t\t\t\tgeometry.addAttribute('normal', new __WEBPACK_IMPORTED_MODULE_0_three__[\"Q\" /* BufferAttribute */](new Float32Array(normals), 3));\n\n\t\t\t\treturn geometry;\n\t\t},\n\n\t\tensureString: function ensureString(buf) {\n\n\t\t\t\tif (typeof buf !== \"string\") {\n\n\t\t\t\t\t\tvar array_buffer = new Uint8Array(buf);\n\t\t\t\t\t\tvar strArray = [];\n\t\t\t\t\t\tfor (var i = 0; i < buf.byteLength; i++) {\n\n\t\t\t\t\t\t\t\tstrArray.push(String.fromCharCode(array_buffer[i]));\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn strArray.join('');\n\t\t\t\t} else {\n\n\t\t\t\t\t\treturn buf;\n\t\t\t\t}\n\t\t},\n\n\t\tensureBinary: function ensureBinary(buf) {\n\n\t\t\t\tif (typeof buf === \"string\") {\n\n\t\t\t\t\t\tvar array_buffer = new Uint8Array(buf.length);\n\t\t\t\t\t\tfor (var i = 0; i < buf.length; i++) {\n\n\t\t\t\t\t\t\t\tarray_buffer[i] = buf.charCodeAt(i) & 0xff;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn array_buffer.buffer || array_buffer;\n\t\t\t\t} else {\n\n\t\t\t\t\t\treturn buf;\n\t\t\t\t}\n\t\t}\n\n};\n\n\n\n/***/ }),\n\n/***/ 5:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(36),\n  /* template */\n  __webpack_require__(266),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 6:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return getSize; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return getCenter; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return toIndexed; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_three__ = __webpack_require__(1);\n\n\nvar box = new __WEBPACK_IMPORTED_MODULE_0_three__[\"P\" /* Box3 */]();\n\nfunction getSize(object) {\n\n    box.setFromObject(object);\n\n    return box.getSize();\n}\n\nfunction getCenter(object) {\n\n    box.setFromObject(object);\n\n    return box.getCenter();\n}\n\nfunction lightsDiff(lights, oldLights) {}\n\nfunction toIndexed(bufferGeometry) {\n\n    var raw_positions = bufferGeometry.getAttribute('position').array;\n\n    var raw_uvs;\n    var hasUV = bufferGeometry.getAttribute('uv') !== undefined;\n    if (hasUV) raw_uvs = bufferGeometry.getAttribute('uv').array;\n\n    var raw_normals;\n    var hasNormal = bufferGeometry.getAttribute('normal') !== undefined;\n    if (hasNormal) raw_normals = bufferGeometry.getAttribute('normal').array;\n\n    var indices = [];\n    var vertices = [];\n    var normals = [];\n    var uvs = [];\n\n    var face, face_normalss, face_uvs, tmp_indices;\n\n    var v0 = new __WEBPACK_IMPORTED_MODULE_0_three__[\"d\" /* Vector3 */]();\n    var v1 = new __WEBPACK_IMPORTED_MODULE_0_three__[\"d\" /* Vector3 */]();\n    var v2 = new __WEBPACK_IMPORTED_MODULE_0_three__[\"d\" /* Vector3 */]();\n\n    var n0 = new __WEBPACK_IMPORTED_MODULE_0_three__[\"d\" /* Vector3 */]();\n    var n1 = new __WEBPACK_IMPORTED_MODULE_0_three__[\"d\" /* Vector3 */]();\n    var n2 = new __WEBPACK_IMPORTED_MODULE_0_three__[\"d\" /* Vector3 */]();\n\n    var uv0 = new __WEBPACK_IMPORTED_MODULE_0_three__[\"v\" /* Vector2 */]();\n    var uv1 = new __WEBPACK_IMPORTED_MODULE_0_three__[\"v\" /* Vector2 */]();\n    var uv2 = new __WEBPACK_IMPORTED_MODULE_0_three__[\"v\" /* Vector2 */]();\n\n    for (var i = 0; i < raw_positions.length; i += 9) {\n\n        v0.x = raw_positions[i];\n        v0.y = raw_positions[i + 1];\n        v0.z = raw_positions[i + 2];\n\n        v1.x = raw_positions[i + 3];\n        v1.y = raw_positions[i + 4];\n        v1.z = raw_positions[i + 5];\n\n        v2.x = raw_positions[i + 6];\n        v2.y = raw_positions[i + 7];\n        v2.z = raw_positions[i + 8];\n\n        face = [v0, v1, v2];\n\n        if (hasNormal) {\n\n            n0.x = raw_normals[i];\n            n0.y = raw_normals[i + 1];\n            n0.z = raw_normals[i + 2];\n\n            n1.x = raw_normals[i + 3];\n            n1.y = raw_normals[i + 4];\n            n1.z = raw_normals[i + 5];\n\n            n2.x = raw_normals[i + 6];\n            n2.y = raw_normals[i + 7];\n            n2.z = raw_normals[i + 8];\n\n            face_normalss = [n0, n1, n2];\n        }\n\n        if (hasUV) {\n\n            uv0.x = raw_uvs[i];\n            uv0.y = raw_uvs[i + 1];\n\n            uv1.x = raw_uvs[i + 2];\n            uv1.y = raw_uvs[i + 3];\n\n            uv2.x = raw_uvs[i + 4];\n            uv2.y = raw_uvs[i + 5];\n\n            face_uvs = [uv0, uv1, uv2];\n        }\n\n        tmp_indices = [];\n\n        face.forEach(function (v, i) {\n\n            var id = exists(v, vertices);\n            if (id == -1) {\n\n                id = vertices.length;\n                vertices.push(v.clone());\n\n                if (hasNormal) normals.push(face_normalss[i].clone());\n                if (hasUV) uvs.push(face_uvs[i].clone());\n            }\n            tmp_indices.push(id);\n        });\n\n        indices.push(tmp_indices[0], tmp_indices[1], tmp_indices[2]);\n    }\n\n    var positionBuffer = new Float32Array(vertices.length * 3);\n    if (hasNormal) var normalBuffer = new Float32Array(vertices.length * 3);\n    if (hasUV) var uvBuffer = new Float32Array(vertices.length * 2);\n\n    var i2 = 0;\n    var i3 = 0;\n    for (i = 0; i < vertices.length; i++) {\n\n        i3 = i * 3;\n\n        positionBuffer[i3] = vertices[i].x;\n        positionBuffer[i3 + 1] = vertices[i].y;\n        positionBuffer[i3 + 2] = vertices[i].z;\n\n        if (hasNormal) {\n\n            normalBuffer[i3] = normals[i].x;\n            normalBuffer[i3 + 1] = normals[i].y;\n            normalBuffer[i3 + 2] = normals[i].z;\n        }\n\n        if (hasUV) {\n\n            i2 = i * 2;\n            uvBuffer[i2] = uvs[i].x;\n            uvBuffer[i2 + 1] = uvs[i].y;\n        }\n    }\n\n    bufferGeometry.addAttribute('position', new __WEBPACK_IMPORTED_MODULE_0_three__[\"Q\" /* BufferAttribute */](positionBuffer, 3));\n    if (hasNormal) bufferGeometry.addAttribute('normal', new __WEBPACK_IMPORTED_MODULE_0_three__[\"Q\" /* BufferAttribute */](normalBuffer, 3));\n    if (hasUV) bufferGeometry.addAttribute('uv', new __WEBPACK_IMPORTED_MODULE_0_three__[\"Q\" /* BufferAttribute */](uvBuffer, 2));\n    bufferGeometry.setIndex(new __WEBPACK_IMPORTED_MODULE_0_three__[\"Q\" /* BufferAttribute */](new Uint32Array(indices), 1));\n    return bufferGeometry;\n\n    function exists(v, vertices) {\n        for (var i = 0; i < vertices.length; i++) {\n            if (v.equals(vertices[i])) return i;\n        }\n        return -1;\n    }\n}\n\n\n\n/***/ }),\n\n/***/ 67:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(9)(undefined);\n// imports\n\n\n// module\nexports.push([module.i, \".background-text{position:absolute;top:50%;left:0;z-index:1;width:100%;-webkit-transform:translateY(-50%);transform:translateY(-50%);text-align:center;font-size:60px}.background-buttons{position:absolute;top:0;left:10px;z-index:3}.background-buttons>p{margin-top:15px;color:#000}.background-buttons>button{background:#fff;padding:4px 6px;margin-top:5px;outline:none;border:1px solid #c4c4c4}.model-box{position:relative;z-index:2}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 68:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(9)(undefined);\n// imports\n\n\n// module\nexports.push([module.i, \".demo-block{width:100%;height:100%;background-color:#fff;border-radius:3px}.demo-block .demo-block-preview{width:50%;height:100%;float:left;position:relative}.demo-block .demo-block-code{width:50%;height:100%;background:#f9fafc;border-left:1px solid #dfe2e7;font-size:13px;float:left}.demo-block .demo-block-code pre code{font:normal 10pt Consolas,Monaco,monospace}.demo-block .demo-block-code .demo-block-code-box{width:100%;height:50%;position:relative;overflow:hidden}.demo-block .demo-block-code-box:after{content:\\\"\\\";display:block;position:absolute;bottom:0;left:0;width:90%;height:1px;background:-webkit-linear-gradient(left,#dfe2e7 80%,rgba(223,226,231,0))}.demo-block .demo-block-code-box h3{width:100%;padding:10px 20px;font-size:16px;font-weight:700;position:absolute}.demo-block .demo-block-code-box-content{position:absolute;top:40px;bottom:10px;left:20px;right:20px;overflow:auto}.demo-block .demo-block-code code{position:absolute;top:0;left:0}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 69:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(9)(undefined);\n// imports\n\n\n// module\nexports.push([module.i, \"*{margin:0;border:0;padding:0;box-sizing:border-box}li,ol,ul{list-style:none}a{color:#657180;text-decoration:none}.examples,body,html{width:100%;height:100%;color:#657180}body{background:#eee;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Helvetica,PingFang SC,Hiragino Sans GB,Microsoft YaHei,SimSun,sans-serif;background:#fff}.examples-header{position:absolute;top:0;width:100%;background:#f3f6fb;text-shadow:0 1px 0 hsla(0,0%,100%,.5);border-bottom:1px solid #dfe2e7;padding:15px 15px 15px 30px;line-height:20px}.examples-header .title{font-weight:700;font-size:18px;display:inline-block}.examples-header .github{color:#39f;display:inline-block;font-size:12px;float:right}.examples-content{width:100%;height:100%;padding-top:52px;overflow:hidden}.examples-menu{float:left;width:230px;height:100%;border-right:1px solid #dfe2e7;padding:10px 30px}.examples-menu .examples-menu-item{display:block;width:100%;height:30px;line-height:30px;font-size:14px;cursor:pointer}.examples-menu .examples-menu-item>a{display:block;width:100%;height:100%}.examples-menu .examples-menu-title{display:block;width:100%;padding:6px 0;margin-top:10px;font-size:14px;font-weight:700}.examples-menu .examples-menu-item:hover>a{color:#39f}.examples-pages{height:100%;overflow:hidden}.example-loading{position:absolute;top:0;left:0;width:100%;height:100%;text-align:center}.example-loading:before{border-radius:100%;margin:2px;border:3px solid #20a0ff;border-bottom-color:transparent;height:36px;width:36px;-webkit-animation:loading-rotate .75s 0s linear infinite;animation:loading-rotate .75s 0s linear infinite}.example-loading:after,.example-loading:before{content:\\\"\\\";display:inline-block;vertical-align:middle}.example-loading:after{height:100%;width:0}@-webkit-keyframes loading-rotate{0%{-webkit-transform:rotate(0) scale(1);transform:rotate(0) scale(1)}50%{-webkit-transform:rotate(180deg) scale(.6);transform:rotate(180deg) scale(.6)}to{-webkit-transform:rotate(1turn) scale(1);transform:rotate(1turn) scale(1)}}@keyframes loading-rotate{0%{-webkit-transform:rotate(0) scale(1);transform:rotate(0) scale(1)}50%{-webkit-transform:rotate(180deg) scale(.6);transform:rotate(180deg) scale(.6)}to{-webkit-transform:rotate(1turn) scale(1);transform:rotate(1turn) scale(1)}}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 70:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ })\n\n},[25]);\n\n\n// WEBPACK FOOTER //\n// static/js/app.94f30d1e6d06f1e8d513.js","var Component = require(\"!../node_modules/_vue-loader@11.3.4@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=script&index=0!./model-obj.vue\"),\n  /* template */\n  null,\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/model-obj.vue\n// module id = 10\n// module chunks = 1","\n/* styles */\nrequire(\"!!vue-style-loader!css-loader?{\\\"minimize\\\":true}!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-5d8f5ef3\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=styles&index=0!./demo-block.vue\")\n\nvar Component = require(\"!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=script&index=0!./demo-block.vue\"),\n  /* template */\n  require(\"!!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5d8f5ef3\\\"}!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=template&index=0!./demo-block.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./examples/components/demo-block.vue\n// module id = 2\n// module chunks = 1","var Component = require(\"!../node_modules/_vue-loader@11.3.4@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=script&index=0!./model-collada.vue\"),\n  /* template */\n  null,\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/model-collada.vue\n// module id = 22\n// module chunks = 1","import Vue from 'vue'\r\nimport Router from 'vue-router'\r\nimport DemoBasic from '../pages/demo-basic'\r\nimport DemoEvent from '../pages/demo-event'\r\nimport DemoBackground from '../pages/demo-background'\r\nimport DemoRotate from '../pages/demo-rotate'\r\nimport DemoObj from '../pages/demo-obj'\r\n// import DemoGltf from '../pages/demo-gltf'\r\nimport DemoStl from '../pages/demo-stl'\r\nimport DemoCollada from '../pages/demo-collada'\r\n// import DemoSea3d from '../pages/demo-sea3d'\r\n\r\nVue.use( Router )\r\n\r\nexport default new Router( {\r\n    routes: [\r\n        {\r\n            path: '/demo-basic',\r\n            name: 'demo-basic',\r\n            component: DemoBasic\r\n        },\r\n        {\r\n            path: '/demo-event',\r\n            name: 'demo-event',\r\n            component: DemoEvent\r\n        },\r\n        {\r\n            path: '/demo-background',\r\n            name: 'demo-background',\r\n            component: DemoBackground\r\n        },\r\n        {\r\n            path: '/demo-rotate',\r\n            name: 'demo-rotate',\r\n            component: DemoRotate\r\n        },\r\n        {\r\n            path: '/demo-obj',\r\n            name: 'demo-obj',\r\n            component: DemoObj\r\n        },\r\n        // {\r\n        //     path: '/demo-sea3d',\r\n        //     name: 'demo-sea3d',\r\n        //     component: DemoSea3d\r\n        // },\r\n        {\r\n            path: '/demo-stl',\r\n            name: 'demo-stl',\r\n            component: DemoStl\r\n        },\r\n        {\r\n            path: '/demo-collada',\r\n            name: 'demo-collada',\r\n            component: DemoCollada\r\n        },\r\n        // {\r\n        //     path: '/demo-gltf',\r\n        //     name: 'demo-gltf',\r\n        //     component: DemoGltf\r\n        // },\r\n        {\r\n            path: '*',\r\n            redirect: '/demo-basic'\r\n        }\r\n    ]\r\n} )\n\n\n// WEBPACK FOOTER //\n// ./examples/router/index.js","\n/* styles */\nrequire(\"!!vue-style-loader!css-loader?{\\\"minimize\\\":true}!../node_modules/_vue-loader@11.3.4@vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-7a736b78\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n\nvar Component = require(\"!../node_modules/_vue-loader@11.3.4@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=script&index=0!./App.vue\"),\n  /* template */\n  require(\"!!../node_modules/_vue-loader@11.3.4@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7a736b78\\\"}!../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=template&index=0!./App.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./examples/App.vue\n// module id = 24\n// module chunks = 1","\n/* styles */\nrequire(\"!!vue-style-loader!css-loader?{\\\"minimize\\\":true}!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-4d9d1678\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=styles&index=0!./demo-background.vue\")\n\nvar Component = require(\"!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=script&index=0!./demo-background.vue\"),\n  /* template */\n  require(\"!!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4d9d1678\\\"}!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=template&index=0!./demo-background.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./examples/pages/demo-background.vue\n// module id = 249\n// module chunks = 1","import Vue from 'vue'\r\nimport App from './App.vue'\r\nimport router from './router'\r\n\r\nnew Vue({\r\n  el: '#app',\r\n  router,\r\n  render: h => h(App)\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./examples/index.js","var Component = require(\"!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=script&index=0!./demo-basic.vue\"),\n  /* template */\n  require(\"!!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-333e0508\\\"}!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=template&index=0!./demo-basic.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./examples/pages/demo-basic.vue\n// module id = 250\n// module chunks = 1","var Component = require(\"!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=script&index=0!./demo-collada.vue\"),\n  /* template */\n  require(\"!!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-678f988c\\\"}!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=template&index=0!./demo-collada.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./examples/pages/demo-collada.vue\n// module id = 251\n// module chunks = 1","var Component = require(\"!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=script&index=0!./demo-event.vue\"),\n  /* template */\n  require(\"!!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-cb36e518\\\"}!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=template&index=0!./demo-event.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./examples/pages/demo-event.vue\n// module id = 252\n// module chunks = 1","var Component = require(\"!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=script&index=0!./demo-obj.vue\"),\n  /* template */\n  require(\"!!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2d85b9d1\\\"}!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=template&index=0!./demo-obj.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./examples/pages/demo-obj.vue\n// module id = 253\n// module chunks = 1","var Component = require(\"!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=script&index=0!./demo-rotate.vue\"),\n  /* template */\n  require(\"!!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-756fcd71\\\"}!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=template&index=0!./demo-rotate.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./examples/pages/demo-rotate.vue\n// module id = 254\n// module chunks = 1","var Component = require(\"!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=script&index=0!./demo-stl.vue\"),\n  /* template */\n  require(\"!!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1ff21105\\\"}!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=template&index=0!./demo-stl.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./examples/pages/demo-stl.vue\n// module id = 255\n// module chunks = 1","var Component = require(\"!../node_modules/_vue-loader@11.3.4@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=script&index=0!./model-stl.vue\"),\n  /* template */\n  null,\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/model-stl.vue\n// module id = 256\n// module chunks = 1","var Component = require(\"!../node_modules/_vue-loader@11.3.4@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=script&index=0!./model-three.vue\"),\n  /* template */\n  null,\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/model-three.vue\n// module id = 257\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('model-stl', {\n    attrs: {\n      \"backgroundAlpha\": 0,\n      \"src\": \"static/models/stl/gear.stl\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"example-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_vue-loader@11.3.4@vue-loader/lib/template-compiler?{\"id\":\"data-v-1ff21105\"}!./~/_vue-loader@11.3.4@vue-loader/lib/selector.js?type=template&index=0!./examples/pages/demo-stl.vue\n// module id = 258\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('model-obj', {\n    attrs: {\n      \"backgroundAlpha\": 0,\n      \"src\": \"static/models/obj/tree.obj\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"example-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_vue-loader@11.3.4@vue-loader/lib/template-compiler?{\"id\":\"data-v-2d85b9d1\"}!./~/_vue-loader@11.3.4@vue-loader/lib/selector.js?type=template&index=0!./examples/pages/demo-obj.vue\n// module id = 259\n// module chunks = 1","<template>\r\n    <div class=\"examples\">\r\n        <div class=\"examples-header\">\r\n            <a href=\"https://github.com/hujiulong/vue-3d-model\" class=\"title\">Vue3DModel</a>\r\n            <a href=\"https://github.com/hujiulong/vue-3d-model\" class=\"github\">View on GitHub</a>\r\n        </div>\r\n        <div class=\"examples-content\">\r\n            <ul class=\"examples-menu\">\r\n                <li class=\"examples-menu-title\">Examples</li>\r\n                <li class=\"examples-menu-item\">\r\n                    <router-link to=\"demo-basic\">basic</router-link>\r\n                </li>\r\n                <li class=\"examples-menu-item\">\r\n                    <router-link to=\"demo-rotate\">rotate</router-link>\r\n                </li>\r\n                <li class=\"examples-menu-item\">\r\n                    <router-link to=\"demo-background\">background</router-link>\r\n                </li>\r\n                <li class=\"examples-menu-title\">Events</li>\r\n                <li class=\"examples-menu-item\">\r\n                    <router-link to=\"demo-event\">mousemove</router-link>\r\n                </li>\r\n                <li class=\"examples-menu-title\">Model Formats</li>\r\n                <li class=\"examples-menu-item\">\r\n                    <router-link to=\"demo-basic\">JSON Model (.json)</router-link>\r\n                </li>\r\n                <li class=\"examples-menu-item\">\r\n                    <router-link to=\"demo-obj\">OBJ Model (.obj)</router-link>\r\n                </li>\r\n                <li class=\"examples-menu-item\">\r\n                    <router-link to=\"demo-stl\">STL Model (.stl)</router-link>\r\n                </li>\r\n                <li class=\"examples-menu-item\">\r\n                    <router-link to=\"demo-collada\">Collada Model (.dae)</router-link>\r\n                </li>\r\n            </ul>\r\n            <div class=\"examples-pages\">\r\n                <router-view></router-view>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n\r\nexport default {\r\n    name: 'app'\r\n}\r\n</script>\r\n<style>\r\n* {\r\n    margin: 0;\r\n    border: 0;\r\n    padding: 0;\r\n    box-sizing: border-box;\r\n}\r\n\r\nul, ol, li {\r\n    list-style: none;\r\n}\r\n\r\na {\r\n    color: #657180;\r\n    text-decoration: none;\r\n}\r\n\r\nhtml, body, .examples {\r\n    width: 100%;\r\n    height: 100%;\r\n    color: #657180;\r\n}\r\n\r\nbody {\r\n    background: #eee;\r\n    font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto,\r\n                 \"Helvetica Neue\", Helvetica, \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\",\r\n                 SimSun, sans-serif;\r\n    background: #fff;\r\n}\r\n\r\n.examples-header {\r\n    position: absolute;\r\n    top: 0;\r\n    width: 100%;\r\n    background: #f3f6fb;\r\n    text-shadow: 0 1px 0 rgba(255,255,255,0.5);\r\n    border-bottom: solid 1px #dfe2e7;\r\n    padding: 15px 15px 15px 30px;\r\n    line-height: 20px;\r\n}\r\n\r\n.examples-header .title {\r\n    font-weight: bold;\r\n    font-size: 18px;\r\n    display: inline-block;\r\n}\r\n\r\n.examples-header .github {\r\n    color: #39f;\r\n    display: inline-block;\r\n    font-size: 12px;\r\n    float: right;\r\n}\r\n\r\n.examples-content {\r\n    width: 100%;\r\n    height: 100%;\r\n    padding-top: 52px;\r\n    overflow: hidden;\r\n}\r\n\r\n.examples-menu {\r\n    float: left;\r\n    width: 230px;\r\n    height: 100%;\r\n    border-right: solid 1px #dfe2e7;\r\n    padding: 10px 30px;\r\n}\r\n\r\n.examples-menu .examples-menu-item {\r\n    display: block;\r\n    width: 100%;\r\n    height: 30px;\r\n    line-height: 30px;\r\n    font-size: 14px;\r\n    cursor: pointer;\r\n}\r\n\r\n.examples-menu .examples-menu-item > a {\r\n    display: block;\r\n    width: 100%;\r\n    height: 100%;\r\n}\r\n\r\n.examples-menu .examples-menu-title {\r\n    display: block;\r\n    width: 100%;\r\n    padding: 6px 0;\r\n    margin-top: 10px;\r\n    font-size: 14px;\r\n    font-weight: bold;\r\n}\r\n\r\n.examples-menu .examples-menu-item:hover > a {\r\n    color: #39f;\r\n}\r\n\r\n.examples-pages {\r\n    height: 100%;\r\n    overflow: hidden;\r\n}\r\n\r\n.example-loading {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    text-align: center;\r\n}\r\n.example-loading::before {\r\n    content: '';\r\n    border-radius: 100%;\r\n    margin: 2px;\r\n    border: 3px solid #20a0ff;\r\n    border-bottom-color: transparent;\r\n    height: 36px;\r\n    width: 36px;\r\n    display: inline-block;\r\n    animation: loading-rotate .75s 0s linear infinite;\r\n    vertical-align: middle;\r\n}\r\n\r\n.example-loading::after {\r\n    content: '';\r\n    display: inline-block;\r\n    height: 100%;\r\n    width: 0;\r\n    vertical-align: middle;\r\n}\r\n\r\n@keyframes loading-rotate{\r\n    0% {\r\n        transform: rotate(0) scale(1);\r\n    }\r\n    50% {\r\n        transform: rotate(180deg) scale(.6);\r\n    }\r\n    100% {\r\n        transform: rotate(360deg) scale(1);\r\n    }\r\n}\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// App.vue?764918e3","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('model-three', {\n    attrs: {\n      \"backgroundAlpha\": 0,\n      \"src\": \"static/models/json/scene.json\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"example-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_vue-loader@11.3.4@vue-loader/lib/template-compiler?{\"id\":\"data-v-333e0508\"}!./~/_vue-loader@11.3.4@vue-loader/lib/selector.js?type=template&index=0!./examples/pages/demo-basic.vue\n// module id = 260\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('p', {\n    staticClass: \"background-text\"\n  }, [_vm._v(\"\\n            Vue\"), _c('br'), _vm._v(\"3D\"), _c('br'), _vm._v(\"Model\"), _c('br'), _vm._v(\"Background\\n        \")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"background-buttons\"\n  }, [_c('p', [_vm._v(\"Color\")]), _vm._v(\" \"), _c('button', {\n    on: {\n      \"click\": function($event) {\n        _vm.bgColor = '#ff0'\n      }\n    }\n  }, [_vm._v(\"#ff0\")]), _vm._v(\" \"), _c('button', {\n    on: {\n      \"click\": function($event) {\n        _vm.bgColor = '#f00'\n      }\n    }\n  }, [_vm._v(\"#f00\")]), _vm._v(\" \"), _c('button', {\n    on: {\n      \"click\": function($event) {\n        _vm.bgColor = '#13ce66'\n      }\n    }\n  }, [_vm._v(\"#13ce66\")]), _vm._v(\" \"), _c('p', [_vm._v(\"Alpha\")]), _vm._v(\" \"), _c('button', {\n    on: {\n      \"click\": function($event) {\n        _vm.bgAlpha = 0.5\n      }\n    }\n  }, [_vm._v(\"0.5\")]), _vm._v(\" \"), _c('button', {\n    on: {\n      \"click\": function($event) {\n        _vm.bgAlpha = 1\n      }\n    }\n  }, [_vm._v(\"1\")]), _vm._v(\" \"), _c('button', {\n    on: {\n      \"click\": function($event) {\n        _vm.bgAlpha = 0\n      }\n    }\n  }, [_vm._v(\"0\")])]), _vm._v(\" \"), _c('model-obj', {\n    staticClass: \"model-box\",\n    attrs: {\n      \"backgroundAlpha\": _vm.bgAlpha,\n      \"backgroundColor\": _vm.bgColor,\n      \"src\": \"static/models/obj/tree.obj\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"example-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_vue-loader@11.3.4@vue-loader/lib/template-compiler?{\"id\":\"data-v-4d9d1678\"}!./~/_vue-loader@11.3.4@vue-loader/lib/selector.js?type=template&index=0!./examples/pages/demo-background.vue\n// module id = 261\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"demo-block\"\n  }, [_c('div', {\n    staticClass: \"demo-block-preview\"\n  }, [_vm._t(\"preview\")], 2), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code\"\n  }, [_c('div', {\n    staticClass: \"demo-block-code-box\"\n  }, [_c('h3', [_vm._v(\"Vue Component & Webpack\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code-box-content\"\n  }, [_c('pre', [_vm._v(\"                    \"), _c('code', {\n    ref: \"vueCode\",\n    staticClass: \"html\"\n  }, [_vm._v(_vm._s(_vm._f(\"code\")(_vm.vueCode)))]), _vm._v(\"\\n                \")])])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code-box\"\n  }, [_c('h3', [_vm._v(\"HTML & JS\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code-box-content\"\n  }, [_c('pre', [_vm._v(\"                    \"), _c('code', {\n    ref: \"htmlCode\",\n    staticClass: \"html\"\n  }, [_vm._v(_vm._s(_vm._f(\"code\")(_vm.htmlCode)))]), _vm._v(\"\\n                \")])])])])])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_vue-loader@11.3.4@vue-loader/lib/template-compiler?{\"id\":\"data-v-5d8f5ef3\"}!./~/_vue-loader@11.3.4@vue-loader/lib/selector.js?type=template&index=0!./examples/components/demo-block.vue\n// module id = 262\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('model-collada', {\n    attrs: {\n      \"backgroundAlpha\": 0,\n      \"src\": \"static/models/collada/elf/elf.dae\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"example-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_vue-loader@11.3.4@vue-loader/lib/template-compiler?{\"id\":\"data-v-678f988c\"}!./~/_vue-loader@11.3.4@vue-loader/lib/selector.js?type=template&index=0!./examples/pages/demo-collada.vue\n// module id = 263\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('model-collada', {\n    attrs: {\n      \"rotation\": _vm.rotation,\n      \"src\": \"static/models/collada/elf/elf.dae\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"example-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_vue-loader@11.3.4@vue-loader/lib/template-compiler?{\"id\":\"data-v-756fcd71\"}!./~/_vue-loader@11.3.4@vue-loader/lib/selector.js?type=template&index=0!./examples/pages/demo-rotate.vue\n// module id = 264\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"examples\"\n  }, [_vm._m(0), _vm._v(\" \"), _c('div', {\n    staticClass: \"examples-content\"\n  }, [_c('ul', {\n    staticClass: \"examples-menu\"\n  }, [_c('li', {\n    staticClass: \"examples-menu-title\"\n  }, [_vm._v(\"Examples\")]), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-basic\"\n    }\n  }, [_vm._v(\"basic\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-rotate\"\n    }\n  }, [_vm._v(\"rotate\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-background\"\n    }\n  }, [_vm._v(\"background\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-title\"\n  }, [_vm._v(\"Events\")]), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-event\"\n    }\n  }, [_vm._v(\"mousemove\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-title\"\n  }, [_vm._v(\"Model Formats\")]), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-basic\"\n    }\n  }, [_vm._v(\"JSON Model (.json)\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-obj\"\n    }\n  }, [_vm._v(\"OBJ Model (.obj)\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-stl\"\n    }\n  }, [_vm._v(\"STL Model (.stl)\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"examples-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-collada\"\n    }\n  }, [_vm._v(\"Collada Model (.dae)\")])], 1)]), _vm._v(\" \"), _c('div', {\n    staticClass: \"examples-pages\"\n  }, [_c('router-view')], 1)])])\n},staticRenderFns: [function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"examples-header\"\n  }, [_c('a', {\n    staticClass: \"title\",\n    attrs: {\n      \"href\": \"https://github.com/hujiulong/vue-3d-model\"\n    }\n  }, [_vm._v(\"Vue3DModel\")]), _vm._v(\" \"), _c('a', {\n    staticClass: \"github\",\n    attrs: {\n      \"href\": \"https://github.com/hujiulong/vue-3d-model\"\n    }\n  }, [_vm._v(\"View on GitHub\")])])\n}]}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_vue-loader@11.3.4@vue-loader/lib/template-compiler?{\"id\":\"data-v-7a736b78\"}!./~/_vue-loader@11.3.4@vue-loader/lib/selector.js?type=template&index=0!./examples/App.vue\n// module id = 265\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticStyle: {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"border\": \"0\",\n      \"padding\": \"0\"\n    }\n  }, [(_vm.suportWebGL) ? _c('canvas', {\n    ref: \"canvas\",\n    staticStyle: {\n      \"width\": \"100%\",\n      \"height\": \"100%\"\n    }\n  }) : _c('div', [_vm._t(\"default\", [_vm._v(\"\\n            Your browser does not seem to support \"), _c('a', {\n    staticStyle: {\n      \"color\": \"#000\"\n    },\n    attrs: {\n      \"href\": \"http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation\"\n    }\n  }, [_vm._v(\"WebGL\")]), _vm._v(\".\"), _c('br'), _vm._v(\"'\\n        \")])], 2)])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_vue-loader@11.3.4@vue-loader/lib/template-compiler?{\"id\":\"data-v-b82a4cf6\"}!./~/_vue-loader@11.3.4@vue-loader/lib/selector.js?type=template&index=0!./src/model-mixin.vue\n// module id = 266\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('model-obj', {\n    ref: \"model\",\n    attrs: {\n      \"backgroundAlpha\": 0,\n      \"src\": \"static/models/obj/tree.obj\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad,\n      \"on-mousemove\": _vm.onMouseMove\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"example-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_vue-loader@11.3.4@vue-loader/lib/template-compiler?{\"id\":\"data-v-cb36e518\"}!./~/_vue-loader@11.3.4@vue-loader/lib/selector.js?type=template&index=0!./examples/pages/demo-event.vue\n// module id = 267\n// module chunks = 1","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/_css-loader@0.28.4@css-loader/index.js?{\\\"minimize\\\":true}!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/style-compiler/index.js?{\\\"id\\\":\\\"data-v-4d9d1678\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector.js?type=styles&index=0!./demo-background.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/_vue-style-loader@2.0.5@vue-style-loader/lib/addStylesClient.js\")(\"7ef4e056\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_vue-style-loader@2.0.5@vue-style-loader!./~/_css-loader@0.28.4@css-loader?{\"minimize\":true}!./~/_vue-loader@11.3.4@vue-loader/lib/style-compiler?{\"id\":\"data-v-4d9d1678\",\"scoped\":false,\"hasInlineConfig\":false}!./~/_vue-loader@11.3.4@vue-loader/lib/selector.js?type=styles&index=0!./examples/pages/demo-background.vue\n// module id = 269\n// module chunks = 1","<template>\r\n    <div class=\"demo-block\">\r\n        <div class=\"demo-block-preview\">\r\n            <slot name=\"preview\"></slot>\r\n        </div>\r\n        <div class=\"demo-block-code\">\r\n            <div class=\"demo-block-code-box\">\r\n                <h3>Vue Component & Webpack</h3>\r\n                <div class=\"demo-block-code-box-content\">\r\n                    <pre>\r\n                        <code ref=\"vueCode\" class=\"html\">{{ vueCode | code }}</code>\r\n                    </pre>\r\n                </div>\r\n            </div>\r\n            <div class=\"demo-block-code-box\">\r\n                <h3>HTML & JS</h3>\r\n                <div class=\"demo-block-code-box-content\">\r\n                    <pre>\r\n                        <code ref=\"htmlCode\" class=\"html\">{{ htmlCode | code }}</code>\r\n                    </pre>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport 'highlight.js/styles/github.css';\r\nimport hljs from 'highlight.js'\r\n\r\nconst codeHandler = code => {\r\n    const scripts = `<script src=\"vue.js\"><\\/script>\r\n    <script src=\"vue-3d-model.min.js\"><\\/script>`;\r\n\r\n    return code.replace( /#scripts#/ig, scripts );\r\n}\r\n\r\nexport default {\r\n    name: 'app',\r\n    props: {\r\n        vueCode: String,\r\n        htmlCode: {\r\n            type: String,\r\n            default: '// TODO'\r\n        }\r\n    },\r\n    mounted () {\r\n        hljs.highlightBlock( this.$refs.vueCode );\r\n        hljs.highlightBlock( this.$refs.htmlCode );\r\n    },\r\n    data () {\r\n    \treturn {}\r\n    },\r\n    filters: {\r\n        code ( val ) {\r\n            return codeHandler( val );\r\n        }\r\n    },\r\n    components: {\r\n\r\n    }\r\n}\r\n</script>\r\n<style>\r\n    .demo-block {\r\n        width: 100%;\r\n        height: 100%;\r\n        background-color: #fff;\r\n        border-radius: 3px;\r\n    }\r\n\r\n    .demo-block .demo-block-preview {\r\n        width: 50%;\r\n        height: 100%;\r\n        float: left;\r\n        position: relative;\r\n    }\r\n\r\n    .demo-block .demo-block-code {\r\n        width: 50%;\r\n        height: 100%;\r\n        background: #f9fafc;\r\n        border-left: solid 1px #dfe2e7;\r\n        font-size: 13px;\r\n        float: left;\r\n    }\r\n    \r\n\r\n    .demo-block .demo-block-code pre code {\r\n        font: normal 10pt Consolas, Monaco, monospace;\r\n    }\r\n\r\n\r\n    .demo-block .demo-block-code .demo-block-code-box {\r\n        width: 100%;\r\n        height: 50%;\r\n        position: relative;\r\n        overflow: hidden;\r\n    }\r\n\r\n    .demo-block .demo-block-code-box::after {\r\n        content: '';\r\n        display: block;\r\n        position: absolute;\r\n        bottom: 0;\r\n        left: 0;\r\n        width: 90%;\r\n        height: 1px;\r\n        background: -webkit-linear-gradient(left, #dfe2e7 80%, rgba(223,226,231,0) 100%);\r\n    }\r\n\r\n    .demo-block .demo-block-code-box h3 {\r\n        width: 100%;\r\n        padding: 10px 20px;\r\n        font-size: 16px;\r\n        font-weight: bold;\r\n        position: absolute;\r\n    }\r\n\r\n    .demo-block .demo-block-code-box-content {\r\n        position: absolute;\r\n        top: 40px;\r\n        bottom: 10px;\r\n        left: 20px;\r\n        right: 20px;\r\n        overflow: auto;\r\n    }\r\n\r\n    .demo-block .demo-block-code code {\r\n        position: absolute;\r\n        top: 0;\r\n        left: 0;\r\n    }\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// demo-block.vue?efc057b8","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/_css-loader@0.28.4@css-loader/index.js?{\\\"minimize\\\":true}!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/style-compiler/index.js?{\\\"id\\\":\\\"data-v-5d8f5ef3\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector.js?type=styles&index=0!./demo-block.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/_vue-style-loader@2.0.5@vue-style-loader/lib/addStylesClient.js\")(\"ef4a88ea\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_vue-style-loader@2.0.5@vue-style-loader!./~/_css-loader@0.28.4@css-loader?{\"minimize\":true}!./~/_vue-loader@11.3.4@vue-loader/lib/style-compiler?{\"id\":\"data-v-5d8f5ef3\",\"scoped\":false,\"hasInlineConfig\":false}!./~/_vue-loader@11.3.4@vue-loader/lib/selector.js?type=styles&index=0!./examples/components/demo-block.vue\n// module id = 270\n// module chunks = 1","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../node_modules/_css-loader@0.28.4@css-loader/index.js?{\\\"minimize\\\":true}!../node_modules/_vue-loader@11.3.4@vue-loader/lib/style-compiler/index.js?{\\\"id\\\":\\\"data-v-7a736b78\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector.js?type=styles&index=0!./App.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../node_modules/_vue-style-loader@2.0.5@vue-style-loader/lib/addStylesClient.js\")(\"c86a7b1a\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_vue-style-loader@2.0.5@vue-style-loader!./~/_css-loader@0.28.4@css-loader?{\"minimize\":true}!./~/_vue-loader@11.3.4@vue-loader/lib/style-compiler?{\"id\":\"data-v-7a736b78\",\"scoped\":false,\"hasInlineConfig\":false}!./~/_vue-loader@11.3.4@vue-loader/lib/selector.js?type=styles&index=0!./examples/App.vue\n// module id = 271\n// module chunks = 1","<template>\r\n    <demo-block :vue-code=\"code\" :html-code=\"htmlCode\">\r\n        <template slot=\"preview\">\r\n            <p class=\"background-text\">\r\n                Vue<br>3D<br>Model<br>Background\r\n            </p>\r\n            <div class=\"background-buttons\">\r\n                <p>Color</p>\r\n                <button @click=\"bgColor = '#ff0'\">#ff0</button>\r\n                <button @click=\"bgColor = '#f00'\">#f00</button>\r\n                <button @click=\"bgColor = '#13ce66'\">#13ce66</button>\r\n                <p>Alpha</p>\r\n                <button @click=\"bgAlpha = 0.5\">0.5</button>\r\n                <button @click=\"bgAlpha = 1\">1</button>\r\n                <button @click=\"bgAlpha = 0\">0</button>\r\n            </div>\r\n            <model-obj\r\n                class=\"model-box\"\r\n                :backgroundAlpha=\"bgAlpha\"\r\n                :backgroundColor=\"bgColor\"\r\n                @on-load=\"onLoad\"\r\n                src=\"static/models/obj/tree.obj\"></model-obj>\r\n            <div class=\"example-loading\" v-show=\"loading\"></div>\r\n        </template>\r\n    </demo-block>\r\n</template>\r\n<style>\r\n    .background-text {\r\n        position: absolute;\r\n        top: 50%;\r\n        left: 0;\r\n        z-index: 1;\r\n        width: 100%;\r\n        transform: translateY(-50%);\r\n        text-align: center; \r\n        font-size: 60px;\r\n    }\r\n    .background-buttons {\r\n        position: absolute;\r\n        top: 0;\r\n        left: 10px;\r\n        z-index: 3;\r\n    }\r\n\r\n    .background-buttons > p {\r\n        margin-top: 15px;\r\n        color: #000;\r\n    }\r\n\r\n    .background-buttons > button {\r\n        background: #fff;\r\n        padding: 4px 6px;\r\n        margin-top: 5px;\r\n        outline: none;\r\n        border: 1px solid #c4c4c4;\r\n    }\r\n\r\n    .model-box {\r\n        position: relative;\r\n        z-index: 2;\r\n    }\r\n</style>\r\n\r\n<script>\r\nimport DemoBlock from '../components/demo-block';\r\nimport ModelObj from '../../src/model-obj.vue'\r\n\r\nconst code = `\r\n<template>\r\n    <p class=\"background-text\">\r\n        Vue<br>3D<br>Model<br>Background\r\n    </p>\r\n    <div class=\"background-buttons\">\r\n        <p>Color</p>\r\n        <button @click=\"bgColor = '#ff0'\">#ff0</button>\r\n        <button @click=\"bgColor = '#f00'\">#f00</button>\r\n        <button @click=\"bgColor = '#13ce66'\">#13ce66</button>\r\n        <p>Alpha</p>\r\n        <button @click=\"bgAlpha = 0.5\">0.5</button>\r\n        <button @click=\"bgAlpha = 1\">1</button>\r\n        <button @click=\"bgAlpha = 0\">0</button>\r\n    </div>\r\n    <model-obj\r\n        :backgroundAlpha=\"bgAlpha\"\r\n        :backgroundColor=\"bgColor\"\r\n        src=\"static/models/obj/tree.obj\"></model-obj>\r\n</template>\r\n\r\n<script>\r\n    import { ModelObj } from 'vue-3d-model'\r\n\r\n    export default {\r\n        data () {\r\n            return {\r\n                bgColor: '#ff0',\r\n                bgAlpha: 0.5\r\n            }\r\n        },\r\n        components: {\r\n            ModelObj\r\n        }\r\n    }\r\n<\\/script>\r\n`\r\n\r\nconst htmlCode = `\r\n<body>\r\n    <div id=\"app\">\r\n        <p class=\"background-text\">\r\n            Vue<br>3D<br>Model<br>Background\r\n        </p>\r\n        <div class=\"background-buttons\">\r\n            <p>Color</p>\r\n            <button @click=\"bgColor = '#ff0'\">#ff0</button>\r\n            <button @click=\"bgColor = '#f00'\">#f00</button>\r\n            <button @click=\"bgColor = '#13ce66'\">#13ce66</button>\r\n            <p>Alpha</p>\r\n            <button @click=\"bgAlpha = 0.5\">0.5</button>\r\n            <button @click=\"bgAlpha = 1\">1</button>\r\n            <button @click=\"bgAlpha = 0\">0</button>\r\n        </div>\r\n        <model-obj\r\n            :backgroundAlpha=\"bgAlpha\"\r\n            :backgroundColor=\"bgColor\"\r\n            src=\"static/models/obj/tree.obj\"></model-obj>\r\n    </div>\r\n    #scripts#\r\n    <script>\r\n        new Vue({\r\n            el: '#app',\r\n            data: {\r\n                bgColor: '#ff0',\r\n                bgAlpha: 0.5\r\n            }\r\n        })\r\n    <\\/script>\r\n</body>\r\n`\r\n\r\nexport default {\r\n    name: 'demo-background',\r\n    data () {\r\n    \treturn {\r\n            code,\r\n            htmlCode,\r\n            loading: true,\r\n            bgColor: '#ff0',\r\n            bgAlpha: 0.5\r\n    \t}\r\n    },\r\n    methods: {\r\n        onLoad () {\r\n            this.loading = false;\r\n        },\r\n        setBackground ( color, alpha ) {\r\n\r\n        }\r\n    },\r\n    components: {\r\n        ModelObj,\r\n        DemoBlock\r\n    }\r\n}\r\n</script>\n\n\n// WEBPACK FOOTER //\n// demo-background.vue?1758268a","<template>\r\n    <demo-block :vue-code=\"code\" :html-code=\"htmlCode\">\r\n        <template slot=\"preview\">\r\n            <model-three :backgroundAlpha=\"0\"\r\n                @on-load=\"onLoad\"\r\n                src=\"static/models/json/scene.json\"></model-three>\r\n            <div class=\"example-loading\" v-show=\"loading\"></div>\r\n        </template>\r\n    </demo-block>\r\n</template>\r\n\r\n<script>\r\nimport DemoBlock from '../components/demo-block';\r\nimport ModelThree from '../../src/model-three.vue'\r\n\r\nconst code = `\r\n<template>\r\n    <model-three src=\"static/models/json/scene.json\"></model-three>\r\n</template>\r\n\r\n<script>\r\n    import { ModelThree } from 'vue-3d-model'\r\n\r\n    export default {\r\n        components: {\r\n            ModelThree\r\n        }\r\n    }\r\n<\\/script>\r\n`\r\n\r\nconst htmlCode = `\r\n<body>\r\n    <div id=\"app\">\r\n        <model-three src=\"static/models/json/scene.json\"></model-three>\r\n    </div>\r\n    #scripts#\r\n    <script>\r\n        new Vue({\r\n            el: '#app'\r\n        })\r\n    <\\/script>\r\n</body>\r\n`\r\n\r\nexport default {\r\n    name: 'demo-basic',\r\n    data () {\r\n    \treturn {\r\n            code,\r\n            htmlCode,\r\n            loading: true\r\n    \t}\r\n    },\r\n    methods: {\r\n        onLoad () {\r\n            this.loading = false;\r\n        }\r\n    },\r\n    components: {\r\n        ModelThree,\r\n        DemoBlock\r\n    }\r\n}\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// demo-basic.vue?9b7dffa6","<template>\r\n    <demo-block :vue-code=\"code\" :html-code=\"htmlCode\">\r\n        <template slot=\"preview\">\r\n            <model-collada :backgroundAlpha=\"0\"\r\n                @on-load=\"onLoad\"\r\n                src=\"static/models/collada/elf/elf.dae\"></model-collada>\r\n            <div class=\"example-loading\" v-show=\"loading\"></div>\r\n        </template>\r\n    </demo-block>\r\n</template>\r\n\r\n<script>\r\nimport DemoBlock from '../components/demo-block';\r\nimport ModelCollada from '../../src/model-collada.vue'\r\n\r\nconst code = `\r\n<template>\r\n    <model-collada src=\"static/models/collada/elf.dae\"></model-collada>\r\n</template>\r\n\r\n<script>\r\n    import { ModelCollada } from 'vue-3d-model'\r\n\r\n    export default {\r\n        components: {\r\n            ModelCollada\r\n        }\r\n    }\r\n<\\/script>\r\n`\r\n\r\nconst htmlCode = `\r\n<body>\r\n    <div id=\"app\">\r\n        <model-collada src=\"static/models/collada/elf.dae\"></model-collada>\r\n    </div>\r\n    #scripts#\r\n    <script>\r\n        new Vue({\r\n            el: '#app'\r\n        })\r\n    <\\/script>\r\n</body>\r\n`\r\n\r\nexport default {\r\n    name: 'demo-collada',\r\n    data () {\r\n    \treturn {\r\n            code,\r\n            htmlCode,\r\n            loading: true\r\n    \t}\r\n    },\r\n    methods: {\r\n        onLoad () {\r\n            this.loading = false;\r\n        }\r\n    },\r\n    components: {\r\n        ModelCollada,\r\n        DemoBlock\r\n    }\r\n}\r\n</script>\n\n\n// WEBPACK FOOTER //\n// demo-collada.vue?78f715c9","<template>\r\n    <demo-block :vue-code=\"code\" :html-code=\"htmlCode\">\r\n        <template slot=\"preview\">\r\n            <model-obj :backgroundAlpha=\"0\"\r\n                ref=\"model\"\r\n                @on-load=\"onLoad\"\r\n                @on-mousemove=\"onMouseMove\"\r\n                src=\"static/models/obj/tree.obj\"></model-obj>\r\n            <div class=\"example-loading\" v-show=\"loading\"></div>\r\n        </template>\r\n    </demo-block>\r\n</template>\r\n\r\n<script>\r\nimport DemoBlock from '../components/demo-block';\r\nimport ModelObj from '../../src/model-obj.vue'\r\n\r\nconst code = `\r\n\r\n<template>\r\n    <model-obj \r\n        src=\"static/models/obj/tree.obj\"\r\n        @on-mousemove=\"onMouseMove\">\r\n    </model-obj>\r\n</template>\r\n\r\n<script>\r\n    import { ModelObj } from 'vue-3d-model'\r\n\r\n    export default {\r\n        data () {\r\n            return {\r\n                intersected: null\r\n            }\r\n        },\r\n        methods: {\r\n            onMouseMove ( event ) {\r\n\r\n                console.log( event );   // event: { distance, face, faceIndex, point, index, uv, object }\r\n\r\n                if ( !event ) {\r\n\r\n                    if ( this.intersected ) {\r\n                        this.intersected.material.color.setStyle( '#fff' );\r\n                    }\r\n\r\n                    this.intersected = null;\r\n                    return;\r\n                }\r\n\r\n                this.intersected = event.object;\r\n                this.intersected.material.color.setStyle( '#13ce66' );\r\n            }\r\n        },\r\n        components: {\r\n            ModelObj\r\n        }\r\n    }\r\n<\\/script>\r\n\r\n`\r\n\r\nconst htmlCode = `\r\n<body>\r\n    <div id=\"app\">\r\n        <model-obj \r\n            src=\"static/models/obj/tree.obj\"\r\n            @on-mousemove=\"onMouseMove\">\r\n        </model-obj>\r\n    </div>\r\n    #scripts#\r\n    <script>\r\n        new Vue({\r\n            el: '#app',\r\n            data: {\r\n                intersected: null\r\n            },\r\n            methods: {\r\n                onMouseMove ( event ) {\r\n\r\n                    console.log( event );   // event: { distance, face, faceIndex, point, index, uv, object }\r\n\r\n                    if ( !event ) {\r\n\r\n                        if ( this.intersected ) {\r\n                            this.intersected.material.color.setStyle( '#fff' );\r\n                        }\r\n\r\n                        this.intersected = null;\r\n                        return;\r\n                    }\r\n\r\n                    this.intersected = event.object;\r\n                    this.intersected.material.color.setStyle( '#13ce66' );\r\n                }\r\n            }\r\n        })\r\n    <\\/script>\r\n</body>\r\n`\r\n\r\nexport default {\r\n    name: 'demo-gltf',\r\n    data () {\r\n        return {\r\n            code,\r\n            htmlCode,\r\n            loading: true,\r\n            intersected: null\r\n        }\r\n    },\r\n    methods: {\r\n        onLoad () {\r\n            this.loading = false;\r\n        },\r\n        onMouseMove ( event ) {\r\n\r\n            console.log( event );\r\n\r\n            if ( !event ) {\r\n\r\n                if ( this.intersected ) {\r\n                    this.intersected.material.color.setStyle( '#fff' );\r\n                }\r\n\r\n                this.intersected = null;\r\n                return;\r\n            }\r\n\r\n            this.intersected = event.object;\r\n            this.intersected.material.color.setStyle( '#13ce66' );\r\n        }\r\n    },\r\n    components: {\r\n        ModelObj,\r\n        DemoBlock\r\n    }\r\n}\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// demo-event.vue?550922ef","<template>\r\n    <demo-block :vue-code=\"code\" :html-code=\"htmlCode\">\r\n        <template slot=\"preview\">\r\n            <model-obj :backgroundAlpha=\"0\"\r\n                @on-load=\"onLoad\"\r\n                src=\"static/models/obj/tree.obj\"></model-obj>\r\n            <div class=\"example-loading\" v-show=\"loading\"></div>\r\n        </template>\r\n    </demo-block>\r\n</template>\r\n\r\n<script>\r\nimport DemoBlock from '../components/demo-block';\r\nimport ModelObj from '../../src/model-obj.vue'\r\n\r\nconst code = `\r\n<template>\r\n    <model-obj src=\"static/models/obj/tree.obj\"></model-obj>\r\n</template>\r\n\r\n<script>\r\n    import { ModelObj } from 'vue-3d-model'\r\n\r\n    export default {\r\n        components: {\r\n            ModelObj\r\n        }\r\n    }\r\n<\\/script>\r\n`\r\n\r\nconst htmlCode = `\r\n<body>\r\n    <div id=\"app\">\r\n        <model-obj src=\"static/models/obj/tree.obj\"></model-obj>\r\n    </div>\r\n    #scripts#\r\n    <script>\r\n        new Vue({\r\n            el: '#app'\r\n        })\r\n    <\\/script>\r\n</body>\r\n`\r\n\r\nexport default {\r\n    name: 'demo-obj',\r\n    data () {\r\n    \treturn {\r\n            code,\r\n            htmlCode,\r\n            loading: true\r\n    \t}\r\n    },\r\n    methods: {\r\n        onLoad () {\r\n            this.loading = false;\r\n        }\r\n    },\r\n    components: {\r\n        ModelObj,\r\n        DemoBlock\r\n    }\r\n}\r\n</script>\n\n\n// WEBPACK FOOTER //\n// demo-obj.vue?4b9aebbd","<template>\r\n    <demo-block :vue-code=\"code\" :html-code=\"htmlCode\">\r\n        <template slot=\"preview\">\r\n            <model-collada\r\n                :rotation=\"rotation\"\r\n                @on-load=\"onLoad\"\r\n                src=\"static/models/collada/elf/elf.dae\"></model-collada>\r\n            <div class=\"example-loading\" v-show=\"loading\"></div>\r\n        </template>\r\n    </demo-block>\r\n</template>\r\n\r\n<script>\r\nimport DemoBlock from '../components/demo-block';\r\nimport ModelCollada from '../../src/model-collada.vue'\r\n\r\nconst code = `\r\n<template>\r\n    <model-collada\r\n        :rotation=\"rotation\"\r\n        @on-load=\"onLoad\"\r\n        src=\"static/models/collada/elf.dae\"></model-collada>\r\n</template>\r\n\r\n<script>\r\n    import { ModelCollada } from 'vue-3d-model'\r\n\r\n    export default {\r\n        data: {\r\n            rotation: {\r\n                x: 0,\r\n                y: 0,\r\n                z: 0\r\n            }\r\n        },\r\n        methods: {\r\n            onLoad () {\r\n                this.rotate();\r\n            },\r\n            rotate () {\r\n                this.rotation.y += 0.01;\r\n                requestAnimationFrame( this.rotate );\r\n            }\r\n        },\r\n        components: {\r\n            ModelCollada\r\n        }\r\n    }\r\n<\\/script>\r\n`\r\n\r\nconst htmlCode = `\r\n<body>\r\n    <div id=\"app\">\r\n        <model-collada\r\n            :rotation=\"rotation\"\r\n            @on-load=\"onLoad\"\r\n            src=\"static/models/collada/elf.dae\"></model-collada>\r\n    </div>\r\n    #scripts#\r\n    <script>\r\n        new Vue({\r\n            el: '#app',\r\n            data: {\r\n                rotation: {\r\n                    x: 0,\r\n                    y: 0,\r\n                    z: 0\r\n                }\r\n            },\r\n            methods: {\r\n                onLoad () {\r\n                    this.rotate();\r\n                },\r\n                rotate () {\r\n                    this.rotation.y += 0.01;\r\n                    requestAnimationFrame( this.rotate );\r\n                }\r\n            }\r\n        })\r\n    <\\/script>\r\n</body>\r\n`\r\n\r\nexport default {\r\n    name: 'demo-rotate',\r\n    data () {\r\n        return {\r\n            code,\r\n            htmlCode,\r\n            loading: true,\r\n            rotation: {\r\n                x: 0,\r\n                y: 0,\r\n                z: 0\r\n            }\r\n        }\r\n    },\r\n    methods: {\r\n        onLoad () {\r\n            this.loading = false;\r\n            this.rotate();\r\n        },\r\n        rotate () {\r\n            requestAnimationFrame( this.rotate );\r\n            this.rotation.y += 0.01;\r\n        }\r\n    },\r\n    components: {\r\n        ModelCollada,\r\n        DemoBlock\r\n    }\r\n}\r\n</script>\n\n\n// WEBPACK FOOTER //\n// demo-rotate.vue?5b28b204","<template>\r\n    <demo-block :vue-code=\"code\" :html-code=\"htmlCode\">\r\n        <template slot=\"preview\">\r\n            <model-stl :backgroundAlpha=\"0\"\r\n                @on-load=\"onLoad\"\r\n                src=\"static/models/stl/gear.stl\"></model-stl>\r\n            <div class=\"example-loading\" v-show=\"loading\"></div>\r\n        </template>\r\n    </demo-block>\r\n</template>\r\n\r\n<script>\r\nimport DemoBlock from '../components/demo-block';\r\nimport ModelStl from '../../src/model-stl.vue'\r\n\r\nconst code = `\r\n<template>\r\n    <model-stl src=\"static/models/stl/slotted_disk.stl\"></model-stl>\r\n</template>\r\n\r\n<script>\r\n    import { ModelStl } from 'vue-3d-model'\r\n\r\n    export default {\r\n        components: {\r\n            ModelStl\r\n        }\r\n    }\r\n<\\/script>\r\n`\r\n\r\nconst htmlCode = `\r\n<body>\r\n    <div id=\"app\">\r\n        <model-stl src=\"static/models/stl/slotted_disk.stl\"></model-stl>\r\n    </div>\r\n    #scripts#\r\n    <script>\r\n        new Vue({\r\n            el: '#app'\r\n        })\r\n    <\\/script>\r\n</body>\r\n`\r\n\r\nexport default {\r\n    name: 'demo-stl',\r\n    data () {\r\n    \treturn {\r\n            code,\r\n            htmlCode,\r\n            loading: true\r\n    \t}\r\n    },\r\n    methods: {\r\n        onLoad () {\r\n            this.loading = false;\r\n        }\r\n    },\r\n    components: {\r\n        ModelStl,\r\n        DemoBlock\r\n    }\r\n}\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// demo-stl.vue?1f99e73b","<script>\r\nimport { ColladaLoader } from './loaders/ColladaLoader'\r\nimport { toIndexed } from './util'\r\nimport mixin from './model-mixin.vue'\r\n\r\nexport default {\r\n    name: 'model-collada',\r\n    mixins: [ mixin ],\r\n    props: {\r\n        lights: {\r\n            type: Array,\r\n            default () {\r\n                return [\r\n                    {\r\n                        type: 'HemisphereLight',\r\n                        position: { x: 0, y: 1, z: 0 },\r\n                        skyColor: 0xaaaaff,\r\n                        groundColor: 0x806060,\r\n                        intensity: 0.2\r\n                    },\r\n                    {\r\n                        type: 'DirectionalLight',\r\n                        position: { x: 1, y: 1, z: 1 },\r\n                        color: 0xffffff,\r\n                        intensity: 0.8\r\n                    }\r\n                ]\r\n            }\r\n        },\r\n        smoothing: {\r\n            type: Boolean,\r\n            default: false\r\n        }\r\n    },\r\n    data () {\r\n\r\n        const loader = new ColladaLoader();\r\n        loader.options.convertUpAxis = true;\r\n\r\n        return {\r\n            loader\r\n        }\r\n    },\r\n    methods: {\r\n        load () {\r\n\r\n            if ( !this.src ) return;\r\n\r\n            if ( this.object ) {\r\n                this.scene.remove( this.object );\r\n            }\r\n\r\n            this.loader.load( this.src, collada => {\r\n\r\n                this.object = collada.scene;\r\n\r\n                this.scene.add( this.object );\r\n\r\n                this.updateCamera();\r\n\r\n                this.$emit( 'on-load' );\r\n\r\n            }, err => {\r\n\r\n                this.$emit( 'on-error', err );\r\n\r\n            } );\r\n\r\n        }\r\n    }\r\n}\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// model-collada.vue?7ac47316","<template>\r\n    <div style=\"width: 100%; height: 100%; margin: 0; border: 0; padding: 0;\">\r\n        <canvas v-if=\"suportWebGL\" ref=\"canvas\" style=\"width: 100%; height: 100%;\"></canvas>\r\n        <div v-else>\r\n            <slot>\r\n                Your browser does not seem to support <a href=\"http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation\" style=\"color:#000\">WebGL</a>.<br/>'\r\n            </slot>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport {\r\n    Object3D,\r\n    Vector2,\r\n    Vector3,\r\n    Color,\r\n    Scene,\r\n    Raycaster,\r\n    WebGLRenderer,\r\n    PerspectiveCamera,\r\n    AmbientLight,\r\n    HemisphereLight,\r\n    DirectionalLight\r\n} from 'three'\r\nimport { getSize, getCenter } from './util'\r\nimport { OrbitControls } from './controls/OrbitControls'\r\n\r\nconst suportWebGL = ( () => {\r\n\r\n    try {\r\n        var canvas = document.createElement( 'canvas' ); \r\n        return !! ( window.WebGLRenderingContext && ( canvas.getContext( 'webgl' ) || canvas.getContext( 'experimental-webgl' ) ) );\r\n    } catch ( e ) {\r\n        return false;\r\n    }\r\n\r\n} )();\r\n\r\nlet handler = null;\r\n\r\nexport default {\r\n    props: {\r\n        src: {\r\n            type: String\r\n        },\r\n        width: {\r\n            type: Number\r\n        },\r\n        height: {\r\n            type: Number\r\n        },\r\n        position: {\r\n            type: Object,\r\n            default () {\r\n                return { x: 0, y: 0, z: 0 }\r\n            }\r\n        },\r\n        rotation: {\r\n            type: Object,\r\n            default () {\r\n                return { x: 0, y: 0, z: 0 }\r\n            }\r\n        },\r\n        scale: {\r\n            type: Object,\r\n            default () {\r\n                return { x: 1, y: 1, z: 1 }\r\n            }\r\n        },\r\n        lights: {\r\n            type: Array,\r\n            default () {\r\n                return [];\r\n            }\r\n        },\r\n        cameraPosition: {\r\n            type: Object\r\n        },\r\n        cameraRotation: {\r\n            type: Object\r\n        },\r\n        cameraUp: {\r\n            type: Object\r\n        },\r\n        cameraLookAt: {\r\n            type: Object\r\n        },\r\n        backgroundColor: {\r\n            default: 0xffffff\r\n        },\r\n        backgroundAlpha: {\r\n            type: Number,\r\n            default: 1\r\n        },\r\n        controllable: {\r\n            type: Boolean,\r\n            default: true\r\n        }\r\n    },\r\n    data () {\r\n        return {\r\n            suportWebGL,\r\n            size: {\r\n                width: this.width,\r\n                height: this.height\r\n            },\r\n            object: null,\r\n            raycaster: new Raycaster(),\r\n            mouse: new Vector2(),\r\n            camera: new PerspectiveCamera( 45, 1, 0.001, 100000 ),\r\n            scene: new Scene(),\r\n            renderer: null,\r\n            controls: null,\r\n            allLights: [],\r\n            clock: typeof performance === 'undefined' ? Date : performance\r\n        }\r\n    },\r\n    computed: {\r\n        hasListener () {\r\n\r\n            // 判断是否有鼠标事件监听，用于减少不必要的拾取判断\r\n            const events = this._events;\r\n            let result = {};\r\n\r\n            [ 'on-mousemove', 'on-mouseup', 'on-mousedown', 'on-click' ].forEach( name => {\r\n                result[ name ] = !!events[ name ] && events[ name ].length > 0;\r\n            } )\r\n\r\n            return result;\r\n        }\r\n    },\r\n    created () {\r\n        window.addEventListener( 'resize', this.onResize, false );\r\n    },\r\n    mounted () {\r\n\r\n        if ( this.width === undefined || this.height === undefined ) {\r\n            this.size = {\r\n                width: this.$el.offsetWidth,\r\n                height: this.$el.offsetHeight\r\n            }\r\n        }\r\n\r\n        this.renderer = new WebGLRenderer( { antialias: true, alpha: true, canvas: this.$refs.canvas } )\r\n        this.renderer.shadowMap.enabled = true;\r\n\r\n        this.load();\r\n        this.update();\r\n\r\n        this.$el.addEventListener( 'mousedown', this.onMouseDown, false );\r\n        this.$el.addEventListener( 'mousemove', this.onMouseMove, false );\r\n        this.$el.addEventListener( 'mouseup', this.onMouseUp, false );\r\n        this.$el.addEventListener( 'click', this.onClick, false );\r\n\r\n        this.animate();\r\n    },\r\n    beforeDestroy () {\r\n\r\n        this.$el.removeEventListener( 'mousedown', this.onMouseDown, false );\r\n        this.$el.removeEventListener( 'mousemove', this.onMouseMove, false );\r\n        this.$el.removeEventListener( 'mouseup', this.onMouseUp, false );\r\n        this.$el.removeEventListener( 'click', this.onClick, false );\r\n\r\n    },\r\n    watch: {\r\n        src () {\r\n            this.load();\r\n        },\r\n        rotation: {\r\n            deep: true,\r\n            handler( val ) {\r\n                if ( !this.object ) return;\r\n                this.object.rotation.set( val.x, val.y, val.z );\r\n            }\r\n        },\r\n        position: {\r\n            deep: true,\r\n            handler( val ) {\r\n                if ( !this.object ) return;\r\n                this.object.position.set( val.x, val.y, val.z );\r\n            }\r\n        },\r\n        scale: {\r\n            deep: true,\r\n            handler( val ) {\r\n                if ( !this.object ) return;\r\n                this.object.scale.set( val.x, val.y, val.z );\r\n            }\r\n        },\r\n        lights: {\r\n            deep: true,\r\n            handler( val, oldVal ) {\r\n                this.updateLights();\r\n            }\r\n        },\r\n        size: {\r\n            deep: true,\r\n            handler ( val ) {\r\n                this.updateCamera();\r\n                this.updateRenderer();\r\n            }\r\n        },\r\n        controllable () {\r\n            this.updateControls();\r\n        },\r\n        backgroundAlpha () {\r\n            this.updateRenderer();\r\n        },\r\n        backgroundColor () {\r\n            this.updateRenderer();\r\n        }\r\n    },\r\n    methods: {\r\n        onResize () {\r\n\r\n            if ( this.width === undefined || this.height === undefined ) {\r\n\r\n                this.$nextTick( () => {\r\n                    this.size = {\r\n                        width: this.$el.offsetWidth,\r\n                        height: this.$el.offsetHeight\r\n                    }\r\n                } )\r\n                \r\n            }\r\n        },\r\n        onMouseDown ( event ) {\r\n\r\n            if ( !this.hasListener[ 'on-mousedown' ] ) return;\r\n\r\n            const intersected = this.pick( event.clientX, event.clientY );\r\n            this.$emit( 'on-mousedown', intersected );\r\n\r\n        },\r\n        onMouseMove ( event ) {\r\n\r\n            if ( !this.hasListener[ 'on-mousemove' ] ) return;\r\n\r\n            const intersected = this.pick( event.clientX, event.clientY );\r\n            this.$emit( 'on-mousemove', intersected );\r\n\r\n        },\r\n        onMouseUp ( event ) {\r\n\r\n            if ( !this.hasListener[ 'on-mouseup' ] ) return;\r\n\r\n            const intersected = this.pick( event.clientX, event.clientY );\r\n            this.$emit( 'on-mouseup', intersected );\r\n\r\n        },\r\n        onClick ( event ) {\r\n\r\n            if ( !this.hasListener[ 'on-click' ] ) return;\r\n\r\n            const intersected = this.pick( event.clientX, event.clientY );\r\n            this.$emit( 'on-click', intersected );\r\n\r\n        },\r\n        pick ( x, y ) {\r\n\r\n            if ( !this.object ) return;\r\n\r\n            const rect = this.$el.getBoundingClientRect();\r\n\r\n            x -= rect.left;\r\n            y -= rect.top;\r\n\r\n            this.mouse.x = ( x / this.size.width ) * 2 - 1;\r\n            this.mouse.y = - ( y / this.size.height ) * 2 + 1;\r\n\r\n            this.raycaster.setFromCamera( this.mouse, this.camera );\r\n\r\n            const intersects = this.raycaster.intersectObject( this.object, true );\r\n\r\n            return ( intersects && intersects.length ) > 0 ? intersects[ 0 ] : null;\r\n\r\n        },\r\n        update () {\r\n\r\n            this.updateRenderer();\r\n            this.updateModel();\r\n            this.updateCamera();\r\n            this.updateLights();\r\n            this.updateControls();\r\n            \r\n        },\r\n        updateModel () {\r\n\r\n            let object = this.object;\r\n\r\n            if ( !object ) return;\r\n\r\n            object.position.copy( this.position );\r\n            object.rotation.copy( this.rotation );\r\n            object.scale.copy( this.scale );\r\n\r\n            object.matrixWorldNeedsUpdate = true;\r\n\r\n        },\r\n        updateRenderer () {\r\n\r\n            let renderer = this.renderer;\r\n\r\n            renderer.setSize( this.size.width, this.size.height );\r\n            renderer.setPixelRatio( window.devicePixelRatio || 1 );\r\n            renderer.setClearColor( new Color( this.backgroundColor ).getHex() );\r\n            renderer.setClearAlpha( this.backgroundAlpha );\r\n        },\r\n        updateCamera () {\r\n\r\n            let camera = this.camera;\r\n            let object = this.object;\r\n\r\n            let distance = 0;\r\n            let center = null;\r\n\r\n            camera.aspect = this.size.width / this.size.height;\r\n            camera.updateProjectionMatrix();\r\n\r\n            if ( !this.cameraLookAt && !this.cameraPosition && !this.cameraRotation && !this.cameraUp ) {\r\n\r\n                if ( !object ) return;\r\n\r\n                distance = getSize( object ).length();\r\n                center = getCenter( object );\r\n\r\n                camera.position.set( 0, 0, 0 );\r\n                camera.position.z = distance;\r\n                camera.position.add( center );\r\n                camera.lookAt( center );\r\n\r\n            } else {\r\n                // TODO\r\n            }\r\n\r\n            if ( this.controls && center ) this.controls.target.copy( center );\r\n\r\n        },\r\n        updateLights () {\r\n\r\n            this.scene.remove.apply( this.scene, this.allLights );\r\n\r\n            this.allLights = [];\r\n\r\n            this.lights.forEach( item => {\r\n\r\n                if ( !item.type ) return;\r\n\r\n                const type = item.type.toLowerCase();\r\n\r\n                let light = null;\r\n\r\n                if ( type === 'ambient' || type === 'ambientlight' ) {\r\n\r\n                    const color = item.color || 0x404040;\r\n                    const intensity = item.intensity || 1;\r\n\r\n                    light = new AmbientLight( color, intensity );\r\n\r\n                } else if ( type === 'point' || type === 'pointlight' ) {\r\n\r\n                    const color = item.color || 0xffffff;\r\n                    const intensity = item.intensity || 1;\r\n                    const distance = item.distance || 0;\r\n                    const decay = item.decay || 1;\r\n\r\n                    light = new PointLight( color, intensity, distance, decay );\r\n\r\n                    if ( item.position ) {\r\n                        light.position.copy( item.position );\r\n                    }\r\n\r\n                } else if ( type === 'directional' || type === 'directionallight' ) {\r\n\r\n                    const color = item.color || 0xffffff;\r\n                    const intensity = item.intensity || 1;\r\n\r\n                    light = new DirectionalLight( color, intensity );\r\n\r\n                    if ( item.position ) {\r\n                        light.position.copy( item.position );\r\n                    }\r\n\r\n                    if ( item.target ) {\r\n                        light.target.copy( item.target );\r\n                    }\r\n\r\n                } else if ( type === 'hemisphere' || type === 'hemispherelight' ) {\r\n\r\n                    const skyColor = item.skyColor || 0xffffff;\r\n                    const groundColor = item.groundColor || 0xffffff;\r\n                    const intensity = item.intensity || 1;\r\n\r\n                    light = new HemisphereLight( skyColor, groundColor, intensity );\r\n\r\n                    if ( item.position ) {\r\n                        light.position.copy( item.position );\r\n                    }\r\n\r\n                }\r\n\r\n                this.allLights.push( light );\r\n                this.scene.add( light );\r\n\r\n            } )\r\n\r\n        },\r\n        updateControls () {\r\n\r\n            if ( this.controllable && this.controls ) return;\r\n\r\n            if ( this.controllable ) {\r\n\r\n                if ( this.controls ) return;\r\n\r\n                this.controls = new OrbitControls( this.camera, this.$el );\r\n                this.controls.type = 'orbit';\r\n\r\n            } else {\r\n\r\n                if ( this.controls ) {\r\n\r\n                    this.controls.dispose();\r\n                    this.controls = null;\r\n\r\n                }\r\n\r\n            }\r\n\r\n        },\r\n        load () {\r\n\r\n            if ( !this.src ) return;\r\n\r\n            if ( this.object ) {\r\n                this.scene.remove( this.object );\r\n            }\r\n\r\n            this.loader.load( this.src, object => {\r\n\r\n                if ( this.process ) {\r\n                    this.process ( object );\r\n                }\r\n\r\n                this.object = object;\r\n\r\n                this.scene.add( this.object );\r\n\r\n                this.updateCamera();\r\n\r\n                this.$emit( 'on-load' );\r\n\r\n            }, err => {\r\n\r\n                this.$emit( 'on-error', err );\r\n\r\n            } );\r\n\r\n        },\r\n        animate () {\r\n            requestAnimationFrame( this.animate );\r\n            this.render();\r\n        },\r\n        render () {\r\n            this.renderer.render( this.scene, this.camera );\r\n        }\r\n    }\r\n}\r\n\r\n</script>\n\n\n// WEBPACK FOOTER //\n// model-mixin.vue?f7d27ef8","<script>\r\nimport { OBJLoader } from './loaders/OBJLoader'\r\nimport { toIndexed } from './util'\r\nimport mixin from './model-mixin.vue'\r\n\r\nexport default {\r\n    name: 'model-obj',\r\n    mixins: [ mixin ],\r\n    props: {\r\n        lights: {\r\n            type: Array,\r\n            default () {\r\n                return [\r\n                    {\r\n                        type: 'HemisphereLight',\r\n                        position: { x: 0, y: 1, z: 0 },\r\n                        skyColor: 0xaaaaff,\r\n                        groundColor: 0x806060,\r\n                        intensity: 0.2\r\n                    },\r\n                    {\r\n                        type: 'DirectionalLight',\r\n                        position: { x: 1, y: 1, z: 1 },\r\n                        color: 0xffffff,\r\n                        intensity: 0.8\r\n                    }\r\n                ]\r\n            }\r\n        },\r\n        smoothing: {\r\n            type: Boolean,\r\n            default: false\r\n        }\r\n    },\r\n    data () {\r\n        return {\r\n            loader: new OBJLoader()\r\n        }\r\n    },\r\n    methods: {\r\n        process ( object ) {\r\n            if ( this.smoothing ) {\r\n                object.traverse( child => {\r\n                    if ( child.geometry ) {\r\n                        child.geometry = toIndexed( child.geometry );\r\n                        child.geometry.computeVertexNormals();\r\n                    }\r\n                } )\r\n            }\r\n        }\r\n    }\r\n}\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// model-obj.vue?05475338","<script>\r\nimport { STLLoader } from './loaders/STLLoader'\r\nimport mixin from './model-mixin.vue'\r\nimport {\r\n    Mesh,\r\n    MeshPhongMaterial\r\n} from 'three'\r\n\r\nexport default {\r\n    name: 'model-stl',\r\n    mixins: [ mixin ],\r\n    props: {\r\n        lights: {\r\n            type: Array,\r\n            default () {\r\n                return [\r\n                    {\r\n                        type: 'HemisphereLight',\r\n                        position: { x: 0, y: 1, z: 0 },\r\n                        skyColor: 0xaaaaff,\r\n                        groundColor: 0x806060,\r\n                        intensity: 0.2\r\n                    },\r\n                    {\r\n                        type: 'DirectionalLight',\r\n                        position: { x: 1, y: 1, z: 1 },\r\n                        color: 0xffffff,\r\n                        intensity: 0.8\r\n                    }\r\n                ]\r\n            }\r\n        }\r\n    },\r\n    data () {\r\n        return {\r\n            loader: new STLLoader()\r\n        }\r\n    },\r\n    methods: {\r\n        load () {\r\n\r\n            if ( !this.src ) return;\r\n\r\n            if ( this.object ) {\r\n                this.scene.remove( this.object );\r\n            }\r\n\r\n            this.loader.load( this.src, geometry => {\r\n\r\n                this.object = new Mesh( geometry, new MeshPhongMaterial() );\r\n\r\n                this.scene.add( this.object );\r\n\r\n                \r\n\r\n                this.updateCamera();\r\n\r\n                this.$emit( 'on-load' );\r\n\r\n            }, err => {\r\n\r\n                this.$emit( 'on-error', err );\r\n\r\n            } );\r\n\r\n        }\r\n    }\r\n}\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// model-stl.vue?f182b660","<script>\r\nimport { ObjectLoader } from 'three'\r\nimport mixin from './model-mixin.vue'\r\n\r\nexport default {\r\n    name: 'model-three',\r\n    mixins: [ mixin ],\r\n    data () {\r\n        return {\r\n            loader: new ObjectLoader()\r\n        }\r\n    }\r\n}\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// model-three.vue?de605bf0","import * as THREE from 'three';\r\n\r\n// https://github.com/mrdoob/three.js/blob/dev/examples/js/controls/OrbitControls.js\r\n\r\nconst OrbitControls = function ( object, domElement ) {\r\n\r\n\tthis.object = object;\r\n\r\n\tthis.domElement = ( domElement !== undefined ) ? domElement : document;\r\n\r\n\t// Set to false to disable this control\r\n\tthis.enabled = true;\r\n\r\n\t// \"target\" sets the location of focus, where the object orbits around\r\n\tthis.target = new THREE.Vector3();\r\n\r\n\t// How far you can dolly in and out ( PerspectiveCamera only )\r\n\tthis.minDistance = 0;\r\n\tthis.maxDistance = Infinity;\r\n\r\n\t// How far you can zoom in and out ( OrthographicCamera only )\r\n\tthis.minZoom = 0;\r\n\tthis.maxZoom = Infinity;\r\n\r\n\t// How far you can orbit vertically, upper and lower limits.\r\n\t// Range is 0 to Math.PI radians.\r\n\tthis.minPolarAngle = 0; // radians\r\n\tthis.maxPolarAngle = Math.PI; // radians\r\n\r\n\t// How far you can orbit horizontally, upper and lower limits.\r\n\t// If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\r\n\tthis.minAzimuthAngle = - Infinity; // radians\r\n\tthis.maxAzimuthAngle = Infinity; // radians\r\n\r\n\t// Set to true to enable damping (inertia)\r\n\t// If damping is enabled, you must call controls.update() in your animation loop\r\n\tthis.enableDamping = false;\r\n\tthis.dampingFactor = 0.25;\r\n\r\n\t// This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\r\n\t// Set to false to disable zooming\r\n\tthis.enableZoom = true;\r\n\tthis.zoomSpeed = 1.0;\r\n\r\n\t// Set to false to disable rotating\r\n\tthis.enableRotate = true;\r\n\tthis.rotateSpeed = 1.0;\r\n\r\n\t// Set to false to disable panning\r\n\tthis.enablePan = true;\r\n\tthis.keyPanSpeed = 7.0;\t// pixels moved per arrow key push\r\n\r\n\t// Set to true to automatically rotate around the target\r\n\t// If auto-rotate is enabled, you must call controls.update() in your animation loop\r\n\tthis.autoRotate = false;\r\n\tthis.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\r\n\r\n\t// Set to false to disable use of the keys\r\n\tthis.enableKeys = true;\r\n\r\n\t// The four arrow keys\r\n\tthis.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 };\r\n\r\n\t// Mouse buttons\r\n\tthis.mouseButtons = { ORBIT: THREE.MOUSE.LEFT, ZOOM: THREE.MOUSE.MIDDLE, PAN: THREE.MOUSE.RIGHT };\r\n\r\n\t// for reset\r\n\tthis.target0 = this.target.clone();\r\n\tthis.position0 = this.object.position.clone();\r\n\tthis.zoom0 = this.object.zoom;\r\n\r\n\t//\r\n\t// public methods\r\n\t//\r\n\r\n\tthis.getPolarAngle = function () {\r\n\r\n\t\treturn spherical.phi;\r\n\r\n\t};\r\n\r\n\tthis.getAzimuthalAngle = function () {\r\n\r\n\t\treturn spherical.theta;\r\n\r\n\t};\r\n\r\n\tthis.saveState = function () {\r\n\r\n\t\tscope.target0.copy( scope.target );\r\n\t\tscope.position0.copy( scope.object.position );\r\n\t\tscope.zoom0 = scope.object.zoom;\r\n\r\n\t};\r\n\r\n\tthis.reset = function () {\r\n\r\n\t\tscope.target.copy( scope.target0 );\r\n\t\tscope.object.position.copy( scope.position0 );\r\n\t\tscope.object.zoom = scope.zoom0;\r\n\r\n\t\tscope.object.updateProjectionMatrix();\r\n\t\tscope.dispatchEvent( changeEvent );\r\n\r\n\t\tscope.update();\r\n\r\n\t\tstate = STATE.NONE;\r\n\r\n\t};\r\n\r\n\t// this method is exposed, but perhaps it would be better if we can make it private...\r\n\tthis.update = function () {\r\n\r\n\t\tvar offset = new THREE.Vector3();\r\n\r\n\t\t// so camera.up is the orbit axis\r\n\t\tvar quat = new THREE.Quaternion().setFromUnitVectors( object.up, new THREE.Vector3( 0, 1, 0 ) );\r\n\t\tvar quatInverse = quat.clone().inverse();\r\n\r\n\t\tvar lastPosition = new THREE.Vector3();\r\n\t\tvar lastQuaternion = new THREE.Quaternion();\r\n\r\n\t\treturn function update() {\r\n\r\n\t\t\tvar position = scope.object.position;\r\n\r\n\t\t\toffset.copy( position ).sub( scope.target );\r\n\r\n\t\t\t// rotate offset to \"y-axis-is-up\" space\r\n\t\t\toffset.applyQuaternion( quat );\r\n\r\n\t\t\t// angle from z-axis around y-axis\r\n\t\t\tspherical.setFromVector3( offset );\r\n\r\n\t\t\tif ( scope.autoRotate && state === STATE.NONE ) {\r\n\r\n\t\t\t\trotateLeft( getAutoRotationAngle() );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tspherical.theta += sphericalDelta.theta;\r\n\t\t\tspherical.phi += sphericalDelta.phi;\r\n\r\n\t\t\t// restrict theta to be between desired limits\r\n\t\t\tspherical.theta = Math.max( scope.minAzimuthAngle, Math.min( scope.maxAzimuthAngle, spherical.theta ) );\r\n\r\n\t\t\t// restrict phi to be between desired limits\r\n\t\t\tspherical.phi = Math.max( scope.minPolarAngle, Math.min( scope.maxPolarAngle, spherical.phi ) );\r\n\r\n\t\t\tspherical.makeSafe();\r\n\r\n\r\n\t\t\tspherical.radius *= scale;\r\n\r\n\t\t\t// restrict radius to be between desired limits\r\n\t\t\tspherical.radius = Math.max( scope.minDistance, Math.min( scope.maxDistance, spherical.radius ) );\r\n\r\n\t\t\t// move target to panned location\r\n\t\t\tscope.target.add( panOffset );\r\n\r\n\t\t\toffset.setFromSpherical( spherical );\r\n\r\n\t\t\t// rotate offset back to \"camera-up-vector-is-up\" space\r\n\t\t\toffset.applyQuaternion( quatInverse );\r\n\r\n\t\t\tposition.copy( scope.target ).add( offset );\r\n\r\n\t\t\tscope.object.lookAt( scope.target );\r\n\r\n\t\t\tif ( scope.enableDamping === true ) {\r\n\r\n\t\t\t\tsphericalDelta.theta *= ( 1 - scope.dampingFactor );\r\n\t\t\t\tsphericalDelta.phi *= ( 1 - scope.dampingFactor );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tsphericalDelta.set( 0, 0, 0 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tscale = 1;\r\n\t\t\tpanOffset.set( 0, 0, 0 );\r\n\r\n\t\t\t// update condition is:\r\n\t\t\t// min(camera displacement, camera rotation in radians)^2 > EPS\r\n\t\t\t// using small-angle approximation cos(x/2) = 1 - x^2 / 8\r\n\r\n\t\t\tif ( zoomChanged ||\r\n\t\t\t\tlastPosition.distanceToSquared( scope.object.position ) > EPS ||\r\n\t\t\t\t8 * ( 1 - lastQuaternion.dot( scope.object.quaternion ) ) > EPS ) {\r\n\r\n\t\t\t\tscope.dispatchEvent( changeEvent );\r\n\r\n\t\t\t\tlastPosition.copy( scope.object.position );\r\n\t\t\t\tlastQuaternion.copy( scope.object.quaternion );\r\n\t\t\t\tzoomChanged = false;\r\n\r\n\t\t\t\treturn true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t};\r\n\r\n\t}();\r\n\r\n\tthis.dispose = function () {\r\n\r\n\t\tscope.domElement.removeEventListener( 'contextmenu', onContextMenu, false );\r\n\t\tscope.domElement.removeEventListener( 'mousedown', onMouseDown, false );\r\n\t\tscope.domElement.removeEventListener( 'wheel', onMouseWheel, false );\r\n\r\n\t\tscope.domElement.removeEventListener( 'touchstart', onTouchStart, false );\r\n\t\tscope.domElement.removeEventListener( 'touchend', onTouchEnd, false );\r\n\t\tscope.domElement.removeEventListener( 'touchmove', onTouchMove, false );\r\n\r\n\t\tdocument.removeEventListener( 'mousemove', onMouseMove, false );\r\n\t\tdocument.removeEventListener( 'mouseup', onMouseUp, false );\r\n\r\n\t\twindow.removeEventListener( 'keydown', onKeyDown, false );\r\n\r\n\t\t//scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\r\n\r\n\t};\r\n\r\n\t//\r\n\t// internals\r\n\t//\r\n\r\n\tvar scope = this;\r\n\r\n\tvar changeEvent = { type: 'change' };\r\n\tvar startEvent = { type: 'start' };\r\n\tvar endEvent = { type: 'end' };\r\n\r\n\tvar STATE = { NONE: - 1, ROTATE: 0, DOLLY: 1, PAN: 2, TOUCH_ROTATE: 3, TOUCH_DOLLY: 4, TOUCH_PAN: 5 };\r\n\r\n\tvar state = STATE.NONE;\r\n\r\n\tvar EPS = 0.000001;\r\n\r\n\t// current position in spherical coordinates\r\n\tvar spherical = new THREE.Spherical();\r\n\tvar sphericalDelta = new THREE.Spherical();\r\n\r\n\tvar scale = 1;\r\n\tvar panOffset = new THREE.Vector3();\r\n\tvar zoomChanged = false;\r\n\r\n\tvar rotateStart = new THREE.Vector2();\r\n\tvar rotateEnd = new THREE.Vector2();\r\n\tvar rotateDelta = new THREE.Vector2();\r\n\r\n\tvar panStart = new THREE.Vector2();\r\n\tvar panEnd = new THREE.Vector2();\r\n\tvar panDelta = new THREE.Vector2();\r\n\r\n\tvar dollyStart = new THREE.Vector2();\r\n\tvar dollyEnd = new THREE.Vector2();\r\n\tvar dollyDelta = new THREE.Vector2();\r\n\r\n\tfunction getAutoRotationAngle() {\r\n\r\n\t\treturn 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\r\n\r\n\t}\r\n\r\n\tfunction getZoomScale() {\r\n\r\n\t\treturn Math.pow( 0.95, scope.zoomSpeed );\r\n\r\n\t}\r\n\r\n\tfunction rotateLeft( angle ) {\r\n\r\n\t\tsphericalDelta.theta -= angle;\r\n\r\n\t}\r\n\r\n\tfunction rotateUp( angle ) {\r\n\r\n\t\tsphericalDelta.phi -= angle;\r\n\r\n\t}\r\n\r\n\tvar panLeft = function () {\r\n\r\n\t\tvar v = new THREE.Vector3();\r\n\r\n\t\treturn function panLeft( distance, objectMatrix ) {\r\n\r\n\t\t\tv.setFromMatrixColumn( objectMatrix, 0 ); // get X column of objectMatrix\r\n\t\t\tv.multiplyScalar( - distance );\r\n\r\n\t\t\tpanOffset.add( v );\r\n\r\n\t\t};\r\n\r\n\t}();\r\n\r\n\tvar panUp = function () {\r\n\r\n\t\tvar v = new THREE.Vector3();\r\n\r\n\t\treturn function panUp( distance, objectMatrix ) {\r\n\r\n\t\t\tv.setFromMatrixColumn( objectMatrix, 1 ); // get Y column of objectMatrix\r\n\t\t\tv.multiplyScalar( distance );\r\n\r\n\t\t\tpanOffset.add( v );\r\n\r\n\t\t};\r\n\r\n\t}();\r\n\r\n\t// deltaX and deltaY are in pixels; right and down are positive\r\n\tvar pan = function () {\r\n\r\n\t\tvar offset = new THREE.Vector3();\r\n\r\n\t\treturn function pan( deltaX, deltaY ) {\r\n\r\n\t\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\r\n\r\n\t\t\tif ( scope.object instanceof THREE.PerspectiveCamera ) {\r\n\r\n\t\t\t\t// perspective\r\n\t\t\t\tvar position = scope.object.position;\r\n\t\t\t\toffset.copy( position ).sub( scope.target );\r\n\t\t\t\tvar targetDistance = offset.length();\r\n\r\n\t\t\t\t// half of the fov is center to top of screen\r\n\t\t\t\ttargetDistance *= Math.tan( ( scope.object.fov / 2 ) * Math.PI / 180.0 );\r\n\r\n\t\t\t\t// we actually don't use screenWidth, since perspective camera is fixed to screen height\r\n\t\t\t\tpanLeft( 2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix );\r\n\t\t\t\tpanUp( 2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix );\r\n\r\n\t\t\t} else if ( scope.object instanceof THREE.OrthographicCamera ) {\r\n\r\n\t\t\t\t// orthographic\r\n\t\t\t\tpanLeft( deltaX * ( scope.object.right - scope.object.left ) / scope.object.zoom / element.clientWidth, scope.object.matrix );\r\n\t\t\t\tpanUp( deltaY * ( scope.object.top - scope.object.bottom ) / scope.object.zoom / element.clientHeight, scope.object.matrix );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// camera neither orthographic nor perspective\r\n\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.' );\r\n\t\t\t\tscope.enablePan = false;\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t}();\r\n\r\n\tfunction dollyIn( dollyScale ) {\r\n\r\n\t\tif ( scope.object instanceof THREE.PerspectiveCamera ) {\r\n\r\n\t\t\tscale /= dollyScale;\r\n\r\n\t\t} else if ( scope.object instanceof THREE.OrthographicCamera ) {\r\n\r\n\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom * dollyScale ) );\r\n\t\t\tscope.object.updateProjectionMatrix();\r\n\t\t\tzoomChanged = true;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\r\n\t\t\tscope.enableZoom = false;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction dollyOut( dollyScale ) {\r\n\r\n\t\tif ( scope.object instanceof THREE.PerspectiveCamera ) {\r\n\r\n\t\t\tscale *= dollyScale;\r\n\r\n\t\t} else if ( scope.object instanceof THREE.OrthographicCamera ) {\r\n\r\n\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom / dollyScale ) );\r\n\t\t\tscope.object.updateProjectionMatrix();\r\n\t\t\tzoomChanged = true;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\r\n\t\t\tscope.enableZoom = false;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t//\r\n\t// event callbacks - update the object state\r\n\t//\r\n\r\n\tfunction handleMouseDownRotate( event ) {\r\n\r\n\t\t//console.log( 'handleMouseDownRotate' );\r\n\r\n\t\trotateStart.set( event.clientX, event.clientY );\r\n\r\n\t}\r\n\r\n\tfunction handleMouseDownDolly( event ) {\r\n\r\n\t\t//console.log( 'handleMouseDownDolly' );\r\n\r\n\t\tdollyStart.set( event.clientX, event.clientY );\r\n\r\n\t}\r\n\r\n\tfunction handleMouseDownPan( event ) {\r\n\r\n\t\t//console.log( 'handleMouseDownPan' );\r\n\r\n\t\tpanStart.set( event.clientX, event.clientY );\r\n\r\n\t}\r\n\r\n\tfunction handleMouseMoveRotate( event ) {\r\n\r\n\t\t//console.log( 'handleMouseMoveRotate' );\r\n\r\n\t\trotateEnd.set( event.clientX, event.clientY );\r\n\t\trotateDelta.subVectors( rotateEnd, rotateStart );\r\n\r\n\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\r\n\r\n\t\t// rotating across whole screen goes 360 degrees around\r\n\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed );\r\n\r\n\t\t// rotating up and down along whole screen attempts to go 360, but limited to 180\r\n\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed );\r\n\r\n\t\trotateStart.copy( rotateEnd );\r\n\r\n\t\tscope.update();\r\n\r\n\t}\r\n\r\n\tfunction handleMouseMoveDolly( event ) {\r\n\r\n\t\t//console.log( 'handleMouseMoveDolly' );\r\n\r\n\t\tdollyEnd.set( event.clientX, event.clientY );\r\n\r\n\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\r\n\r\n\t\tif ( dollyDelta.y > 0 ) {\r\n\r\n\t\t\tdollyIn( getZoomScale() );\r\n\r\n\t\t} else if ( dollyDelta.y < 0 ) {\r\n\r\n\t\t\tdollyOut( getZoomScale() );\r\n\r\n\t\t}\r\n\r\n\t\tdollyStart.copy( dollyEnd );\r\n\r\n\t\tscope.update();\r\n\r\n\t}\r\n\r\n\tfunction handleMouseMovePan( event ) {\r\n\r\n\t\t//console.log( 'handleMouseMovePan' );\r\n\r\n\t\tpanEnd.set( event.clientX, event.clientY );\r\n\r\n\t\tpanDelta.subVectors( panEnd, panStart );\r\n\r\n\t\tpan( panDelta.x, panDelta.y );\r\n\r\n\t\tpanStart.copy( panEnd );\r\n\r\n\t\tscope.update();\r\n\r\n\t}\r\n\r\n\tfunction handleMouseUp( event ) {\r\n\r\n\t\t// console.log( 'handleMouseUp' );\r\n\r\n\t}\r\n\r\n\tfunction handleMouseWheel( event ) {\r\n\r\n\t\t// console.log( 'handleMouseWheel' );\r\n\r\n\t\tif ( event.deltaY < 0 ) {\r\n\r\n\t\t\tdollyOut( getZoomScale() );\r\n\r\n\t\t} else if ( event.deltaY > 0 ) {\r\n\r\n\t\t\tdollyIn( getZoomScale() );\r\n\r\n\t\t}\r\n\r\n\t\tscope.update();\r\n\r\n\t}\r\n\r\n\tfunction handleKeyDown( event ) {\r\n\r\n\t\t//console.log( 'handleKeyDown' );\r\n\r\n\t\tswitch ( event.keyCode ) {\r\n\r\n\t\t\tcase scope.keys.UP:\r\n\t\t\t\tpan( 0, scope.keyPanSpeed );\r\n\t\t\t\tscope.update();\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase scope.keys.BOTTOM:\r\n\t\t\t\tpan( 0, - scope.keyPanSpeed );\r\n\t\t\t\tscope.update();\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase scope.keys.LEFT:\r\n\t\t\t\tpan( scope.keyPanSpeed, 0 );\r\n\t\t\t\tscope.update();\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase scope.keys.RIGHT:\r\n\t\t\t\tpan( - scope.keyPanSpeed, 0 );\r\n\t\t\t\tscope.update();\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction handleTouchStartRotate( event ) {\r\n\r\n\t\t//console.log( 'handleTouchStartRotate' );\r\n\r\n\t\trotateStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\r\n\r\n\t}\r\n\r\n\tfunction handleTouchStartDolly( event ) {\r\n\r\n\t\t//console.log( 'handleTouchStartDolly' );\r\n\r\n\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\r\n\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\r\n\r\n\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\r\n\r\n\t\tdollyStart.set( 0, distance );\r\n\r\n\t}\r\n\r\n\tfunction handleTouchStartPan( event ) {\r\n\r\n\t\t//console.log( 'handleTouchStartPan' );\r\n\r\n\t\tpanStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\r\n\r\n\t}\r\n\r\n\tfunction handleTouchMoveRotate( event ) {\r\n\r\n\t\t//console.log( 'handleTouchMoveRotate' );\r\n\r\n\t\trotateEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\r\n\t\trotateDelta.subVectors( rotateEnd, rotateStart );\r\n\r\n\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\r\n\r\n\t\t// rotating across whole screen goes 360 degrees around\r\n\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed );\r\n\r\n\t\t// rotating up and down along whole screen attempts to go 360, but limited to 180\r\n\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed );\r\n\r\n\t\trotateStart.copy( rotateEnd );\r\n\r\n\t\tscope.update();\r\n\r\n\t}\r\n\r\n\tfunction handleTouchMoveDolly( event ) {\r\n\r\n\t\t//console.log( 'handleTouchMoveDolly' );\r\n\r\n\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\r\n\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\r\n\r\n\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\r\n\r\n\t\tdollyEnd.set( 0, distance );\r\n\r\n\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\r\n\r\n\t\tif ( dollyDelta.y > 0 ) {\r\n\r\n\t\t\tdollyOut( getZoomScale() );\r\n\r\n\t\t} else if ( dollyDelta.y < 0 ) {\r\n\r\n\t\t\tdollyIn( getZoomScale() );\r\n\r\n\t\t}\r\n\r\n\t\tdollyStart.copy( dollyEnd );\r\n\r\n\t\tscope.update();\r\n\r\n\t}\r\n\r\n\tfunction handleTouchMovePan( event ) {\r\n\r\n\t\t//console.log( 'handleTouchMovePan' );\r\n\r\n\t\tpanEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\r\n\r\n\t\tpanDelta.subVectors( panEnd, panStart );\r\n\r\n\t\tpan( panDelta.x, panDelta.y );\r\n\r\n\t\tpanStart.copy( panEnd );\r\n\r\n\t\tscope.update();\r\n\r\n\t}\r\n\r\n\tfunction handleTouchEnd( event ) {\r\n\r\n\t\t//console.log( 'handleTouchEnd' );\r\n\r\n\t}\r\n\r\n\t//\r\n\t// event handlers - FSM: listen for events and reset state\r\n\t//\r\n\r\n\tfunction onMouseDown( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\tevent.preventDefault();\r\n\r\n\t\tswitch ( event.button ) {\r\n\r\n\t\t\tcase scope.mouseButtons.ORBIT:\r\n\r\n\t\t\t\tif ( scope.enableRotate === false ) return;\r\n\r\n\t\t\t\thandleMouseDownRotate( event );\r\n\r\n\t\t\t\tstate = STATE.ROTATE;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase scope.mouseButtons.ZOOM:\r\n\r\n\t\t\t\tif ( scope.enableZoom === false ) return;\r\n\r\n\t\t\t\thandleMouseDownDolly( event );\r\n\r\n\t\t\t\tstate = STATE.DOLLY;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase scope.mouseButtons.PAN:\r\n\r\n\t\t\t\tif ( scope.enablePan === false ) return;\r\n\r\n\t\t\t\thandleMouseDownPan( event );\r\n\r\n\t\t\t\tstate = STATE.PAN;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tif ( state !== STATE.NONE ) {\r\n\r\n\t\t\tdocument.addEventListener( 'mousemove', onMouseMove, false );\r\n\t\t\tdocument.addEventListener( 'mouseup', onMouseUp, false );\r\n\r\n\t\t\tscope.dispatchEvent( startEvent );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction onMouseMove( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\tevent.preventDefault();\r\n\r\n\t\tswitch ( state ) {\r\n\r\n\t\t\tcase STATE.ROTATE:\r\n\r\n\t\t\t\tif ( scope.enableRotate === false ) return;\r\n\r\n\t\t\t\thandleMouseMoveRotate( event );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase STATE.DOLLY:\r\n\r\n\t\t\t\tif ( scope.enableZoom === false ) return;\r\n\r\n\t\t\t\thandleMouseMoveDolly( event );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase STATE.PAN:\r\n\r\n\t\t\t\tif ( scope.enablePan === false ) return;\r\n\r\n\t\t\t\thandleMouseMovePan( event );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction onMouseUp( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\thandleMouseUp( event );\r\n\r\n\t\tdocument.removeEventListener( 'mousemove', onMouseMove, false );\r\n\t\tdocument.removeEventListener( 'mouseup', onMouseUp, false );\r\n\r\n\t\tscope.dispatchEvent( endEvent );\r\n\r\n\t\tstate = STATE.NONE;\r\n\r\n\t}\r\n\r\n\tfunction onMouseWheel( event ) {\r\n\r\n\t\tif ( scope.enabled === false || scope.enableZoom === false || ( state !== STATE.NONE && state !== STATE.ROTATE ) ) return;\r\n\r\n\t\tevent.preventDefault();\r\n\t\tevent.stopPropagation();\r\n\r\n\t\thandleMouseWheel( event );\r\n\r\n\t\tscope.dispatchEvent( startEvent ); // not sure why these are here...\r\n\t\tscope.dispatchEvent( endEvent );\r\n\r\n\t}\r\n\r\n\tfunction onKeyDown( event ) {\r\n\r\n\t\tif ( scope.enabled === false || scope.enableKeys === false || scope.enablePan === false ) return;\r\n\r\n\t\thandleKeyDown( event );\r\n\r\n\t}\r\n\r\n\tfunction onTouchStart( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\tswitch ( event.touches.length ) {\r\n\r\n\t\t\tcase 1:\t// one-fingered touch: rotate\r\n\r\n\t\t\t\tif ( scope.enableRotate === false ) return;\r\n\r\n\t\t\t\thandleTouchStartRotate( event );\r\n\r\n\t\t\t\tstate = STATE.TOUCH_ROTATE;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 2:\t// two-fingered touch: dolly\r\n\r\n\t\t\t\tif ( scope.enableZoom === false ) return;\r\n\r\n\t\t\t\thandleTouchStartDolly( event );\r\n\r\n\t\t\t\tstate = STATE.TOUCH_DOLLY;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 3: // three-fingered touch: pan\r\n\r\n\t\t\t\tif ( scope.enablePan === false ) return;\r\n\r\n\t\t\t\thandleTouchStartPan( event );\r\n\r\n\t\t\t\tstate = STATE.TOUCH_PAN;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\r\n\t\t\t\tstate = STATE.NONE;\r\n\r\n\t\t}\r\n\r\n\t\tif ( state !== STATE.NONE ) {\r\n\r\n\t\t\tscope.dispatchEvent( startEvent );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction onTouchMove( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\tevent.preventDefault();\r\n\t\tevent.stopPropagation();\r\n\r\n\t\tswitch ( event.touches.length ) {\r\n\r\n\t\t\tcase 1: // one-fingered touch: rotate\r\n\r\n\t\t\t\tif ( scope.enableRotate === false ) return;\r\n\t\t\t\tif ( state !== STATE.TOUCH_ROTATE ) return; // is this needed?...\r\n\r\n\t\t\t\thandleTouchMoveRotate( event );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 2: // two-fingered touch: dolly\r\n\r\n\t\t\t\tif ( scope.enableZoom === false ) return;\r\n\t\t\t\tif ( state !== STATE.TOUCH_DOLLY ) return; // is this needed?...\r\n\r\n\t\t\t\thandleTouchMoveDolly( event );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 3: // three-fingered touch: pan\r\n\r\n\t\t\t\tif ( scope.enablePan === false ) return;\r\n\t\t\t\tif ( state !== STATE.TOUCH_PAN ) return; // is this needed?...\r\n\r\n\t\t\t\thandleTouchMovePan( event );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\r\n\t\t\t\tstate = STATE.NONE;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction onTouchEnd( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\thandleTouchEnd( event );\r\n\r\n\t\tscope.dispatchEvent( endEvent );\r\n\r\n\t\tstate = STATE.NONE;\r\n\r\n\t}\r\n\r\n\tfunction onContextMenu( event ) {\r\n\r\n\t\tevent.preventDefault();\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tscope.domElement.addEventListener( 'contextmenu', onContextMenu, false );\r\n\r\n\tscope.domElement.addEventListener( 'mousedown', onMouseDown, false );\r\n\tscope.domElement.addEventListener( 'wheel', onMouseWheel, false );\r\n\r\n\tscope.domElement.addEventListener( 'touchstart', onTouchStart, false );\r\n\tscope.domElement.addEventListener( 'touchend', onTouchEnd, false );\r\n\tscope.domElement.addEventListener( 'touchmove', onTouchMove, false );\r\n\r\n\twindow.addEventListener( 'keydown', onKeyDown, false );\r\n\r\n\t// force an update at start\r\n\r\n\tthis.update();\r\n\r\n};\r\n\r\nOrbitControls.prototype = Object.create( THREE.EventDispatcher.prototype );\r\nOrbitControls.prototype.constructor = OrbitControls;\r\n\r\nexport { OrbitControls };\n\n\n// WEBPACK FOOTER //\n// ./src/controls/OrbitControls.js","import * as THREE from 'three';\r\n\r\n/**\r\n* @author Tim Knip / http://www.floorplanner.com/ / tim at floorplanner.com\r\n* @author Tony Parisi / http://www.tonyparisi.com/\r\n*/\r\n\r\nconst ColladaLoader = function () {\r\n\r\n\tvar COLLADA = null;\r\n\tvar scene = null;\r\n\tvar visualScene;\r\n\tvar kinematicsModel;\r\n\r\n\tvar readyCallbackFunc = null;\r\n\r\n\tvar sources = {};\r\n\tvar images = {};\r\n\tvar animations = {};\r\n\tvar controllers = {};\r\n\tvar geometries = {};\r\n\tvar materials = {};\r\n\tvar effects = {};\r\n\tvar cameras = {};\r\n\tvar lights = {};\r\n\r\n\tvar animData;\r\n\tvar kinematics;\r\n\tvar visualScenes;\r\n\tvar kinematicsModels;\r\n\tvar baseUrl;\r\n\tvar morphs;\r\n\tvar skins;\r\n\r\n\tvar flip_uv = true;\r\n\tvar preferredShading = THREE.SmoothShading;\r\n\r\n\tvar options = {\r\n\t\t// Force Geometry to always be centered at the local origin of the\r\n\t\t// containing Mesh.\r\n\t\tcenterGeometry: false,\r\n\r\n\t\t// Axis conversion is done for geometries, animations, and controllers.\r\n\t\t// If we ever pull cameras or lights out of the COLLADA file, they'll\r\n\t\t// need extra work.\r\n\t\tconvertUpAxis: false,\r\n\r\n\t\tsubdivideFaces: true,\r\n\r\n\t\tupAxis: 'Y',\r\n\r\n\t\t// For reflective or refractive materials we'll use this cubemap\r\n\t\tdefaultEnvMap: null\r\n\r\n\t};\r\n\r\n\tvar colladaUnit = 1.0;\r\n\tvar colladaUp = 'Y';\r\n\tvar upConversion = null;\r\n\r\n\tfunction load ( url, readyCallback, progressCallback, failCallback ) {\r\n\r\n\t\tvar length = 0;\r\n\r\n\t\tif ( document.implementation && document.implementation.createDocument ) {\r\n\r\n\t\t\tvar request = new XMLHttpRequest();\r\n\r\n\t\t\trequest.onreadystatechange = function() {\r\n\r\n\t\t\t\tif ( request.readyState === 4 ) {\r\n\r\n\t\t\t\t\tif ( request.status === 0 || request.status === 200 ) {\r\n\r\n\t\t\t\t\t\tif ( request.response ) {\r\n\r\n\t\t\t\t\t\t\treadyCallbackFunc = readyCallback;\r\n\t\t\t\t\t\t\tparse( request.response, undefined, url );\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\tif ( failCallback ) {\r\n\r\n\t\t\t\t\t\t\t\tfailCallback( { type: 'error', url: url } );\r\n\r\n\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\tconsole.error( \"ColladaLoader: Empty or non-existing file (\" + url + \")\" );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}else{\r\n\r\n\t\t\t\t\t\tif( failCallback ){\r\n\r\n\t\t\t\t\t\t\tfailCallback( { type: 'error', url: url } );\r\n\r\n\t\t\t\t\t\t}else{\r\n\r\n\t\t\t\t\t\t\tconsole.error( 'ColladaLoader: Couldn\\'t load \"' + url + '\" (' + request.status + ')' );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else if ( request.readyState === 3 ) {\r\n\r\n\t\t\t\t\tif ( progressCallback ) {\r\n\r\n\t\t\t\t\t\tif ( length === 0 ) {\r\n\r\n\t\t\t\t\t\t\tlength = request.getResponseHeader( \"Content-Length\" );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tprogressCallback( { total: length, loaded: request.responseText.length } );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t};\r\n\r\n\t\t\trequest.open( \"GET\", url, true );\r\n\t\t\trequest.send( null );\r\n\r\n\t\t} else {\r\n\r\n\t\t\talert( \"Don't know how to parse XML!\" );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction parse( text, callBack, url ) {\r\n\r\n\t\tCOLLADA = new DOMParser().parseFromString( text, 'text/xml' );\r\n\t\tcallBack = callBack || readyCallbackFunc;\r\n\r\n\t\tif ( url !== undefined ) {\r\n\r\n\t\t\tvar parts = url.split( '/' );\r\n\t\t\tparts.pop();\r\n\t\t\tbaseUrl = ( parts.length < 1 ? '.' : parts.join( '/' ) ) + '/';\r\n\r\n\t\t}\r\n\r\n\t\tparseAsset();\r\n\t\tsetUpConversion();\r\n\t\timages = parseLib( \"library_images image\", _Image, \"image\" );\r\n\t\tmaterials = parseLib( \"library_materials material\", Material, \"material\" );\r\n\t\teffects = parseLib( \"library_effects effect\", Effect, \"effect\" );\r\n\t\tgeometries = parseLib( \"library_geometries geometry\", Geometry, \"geometry\" );\r\n\t\tcameras = parseLib( \"library_cameras camera\", Camera, \"camera\" );\r\n\t\tlights = parseLib( \"library_lights light\", Light, \"light\" );\r\n\t\tcontrollers = parseLib( \"library_controllers controller\", Controller, \"controller\" );\r\n\t\tanimations = parseLib( \"library_animations animation\", Animation, \"animation\" );\r\n\t\tvisualScenes = parseLib( \"library_visual_scenes visual_scene\", VisualScene, \"visual_scene\" );\r\n\t\tkinematicsModels = parseLib( \"library_kinematics_models kinematics_model\", KinematicsModel, \"kinematics_model\" );\r\n\r\n\t\tmorphs = [];\r\n\t\tskins = [];\r\n\r\n\t\tvisualScene = parseScene();\r\n\t\tscene = new THREE.Group();\r\n\r\n\t\tfor ( var i = 0; i < visualScene.nodes.length; i ++ ) {\r\n\r\n\t\t\tscene.add( createSceneGraph( visualScene.nodes[ i ] ) );\r\n\r\n\t\t}\r\n\r\n\t\t// unit conversion\r\n\t\tscene.scale.multiplyScalar( colladaUnit );\r\n\r\n\t\tcreateAnimations();\r\n\r\n\t\tkinematicsModel = parseKinematicsModel();\r\n\t\tcreateKinematics();\r\n\r\n\t\tvar result = {\r\n\r\n\t\t\tscene: scene,\r\n\t\t\tmorphs: morphs,\r\n\t\t\tskins: skins,\r\n\t\t\tanimations: animData,\r\n\t\t\tkinematics: kinematics,\r\n\t\t\tdae: {\r\n\t\t\t\timages: images,\r\n\t\t\t\tmaterials: materials,\r\n\t\t\t\tcameras: cameras,\r\n\t\t\t\tlights: lights,\r\n\t\t\t\teffects: effects,\r\n\t\t\t\tgeometries: geometries,\r\n\t\t\t\tcontrollers: controllers,\r\n\t\t\t\tanimations: animations,\r\n\t\t\t\tvisualScenes: visualScenes,\r\n\t\t\t\tvisualScene: visualScene,\r\n\t\t\t\tscene: visualScene,\r\n\t\t\t\tkinematicsModels: kinematicsModels,\r\n\t\t\t\tkinematicsModel: kinematicsModel\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t\tif ( callBack ) {\r\n\r\n\t\t\tcallBack( result );\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t}\r\n\r\n\tfunction setPreferredShading ( shading ) {\r\n\r\n\t\tpreferredShading = shading;\r\n\r\n\t}\r\n\r\n\tfunction parseAsset () {\r\n\r\n\t\tvar elements = COLLADA.querySelectorAll('asset');\r\n\r\n\t\tvar element = elements[0];\r\n\r\n\t\tif ( element && element.childNodes ) {\r\n\r\n\t\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\t\tvar child = element.childNodes[ i ];\r\n\r\n\t\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\t\tcase 'unit':\r\n\r\n\t\t\t\t\t\tvar meter = child.getAttribute( 'meter' );\r\n\r\n\t\t\t\t\t\tif ( meter ) {\r\n\r\n\t\t\t\t\t\t\tcolladaUnit = parseFloat( meter );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'up_axis':\r\n\r\n\t\t\t\t\t\tcolladaUp = child.textContent.charAt(0);\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction parseLib ( q, classSpec, prefix ) {\r\n\r\n\t\tvar elements = COLLADA.querySelectorAll(q);\r\n\r\n\t\tvar lib = {};\r\n\r\n\t\tvar i = 0;\r\n\r\n\t\tvar elementsLength = elements.length;\r\n\r\n\t\tfor ( var j = 0; j < elementsLength; j ++ ) {\r\n\r\n\t\t\tvar element = elements[j];\r\n\t\t\tvar daeElement = ( new classSpec() ).parse( element );\r\n\r\n\t\t\tif ( !daeElement.id || daeElement.id.length === 0 ) daeElement.id = prefix + ( i ++ );\r\n\t\t\tlib[ daeElement.id ] = daeElement;\r\n\r\n\t\t}\r\n\r\n\t\treturn lib;\r\n\r\n\t}\r\n\r\n\tfunction parseScene() {\r\n\r\n\t\tvar sceneElement = COLLADA.querySelectorAll('scene instance_visual_scene')[0];\r\n\r\n\t\tif ( sceneElement ) {\r\n\r\n\t\t\tvar url = sceneElement.getAttribute( 'url' ).replace( /^#/, '' );\r\n\t\t\treturn visualScenes[ url.length > 0 ? url : 'visual_scene0' ];\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction parseKinematicsModel() {\r\n\r\n\t\tvar kinematicsModelElement = COLLADA.querySelectorAll('instance_kinematics_model')[0];\r\n\r\n\t\tif ( kinematicsModelElement ) {\r\n\r\n\t\t\tvar url = kinematicsModelElement.getAttribute( 'url' ).replace(/^#/, '');\r\n\t\t\treturn kinematicsModels[ url.length > 0 ? url : 'kinematics_model0' ];\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction createAnimations() {\r\n\r\n\t\tanimData = [];\r\n\r\n\t\t// fill in the keys\r\n\t\trecurseHierarchy( scene );\r\n\r\n\t}\r\n\r\n\tfunction recurseHierarchy( node ) {\r\n\r\n\t\tvar n = visualScene.getChildById( node.colladaId, true ),\r\n\t\t\tnewData = null;\r\n\r\n\t\tif ( n && n.keys ) {\r\n\r\n\t\t\tnewData = {\r\n\t\t\t\tfps: 60,\r\n\t\t\t\thierarchy: [ {\r\n\t\t\t\t\tnode: n,\r\n\t\t\t\t\tkeys: n.keys,\r\n\t\t\t\t\tsids: n.sids\r\n\t\t\t\t} ],\r\n\t\t\t\tnode: node,\r\n\t\t\t\tname: 'animation_' + node.name,\r\n\t\t\t\tlength: 0\r\n\t\t\t};\r\n\r\n\t\t\tanimData.push(newData);\r\n\r\n\t\t\tfor ( var i = 0, il = n.keys.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tnewData.length = Math.max( newData.length, n.keys[i].time );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tnewData = {\r\n\t\t\t\thierarchy: [ {\r\n\t\t\t\t\tkeys: [],\r\n\t\t\t\t\tsids: []\r\n\t\t\t\t} ]\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var i = 0, il = node.children.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar d = recurseHierarchy( node.children[i] );\r\n\r\n\t\t\tfor ( var j = 0, jl = d.hierarchy.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tnewData.hierarchy.push( {\r\n\t\t\t\t\tkeys: [],\r\n\t\t\t\t\tsids: []\r\n\t\t\t\t} );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn newData;\r\n\r\n\t}\r\n\r\n\tfunction calcAnimationBounds () {\r\n\r\n\t\tvar start = 1000000;\r\n\t\tvar end = -start;\r\n\t\tvar frames = 0;\r\n\t\tvar ID;\r\n\t\tfor ( var id in animations ) {\r\n\r\n\t\t\tvar animation = animations[ id ];\r\n\t\t\tID = ID || animation.id;\r\n\t\t\tfor ( var i = 0; i < animation.sampler.length; i ++ ) {\r\n\r\n\t\t\t\tvar sampler = animation.sampler[ i ];\r\n\r\n\t\t\t\tsampler.create();\r\n\r\n\t\t\t\tstart = Math.min( start, sampler.startTime );\r\n\t\t\t\tend = Math.max( end, sampler.endTime );\r\n\t\t\t\tframes = Math.max( frames, sampler.input.length );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn { start:start, end:end, frames:frames,ID:ID };\r\n\r\n\t}\r\n\r\n\tfunction createMorph ( geometry, ctrl ) {\r\n\r\n\t\tvar morphCtrl = ctrl instanceof InstanceController ? controllers[ ctrl.url ] : ctrl;\r\n\r\n\t\tif ( !morphCtrl || !morphCtrl.morph ) {\r\n\r\n\t\t\tconsole.log(\"could not find morph controller!\");\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tvar morph = morphCtrl.morph;\r\n\r\n\t\tfor ( var i = 0; i < morph.targets.length; i ++ ) {\r\n\r\n\t\t\tvar target_id = morph.targets[ i ];\r\n\t\t\tvar daeGeometry = geometries[ target_id ];\r\n\r\n\t\t\tif ( !daeGeometry.mesh ||\r\n\t\t\t\t !daeGeometry.mesh.primitives ||\r\n\t\t\t\t !daeGeometry.mesh.primitives.length ) {\r\n\t\t\t\t continue;\r\n\t\t\t}\r\n\r\n\t\t\tvar target = daeGeometry.mesh.primitives[ 0 ].geometry;\r\n\r\n\t\t\tif ( target.vertices.length === geometry.vertices.length ) {\r\n\r\n\t\t\t\tgeometry.morphTargets.push( { name: \"target_1\", vertices: target.vertices } );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tgeometry.morphTargets.push( { name: \"target_Z\", vertices: geometry.vertices } );\r\n\r\n\t}\r\n\r\n\tfunction createSkin ( geometry, ctrl, applyBindShape ) {\r\n\r\n\t\tvar skinCtrl = controllers[ ctrl.url ];\r\n\r\n\t\tif ( !skinCtrl || !skinCtrl.skin ) {\r\n\r\n\t\t\tconsole.log( \"could not find skin controller!\" );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tif ( !ctrl.skeleton || !ctrl.skeleton.length ) {\r\n\r\n\t\t\tconsole.log( \"could not find the skeleton for the skin!\" );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tvar skin = skinCtrl.skin;\r\n\t\tvar skeleton = visualScene.getChildById( ctrl.skeleton[ 0 ] );\r\n\t\tvar hierarchy = [];\r\n\r\n\t\tapplyBindShape = applyBindShape !== undefined ? applyBindShape : true;\r\n\r\n\t\tvar bones = [];\r\n\t\tgeometry.skinWeights = [];\r\n\t\tgeometry.skinIndices = [];\r\n\r\n\t\t//createBones( geometry.bones, skin, hierarchy, skeleton, null, -1 );\r\n\t\t//createWeights( skin, geometry.bones, geometry.skinIndices, geometry.skinWeights );\r\n\r\n\t\t/*\r\n\t\tgeometry.animation = {\r\n\t\t\tname: 'take_001',\r\n\t\t\tfps: 30,\r\n\t\t\tlength: 2,\r\n\t\t\tJIT: true,\r\n\t\t\thierarchy: hierarchy\r\n\t\t};\r\n\t\t*/\r\n\r\n\t\tif ( applyBindShape ) {\r\n\r\n\t\t\tfor ( var i = 0; i < geometry.vertices.length; i ++ ) {\r\n\r\n\t\t\t\tgeometry.vertices[ i ].applyMatrix4( skin.bindShapeMatrix );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction setupSkeleton ( node, bones, frame, parent ) {\r\n\r\n\t\tnode.world = node.world || new THREE.Matrix4();\r\n\t\tnode.localworld = node.localworld || new THREE.Matrix4();\r\n\t\tnode.world.copy( node.matrix );\r\n\t\tnode.localworld.copy( node.matrix );\r\n\r\n\t\tif ( node.channels && node.channels.length ) {\r\n\r\n\t\t\tvar channel = node.channels[ 0 ];\r\n\t\t\tvar m = channel.sampler.output[ frame ];\r\n\r\n\t\t\tif ( m instanceof THREE.Matrix4 ) {\r\n\r\n\t\t\t\tnode.world.copy( m );\r\n\t\t\t\tnode.localworld.copy(m);\r\n\t\t\t\tif (frame === 0)\r\n\t\t\t\t\tnode.matrix.copy(m);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( parent ) {\r\n\r\n\t\t\tnode.world.multiplyMatrices( parent, node.world );\r\n\r\n\t\t}\r\n\r\n\t\tbones.push( node );\r\n\r\n\t\tfor ( var i = 0; i < node.nodes.length; i ++ ) {\r\n\r\n\t\t\tsetupSkeleton( node.nodes[ i ], bones, frame, node.world );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction setupSkinningMatrices ( bones, skin ) {\r\n\r\n\t\t// FIXME: this is dumb...\r\n\r\n\t\tfor ( var i = 0; i < bones.length; i ++ ) {\r\n\r\n\t\t\tvar bone = bones[ i ];\r\n\t\t\tvar found = -1;\r\n\r\n\t\t\tif ( bone.type != 'JOINT' ) continue;\r\n\r\n\t\t\tfor ( var j = 0; j < skin.joints.length; j ++ ) {\r\n\r\n\t\t\t\tif ( bone.sid === skin.joints[ j ] ) {\r\n\r\n\t\t\t\t\tfound = j;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( found >= 0 ) {\r\n\r\n\t\t\t\tvar inv = skin.invBindMatrices[ found ];\r\n\r\n\t\t\t\tbone.invBindMatrix = inv;\r\n\t\t\t\tbone.skinningMatrix = new THREE.Matrix4();\r\n\t\t\t\tbone.skinningMatrix.multiplyMatrices(bone.world, inv); // (IBMi * JMi)\r\n\t\t\t\tbone.animatrix = new THREE.Matrix4();\r\n\r\n\t\t\t\tbone.animatrix.copy(bone.localworld);\r\n\t\t\t\tbone.weights = [];\r\n\r\n\t\t\t\tfor ( var j = 0; j < skin.weights.length; j ++ ) {\r\n\r\n\t\t\t\t\tfor (var k = 0; k < skin.weights[ j ].length; k ++ ) {\r\n\r\n\t\t\t\t\t\tvar w = skin.weights[ j ][ k ];\r\n\r\n\t\t\t\t\t\tif ( w.joint === found ) {\r\n\r\n\t\t\t\t\t\t\tbone.weights.push( w );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconsole.warn( \"ColladaLoader: Could not find joint '\" + bone.sid + \"'.\" );\r\n\r\n\t\t\t\tbone.skinningMatrix = new THREE.Matrix4();\r\n\t\t\t\tbone.weights = [];\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t//Walk the Collada tree and flatten the bones into a list, extract the position, quat and scale from the matrix\r\n\tfunction flattenSkeleton(skeleton) {\r\n\r\n\t\tvar list = [];\r\n\t\tvar walk = function(parentid, node, list) {\r\n\r\n\t\t\tvar bone = {};\r\n\t\t\tbone.name = node.sid;\r\n\t\t\tbone.parent = parentid;\r\n\t\t\tbone.matrix = node.matrix;\r\n\t\t\tvar data = [ new THREE.Vector3(),new THREE.Quaternion(),new THREE.Vector3() ];\r\n\t\t\tbone.matrix.decompose(data[0], data[1], data[2]);\r\n\r\n\t\t\tbone.pos = [ data[0].x,data[0].y,data[0].z ];\r\n\r\n\t\t\tbone.scl = [ data[2].x,data[2].y,data[2].z ];\r\n\t\t\tbone.rotq = [ data[1].x,data[1].y,data[1].z,data[1].w ];\r\n\t\t\tlist.push(bone);\r\n\r\n\t\t\tfor (var i in node.nodes) {\r\n\r\n\t\t\t\twalk(node.sid, node.nodes[i], list);\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t\twalk(-1, skeleton, list);\r\n\t\treturn list;\r\n\r\n\t}\r\n\r\n\t//Move the vertices into the pose that is proper for the start of the animation\r\n\tfunction skinToBindPose(geometry,skeleton,skinController) {\r\n\r\n\t\tvar bones = [];\r\n\t\tsetupSkeleton( skeleton, bones, -1 );\r\n\t\tsetupSkinningMatrices( bones, skinController.skin );\r\n\t\tvar v = new THREE.Vector3();\r\n\t\tvar skinned = [];\r\n\r\n\t\tfor (var i = 0; i < geometry.vertices.length; i ++) {\r\n\r\n\t\t\tskinned.push(new THREE.Vector3());\r\n\r\n\t\t}\r\n\r\n\t\tfor ( i = 0; i < bones.length; i ++ ) {\r\n\r\n\t\t\tif ( bones[ i ].type != 'JOINT' ) continue;\r\n\r\n\t\t\tfor ( var j = 0; j < bones[ i ].weights.length; j ++ ) {\r\n\r\n\t\t\t\tvar w = bones[ i ].weights[ j ];\r\n\t\t\t\tvar vidx = w.index;\r\n\t\t\t\tvar weight = w.weight;\r\n\r\n\t\t\t\tvar o = geometry.vertices[vidx];\r\n\t\t\t\tvar s = skinned[vidx];\r\n\r\n\t\t\t\tv.x = o.x;\r\n\t\t\t\tv.y = o.y;\r\n\t\t\t\tv.z = o.z;\r\n\r\n\t\t\t\tv.applyMatrix4( bones[i].skinningMatrix );\r\n\r\n\t\t\t\ts.x += (v.x * weight);\r\n\t\t\t\ts.y += (v.y * weight);\r\n\t\t\t\ts.z += (v.z * weight);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfor (var i = 0; i < geometry.vertices.length; i ++) {\r\n\r\n\t\t\tgeometry.vertices[i] = skinned[i];\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction applySkin( geometry, instanceCtrl, frame ) {\r\n\r\n\t\tif ( frame === undefined ) frame = 40;\r\n\r\n\t\tvar skinController = controllers[ instanceCtrl.url ];\r\n\r\n\t\tif ( !skinController || !skinController.skin ) {\r\n\r\n\t\t\tconsole.log( 'ColladaLoader: Could not find skin controller.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tif ( !instanceCtrl.skeleton || !instanceCtrl.skeleton.length ) {\r\n\r\n\t\t\tconsole.log( 'ColladaLoader: Could not find the skeleton for the skin. ' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tvar animationBounds = calcAnimationBounds();\r\n\t\tvar skeleton = visualScene.getChildById( instanceCtrl.skeleton[0], true ) || visualScene.getChildBySid( instanceCtrl.skeleton[0], true );\r\n\r\n\t\t//flatten the skeleton into a list of bones\r\n\t\tvar bonelist = flattenSkeleton(skeleton);\r\n\t\tvar joints = skinController.skin.joints;\r\n\r\n\t\t//sort that list so that the order reflects the order in the joint list\r\n\t\tvar sortedbones = [];\r\n\t\tfor (var i = 0; i < joints.length; i ++) {\r\n\r\n\t\t\tfor (var j = 0; j < bonelist.length; j ++) {\r\n\r\n\t\t\t\tif (bonelist[j].name === joints[i]) {\r\n\r\n\t\t\t\t\tsortedbones[i] = bonelist[j];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t//hook up the parents by index instead of name\r\n\t\tfor (var i = 0; i < sortedbones.length; i ++) {\r\n\r\n\t\t\tfor (var j = 0; j < sortedbones.length; j ++) {\r\n\r\n\t\t\t\tif (sortedbones[i].parent === sortedbones[j].name) {\r\n\r\n\t\t\t\t\tsortedbones[i].parent = j;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\r\n\t\tvar i, j, w, vidx, weight;\r\n\t\tvar v = new THREE.Vector3(), o, s;\r\n\r\n\t\t// move vertices to bind shape\r\n\t\tfor ( i = 0; i < geometry.vertices.length; i ++ ) {\r\n\t\t\tgeometry.vertices[i].applyMatrix4( skinController.skin.bindShapeMatrix );\r\n\t\t}\r\n\r\n\t\tvar skinIndices = [];\r\n\t\tvar skinWeights = [];\r\n\t\tvar weights = skinController.skin.weights;\r\n\r\n\t\t// hook up the skin weights\r\n\t\t// TODO - this might be a good place to choose greatest 4 weights\r\n\t\tfor ( var i =0; i < weights.length; i ++ ) {\r\n\r\n\t\t\tvar indicies = new THREE.Vector4(weights[i][0] ? weights[i][0].joint : 0,weights[i][1] ? weights[i][1].joint : 0,weights[i][2] ? weights[i][2].joint : 0,weights[i][3] ? weights[i][3].joint : 0);\r\n\t\t\tvar weight = new THREE.Vector4(weights[i][0] ? weights[i][0].weight : 0,weights[i][1] ? weights[i][1].weight : 0,weights[i][2] ? weights[i][2].weight : 0,weights[i][3] ? weights[i][3].weight : 0);\r\n\r\n\t\t\tskinIndices.push(indicies);\r\n\t\t\tskinWeights.push(weight);\r\n\r\n\t\t}\r\n\r\n\t\tgeometry.skinIndices = skinIndices;\r\n\t\tgeometry.skinWeights = skinWeights;\r\n\t\tgeometry.bones = sortedbones;\r\n\t\t// process animation, or simply pose the rig if no animation\r\n\r\n\t\t//create an animation for the animated bones\r\n\t\t//NOTE: this has no effect when using morphtargets\r\n\t\tvar animationdata = { \"name\":animationBounds.ID,\"fps\":30,\"length\":animationBounds.frames / 30,\"hierarchy\":[] };\r\n\r\n\t\tfor (var j = 0; j < sortedbones.length; j ++) {\r\n\r\n\t\t\tanimationdata.hierarchy.push({ parent:sortedbones[j].parent, name:sortedbones[j].name, keys:[] });\r\n\r\n\t\t}\r\n\r\n\t\tconsole.log( 'ColladaLoader:', animationBounds.ID + ' has ' + sortedbones.length + ' bones.' );\r\n\r\n\r\n\r\n\t\tskinToBindPose(geometry, skeleton, skinController);\r\n\r\n\r\n\t\tfor ( frame = 0; frame < animationBounds.frames; frame ++ ) {\r\n\r\n\t\t\tvar bones = [];\r\n\t\t\tvar skinned = [];\r\n\t\t\t// process the frame and setup the rig with a fresh\r\n\t\t\t// transform, possibly from the bone's animation channel(s)\r\n\r\n\t\t\tsetupSkeleton( skeleton, bones, frame );\r\n\t\t\tsetupSkinningMatrices( bones, skinController.skin );\r\n\r\n\t\t\tfor (var i = 0; i < bones.length; i ++) {\r\n\r\n\t\t\t\tfor (var j = 0; j < animationdata.hierarchy.length; j ++) {\r\n\r\n\t\t\t\t\tif (animationdata.hierarchy[j].name === bones[i].sid) {\r\n\r\n\t\t\t\t\t\tvar key = {};\r\n\t\t\t\t\t\tkey.time = (frame / 30);\r\n\t\t\t\t\t\tkey.matrix = bones[i].animatrix;\r\n\r\n\t\t\t\t\t\tif (frame === 0)\r\n\t\t\t\t\t\t\tbones[i].matrix = key.matrix;\r\n\r\n\t\t\t\t\t\tvar data = [ new THREE.Vector3(),new THREE.Quaternion(),new THREE.Vector3() ];\r\n\t\t\t\t\t\tkey.matrix.decompose(data[0], data[1], data[2]);\r\n\r\n\t\t\t\t\t\tkey.pos = [ data[0].x,data[0].y,data[0].z ];\r\n\r\n\t\t\t\t\t\tkey.scl = [ data[2].x,data[2].y,data[2].z ];\r\n\t\t\t\t\t\tkey.rot = data[1];\r\n\r\n\t\t\t\t\t\tanimationdata.hierarchy[j].keys.push(key);\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.animation = animationdata;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction createKinematics() {\r\n\r\n\t\tif ( kinematicsModel && kinematicsModel.joints.length === 0 ) {\r\n\t\t\tkinematics = undefined;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar jointMap = {};\r\n\r\n\t\tvar _addToMap = function( jointIndex, parentVisualElement ) {\r\n\r\n\t\t\tvar parentVisualElementId = parentVisualElement.getAttribute( 'id' );\r\n\t\t\tvar colladaNode = visualScene.getChildById( parentVisualElementId, true );\r\n\t\t\tvar joint = kinematicsModel.joints[ jointIndex ];\r\n\r\n\t\t\tscene.traverse(function( node ) {\r\n\r\n\t\t\t\tif ( node.colladaId == parentVisualElementId ) {\r\n\r\n\t\t\t\t\tjointMap[ jointIndex ] = {\r\n\t\t\t\t\t\tnode: node,\r\n\t\t\t\t\t\ttransforms: colladaNode.transforms,\r\n\t\t\t\t\t\tjoint: joint,\r\n\t\t\t\t\t\tposition: joint.zeroPosition\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\r\n\t\t};\r\n\r\n\t\tkinematics = {\r\n\r\n\t\t\tjoints: kinematicsModel && kinematicsModel.joints,\r\n\r\n\t\t\tgetJointValue: function( jointIndex ) {\r\n\r\n\t\t\t\tvar jointData = jointMap[ jointIndex ];\r\n\r\n\t\t\t\tif ( jointData ) {\r\n\r\n\t\t\t\t\treturn jointData.position;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconsole.log( 'getJointValue: joint ' + jointIndex + ' doesn\\'t exist' );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\tsetJointValue: function( jointIndex, value ) {\r\n\r\n\t\t\t\tvar jointData = jointMap[ jointIndex ];\r\n\r\n\t\t\t\tif ( jointData ) {\r\n\r\n\t\t\t\t\tvar joint = jointData.joint;\r\n\r\n\t\t\t\t\tif ( value > joint.limits.max || value < joint.limits.min ) {\r\n\r\n\t\t\t\t\t\tconsole.log( 'setJointValue: joint ' + jointIndex + ' value ' + value + ' outside of limits (min: ' + joint.limits.min + ', max: ' + joint.limits.max + ')' );\r\n\r\n\t\t\t\t\t} else if ( joint.static ) {\r\n\r\n\t\t\t\t\t\tconsole.log( 'setJointValue: joint ' + jointIndex + ' is static' );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tvar threejsNode = jointData.node;\r\n\t\t\t\t\t\tvar axis = joint.axis;\r\n\t\t\t\t\t\tvar transforms = jointData.transforms;\r\n\r\n\t\t\t\t\t\tvar matrix = new THREE.Matrix4();\r\n\t\t\t\t\t\tvar m1 = new THREE.Matrix4();\r\n\r\n\t\t\t\t\t\tfor (i = 0; i < transforms.length; i ++ ) {\r\n\r\n\t\t\t\t\t\t\tvar transform = transforms[ i ];\r\n\r\n\t\t\t\t\t\t\t// kinda ghetto joint detection\r\n\r\n\t\t\t\t\t\t\tif ( transform.sid && transform.sid.indexOf( 'joint' + jointIndex ) !== -1 ) {\r\n\r\n\t\t\t\t\t\t\t\t// apply actual joint value here\r\n\t\t\t\t\t\t\t\tswitch ( joint.type ) {\r\n\r\n\t\t\t\t\t\t\t\t\tcase 'revolute':\r\n\r\n\t\t\t\t\t\t\t\t\t\tmatrix.multiply( m1.makeRotationAxis( axis, THREE.Math.degToRad(value) ) );\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\t\t\tcase 'prismatic':\r\n\r\n\t\t\t\t\t\t\t\t\t\tmatrix.multiply( m1.makeTranslation(axis.x * value, axis.y * value, axis.z * value ) );\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\t\t\tdefault:\r\n\r\n\t\t\t\t\t\t\t\t\t\tconsole.warn( 'setJointValue: unknown joint type: ' + joint.type );\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\tswitch ( transform.type ) {\r\n\r\n\t\t\t\t\t\t\t\t\tcase 'matrix':\r\n\r\n\t\t\t\t\t\t\t\t\t\tmatrix.multiply( transform.obj );\r\n\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\t\t\tcase 'translate':\r\n\r\n\t\t\t\t\t\t\t\t\t\tmatrix.multiply( m1.makeTranslation( transform.obj.x, transform.obj.y, transform.obj.z ) );\r\n\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\t\t\tcase 'rotate':\r\n\r\n\t\t\t\t\t\t\t\t\t\tmatrix.multiply( m1.makeRotationAxis( transform.obj, transform.angle ) );\r\n\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// apply the matrix to the threejs node\r\n\t\t\t\t\t\tvar elementsFloat32Arr = matrix.elements;\r\n\t\t\t\t\t\tvar elements = Array.prototype.slice.call( elementsFloat32Arr );\r\n\r\n\t\t\t\t\t\tvar elementsRowMajor = [\r\n\t\t\t\t\t\t\telements[ 0 ],\r\n\t\t\t\t\t\t\telements[ 4 ],\r\n\t\t\t\t\t\t\telements[ 8 ],\r\n\t\t\t\t\t\t\telements[ 12 ],\r\n\t\t\t\t\t\t\telements[ 1 ],\r\n\t\t\t\t\t\t\telements[ 5 ],\r\n\t\t\t\t\t\t\telements[ 9 ],\r\n\t\t\t\t\t\t\telements[ 13 ],\r\n\t\t\t\t\t\t\telements[ 2 ],\r\n\t\t\t\t\t\t\telements[ 6 ],\r\n\t\t\t\t\t\t\telements[ 10 ],\r\n\t\t\t\t\t\t\telements[ 14 ],\r\n\t\t\t\t\t\t\telements[ 3 ],\r\n\t\t\t\t\t\t\telements[ 7 ],\r\n\t\t\t\t\t\t\telements[ 11 ],\r\n\t\t\t\t\t\t\telements[ 15 ]\r\n\t\t\t\t\t\t];\r\n\r\n\t\t\t\t\t\tthreejsNode.matrix.set.apply( threejsNode.matrix, elementsRowMajor );\r\n\t\t\t\t\t\tthreejsNode.matrix.decompose( threejsNode.position, threejsNode.quaternion, threejsNode.scale );\r\n\r\n\t\t\t\t\t\tjointMap[ jointIndex ].position = value;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconsole.log( 'setJointValue: joint ' + jointIndex + ' doesn\\'t exist' );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t\tvar element = COLLADA.querySelector('scene instance_kinematics_scene');\r\n\r\n\t\tif ( element ) {\r\n\r\n\t\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\t\tvar child = element.childNodes[ i ];\r\n\r\n\t\t\t\tif ( child.nodeType != 1 ) continue;\r\n\r\n\t\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\t\tcase 'bind_joint_axis':\r\n\r\n\t\t\t\t\t\tvar visualTarget = child.getAttribute( 'target' ).split( '/' ).pop();\r\n\t\t\t\t\t\tvar axis = child.querySelector('axis param').textContent;\r\n\t\t\t\t\t\tvar jointIndex = parseInt( axis.split( 'joint' ).pop().split( '.' )[0] );\r\n\t\t\t\t\t\tvar visualTargetElement = COLLADA.querySelector( '[sid=\"' + visualTarget + '\"]' );\r\n\r\n\t\t\t\t\t\tif ( visualTargetElement ) {\r\n\t\t\t\t\t\t\tvar parentVisualElement = visualTargetElement.parentElement;\r\n\t\t\t\t\t\t\t_addToMap(jointIndex, parentVisualElement);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault:\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction createSceneGraph ( node, parent ) {\r\n\r\n\t\tvar obj = new THREE.Object3D();\r\n\t\tvar skinned = false;\r\n\t\tvar skinController;\r\n\t\tvar morphController;\r\n\t\tvar i, j;\r\n\r\n\t\t// FIXME: controllers\r\n\r\n\t\tfor ( i = 0; i < node.controllers.length; i ++ ) {\r\n\r\n\t\t\tvar controller = controllers[ node.controllers[ i ].url ];\r\n\r\n\t\t\tswitch ( controller.type ) {\r\n\r\n\t\t\t\tcase 'skin':\r\n\r\n\t\t\t\t\tif ( geometries[ controller.skin.source ] ) {\r\n\r\n\t\t\t\t\t\tvar inst_geom = new InstanceGeometry();\r\n\r\n\t\t\t\t\t\tinst_geom.url = controller.skin.source;\r\n\t\t\t\t\t\tinst_geom.instance_material = node.controllers[ i ].instance_material;\r\n\r\n\t\t\t\t\t\tnode.geometries.push( inst_geom );\r\n\t\t\t\t\t\tskinned = true;\r\n\t\t\t\t\t\tskinController = node.controllers[ i ];\r\n\r\n\t\t\t\t\t} else if ( controllers[ controller.skin.source ] ) {\r\n\r\n\t\t\t\t\t\t// urgh: controller can be chained\r\n\t\t\t\t\t\t// handle the most basic case...\r\n\r\n\t\t\t\t\t\tvar second = controllers[ controller.skin.source ];\r\n\t\t\t\t\t\tmorphController = second;\r\n\t\t\t\t\t//\tskinController = node.controllers[i];\r\n\r\n\t\t\t\t\t\tif ( second.morph && geometries[ second.morph.source ] ) {\r\n\r\n\t\t\t\t\t\t\tvar inst_geom = new InstanceGeometry();\r\n\r\n\t\t\t\t\t\t\tinst_geom.url = second.morph.source;\r\n\t\t\t\t\t\t\tinst_geom.instance_material = node.controllers[ i ].instance_material;\r\n\r\n\t\t\t\t\t\t\tnode.geometries.push( inst_geom );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'morph':\r\n\r\n\t\t\t\t\tif ( geometries[ controller.morph.source ] ) {\r\n\r\n\t\t\t\t\t\tvar inst_geom = new InstanceGeometry();\r\n\r\n\t\t\t\t\t\tinst_geom.url = controller.morph.source;\r\n\t\t\t\t\t\tinst_geom.instance_material = node.controllers[ i ].instance_material;\r\n\r\n\t\t\t\t\t\tnode.geometries.push( inst_geom );\r\n\t\t\t\t\t\tmorphController = node.controllers[ i ];\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tconsole.log( 'ColladaLoader: Morph-controller partially supported.' );\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// geometries\r\n\r\n\t\tvar double_sided_materials = {};\r\n\r\n\t\tfor ( i = 0; i < node.geometries.length; i ++ ) {\r\n\r\n\t\t\tvar instance_geometry = node.geometries[i];\r\n\t\t\tvar instance_materials = instance_geometry.instance_material;\r\n\t\t\tvar geometry = geometries[ instance_geometry.url ];\r\n\t\t\tvar used_materials = {};\r\n\t\t\tvar used_materials_array = [];\r\n\t\t\tvar num_materials = 0;\r\n\t\t\tvar first_material;\r\n\r\n\t\t\tif ( geometry ) {\r\n\r\n\t\t\t\tif ( !geometry.mesh || !geometry.mesh.primitives )\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\tif ( obj.name.length === 0 ) {\r\n\r\n\t\t\t\t\tobj.name = geometry.id;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// collect used fx for this geometry-instance\r\n\r\n\t\t\t\tif ( instance_materials ) {\r\n\r\n\t\t\t\t\tfor ( j = 0; j < instance_materials.length; j ++ ) {\r\n\r\n\t\t\t\t\t\tvar instance_material = instance_materials[ j ];\r\n\t\t\t\t\t\tvar mat = materials[ instance_material.target ];\r\n\t\t\t\t\t\tvar effect_id = mat.instance_effect.url;\r\n\t\t\t\t\t\tvar shader = effects[ effect_id ].shader;\r\n\t\t\t\t\t\tvar material3js = shader.material;\r\n\r\n\t\t\t\t\t\tif ( geometry.doubleSided ) {\r\n\r\n\t\t\t\t\t\t\tif ( !( instance_material.symbol in double_sided_materials ) ) {\r\n\r\n\t\t\t\t\t\t\t\tvar _copied_material = material3js.clone();\r\n\t\t\t\t\t\t\t\t_copied_material.side = THREE.DoubleSide;\r\n\t\t\t\t\t\t\t\tdouble_sided_materials[ instance_material.symbol ] = _copied_material;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tmaterial3js = double_sided_materials[ instance_material.symbol ];\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tmaterial3js.opacity = !material3js.opacity ? 1 : material3js.opacity;\r\n\t\t\t\t\t\tused_materials[ instance_material.symbol ] = num_materials;\r\n\t\t\t\t\t\tused_materials_array.push( material3js );\r\n\t\t\t\t\t\tfirst_material = material3js;\r\n\t\t\t\t\t\tfirst_material.name = mat.name === null || mat.name === '' ? mat.id : mat.name;\r\n\t\t\t\t\t\tnum_materials ++;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar mesh;\r\n\t\t\t\tvar material = first_material || new THREE.MeshLambertMaterial( { color: 0xdddddd, side: geometry.doubleSided ? THREE.DoubleSide : THREE.FrontSide } );\r\n\t\t\t\tvar geom = geometry.mesh.geometry3js;\r\n\r\n\t\t\t\tif ( num_materials > 1 ) {\r\n\r\n\t\t\t\t\tmaterial = new THREE.MultiMaterial( used_materials_array );\r\n\r\n\t\t\t\t\tfor ( j = 0; j < geom.faces.length; j ++ ) {\r\n\r\n\t\t\t\t\t\tvar face = geom.faces[ j ];\r\n\t\t\t\t\t\tface.materialIndex = used_materials[ face.daeMaterial ]\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( skinController !== undefined ) {\r\n\r\n\r\n\t\t\t\t\tapplySkin( geom, skinController );\r\n\r\n\t\t\t\t\tif ( geom.morphTargets.length > 0 ) {\r\n\r\n\t\t\t\t\t\tmaterial.morphTargets = true;\r\n\t\t\t\t\t\tmaterial.skinning = false;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tmaterial.morphTargets = false;\r\n\t\t\t\t\t\tmaterial.skinning = true;\r\n\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\tmesh = new THREE.SkinnedMesh( geom, material, false );\r\n\r\n\r\n\t\t\t\t\t//mesh.skeleton = skinController.skeleton;\r\n\t\t\t\t\t//mesh.skinController = controllers[ skinController.url ];\r\n\t\t\t\t\t//mesh.skinInstanceController = skinController;\r\n\t\t\t\t\tmesh.name = 'skin_' + skins.length;\r\n\r\n\r\n\r\n\t\t\t\t\t//mesh.animationHandle.setKey(0);\r\n\t\t\t\t\tskins.push( mesh );\r\n\r\n\t\t\t\t} else if ( morphController !== undefined ) {\r\n\r\n\t\t\t\t\tcreateMorph( geom, morphController );\r\n\r\n\t\t\t\t\tmaterial.morphTargets = true;\r\n\r\n\t\t\t\t\tmesh = new THREE.Mesh( geom, material );\r\n\t\t\t\t\tmesh.name = 'morph_' + morphs.length;\r\n\r\n\t\t\t\t\tmorphs.push( mesh );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tif ( geom.isLineStrip === true ) {\r\n\r\n\t\t\t\t\t\tmesh = new THREE.Line( geom );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tmesh = new THREE.Mesh( geom, material );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tobj.add(mesh);\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfor ( i = 0; i < node.cameras.length; i ++ ) {\r\n\r\n\t\t\tvar instance_camera = node.cameras[i];\r\n\t\t\tvar cparams = cameras[instance_camera.url];\r\n\r\n\t\t\tvar cam = new THREE.PerspectiveCamera(cparams.yfov, parseFloat(cparams.aspect_ratio),\r\n\t\t\t\t\tparseFloat(cparams.znear), parseFloat(cparams.zfar));\r\n\r\n\t\t\tobj.add(cam);\r\n\t\t}\r\n\r\n\t\tfor ( i = 0; i < node.lights.length; i ++ ) {\r\n\r\n\t\t\tvar light = null;\r\n\t\t\tvar instance_light = node.lights[i];\r\n\t\t\tvar lparams = lights[instance_light.url];\r\n\r\n\t\t\tif ( lparams && lparams.technique ) {\r\n\r\n\t\t\t\tvar color = lparams.color.getHex();\r\n\t\t\t\tvar intensity = lparams.intensity;\r\n\t\t\t\tvar distance = lparams.distance;\r\n\t\t\t\tvar angle = lparams.falloff_angle;\r\n\r\n\t\t\t\tswitch ( lparams.technique ) {\r\n\r\n\t\t\t\t\tcase 'directional':\r\n\r\n\t\t\t\t\t\tlight = new THREE.DirectionalLight( color, intensity, distance );\r\n\t\t\t\t\t\tlight.position.set(0, 0, 1);\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'point':\r\n\r\n\t\t\t\t\t\tlight = new THREE.PointLight( color, intensity, distance );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'spot':\r\n\r\n\t\t\t\t\t\tlight = new THREE.SpotLight( color, intensity, distance, angle );\r\n\t\t\t\t\t\tlight.position.set(0, 0, 1);\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'ambient':\r\n\r\n\t\t\t\t\t\tlight = new THREE.AmbientLight( color );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif (light) {\r\n\t\t\t\tobj.add(light);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tobj.name = node.name || node.id || \"\";\r\n\t\tobj.colladaId = node.id || \"\";\r\n\t\tobj.layer = node.layer || \"\";\r\n\t\tobj.matrix = node.matrix;\r\n\t\tobj.matrix.decompose( obj.position, obj.quaternion, obj.scale );\r\n\r\n\t\tif ( options.centerGeometry && obj.geometry ) {\r\n\r\n\t\t\tvar delta = obj.geometry.center();\r\n\t\t\tdelta.multiply( obj.scale );\r\n\t\t\tdelta.applyQuaternion( obj.quaternion );\r\n\r\n\t\t\tobj.position.sub( delta );\r\n\r\n\t\t}\r\n\r\n\t\tfor ( i = 0; i < node.nodes.length; i ++ ) {\r\n\r\n\t\t\tobj.add( createSceneGraph( node.nodes[i], node ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn obj;\r\n\r\n\t}\r\n\r\n\tfunction getJointId( skin, id ) {\r\n\r\n\t\tfor ( var i = 0; i < skin.joints.length; i ++ ) {\r\n\r\n\t\t\tif ( skin.joints[ i ] === id ) {\r\n\r\n\t\t\t\treturn i;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction getLibraryNode( id ) {\r\n\r\n\t\tvar nodes = COLLADA.querySelectorAll('library_nodes node');\r\n\r\n\t\tfor ( var i = 0; i < nodes.length; i++ ) {\r\n\r\n\t\t\tvar attObj = nodes[i].attributes.getNamedItem('id');\r\n\r\n\t\t\tif ( attObj && attObj.value === id ) {\r\n\r\n\t\t\t\treturn nodes[i];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn undefined;\r\n\r\n\t}\r\n\r\n\tfunction getChannelsForNode ( node ) {\r\n\r\n\t\tvar channels = [];\r\n\t\tvar startTime = 1000000;\r\n\t\tvar endTime = -1000000;\r\n\r\n\t\tfor ( var id in animations ) {\r\n\r\n\t\t\tvar animation = animations[id];\r\n\r\n\t\t\tfor ( var i = 0; i < animation.channel.length; i ++ ) {\r\n\r\n\t\t\t\tvar channel = animation.channel[i];\r\n\t\t\t\tvar sampler = animation.sampler[i];\r\n\t\t\t\tvar id = channel.target.split('/')[0];\r\n\r\n\t\t\t\tif ( id == node.id ) {\r\n\r\n\t\t\t\t\tsampler.create();\r\n\t\t\t\t\tchannel.sampler = sampler;\r\n\t\t\t\t\tstartTime = Math.min(startTime, sampler.startTime);\r\n\t\t\t\t\tendTime = Math.max(endTime, sampler.endTime);\r\n\t\t\t\t\tchannels.push(channel);\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( channels.length ) {\r\n\r\n\t\t\tnode.startTime = startTime;\r\n\t\t\tnode.endTime = endTime;\r\n\r\n\t\t}\r\n\r\n\t\treturn channels;\r\n\r\n\t}\r\n\r\n\tfunction calcFrameDuration( node ) {\r\n\r\n\t\tvar minT = 10000000;\r\n\r\n\t\tfor ( var i = 0; i < node.channels.length; i ++ ) {\r\n\r\n\t\t\tvar sampler = node.channels[i].sampler;\r\n\r\n\t\t\tfor ( var j = 0; j < sampler.input.length - 1; j ++ ) {\r\n\r\n\t\t\t\tvar t0 = sampler.input[ j ];\r\n\t\t\t\tvar t1 = sampler.input[ j + 1 ];\r\n\t\t\t\tminT = Math.min( minT, t1 - t0 );\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn minT;\r\n\r\n\t}\r\n\r\n\tfunction calcMatrixAt( node, t ) {\r\n\r\n\t\tvar animated = {};\r\n\r\n\t\tvar i, j;\r\n\r\n\t\tfor ( i = 0; i < node.channels.length; i ++ ) {\r\n\r\n\t\t\tvar channel = node.channels[ i ];\r\n\t\t\tanimated[ channel.sid ] = channel;\r\n\r\n\t\t}\r\n\r\n\t\tvar matrix = new THREE.Matrix4();\r\n\r\n\t\tfor ( i = 0; i < node.transforms.length; i ++ ) {\r\n\r\n\t\t\tvar transform = node.transforms[ i ];\r\n\t\t\tvar channel = animated[ transform.sid ];\r\n\r\n\t\t\tif ( channel !== undefined ) {\r\n\r\n\t\t\t\tvar sampler = channel.sampler;\r\n\t\t\t\tvar value;\r\n\r\n\t\t\t\tfor ( j = 0; j < sampler.input.length - 1; j ++ ) {\r\n\r\n\t\t\t\t\tif ( sampler.input[ j + 1 ] > t ) {\r\n\r\n\t\t\t\t\t\tvalue = sampler.output[ j ];\r\n\t\t\t\t\t\t//console.log(value.flatten)\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( value !== undefined ) {\r\n\r\n\t\t\t\t\tif ( value instanceof THREE.Matrix4 ) {\r\n\r\n\t\t\t\t\t\tmatrix.multiplyMatrices( matrix, value );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t// FIXME: handle other types\r\n\r\n\t\t\t\t\t\tmatrix.multiplyMatrices( matrix, transform.matrix );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tmatrix.multiplyMatrices( matrix, transform.matrix );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tmatrix.multiplyMatrices( matrix, transform.matrix );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn matrix;\r\n\r\n\t}\r\n\r\n\tfunction bakeAnimations ( node ) {\r\n\r\n\t\tif ( node.channels && node.channels.length ) {\r\n\r\n\t\t\tvar keys = [],\r\n\t\t\t\tsids = [];\r\n\r\n\t\t\tfor ( var i = 0, il = node.channels.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tvar channel = node.channels[i],\r\n\t\t\t\t\tfullSid = channel.fullSid,\r\n\t\t\t\t\tsampler = channel.sampler,\r\n\t\t\t\t\tinput = sampler.input,\r\n\t\t\t\t\ttransform = node.getTransformBySid( channel.sid ),\r\n\t\t\t\t\tmember;\r\n\r\n\t\t\t\tif ( channel.arrIndices ) {\r\n\r\n\t\t\t\t\tmember = [];\r\n\r\n\t\t\t\t\tfor ( var j = 0, jl = channel.arrIndices.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\t\tmember[ j ] = getConvertedIndex( channel.arrIndices[ j ] );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tmember = getConvertedMember( channel.member );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( transform ) {\r\n\r\n\t\t\t\t\tif ( sids.indexOf( fullSid ) === -1 ) {\r\n\r\n\t\t\t\t\t\tsids.push( fullSid );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor ( var j = 0, jl = input.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\t\tvar time = input[j],\r\n\t\t\t\t\t\t\tdata = sampler.getData( transform.type, j, member ),\r\n\t\t\t\t\t\t\tkey = findKey( keys, time );\r\n\r\n\t\t\t\t\t\tif ( !key ) {\r\n\r\n\t\t\t\t\t\t\tkey = new Key( time );\r\n\t\t\t\t\t\t\tvar timeNdx = findTimeNdx( keys, time );\r\n\t\t\t\t\t\t\tkeys.splice( timeNdx === -1 ? keys.length : timeNdx, 0, key );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tkey.addTarget( fullSid, transform, member, data );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconsole.log( 'Could not find transform \"' + channel.sid + '\" in node ' + node.id );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// post process\r\n\t\t\tfor ( var i = 0; i < sids.length; i ++ ) {\r\n\r\n\t\t\t\tvar sid = sids[ i ];\r\n\r\n\t\t\t\tfor ( var j = 0; j < keys.length; j ++ ) {\r\n\r\n\t\t\t\t\tvar key = keys[ j ];\r\n\r\n\t\t\t\t\tif ( !key.hasTarget( sid ) ) {\r\n\r\n\t\t\t\t\t\tinterpolateKeys( keys, key, j, sid );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tnode.keys = keys;\r\n\t\t\tnode.sids = sids;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction findKey ( keys, time) {\r\n\r\n\t\tvar retVal = null;\r\n\r\n\t\tfor ( var i = 0, il = keys.length; i < il && retVal === null; i ++ ) {\r\n\r\n\t\t\tvar key = keys[i];\r\n\r\n\t\t\tif ( key.time === time ) {\r\n\r\n\t\t\t\tretVal = key;\r\n\r\n\t\t\t} else if ( key.time > time ) {\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn retVal;\r\n\r\n\t}\r\n\r\n\tfunction findTimeNdx ( keys, time) {\r\n\r\n\t\tvar ndx = -1;\r\n\r\n\t\tfor ( var i = 0, il = keys.length; i < il && ndx === -1; i ++ ) {\r\n\r\n\t\t\tvar key = keys[i];\r\n\r\n\t\t\tif ( key.time >= time ) {\r\n\r\n\t\t\t\tndx = i;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn ndx;\r\n\r\n\t}\r\n\r\n\tfunction interpolateKeys ( keys, key, ndx, fullSid ) {\r\n\r\n\t\tvar prevKey = getPrevKeyWith( keys, fullSid, ndx ? ndx - 1 : 0 ),\r\n\t\t\tnextKey = getNextKeyWith( keys, fullSid, ndx + 1 );\r\n\r\n\t\tif ( prevKey && nextKey ) {\r\n\r\n\t\t\tvar scale = (key.time - prevKey.time) / (nextKey.time - prevKey.time),\r\n\t\t\t\tprevTarget = prevKey.getTarget( fullSid ),\r\n\t\t\t\tnextData = nextKey.getTarget( fullSid ).data,\r\n\t\t\t\tprevData = prevTarget.data,\r\n\t\t\t\tdata;\r\n\r\n\t\t\tif ( prevTarget.type === 'matrix' ) {\r\n\r\n\t\t\t\tdata = prevData;\r\n\r\n\t\t\t} else if ( prevData.length ) {\r\n\r\n\t\t\t\tdata = [];\r\n\r\n\t\t\t\tfor ( var i = 0; i < prevData.length; ++ i ) {\r\n\r\n\t\t\t\t\tdata[ i ] = prevData[ i ] + ( nextData[ i ] - prevData[ i ] ) * scale;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tdata = prevData + ( nextData - prevData ) * scale;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tkey.addTarget( fullSid, prevTarget.transform, prevTarget.member, data );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// Get next key with given sid\r\n\r\n\tfunction getNextKeyWith( keys, fullSid, ndx ) {\r\n\r\n\t\tfor ( ; ndx < keys.length; ndx ++ ) {\r\n\r\n\t\t\tvar key = keys[ ndx ];\r\n\r\n\t\t\tif ( key.hasTarget( fullSid ) ) {\r\n\r\n\t\t\t\treturn key;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t}\r\n\r\n\t// Get previous key with given sid\r\n\r\n\tfunction getPrevKeyWith( keys, fullSid, ndx ) {\r\n\r\n\t\tndx = ndx >= 0 ? ndx : ndx + keys.length;\r\n\r\n\t\tfor ( ; ndx >= 0; ndx -- ) {\r\n\r\n\t\t\tvar key = keys[ ndx ];\r\n\r\n\t\t\tif ( key.hasTarget( fullSid ) ) {\r\n\r\n\t\t\t\treturn key;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t}\r\n\r\n\tfunction _Image() {\r\n\r\n\t\tthis.id = \"\";\r\n\t\tthis.init_from = \"\";\r\n\r\n\t}\r\n\r\n\t_Image.prototype.parse = function(element) {\r\n\r\n\t\tthis.id = element.getAttribute('id');\r\n\r\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tvar child = element.childNodes[ i ];\r\n\r\n\t\t\tif ( child.nodeName === 'init_from' ) {\r\n\r\n\t\t\t\tthis.init_from = child.textContent;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tfunction Controller() {\r\n\r\n\t\tthis.id = \"\";\r\n\t\tthis.name = \"\";\r\n\t\tthis.type = \"\";\r\n\t\tthis.skin = null;\r\n\t\tthis.morph = null;\r\n\r\n\t}\r\n\r\n\tController.prototype.parse = function( element ) {\r\n\r\n\t\tthis.id = element.getAttribute('id');\r\n\t\tthis.name = element.getAttribute('name');\r\n\t\tthis.type = \"none\";\r\n\r\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tvar child = element.childNodes[ i ];\r\n\r\n\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\tcase 'skin':\r\n\r\n\t\t\t\t\tthis.skin = (new Skin()).parse(child);\r\n\t\t\t\t\tthis.type = child.nodeName;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'morph':\r\n\r\n\t\t\t\t\tthis.morph = (new Morph()).parse(child);\r\n\t\t\t\t\tthis.type = child.nodeName;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tfunction Morph() {\r\n\r\n\t\tthis.method = null;\r\n\t\tthis.source = null;\r\n\t\tthis.targets = null;\r\n\t\tthis.weights = null;\r\n\r\n\t}\r\n\r\n\tMorph.prototype.parse = function( element ) {\r\n\r\n\t\tvar sources = {};\r\n\t\tvar inputs = [];\r\n\t\tvar i;\r\n\r\n\t\tthis.method = element.getAttribute( 'method' );\r\n\t\tthis.source = element.getAttribute( 'source' ).replace( /^#/, '' );\r\n\r\n\t\tfor ( i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tvar child = element.childNodes[ i ];\r\n\t\t\tif ( child.nodeType != 1 ) continue;\r\n\r\n\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\tcase 'source':\r\n\r\n\t\t\t\t\tvar source = ( new Source() ).parse( child );\r\n\t\t\t\t\tsources[ source.id ] = source;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'targets':\r\n\r\n\t\t\t\t\tinputs = this.parseInputs( child );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\r\n\t\t\t\t\tconsole.log( child.nodeName );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfor ( i = 0; i < inputs.length; i ++ ) {\r\n\r\n\t\t\tvar input = inputs[ i ];\r\n\t\t\tvar source = sources[ input.source ];\r\n\r\n\t\t\tswitch ( input.semantic ) {\r\n\r\n\t\t\t\tcase 'MORPH_TARGET':\r\n\r\n\t\t\t\t\tthis.targets = source.read();\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'MORPH_WEIGHT':\r\n\r\n\t\t\t\t\tthis.weights = source.read();\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tMorph.prototype.parseInputs = function(element) {\r\n\r\n\t\tvar inputs = [];\r\n\r\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tvar child = element.childNodes[i];\r\n\t\t\tif ( child.nodeType != 1) continue;\r\n\r\n\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\tcase 'input':\r\n\r\n\t\t\t\t\tinputs.push( (new Input()).parse(child) );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn inputs;\r\n\r\n\t};\r\n\r\n\tfunction Skin() {\r\n\r\n\t\tthis.source = \"\";\r\n\t\tthis.bindShapeMatrix = null;\r\n\t\tthis.invBindMatrices = [];\r\n\t\tthis.joints = [];\r\n\t\tthis.weights = [];\r\n\r\n\t}\r\n\r\n\tSkin.prototype.parse = function( element ) {\r\n\r\n\t\tvar sources = {};\r\n\t\tvar joints, weights;\r\n\r\n\t\tthis.source = element.getAttribute( 'source' ).replace( /^#/, '' );\r\n\t\tthis.invBindMatrices = [];\r\n\t\tthis.joints = [];\r\n\t\tthis.weights = [];\r\n\r\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tvar child = element.childNodes[i];\r\n\t\t\tif ( child.nodeType != 1 ) continue;\r\n\r\n\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\tcase 'bind_shape_matrix':\r\n\r\n\t\t\t\t\tvar f = _floats(child.textContent);\r\n\t\t\t\t\tthis.bindShapeMatrix = getConvertedMat4( f );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'source':\r\n\r\n\t\t\t\t\tvar src = new Source().parse(child);\r\n\t\t\t\t\tsources[ src.id ] = src;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'joints':\r\n\r\n\t\t\t\t\tjoints = child;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'vertex_weights':\r\n\r\n\t\t\t\t\tweights = child;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\r\n\t\t\t\t\tconsole.log( child.nodeName );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.parseJoints( joints, sources );\r\n\t\tthis.parseWeights( weights, sources );\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tSkin.prototype.parseJoints = function ( element, sources ) {\r\n\r\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tvar child = element.childNodes[ i ];\r\n\t\t\tif ( child.nodeType != 1 ) continue;\r\n\r\n\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\tcase 'input':\r\n\r\n\t\t\t\t\tvar input = ( new Input() ).parse( child );\r\n\t\t\t\t\tvar source = sources[ input.source ];\r\n\r\n\t\t\t\t\tif ( input.semantic === 'JOINT' ) {\r\n\r\n\t\t\t\t\t\tthis.joints = source.read();\r\n\r\n\t\t\t\t\t} else if ( input.semantic === 'INV_BIND_MATRIX' ) {\r\n\r\n\t\t\t\t\t\tthis.invBindMatrices = source.read();\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tSkin.prototype.parseWeights = function ( element, sources ) {\r\n\r\n\t\tvar v, vcount, inputs = [];\r\n\r\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tvar child = element.childNodes[ i ];\r\n\t\t\tif ( child.nodeType != 1 ) continue;\r\n\r\n\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\tcase 'input':\r\n\r\n\t\t\t\t\tinputs.push( ( new Input() ).parse( child ) );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'v':\r\n\r\n\t\t\t\t\tv = _ints( child.textContent );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'vcount':\r\n\r\n\t\t\t\t\tvcount = _ints( child.textContent );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar index = 0;\r\n\r\n\t\tfor ( var i = 0; i < vcount.length; i ++ ) {\r\n\r\n\t\t\tvar numBones = vcount[i];\r\n\t\t\tvar vertex_weights = [];\r\n\r\n\t\t\tfor ( var j = 0; j < numBones; j ++ ) {\r\n\r\n\t\t\t\tvar influence = {};\r\n\r\n\t\t\t\tfor ( var k = 0; k < inputs.length; k ++ ) {\r\n\r\n\t\t\t\t\tvar input = inputs[ k ];\r\n\t\t\t\t\tvar value = v[ index + input.offset ];\r\n\r\n\t\t\t\t\tswitch ( input.semantic ) {\r\n\r\n\t\t\t\t\t\tcase 'JOINT':\r\n\r\n\t\t\t\t\t\t\tinfluence.joint = value;//this.joints[value];\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase 'WEIGHT':\r\n\r\n\t\t\t\t\t\t\tinfluence.weight = sources[ input.source ].data[ value ];\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvertex_weights.push( influence );\r\n\t\t\t\tindex += inputs.length;\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var j = 0; j < vertex_weights.length; j ++ ) {\r\n\r\n\t\t\t\tvertex_weights[ j ].index = i;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.weights.push( vertex_weights );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tfunction VisualScene () {\r\n\r\n\t\tthis.id = \"\";\r\n\t\tthis.name = \"\";\r\n\t\tthis.nodes = [];\r\n\t\tthis.scene = new THREE.Group();\r\n\r\n\t}\r\n\r\n\tVisualScene.prototype.getChildById = function( id, recursive ) {\r\n\r\n\t\tfor ( var i = 0; i < this.nodes.length; i ++ ) {\r\n\r\n\t\t\tvar node = this.nodes[ i ].getChildById( id, recursive );\r\n\r\n\t\t\tif ( node ) {\r\n\r\n\t\t\t\treturn node;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t};\r\n\r\n\tVisualScene.prototype.getChildBySid = function( sid, recursive ) {\r\n\r\n\t\tfor ( var i = 0; i < this.nodes.length; i ++ ) {\r\n\r\n\t\t\tvar node = this.nodes[ i ].getChildBySid( sid, recursive );\r\n\r\n\t\t\tif ( node ) {\r\n\r\n\t\t\t\treturn node;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t};\r\n\r\n\tVisualScene.prototype.parse = function( element ) {\r\n\r\n\t\tthis.id = element.getAttribute( 'id' );\r\n\t\tthis.name = element.getAttribute( 'name' );\r\n\t\tthis.nodes = [];\r\n\r\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tvar child = element.childNodes[ i ];\r\n\t\t\tif ( child.nodeType != 1 ) continue;\r\n\r\n\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\tcase 'node':\r\n\r\n\t\t\t\t\tthis.nodes.push( ( new Node() ).parse( child ) );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tfunction Node() {\r\n\r\n\t\tthis.id = \"\";\r\n\t\tthis.name = \"\";\r\n\t\tthis.sid = \"\";\r\n\t\tthis.nodes = [];\r\n\t\tthis.controllers = [];\r\n\t\tthis.transforms = [];\r\n\t\tthis.geometries = [];\r\n\t\tthis.channels = [];\r\n\t\tthis.matrix = new THREE.Matrix4();\r\n\r\n\t}\r\n\r\n\tNode.prototype.getChannelForTransform = function( transformSid ) {\r\n\r\n\t\tfor ( var i = 0; i < this.channels.length; i ++ ) {\r\n\r\n\t\t\tvar channel = this.channels[i];\r\n\t\t\tvar parts = channel.target.split('/');\r\n\t\t\tvar id = parts.shift();\r\n\t\t\tvar sid = parts.shift();\r\n\t\t\tvar dotSyntax = (sid.indexOf(\".\") >= 0);\r\n\t\t\tvar arrSyntax = (sid.indexOf(\"(\") >= 0);\r\n\t\t\tvar arrIndices;\r\n\r\n\t\t\tif ( dotSyntax ) {\r\n\r\n\t\t\t\tparts = sid.split(\".\");\r\n\t\t\t\tsid = parts.shift();\r\n\r\n\t\t\t} else if ( arrSyntax ) {\r\n\r\n\t\t\t\tarrIndices = sid.split(\"(\");\r\n\t\t\t\tsid = arrIndices.shift();\r\n\r\n\t\t\t\tfor ( var j = 0; j < arrIndices.length; j ++ ) {\r\n\r\n\t\t\t\t\tarrIndices[ j ] = parseInt( arrIndices[ j ].replace( /\\)/, '' ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( sid === transformSid ) {\r\n\r\n\t\t\t\tchannel.info = { sid: sid, dotSyntax: dotSyntax, arrSyntax: arrSyntax, arrIndices: arrIndices };\r\n\t\t\t\treturn channel;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t};\r\n\r\n\tNode.prototype.getChildById = function ( id, recursive ) {\r\n\r\n\t\tif ( this.id === id ) {\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\tif ( recursive ) {\r\n\r\n\t\t\tfor ( var i = 0; i < this.nodes.length; i ++ ) {\r\n\r\n\t\t\t\tvar n = this.nodes[ i ].getChildById( id, recursive );\r\n\r\n\t\t\t\tif ( n ) {\r\n\r\n\t\t\t\t\treturn n;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t};\r\n\r\n\tNode.prototype.getChildBySid = function ( sid, recursive ) {\r\n\r\n\t\tif ( this.sid === sid ) {\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\tif ( recursive ) {\r\n\r\n\t\t\tfor ( var i = 0; i < this.nodes.length; i ++ ) {\r\n\r\n\t\t\t\tvar n = this.nodes[ i ].getChildBySid( sid, recursive );\r\n\r\n\t\t\t\tif ( n ) {\r\n\r\n\t\t\t\t\treturn n;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t};\r\n\r\n\tNode.prototype.getTransformBySid = function ( sid ) {\r\n\r\n\t\tfor ( var i = 0; i < this.transforms.length; i ++ ) {\r\n\r\n\t\t\tif ( this.transforms[ i ].sid === sid ) return this.transforms[ i ];\r\n\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t};\r\n\r\n\tNode.prototype.parse = function( element ) {\r\n\r\n\t\tvar url;\r\n\r\n\t\tthis.id = element.getAttribute('id');\r\n\t\tthis.sid = element.getAttribute('sid');\r\n\t\tthis.name = element.getAttribute('name');\r\n\t\tthis.type = element.getAttribute('type');\r\n\t\tthis.layer = element.getAttribute('layer');\r\n\r\n\t\tthis.type = this.type === 'JOINT' ? this.type : 'NODE';\r\n\r\n\t\tthis.nodes = [];\r\n\t\tthis.transforms = [];\r\n\t\tthis.geometries = [];\r\n\t\tthis.cameras = [];\r\n\t\tthis.lights = [];\r\n\t\tthis.controllers = [];\r\n\t\tthis.matrix = new THREE.Matrix4();\r\n\r\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tvar child = element.childNodes[ i ];\r\n\t\t\tif ( child.nodeType != 1 ) continue;\r\n\r\n\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\tcase 'node':\r\n\r\n\t\t\t\t\tthis.nodes.push( ( new Node() ).parse( child ) );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'instance_camera':\r\n\r\n\t\t\t\t\tthis.cameras.push( ( new InstanceCamera() ).parse( child ) );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'instance_controller':\r\n\r\n\t\t\t\t\tthis.controllers.push( ( new InstanceController() ).parse( child ) );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'instance_geometry':\r\n\r\n\t\t\t\t\tthis.geometries.push( ( new InstanceGeometry() ).parse( child ) );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'instance_light':\r\n\r\n\t\t\t\t\tthis.lights.push( ( new InstanceLight() ).parse( child ) );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'instance_node':\r\n\r\n\t\t\t\t\turl = child.getAttribute( 'url' ).replace( /^#/, '' );\r\n\t\t\t\t\tvar iNode = getLibraryNode( url );\r\n\r\n\t\t\t\t\tif ( iNode ) {\r\n\r\n\t\t\t\t\t\tthis.nodes.push( ( new Node() ).parse( iNode )) ;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'rotate':\r\n\t\t\t\tcase 'translate':\r\n\t\t\t\tcase 'scale':\r\n\t\t\t\tcase 'matrix':\r\n\t\t\t\tcase 'lookat':\r\n\t\t\t\tcase 'skew':\r\n\r\n\t\t\t\t\tthis.transforms.push( ( new Transform() ).parse( child ) );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'extra':\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\r\n\t\t\t\t\tconsole.log( child.nodeName );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.channels = getChannelsForNode( this );\r\n\t\tbakeAnimations( this );\r\n\r\n\t\tthis.updateMatrix();\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tNode.prototype.updateMatrix = function () {\r\n\r\n\t\tthis.matrix.identity();\r\n\r\n\t\tfor ( var i = 0; i < this.transforms.length; i ++ ) {\r\n\r\n\t\t\tthis.transforms[ i ].apply( this.matrix );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tfunction Transform () {\r\n\r\n\t\tthis.sid = \"\";\r\n\t\tthis.type = \"\";\r\n\t\tthis.data = [];\r\n\t\tthis.obj = null;\r\n\r\n\t}\r\n\r\n\tTransform.prototype.parse = function ( element ) {\r\n\r\n\t\tthis.sid = element.getAttribute( 'sid' );\r\n\t\tthis.type = element.nodeName;\r\n\t\tthis.data = _floats( element.textContent );\r\n\t\tthis.convert();\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tTransform.prototype.convert = function () {\r\n\r\n\t\tswitch ( this.type ) {\r\n\r\n\t\t\tcase 'matrix':\r\n\r\n\t\t\t\tthis.obj = getConvertedMat4( this.data );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'rotate':\r\n\r\n\t\t\t\tthis.angle = THREE.Math.degToRad( this.data[3] );\r\n\r\n\t\t\tcase 'translate':\r\n\r\n\t\t\t\tfixCoords( this.data, -1 );\r\n\t\t\t\tthis.obj = new THREE.Vector3( this.data[ 0 ], this.data[ 1 ], this.data[ 2 ] );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'scale':\r\n\r\n\t\t\t\tfixCoords( this.data, 1 );\r\n\t\t\t\tthis.obj = new THREE.Vector3( this.data[ 0 ], this.data[ 1 ], this.data[ 2 ] );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\tconsole.log( 'Can not convert Transform of type ' + this.type );\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tTransform.prototype.apply = function () {\r\n\r\n\t\tvar m1 = new THREE.Matrix4();\r\n\r\n\t\treturn function ( matrix ) {\r\n\r\n\t\t\tswitch ( this.type ) {\r\n\r\n\t\t\t\tcase 'matrix':\r\n\r\n\t\t\t\t\tmatrix.multiply( this.obj );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'translate':\r\n\r\n\t\t\t\t\tmatrix.multiply( m1.makeTranslation( this.obj.x, this.obj.y, this.obj.z ) );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'rotate':\r\n\r\n\t\t\t\t\tmatrix.multiply( m1.makeRotationAxis( this.obj, this.angle ) );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'scale':\r\n\r\n\t\t\t\t\tmatrix.scale( this.obj );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t}();\r\n\r\n\tTransform.prototype.update = function ( data, member ) {\r\n\r\n\t\tvar members = [ 'X', 'Y', 'Z', 'ANGLE' ];\r\n\r\n\t\tswitch ( this.type ) {\r\n\r\n\t\t\tcase 'matrix':\r\n\r\n\t\t\t\tif ( ! member ) {\r\n\r\n\t\t\t\t\tthis.obj.copy( data );\r\n\r\n\t\t\t\t} else if ( member.length === 1 ) {\r\n\r\n\t\t\t\t\tswitch ( member[ 0 ] ) {\r\n\r\n\t\t\t\t\t\tcase 0:\r\n\r\n\t\t\t\t\t\t\tthis.obj.n11 = data[ 0 ];\r\n\t\t\t\t\t\t\tthis.obj.n21 = data[ 1 ];\r\n\t\t\t\t\t\t\tthis.obj.n31 = data[ 2 ];\r\n\t\t\t\t\t\t\tthis.obj.n41 = data[ 3 ];\r\n\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase 1:\r\n\r\n\t\t\t\t\t\t\tthis.obj.n12 = data[ 0 ];\r\n\t\t\t\t\t\t\tthis.obj.n22 = data[ 1 ];\r\n\t\t\t\t\t\t\tthis.obj.n32 = data[ 2 ];\r\n\t\t\t\t\t\t\tthis.obj.n42 = data[ 3 ];\r\n\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase 2:\r\n\r\n\t\t\t\t\t\t\tthis.obj.n13 = data[ 0 ];\r\n\t\t\t\t\t\t\tthis.obj.n23 = data[ 1 ];\r\n\t\t\t\t\t\t\tthis.obj.n33 = data[ 2 ];\r\n\t\t\t\t\t\t\tthis.obj.n43 = data[ 3 ];\r\n\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase 3:\r\n\r\n\t\t\t\t\t\t\tthis.obj.n14 = data[ 0 ];\r\n\t\t\t\t\t\t\tthis.obj.n24 = data[ 1 ];\r\n\t\t\t\t\t\t\tthis.obj.n34 = data[ 2 ];\r\n\t\t\t\t\t\t\tthis.obj.n44 = data[ 3 ];\r\n\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else if ( member.length === 2 ) {\r\n\r\n\t\t\t\t\tvar propName = 'n' + ( member[ 0 ] + 1 ) + ( member[ 1 ] + 1 );\r\n\t\t\t\t\tthis.obj[ propName ] = data;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconsole.log('Incorrect addressing of matrix in transform.');\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'translate':\r\n\t\t\tcase 'scale':\r\n\r\n\t\t\t\tif ( Object.prototype.toString.call( member ) === '[object Array]' ) {\r\n\r\n\t\t\t\t\tmember = members[ member[ 0 ] ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tswitch ( member ) {\r\n\r\n\t\t\t\t\tcase 'X':\r\n\r\n\t\t\t\t\t\tthis.obj.x = data;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'Y':\r\n\r\n\t\t\t\t\t\tthis.obj.y = data;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'Z':\r\n\r\n\t\t\t\t\t\tthis.obj.z = data;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault:\r\n\r\n\t\t\t\t\t\tthis.obj.x = data[ 0 ];\r\n\t\t\t\t\t\tthis.obj.y = data[ 1 ];\r\n\t\t\t\t\t\tthis.obj.z = data[ 2 ];\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'rotate':\r\n\r\n\t\t\t\tif ( Object.prototype.toString.call( member ) === '[object Array]' ) {\r\n\r\n\t\t\t\t\tmember = members[ member[ 0 ] ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tswitch ( member ) {\r\n\r\n\t\t\t\t\tcase 'X':\r\n\r\n\t\t\t\t\t\tthis.obj.x = data;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'Y':\r\n\r\n\t\t\t\t\t\tthis.obj.y = data;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'Z':\r\n\r\n\t\t\t\t\t\tthis.obj.z = data;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'ANGLE':\r\n\r\n\t\t\t\t\t\tthis.angle = THREE.Math.degToRad( data );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault:\r\n\r\n\t\t\t\t\t\tthis.obj.x = data[ 0 ];\r\n\t\t\t\t\t\tthis.obj.y = data[ 1 ];\r\n\t\t\t\t\t\tthis.obj.z = data[ 2 ];\r\n\t\t\t\t\t\tthis.angle = THREE.Math.degToRad( data[ 3 ] );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tfunction InstanceController() {\r\n\r\n\t\tthis.url = \"\";\r\n\t\tthis.skeleton = [];\r\n\t\tthis.instance_material = [];\r\n\r\n\t}\r\n\r\n\tInstanceController.prototype.parse = function ( element ) {\r\n\r\n\t\tthis.url = element.getAttribute('url').replace(/^#/, '');\r\n\t\tthis.skeleton = [];\r\n\t\tthis.instance_material = [];\r\n\r\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tvar child = element.childNodes[ i ];\r\n\t\t\tif ( child.nodeType !== 1 ) continue;\r\n\r\n\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\tcase 'skeleton':\r\n\r\n\t\t\t\t\tthis.skeleton.push( child.textContent.replace(/^#/, '') );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'bind_material':\r\n\r\n\t\t\t\t\tvar instances = child.querySelectorAll('instance_material');\r\n\r\n\t\t\t\t\tfor ( var j = 0; j < instances.length; j ++ ) {\r\n\r\n\t\t\t\t\t\tvar instance = instances[j];\r\n\t\t\t\t\t\tthis.instance_material.push( (new InstanceMaterial()).parse(instance) );\r\n\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'extra':\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tfunction InstanceMaterial () {\r\n\r\n\t\tthis.symbol = \"\";\r\n\t\tthis.target = \"\";\r\n\r\n\t}\r\n\r\n\tInstanceMaterial.prototype.parse = function ( element ) {\r\n\r\n\t\tthis.symbol = element.getAttribute('symbol');\r\n\t\tthis.target = element.getAttribute('target').replace(/^#/, '');\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tfunction InstanceGeometry() {\r\n\r\n\t\tthis.url = \"\";\r\n\t\tthis.instance_material = [];\r\n\r\n\t}\r\n\r\n\tInstanceGeometry.prototype.parse = function ( element ) {\r\n\r\n\t\tthis.url = element.getAttribute('url').replace(/^#/, '');\r\n\t\tthis.instance_material = [];\r\n\r\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tvar child = element.childNodes[i];\r\n\t\t\tif ( child.nodeType != 1 ) continue;\r\n\r\n\t\t\tif ( child.nodeName === 'bind_material' ) {\r\n\r\n\t\t\t\tvar instances = child.querySelectorAll('instance_material');\r\n\r\n\t\t\t\tfor ( var j = 0; j < instances.length; j ++ ) {\r\n\r\n\t\t\t\t\tvar instance = instances[j];\r\n\t\t\t\t\tthis.instance_material.push( (new InstanceMaterial()).parse(instance) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tfunction Geometry() {\r\n\r\n\t\tthis.id = \"\";\r\n\t\tthis.mesh = null;\r\n\r\n\t}\r\n\r\n\tGeometry.prototype.parse = function ( element ) {\r\n\r\n\t\tthis.id = element.getAttribute('id');\r\n\r\n\t\textractDoubleSided( this, element );\r\n\r\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tvar child = element.childNodes[i];\r\n\r\n\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\tcase 'mesh':\r\n\r\n\t\t\t\t\tthis.mesh = (new Mesh(this)).parse(child);\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'extra':\r\n\r\n\t\t\t\t\t// console.log( child );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tfunction Mesh( geometry ) {\r\n\r\n\t\tthis.geometry = geometry.id;\r\n\t\tthis.primitives = [];\r\n\t\tthis.vertices = null;\r\n\t\tthis.geometry3js = null;\r\n\r\n\t}\r\n\r\n\tMesh.prototype.parse = function ( element ) {\r\n\r\n\t\tthis.primitives = [];\r\n\r\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tvar child = element.childNodes[ i ];\r\n\r\n\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\tcase 'source':\r\n\r\n\t\t\t\t\t_source( child );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'vertices':\r\n\r\n\t\t\t\t\tthis.vertices = ( new Vertices() ).parse( child );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'linestrips':\r\n\r\n\t\t\t\t\tthis.primitives.push( ( new LineStrips().parse( child ) ) );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'triangles':\r\n\r\n\t\t\t\t\tthis.primitives.push( ( new Triangles().parse( child ) ) );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'polygons':\r\n\r\n\t\t\t\t\tthis.primitives.push( ( new Polygons().parse( child ) ) );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'polylist':\r\n\r\n\t\t\t\t\tthis.primitives.push( ( new Polylist().parse( child ) ) );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.geometry3js = new THREE.Geometry();\r\n\r\n\t\tif ( this.vertices === null ) {\r\n\r\n\t\t\t// TODO (mrdoob): Study case when this is null (carrier.dae)\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\tvar vertexData = sources[ this.vertices.input['POSITION'].source ].data;\r\n\r\n\t\tfor ( var i = 0; i < vertexData.length; i += 3 ) {\r\n\r\n\t\t\tthis.geometry3js.vertices.push( getConvertedVec3( vertexData, i ).clone() );\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var i = 0; i < this.primitives.length; i ++ ) {\r\n\r\n\t\t\tvar primitive = this.primitives[ i ];\r\n\t\t\tprimitive.setVertices( this.vertices );\r\n\t\t\tthis.handlePrimitive( primitive, this.geometry3js );\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.geometry3js.calcNormals ) {\r\n\r\n\t\t\tthis.geometry3js.computeVertexNormals();\r\n\t\t\tdelete this.geometry3js.calcNormals;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tMesh.prototype.handlePrimitive = function ( primitive, geom ) {\r\n\r\n\t\tif ( primitive instanceof LineStrips ) {\r\n\r\n\t\t\t// TODO: Handle indices. Maybe easier with BufferGeometry?\r\n\r\n\t\t\tgeom.isLineStrip = true;\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tvar j, k, pList = primitive.p, inputs = primitive.inputs;\r\n\t\tvar input, index, idx32;\r\n\t\tvar source, numParams;\r\n\t\tvar vcount, vcIndex = 0, maxOffset = 0;\r\n\t\tvar texture_sets = [];\r\n\r\n\t\tfor ( j = 0; j < inputs.length; j ++ ) {\r\n\r\n\t\t\tinput = inputs[ j ];\r\n\r\n\t\t\tvar offset = input.offset + 1;\r\n\t\t\tmaxOffset = (maxOffset < offset) ? offset : maxOffset;\r\n\r\n\t\t\tswitch ( input.semantic ) {\r\n\r\n\t\t\t\tcase 'TEXCOORD':\r\n\t\t\t\t\ttexture_sets.push( input.set );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var pCount = 0; pCount < pList.length; ++ pCount ) {\r\n\r\n\t\t\tvar p = pList[ pCount ], i = 0;\r\n\r\n\t\t\twhile ( i < p.length ) {\r\n\r\n\t\t\t\tvar vs = [];\r\n\t\t\t\tvar ns = [];\r\n\t\t\t\tvar ts = null;\r\n\t\t\t\tvar cs = [];\r\n\r\n\t\t\t\tif ( primitive.vcount ) {\r\n\r\n\t\t\t\t\tvcount = primitive.vcount.length ? primitive.vcount[ vcIndex ++ ] : primitive.vcount;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tvcount = p.length / maxOffset;\r\n\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tfor ( j = 0; j < vcount; j ++ ) {\r\n\r\n\t\t\t\t\tfor ( k = 0; k < inputs.length; k ++ ) {\r\n\r\n\t\t\t\t\t\tinput = inputs[ k ];\r\n\t\t\t\t\t\tsource = sources[ input.source ];\r\n\r\n\t\t\t\t\t\tindex = p[ i + ( j * maxOffset ) + input.offset ];\r\n\t\t\t\t\t\tnumParams = source.accessor.params.length;\r\n\t\t\t\t\t\tidx32 = index * numParams;\r\n\r\n\t\t\t\t\t\tswitch ( input.semantic ) {\r\n\r\n\t\t\t\t\t\t\tcase 'VERTEX':\r\n\r\n\t\t\t\t\t\t\t\tvs.push( index );\r\n\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tcase 'NORMAL':\r\n\r\n\t\t\t\t\t\t\t\tns.push( getConvertedVec3( source.data, idx32 ) );\r\n\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tcase 'TEXCOORD':\r\n\r\n\t\t\t\t\t\t\t\tts = ts || { };\r\n\t\t\t\t\t\t\t\tif ( ts[ input.set ] === undefined ) ts[ input.set ] = [];\r\n\t\t\t\t\t\t\t\t// invert the V\r\n\t\t\t\t\t\t\t\tts[ input.set ].push( new THREE.Vector2( source.data[ idx32 ], source.data[ idx32 + 1 ] ) );\r\n\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tcase 'COLOR':\r\n\r\n\t\t\t\t\t\t\t\tcs.push( new THREE.Color().setRGB( source.data[ idx32 ], source.data[ idx32 + 1 ], source.data[ idx32 + 2 ] ) );\r\n\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tdefault:\r\n\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( ns.length === 0 ) {\r\n\r\n\t\t\t\t\t// check the vertices inputs\r\n\t\t\t\t\tinput = this.vertices.input.NORMAL;\r\n\r\n\t\t\t\t\tif ( input ) {\r\n\r\n\t\t\t\t\t\tsource = sources[ input.source ];\r\n\t\t\t\t\t\tnumParams = source.accessor.params.length;\r\n\r\n\t\t\t\t\t\tfor ( var ndx = 0, len = vs.length; ndx < len; ndx ++ ) {\r\n\r\n\t\t\t\t\t\t\tns.push( getConvertedVec3( source.data, vs[ ndx ] * numParams ) );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tgeom.calcNormals = true;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( !ts ) {\r\n\r\n\t\t\t\t\tts = { };\r\n\t\t\t\t\t// check the vertices inputs\r\n\t\t\t\t\tinput = this.vertices.input.TEXCOORD;\r\n\r\n\t\t\t\t\tif ( input ) {\r\n\r\n\t\t\t\t\t\ttexture_sets.push( input.set );\r\n\t\t\t\t\t\tsource = sources[ input.source ];\r\n\t\t\t\t\t\tnumParams = source.accessor.params.length;\r\n\r\n\t\t\t\t\t\tfor ( var ndx = 0, len = vs.length; ndx < len; ndx ++ ) {\r\n\r\n\t\t\t\t\t\t\tidx32 = vs[ ndx ] * numParams;\r\n\t\t\t\t\t\t\tif ( ts[ input.set ] === undefined ) ts[ input.set ] = [ ];\r\n\t\t\t\t\t\t\t// invert the V\r\n\t\t\t\t\t\t\tts[ input.set ].push( new THREE.Vector2( source.data[ idx32 ], 1.0 - source.data[ idx32 + 1 ] ) );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( cs.length === 0 ) {\r\n\r\n\t\t\t\t\t// check the vertices inputs\r\n\t\t\t\t\tinput = this.vertices.input.COLOR;\r\n\r\n\t\t\t\t\tif ( input ) {\r\n\r\n\t\t\t\t\t\tsource = sources[ input.source ];\r\n\t\t\t\t\t\tnumParams = source.accessor.params.length;\r\n\r\n\t\t\t\t\t\tfor ( var ndx = 0, len = vs.length; ndx < len; ndx ++ ) {\r\n\r\n\t\t\t\t\t\t\tidx32 = vs[ ndx ] * numParams;\r\n\t\t\t\t\t\t\tcs.push( new THREE.Color().setRGB( source.data[ idx32 ], source.data[ idx32 + 1 ], source.data[ idx32 + 2 ] ) );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar face = null, faces = [], uv, uvArr;\r\n\r\n\t\t\t\tif ( vcount === 3 ) {\r\n\r\n\t\t\t\t\tfaces.push( new THREE.Face3( vs[0], vs[1], vs[2], ns, cs.length ? cs : new THREE.Color() ) );\r\n\r\n\t\t\t\t} else if ( vcount === 4 ) {\r\n\r\n\t\t\t\t\tfaces.push( new THREE.Face3( vs[0], vs[1], vs[3], ns.length ? [ ns[0].clone(), ns[1].clone(), ns[3].clone() ] : [], cs.length ? [ cs[0], cs[1], cs[3] ] : new THREE.Color() ) );\r\n\r\n\t\t\t\t\tfaces.push( new THREE.Face3( vs[1], vs[2], vs[3], ns.length ? [ ns[1].clone(), ns[2].clone(), ns[3].clone() ] : [], cs.length ? [ cs[1], cs[2], cs[3] ] : new THREE.Color() ) );\r\n\r\n\t\t\t\t} else if ( vcount > 4 && options.subdivideFaces ) {\r\n\r\n\t\t\t\t\tvar clr = cs.length ? cs : new THREE.Color(),\r\n\t\t\t\t\t\tvec1, vec2, vec3, v1, v2, norm;\r\n\r\n\t\t\t\t\t// subdivide into multiple Face3s\r\n\r\n\t\t\t\t\tfor ( k = 1; k < vcount - 1; ) {\r\n\r\n\t\t\t\t\t\tfaces.push( new THREE.Face3( vs[0], vs[k], vs[k + 1], ns.length ? [ ns[0].clone(), ns[k ++].clone(), ns[k].clone() ] : [], clr ) );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( faces.length ) {\r\n\r\n\t\t\t\t\tfor ( var ndx = 0, len = faces.length; ndx < len; ndx ++ ) {\r\n\r\n\t\t\t\t\t\tface = faces[ndx];\r\n\t\t\t\t\t\tface.daeMaterial = primitive.material;\r\n\t\t\t\t\t\tgeom.faces.push( face );\r\n\r\n\t\t\t\t\t\tfor ( k = 0; k < texture_sets.length; k ++ ) {\r\n\r\n\t\t\t\t\t\t\tuv = ts[ texture_sets[k] ];\r\n\r\n\t\t\t\t\t\t\tif ( vcount > 4 ) {\r\n\r\n\t\t\t\t\t\t\t\t// Grab the right UVs for the vertices in this face\r\n\t\t\t\t\t\t\t\tuvArr = [ uv[0], uv[ndx + 1], uv[ndx + 2] ];\r\n\r\n\t\t\t\t\t\t\t} else if ( vcount === 4 ) {\r\n\r\n\t\t\t\t\t\t\t\tif ( ndx === 0 ) {\r\n\r\n\t\t\t\t\t\t\t\t\tuvArr = [ uv[0], uv[1], uv[3] ];\r\n\r\n\t\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\t\tuvArr = [ uv[1].clone(), uv[2], uv[3].clone() ];\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\tuvArr = [ uv[0], uv[1], uv[2] ];\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif ( geom.faceVertexUvs[k] === undefined ) {\r\n\r\n\t\t\t\t\t\t\t\tgeom.faceVertexUvs[k] = [];\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tgeom.faceVertexUvs[k].push( uvArr );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconsole.log( 'dropped face with vcount ' + vcount + ' for geometry with id: ' + geom.id );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ti += maxOffset * vcount;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tfunction Polygons () {\r\n\r\n\t\tthis.material = \"\";\r\n\t\tthis.count = 0;\r\n\t\tthis.inputs = [];\r\n\t\tthis.vcount = null;\r\n\t\tthis.p = [];\r\n\t\tthis.geometry = new THREE.Geometry();\r\n\r\n\t}\r\n\r\n\tPolygons.prototype.setVertices = function ( vertices ) {\r\n\r\n\t\tfor ( var i = 0; i < this.inputs.length; i ++ ) {\r\n\r\n\t\t\tif ( this.inputs[ i ].source === vertices.id ) {\r\n\r\n\t\t\t\tthis.inputs[ i ].source = vertices.input[ 'POSITION' ].source;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tPolygons.prototype.parse = function ( element ) {\r\n\r\n\t\tthis.material = element.getAttribute( 'material' );\r\n\t\tthis.count = _attr_as_int( element, 'count', 0 );\r\n\r\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tvar child = element.childNodes[ i ];\r\n\r\n\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\tcase 'input':\r\n\r\n\t\t\t\t\tthis.inputs.push( ( new Input() ).parse( element.childNodes[ i ] ) );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'vcount':\r\n\r\n\t\t\t\t\tthis.vcount = _ints( child.textContent );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'p':\r\n\r\n\t\t\t\t\tthis.p.push( _ints( child.textContent ) );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'ph':\r\n\r\n\t\t\t\t\tconsole.warn( 'polygon holes not yet supported!' );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tfunction Polylist () {\r\n\r\n\t\tPolygons.call( this );\r\n\r\n\t\tthis.vcount = [];\r\n\r\n\t}\r\n\r\n\tPolylist.prototype = Object.create( Polygons.prototype );\r\n\tPolylist.prototype.constructor = Polylist;\r\n\r\n\tfunction LineStrips() {\r\n\r\n\t\tPolygons.call( this );\r\n\r\n\t\tthis.vcount = 1;\r\n\r\n\t}\r\n\r\n\tLineStrips.prototype = Object.create( Polygons.prototype );\r\n\tLineStrips.prototype.constructor = LineStrips;\r\n\r\n\tfunction Triangles () {\r\n\r\n\t\tPolygons.call( this );\r\n\r\n\t\tthis.vcount = 3;\r\n\r\n\t}\r\n\r\n\tTriangles.prototype = Object.create( Polygons.prototype );\r\n\tTriangles.prototype.constructor = Triangles;\r\n\r\n\tfunction Accessor() {\r\n\r\n\t\tthis.source = \"\";\r\n\t\tthis.count = 0;\r\n\t\tthis.stride = 0;\r\n\t\tthis.params = [];\r\n\r\n\t}\r\n\r\n\tAccessor.prototype.parse = function ( element ) {\r\n\r\n\t\tthis.params = [];\r\n\t\tthis.source = element.getAttribute( 'source' );\r\n\t\tthis.count = _attr_as_int( element, 'count', 0 );\r\n\t\tthis.stride = _attr_as_int( element, 'stride', 0 );\r\n\r\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tvar child = element.childNodes[ i ];\r\n\r\n\t\t\tif ( child.nodeName === 'param' ) {\r\n\r\n\t\t\t\tvar param = {};\r\n\t\t\t\tparam[ 'name' ] = child.getAttribute( 'name' );\r\n\t\t\t\tparam[ 'type' ] = child.getAttribute( 'type' );\r\n\t\t\t\tthis.params.push( param );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tfunction Vertices() {\r\n\r\n\t\tthis.input = {};\r\n\r\n\t}\r\n\r\n\tVertices.prototype.parse = function ( element ) {\r\n\r\n\t\tthis.id = element.getAttribute('id');\r\n\r\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tif ( element.childNodes[i].nodeName === 'input' ) {\r\n\r\n\t\t\t\tvar input = ( new Input() ).parse( element.childNodes[ i ] );\r\n\t\t\t\tthis.input[ input.semantic ] = input;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tfunction Input () {\r\n\r\n\t\tthis.semantic = \"\";\r\n\t\tthis.offset = 0;\r\n\t\tthis.source = \"\";\r\n\t\tthis.set = 0;\r\n\r\n\t}\r\n\r\n\tInput.prototype.parse = function ( element ) {\r\n\r\n\t\tthis.semantic = element.getAttribute('semantic');\r\n\t\tthis.source = element.getAttribute('source').replace(/^#/, '');\r\n\t\tthis.set = _attr_as_int(element, 'set', -1);\r\n\t\tthis.offset = _attr_as_int(element, 'offset', 0);\r\n\r\n\t\tif ( this.semantic === 'TEXCOORD' && this.set < 0 ) {\r\n\r\n\t\t\tthis.set = 0;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tfunction Source ( id ) {\r\n\r\n\t\tthis.id = id;\r\n\t\tthis.type = null;\r\n\r\n\t}\r\n\r\n\tSource.prototype.parse = function ( element ) {\r\n\r\n\t\tthis.id = element.getAttribute( 'id' );\r\n\r\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tvar child = element.childNodes[i];\r\n\r\n\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\tcase 'bool_array':\r\n\r\n\t\t\t\t\tthis.data = _bools( child.textContent );\r\n\t\t\t\t\tthis.type = child.nodeName;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'float_array':\r\n\r\n\t\t\t\t\tthis.data = _floats( child.textContent );\r\n\t\t\t\t\tthis.type = child.nodeName;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'int_array':\r\n\r\n\t\t\t\t\tthis.data = _ints( child.textContent );\r\n\t\t\t\t\tthis.type = child.nodeName;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'IDREF_array':\r\n\t\t\t\tcase 'Name_array':\r\n\r\n\t\t\t\t\tthis.data = _strings( child.textContent );\r\n\t\t\t\t\tthis.type = child.nodeName;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'technique_common':\r\n\r\n\t\t\t\t\tfor ( var j = 0; j < child.childNodes.length; j ++ ) {\r\n\r\n\t\t\t\t\t\tif ( child.childNodes[ j ].nodeName === 'accessor' ) {\r\n\r\n\t\t\t\t\t\t\tthis.accessor = ( new Accessor() ).parse( child.childNodes[ j ] );\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\t// console.log(child.nodeName);\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tSource.prototype.read = function () {\r\n\r\n\t\tvar result = [];\r\n\r\n\t\t//for (var i = 0; i < this.accessor.params.length; i++) {\r\n\r\n\t\tvar param = this.accessor.params[ 0 ];\r\n\r\n\t\t\t//console.log(param.name + \" \" + param.type);\r\n\r\n\t\tswitch ( param.type ) {\r\n\r\n\t\t\tcase 'IDREF':\r\n\t\t\tcase 'Name': case 'name':\r\n\t\t\tcase 'float':\r\n\r\n\t\t\t\treturn this.data;\r\n\r\n\t\t\tcase 'float4x4':\r\n\r\n\t\t\t\tfor ( var j = 0; j < this.data.length; j += 16 ) {\r\n\r\n\t\t\t\t\tvar s = this.data.slice( j, j + 16 );\r\n\t\t\t\t\tvar m = getConvertedMat4( s );\r\n\t\t\t\t\tresult.push( m );\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\r\n\t\t\t\tconsole.log( 'ColladaLoader: Source: Read dont know how to read ' + param.type + '.' );\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\t//}\r\n\r\n\t\treturn result;\r\n\r\n\t};\r\n\r\n\tfunction Material () {\r\n\r\n\t\tthis.id = \"\";\r\n\t\tthis.name = \"\";\r\n\t\tthis.instance_effect = null;\r\n\r\n\t}\r\n\r\n\tMaterial.prototype.parse = function ( element ) {\r\n\r\n\t\tthis.id = element.getAttribute( 'id' );\r\n\t\tthis.name = element.getAttribute( 'name' );\r\n\r\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tif ( element.childNodes[ i ].nodeName === 'instance_effect' ) {\r\n\r\n\t\t\t\tthis.instance_effect = ( new InstanceEffect() ).parse( element.childNodes[ i ] );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tfunction ColorOrTexture () {\r\n\r\n\t\tthis.color = new THREE.Color();\r\n\t\tthis.color.setRGB( Math.random(), Math.random(), Math.random() );\r\n\t\tthis.color.a = 1.0;\r\n\r\n\t\tthis.texture = null;\r\n\t\tthis.texcoord = null;\r\n\t\tthis.texOpts = null;\r\n\r\n\t}\r\n\r\n\tColorOrTexture.prototype.isColor = function () {\r\n\r\n\t\treturn ( this.texture === null );\r\n\r\n\t};\r\n\r\n\tColorOrTexture.prototype.isTexture = function () {\r\n\r\n\t\treturn ( this.texture != null );\r\n\r\n\t};\r\n\r\n\tColorOrTexture.prototype.parse = function ( element ) {\r\n\r\n\t\tif (element.nodeName === 'transparent') {\r\n\r\n\t\t\tthis.opaque = element.getAttribute('opaque');\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tvar child = element.childNodes[ i ];\r\n\t\t\tif ( child.nodeType != 1 ) continue;\r\n\r\n\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\tcase 'color':\r\n\r\n\t\t\t\t\tvar rgba = _floats( child.textContent );\r\n\t\t\t\t\tthis.color = new THREE.Color();\r\n\t\t\t\t\tthis.color.setRGB( rgba[0], rgba[1], rgba[2] );\r\n\t\t\t\t\tthis.color.a = rgba[3];\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'texture':\r\n\r\n\t\t\t\t\tthis.texture = child.getAttribute('texture');\r\n\t\t\t\t\tthis.texcoord = child.getAttribute('texcoord');\r\n\t\t\t\t\t// Defaults from:\r\n\t\t\t\t\t// https://collada.org/mediawiki/index.php/Maya_texture_placement_MAYA_extension\r\n\t\t\t\t\tthis.texOpts = {\r\n\t\t\t\t\t\toffsetU: 0,\r\n\t\t\t\t\t\toffsetV: 0,\r\n\t\t\t\t\t\trepeatU: 1,\r\n\t\t\t\t\t\trepeatV: 1,\r\n\t\t\t\t\t\twrapU: 1,\r\n\t\t\t\t\t\twrapV: 1\r\n\t\t\t\t\t};\r\n\t\t\t\t\tthis.parseTexture( child );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tColorOrTexture.prototype.parseTexture = function ( element ) {\r\n\r\n\t\tif ( ! element.childNodes ) return this;\r\n\r\n\t\t// This should be supported by Maya, 3dsMax, and MotionBuilder\r\n\r\n\t\tif ( element.childNodes[1] && element.childNodes[1].nodeName === 'extra' ) {\r\n\r\n\t\t\telement = element.childNodes[1];\r\n\r\n\t\t\tif ( element.childNodes[1] && element.childNodes[1].nodeName === 'technique' ) {\r\n\r\n\t\t\t\telement = element.childNodes[1];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tvar child = element.childNodes[ i ];\r\n\r\n\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\tcase 'offsetU':\r\n\t\t\t\tcase 'offsetV':\r\n\t\t\t\tcase 'repeatU':\r\n\t\t\t\tcase 'repeatV':\r\n\r\n\t\t\t\t\tthis.texOpts[ child.nodeName ] = parseFloat( child.textContent );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'wrapU':\r\n\t\t\t\tcase 'wrapV':\r\n\r\n\t\t\t\t\t// some dae have a value of true which becomes NaN via parseInt\r\n\r\n\t\t\t\t\tif ( child.textContent.toUpperCase() === 'TRUE' ) {\r\n\r\n\t\t\t\t\t\tthis.texOpts[ child.nodeName ] = 1;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tthis.texOpts[ child.nodeName ] = parseInt( child.textContent );\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\r\n\t\t\t\t\tthis.texOpts[ child.nodeName ] = child.textContent;\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tfunction Shader ( type, effect ) {\r\n\r\n\t\tthis.type = type;\r\n\t\tthis.effect = effect;\r\n\t\tthis.material = null;\r\n\r\n\t}\r\n\r\n\tShader.prototype.parse = function ( element ) {\r\n\r\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tvar child = element.childNodes[ i ];\r\n\t\t\tif ( child.nodeType != 1 ) continue;\r\n\r\n\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\tcase 'emission':\r\n\t\t\t\tcase 'diffuse':\r\n\t\t\t\tcase 'specular':\r\n\t\t\t\tcase 'transparent':\r\n\r\n\t\t\t\t\tthis[ child.nodeName ] = ( new ColorOrTexture() ).parse( child );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'bump':\r\n\r\n\t\t\t\t\t// If 'bumptype' is 'heightfield', create a 'bump' property\r\n\t\t\t\t\t// Else if 'bumptype' is 'normalmap', create a 'normal' property\r\n\t\t\t\t\t// (Default to 'bump')\r\n\t\t\t\t\tvar bumpType = child.getAttribute( 'bumptype' );\r\n\t\t\t\t\tif ( bumpType ) {\r\n\t\t\t\t\t\tif ( bumpType.toLowerCase() === \"heightfield\" ) {\r\n\t\t\t\t\t\t\tthis[ 'bump' ] = ( new ColorOrTexture() ).parse( child );\r\n\t\t\t\t\t\t} else if ( bumpType.toLowerCase() === \"normalmap\" ) {\r\n\t\t\t\t\t\t\tthis[ 'normal' ] = ( new ColorOrTexture() ).parse( child );\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tconsole.error( \"Shader.prototype.parse: Invalid value for attribute 'bumptype' (\" + bumpType + \") - valid bumptypes are 'HEIGHTFIELD' and 'NORMALMAP' - defaulting to 'HEIGHTFIELD'\" );\r\n\t\t\t\t\t\t\tthis[ 'bump' ] = ( new ColorOrTexture() ).parse( child );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.warn( \"Shader.prototype.parse: Attribute 'bumptype' missing from bump node - defaulting to 'HEIGHTFIELD'\" );\r\n\t\t\t\t\t\tthis[ 'bump' ] = ( new ColorOrTexture() ).parse( child );\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'shininess':\r\n\t\t\t\tcase 'reflectivity':\r\n\t\t\t\tcase 'index_of_refraction':\r\n\t\t\t\tcase 'transparency':\r\n\r\n\t\t\t\t\tvar f = child.querySelectorAll('float');\r\n\r\n\t\t\t\t\tif ( f.length > 0 )\r\n\t\t\t\t\t\tthis[ child.nodeName ] = parseFloat( f[ 0 ].textContent );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.create();\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tShader.prototype.create = function() {\r\n\r\n\t\tvar props = {};\r\n\r\n\t\tvar transparent = false;\r\n\r\n\t\tif (this['transparency'] !== undefined && this['transparent'] !== undefined) {\r\n\t\t\t// convert transparent color RBG to average value\r\n\t\t\tvar transparentColor = this['transparent'];\r\n\t\t\tvar transparencyLevel = (this.transparent.color.r + this.transparent.color.g + this.transparent.color.b) / 3 * this.transparency;\r\n\r\n\t\t\tif (transparencyLevel > 0) {\r\n\t\t\t\ttransparent = true;\r\n\t\t\t\tprops[ 'transparent' ] = true;\r\n\t\t\t\tprops[ 'opacity' ] = 1 - transparencyLevel;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar keys = {\r\n\t\t\t'diffuse':'map',\r\n\t\t\t'ambient':'lightMap',\r\n\t\t\t'specular':'specularMap',\r\n\t\t\t'emission':'emissionMap',\r\n\t\t\t'bump':'bumpMap',\r\n\t\t\t'normal':'normalMap'\r\n\t\t\t};\r\n\r\n\t\tfor ( var prop in this ) {\r\n\r\n\t\t\tswitch ( prop ) {\r\n\r\n\t\t\t\tcase 'ambient':\r\n\t\t\t\tcase 'emission':\r\n\t\t\t\tcase 'diffuse':\r\n\t\t\t\tcase 'specular':\r\n\t\t\t\tcase 'bump':\r\n\t\t\t\tcase 'normal':\r\n\r\n\t\t\t\t\tvar cot = this[ prop ];\r\n\r\n\t\t\t\t\tif ( cot instanceof ColorOrTexture ) {\r\n\r\n\t\t\t\t\t\tif ( cot.isTexture() ) {\r\n\r\n\t\t\t\t\t\t\tvar samplerId = cot.texture;\r\n\t\t\t\t\t\t\tvar sampler = this.effect.sampler[samplerId];\r\n\r\n\t\t\t\t\t\t\tif ( sampler !== undefined && sampler.source !== undefined ) {\r\n\r\n\t\t\t\t\t\t\t\tvar surface = this.effect.surface[sampler.source];\r\n\r\n\t\t\t\t\t\t\t\tif ( surface !== undefined ) {\r\n\r\n\t\t\t\t\t\t\t\t\tvar image = images[ surface.init_from ];\r\n\r\n\t\t\t\t\t\t\t\t\tif ( image ) {\r\n\r\n\t\t\t\t\t\t\t\t\t\tvar url = baseUrl + image.init_from;\r\n\r\n\t\t\t\t\t\t\t\t\t\tvar texture;\r\n\t\t\t\t\t\t\t\t\t\tvar loader = THREE.Loader.Handlers.get( url );\r\n\r\n\t\t\t\t\t\t\t\t\t\tif ( loader !== null ) {\r\n\r\n\t\t\t\t\t\t\t\t\t\t\ttexture = loader.load( url );\r\n\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\t\t\t\ttexture = new THREE.Texture();\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tloadTextureImage( texture, url );\r\n\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\tif ( sampler.wrap_s === \"MIRROR\" ) {\r\n\r\n\t\t\t\t\t\t\t\t\t\t\ttexture.wrapS = THREE.MirroredRepeatWrapping;\r\n\r\n\t\t\t\t\t\t\t\t\t\t} else if ( sampler.wrap_s === \"WRAP\" || cot.texOpts.wrapU ) {\r\n\r\n\t\t\t\t\t\t\t\t\t\t\ttexture.wrapS = THREE.RepeatWrapping;\r\n\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\t\t\t\ttexture.wrapS = THREE.ClampToEdgeWrapping;\r\n\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\tif ( sampler.wrap_t === \"MIRROR\" ) {\r\n\r\n\t\t\t\t\t\t\t\t\t\t\ttexture.wrapT = THREE.MirroredRepeatWrapping;\r\n\r\n\t\t\t\t\t\t\t\t\t\t} else if ( sampler.wrap_t === \"WRAP\" || cot.texOpts.wrapV ) {\r\n\r\n\t\t\t\t\t\t\t\t\t\t\ttexture.wrapT = THREE.RepeatWrapping;\r\n\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\t\t\t\ttexture.wrapT = THREE.ClampToEdgeWrapping;\r\n\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\ttexture.offset.x = cot.texOpts.offsetU;\r\n\t\t\t\t\t\t\t\t\t\ttexture.offset.y = cot.texOpts.offsetV;\r\n\t\t\t\t\t\t\t\t\t\ttexture.repeat.x = cot.texOpts.repeatU;\r\n\t\t\t\t\t\t\t\t\t\ttexture.repeat.y = cot.texOpts.repeatV;\r\n\t\t\t\t\t\t\t\t\t\tprops[keys[prop]] = texture;\r\n\r\n\t\t\t\t\t\t\t\t\t\t// Texture with baked lighting?\r\n\t\t\t\t\t\t\t\t\t\tif (prop === 'emission') props['emissive'] = 0xffffff;\r\n\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t} else if ( prop === 'diffuse' || !transparent ) {\r\n\r\n\t\t\t\t\t\t\tif ( prop === 'emission' ) {\r\n\r\n\t\t\t\t\t\t\t\tprops[ 'emissive' ] = cot.color.getHex();\r\n\r\n\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\tprops[ prop ] = cot.color.getHex();\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'shininess':\r\n\r\n\t\t\t\t\tprops[ prop ] = this[ prop ];\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'reflectivity':\r\n\r\n\t\t\t\t\tprops[ prop ] = this[ prop ];\r\n\t\t\t\t\tif ( props[ prop ] > 0.0 ) props['envMap'] = options.defaultEnvMap;\r\n\t\t\t\t\tprops['combine'] = THREE.MixOperation;\t//mix regular shading with reflective component\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'index_of_refraction':\r\n\r\n\t\t\t\t\tprops[ 'refractionRatio' ] = this[ prop ]; //TODO: \"index_of_refraction\" becomes \"refractionRatio\" in shader, but I'm not sure if the two are actually comparable\r\n\t\t\t\t\tif ( this[ prop ] !== 1.0 ) props['envMap'] = options.defaultEnvMap;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'transparency':\r\n\t\t\t\t\t// gets figured out up top\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tprops[ 'shading' ] = preferredShading;\r\n\t\tprops[ 'side' ] = this.effect.doubleSided ? THREE.DoubleSide : THREE.FrontSide;\r\n\r\n\t\tif ( props.diffuse !== undefined ) {\r\n\r\n\t\t\tprops.color = props.diffuse;\r\n\t\t\tdelete props.diffuse;\r\n\r\n\t\t}\r\n\r\n\t\tswitch ( this.type ) {\r\n\r\n\t\t\tcase 'constant':\r\n\r\n\t\t\t\tif (props.emissive != undefined) props.color = props.emissive;\r\n\t\t\t\tthis.material = new THREE.MeshBasicMaterial( props );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'phong':\r\n\t\t\tcase 'blinn':\r\n\r\n\t\t\t\tthis.material = new THREE.MeshPhongMaterial( props );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'lambert':\r\n\t\t\tdefault:\r\n\r\n\t\t\t\tthis.material = new THREE.MeshLambertMaterial( props );\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\treturn this.material;\r\n\r\n\t};\r\n\r\n\tfunction Surface ( effect ) {\r\n\r\n\t\tthis.effect = effect;\r\n\t\tthis.init_from = null;\r\n\t\tthis.format = null;\r\n\r\n\t}\r\n\r\n\tSurface.prototype.parse = function ( element ) {\r\n\r\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tvar child = element.childNodes[ i ];\r\n\t\t\tif ( child.nodeType != 1 ) continue;\r\n\r\n\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\tcase 'init_from':\r\n\r\n\t\t\t\t\tthis.init_from = child.textContent;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'format':\r\n\r\n\t\t\t\t\tthis.format = child.textContent;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\r\n\t\t\t\t\tconsole.log( \"unhandled Surface prop: \" + child.nodeName );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tfunction Sampler2D ( effect ) {\r\n\r\n\t\tthis.effect = effect;\r\n\t\tthis.source = null;\r\n\t\tthis.wrap_s = null;\r\n\t\tthis.wrap_t = null;\r\n\t\tthis.minfilter = null;\r\n\t\tthis.magfilter = null;\r\n\t\tthis.mipfilter = null;\r\n\r\n\t}\r\n\r\n\tSampler2D.prototype.parse = function ( element ) {\r\n\r\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tvar child = element.childNodes[ i ];\r\n\t\t\tif ( child.nodeType != 1 ) continue;\r\n\r\n\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\tcase 'source':\r\n\r\n\t\t\t\t\tthis.source = child.textContent;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'minfilter':\r\n\r\n\t\t\t\t\tthis.minfilter = child.textContent;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'magfilter':\r\n\r\n\t\t\t\t\tthis.magfilter = child.textContent;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'mipfilter':\r\n\r\n\t\t\t\t\tthis.mipfilter = child.textContent;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'wrap_s':\r\n\r\n\t\t\t\t\tthis.wrap_s = child.textContent;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'wrap_t':\r\n\r\n\t\t\t\t\tthis.wrap_t = child.textContent;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\r\n\t\t\t\t\tconsole.log( \"unhandled Sampler2D prop: \" + child.nodeName );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tfunction Effect () {\r\n\r\n\t\tthis.id = \"\";\r\n\t\tthis.name = \"\";\r\n\t\tthis.shader = null;\r\n\t\tthis.surface = {};\r\n\t\tthis.sampler = {};\r\n\r\n\t}\r\n\r\n\tEffect.prototype.create = function () {\r\n\r\n\t\tif ( this.shader === null ) {\r\n\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tEffect.prototype.parse = function ( element ) {\r\n\r\n\t\tthis.id = element.getAttribute( 'id' );\r\n\t\tthis.name = element.getAttribute( 'name' );\r\n\r\n\t\textractDoubleSided( this, element );\r\n\r\n\t\tthis.shader = null;\r\n\r\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tvar child = element.childNodes[ i ];\r\n\t\t\tif ( child.nodeType != 1 ) continue;\r\n\r\n\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\tcase 'profile_COMMON':\r\n\r\n\t\t\t\t\tthis.parseTechnique( this.parseProfileCOMMON( child ) );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tEffect.prototype.parseNewparam = function ( element ) {\r\n\r\n\t\tvar sid = element.getAttribute( 'sid' );\r\n\r\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tvar child = element.childNodes[ i ];\r\n\t\t\tif ( child.nodeType != 1 ) continue;\r\n\r\n\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\tcase 'surface':\r\n\r\n\t\t\t\t\tthis.surface[sid] = ( new Surface( this ) ).parse( child );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'sampler2D':\r\n\r\n\t\t\t\t\tthis.sampler[sid] = ( new Sampler2D( this ) ).parse( child );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'extra':\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\r\n\t\t\t\t\tconsole.log( child.nodeName );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tEffect.prototype.parseProfileCOMMON = function ( element ) {\r\n\r\n\t\tvar technique;\r\n\r\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tvar child = element.childNodes[ i ];\r\n\r\n\t\t\tif ( child.nodeType != 1 ) continue;\r\n\r\n\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\tcase 'profile_COMMON':\r\n\r\n\t\t\t\t\tthis.parseProfileCOMMON( child );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'technique':\r\n\r\n\t\t\t\t\ttechnique = child;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'newparam':\r\n\r\n\t\t\t\t\tthis.parseNewparam( child );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'image':\r\n\r\n\t\t\t\t\tvar _image = ( new _Image() ).parse( child );\r\n\t\t\t\t\timages[ _image.id ] = _image;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'extra':\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\r\n\t\t\t\t\tconsole.log( child.nodeName );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn technique;\r\n\r\n\t};\r\n\r\n\tEffect.prototype.parseTechnique = function ( element ) {\r\n\r\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tvar child = element.childNodes[i];\r\n\t\t\tif ( child.nodeType != 1 ) continue;\r\n\r\n\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\tcase 'constant':\r\n\t\t\t\tcase 'lambert':\r\n\t\t\t\tcase 'blinn':\r\n\t\t\t\tcase 'phong':\r\n\r\n\t\t\t\t\tthis.shader = ( new Shader( child.nodeName, this ) ).parse( child );\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'extra':\r\n\t\t\t\t\tthis.parseExtra(child);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tEffect.prototype.parseExtra = function ( element ) {\r\n\r\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tvar child = element.childNodes[i];\r\n\t\t\tif ( child.nodeType != 1 ) continue;\r\n\r\n\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\tcase 'technique':\r\n\t\t\t\t\tthis.parseExtraTechnique( child );\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tEffect.prototype.parseExtraTechnique = function ( element ) {\r\n\r\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tvar child = element.childNodes[i];\r\n\t\t\tif ( child.nodeType != 1 ) continue;\r\n\r\n\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\tcase 'bump':\r\n\t\t\t\t\tthis.shader.parse( element );\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tfunction InstanceEffect () {\r\n\r\n\t\tthis.url = \"\";\r\n\r\n\t}\r\n\r\n\tInstanceEffect.prototype.parse = function ( element ) {\r\n\r\n\t\tthis.url = element.getAttribute( 'url' ).replace( /^#/, '' );\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tfunction Animation() {\r\n\r\n\t\tthis.id = \"\";\r\n\t\tthis.name = \"\";\r\n\t\tthis.source = {};\r\n\t\tthis.sampler = [];\r\n\t\tthis.channel = [];\r\n\r\n\t}\r\n\r\n\tAnimation.prototype.parse = function ( element ) {\r\n\r\n\t\tthis.id = element.getAttribute( 'id' );\r\n\t\tthis.name = element.getAttribute( 'name' );\r\n\t\tthis.source = {};\r\n\r\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tvar child = element.childNodes[ i ];\r\n\r\n\t\t\tif ( child.nodeType != 1 ) continue;\r\n\r\n\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\tcase 'animation':\r\n\r\n\t\t\t\t\tvar anim = ( new Animation() ).parse( child );\r\n\r\n\t\t\t\t\tfor ( var src in anim.source ) {\r\n\r\n\t\t\t\t\t\tthis.source[ src ] = anim.source[ src ];\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor ( var j = 0; j < anim.channel.length; j ++ ) {\r\n\r\n\t\t\t\t\t\tthis.channel.push( anim.channel[ j ] );\r\n\t\t\t\t\t\tthis.sampler.push( anim.sampler[ j ] );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'source':\r\n\r\n\t\t\t\t\tvar src = ( new Source() ).parse( child );\r\n\t\t\t\t\tthis.source[ src.id ] = src;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'sampler':\r\n\r\n\t\t\t\t\tthis.sampler.push( ( new Sampler( this ) ).parse( child ) );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'channel':\r\n\r\n\t\t\t\t\tthis.channel.push( ( new Channel( this ) ).parse( child ) );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tfunction Channel( animation ) {\r\n\r\n\t\tthis.animation = animation;\r\n\t\tthis.source = \"\";\r\n\t\tthis.target = \"\";\r\n\t\tthis.fullSid = null;\r\n\t\tthis.sid = null;\r\n\t\tthis.dotSyntax = null;\r\n\t\tthis.arrSyntax = null;\r\n\t\tthis.arrIndices = null;\r\n\t\tthis.member = null;\r\n\r\n\t}\r\n\r\n\tChannel.prototype.parse = function ( element ) {\r\n\r\n\t\tthis.source = element.getAttribute( 'source' ).replace( /^#/, '' );\r\n\t\tthis.target = element.getAttribute( 'target' );\r\n\r\n\t\tvar parts = this.target.split( '/' );\r\n\r\n\t\tvar id = parts.shift();\r\n\t\tvar sid = parts.shift();\r\n\r\n\t\tvar dotSyntax = ( sid.indexOf(\".\") >= 0 );\r\n\t\tvar arrSyntax = ( sid.indexOf(\"(\") >= 0 );\r\n\r\n\t\tif ( dotSyntax ) {\r\n\r\n\t\t\tparts = sid.split(\".\");\r\n\t\t\tthis.sid = parts.shift();\r\n\t\t\tthis.member = parts.shift();\r\n\r\n\t\t} else if ( arrSyntax ) {\r\n\r\n\t\t\tvar arrIndices = sid.split(\"(\");\r\n\t\t\tthis.sid = arrIndices.shift();\r\n\r\n\t\t\tfor (var j = 0; j < arrIndices.length; j ++ ) {\r\n\r\n\t\t\t\tarrIndices[j] = parseInt( arrIndices[j].replace(/\\)/, '') );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.arrIndices = arrIndices;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.sid = sid;\r\n\r\n\t\t}\r\n\r\n\t\tthis.fullSid = sid;\r\n\t\tthis.dotSyntax = dotSyntax;\r\n\t\tthis.arrSyntax = arrSyntax;\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tfunction Sampler ( animation ) {\r\n\r\n\t\tthis.id = \"\";\r\n\t\tthis.animation = animation;\r\n\t\tthis.inputs = [];\r\n\t\tthis.input = null;\r\n\t\tthis.output = null;\r\n\t\tthis.strideOut = null;\r\n\t\tthis.interpolation = null;\r\n\t\tthis.startTime = null;\r\n\t\tthis.endTime = null;\r\n\t\tthis.duration = 0;\r\n\r\n\t}\r\n\r\n\tSampler.prototype.parse = function ( element ) {\r\n\r\n\t\tthis.id = element.getAttribute( 'id' );\r\n\t\tthis.inputs = [];\r\n\r\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tvar child = element.childNodes[ i ];\r\n\t\t\tif ( child.nodeType != 1 ) continue;\r\n\r\n\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\tcase 'input':\r\n\r\n\t\t\t\t\tthis.inputs.push( (new Input()).parse( child ) );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tSampler.prototype.create = function () {\r\n\r\n\t\tfor ( var i = 0; i < this.inputs.length; i ++ ) {\r\n\r\n\t\t\tvar input = this.inputs[ i ];\r\n\t\t\tvar source = this.animation.source[ input.source ];\r\n\r\n\t\t\tswitch ( input.semantic ) {\r\n\r\n\t\t\t\tcase 'INPUT':\r\n\r\n\t\t\t\t\tthis.input = source.read();\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'OUTPUT':\r\n\r\n\t\t\t\t\tthis.output = source.read();\r\n\t\t\t\t\tthis.strideOut = source.accessor.stride;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'INTERPOLATION':\r\n\r\n\t\t\t\t\tthis.interpolation = source.read();\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'IN_TANGENT':\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'OUT_TANGENT':\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\r\n\t\t\t\t\tconsole.log(input.semantic);\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.startTime = 0;\r\n\t\tthis.endTime = 0;\r\n\t\tthis.duration = 0;\r\n\r\n\t\tif ( this.input.length ) {\r\n\r\n\t\t\tthis.startTime = 100000000;\r\n\t\t\tthis.endTime = -100000000;\r\n\r\n\t\t\tfor ( var i = 0; i < this.input.length; i ++ ) {\r\n\r\n\t\t\t\tthis.startTime = Math.min( this.startTime, this.input[ i ] );\r\n\t\t\t\tthis.endTime = Math.max( this.endTime, this.input[ i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.duration = this.endTime - this.startTime;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tSampler.prototype.getData = function ( type, ndx, member ) {\r\n\r\n\t\tvar data;\r\n\r\n\t\tif ( type === 'matrix' && this.strideOut === 16 ) {\r\n\r\n\t\t\tdata = this.output[ ndx ];\r\n\r\n\t\t} else if ( this.strideOut > 1 ) {\r\n\r\n\t\t\tdata = [];\r\n\t\t\tndx *= this.strideOut;\r\n\r\n\t\t\tfor ( var i = 0; i < this.strideOut; ++ i ) {\r\n\r\n\t\t\t\tdata[ i ] = this.output[ ndx + i ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( this.strideOut === 3 ) {\r\n\r\n\t\t\t\tswitch ( type ) {\r\n\r\n\t\t\t\t\tcase 'rotate':\r\n\t\t\t\t\tcase 'translate':\r\n\r\n\t\t\t\t\t\tfixCoords( data, -1 );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'scale':\r\n\r\n\t\t\t\t\t\tfixCoords( data, 1 );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( this.strideOut === 4 && type === 'matrix' ) {\r\n\r\n\t\t\t\tfixCoords( data, -1 );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tdata = this.output[ ndx ];\r\n\r\n\t\t\tif ( member && type === 'translate' ) {\r\n\t\t\t\tdata = getConvertedTranslation( member, data );\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\r\n\t};\r\n\r\n\tfunction Key ( time ) {\r\n\r\n\t\tthis.targets = [];\r\n\t\tthis.time = time;\r\n\r\n\t}\r\n\r\n\tKey.prototype.addTarget = function ( fullSid, transform, member, data ) {\r\n\r\n\t\tthis.targets.push( {\r\n\t\t\tsid: fullSid,\r\n\t\t\tmember: member,\r\n\t\t\ttransform: transform,\r\n\t\t\tdata: data\r\n\t\t} );\r\n\r\n\t};\r\n\r\n\tKey.prototype.apply = function ( opt_sid ) {\r\n\r\n\t\tfor ( var i = 0; i < this.targets.length; ++ i ) {\r\n\r\n\t\t\tvar target = this.targets[ i ];\r\n\r\n\t\t\tif ( !opt_sid || target.sid === opt_sid ) {\r\n\r\n\t\t\t\ttarget.transform.update( target.data, target.member );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tKey.prototype.getTarget = function ( fullSid ) {\r\n\r\n\t\tfor ( var i = 0; i < this.targets.length; ++ i ) {\r\n\r\n\t\t\tif ( this.targets[ i ].sid === fullSid ) {\r\n\r\n\t\t\t\treturn this.targets[ i ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t};\r\n\r\n\tKey.prototype.hasTarget = function ( fullSid ) {\r\n\r\n\t\tfor ( var i = 0; i < this.targets.length; ++ i ) {\r\n\r\n\t\t\tif ( this.targets[ i ].sid === fullSid ) {\r\n\r\n\t\t\t\treturn true;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\r\n\t};\r\n\r\n\t// TODO: Currently only doing linear interpolation. Should support full COLLADA spec.\r\n\tKey.prototype.interpolate = function ( nextKey, time ) {\r\n\r\n\t\tfor ( var i = 0, l = this.targets.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar target = this.targets[ i ],\r\n\t\t\t\tnextTarget = nextKey.getTarget( target.sid ),\r\n\t\t\t\tdata;\r\n\r\n\t\t\tif ( target.transform.type !== 'matrix' && nextTarget ) {\r\n\r\n\t\t\t\tvar scale = ( time - this.time ) / ( nextKey.time - this.time ),\r\n\t\t\t\t\tnextData = nextTarget.data,\r\n\t\t\t\t\tprevData = target.data;\r\n\r\n\t\t\t\tif ( scale < 0 ) scale = 0;\r\n\t\t\t\tif ( scale > 1 ) scale = 1;\r\n\r\n\t\t\t\tif ( prevData.length ) {\r\n\r\n\t\t\t\t\tdata = [];\r\n\r\n\t\t\t\t\tfor ( var j = 0; j < prevData.length; ++ j ) {\r\n\r\n\t\t\t\t\t\tdata[ j ] = prevData[ j ] + ( nextData[ j ] - prevData[ j ] ) * scale;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tdata = prevData + ( nextData - prevData ) * scale;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tdata = target.data;\r\n\r\n\t\t\t}\r\n\r\n\t\t\ttarget.transform.update( data, target.member );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\t// Camera\r\n\tfunction Camera() {\r\n\r\n\t\tthis.id = \"\";\r\n\t\tthis.name = \"\";\r\n\t\tthis.technique = \"\";\r\n\r\n\t}\r\n\r\n\tCamera.prototype.parse = function ( element ) {\r\n\r\n\t\tthis.id = element.getAttribute( 'id' );\r\n\t\tthis.name = element.getAttribute( 'name' );\r\n\r\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tvar child = element.childNodes[ i ];\r\n\t\t\tif ( child.nodeType != 1 ) continue;\r\n\r\n\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\tcase 'optics':\r\n\r\n\t\t\t\t\tthis.parseOptics( child );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tCamera.prototype.parseOptics = function ( element ) {\r\n\r\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tif ( element.childNodes[ i ].nodeName === 'technique_common' ) {\r\n\r\n\t\t\t\tvar technique = element.childNodes[ i ];\r\n\r\n\t\t\t\tfor ( var j = 0; j < technique.childNodes.length; j ++ ) {\r\n\r\n\t\t\t\t\tthis.technique = technique.childNodes[ j ].nodeName;\r\n\r\n\t\t\t\t\tif ( this.technique === 'perspective' ) {\r\n\r\n\t\t\t\t\t\tvar perspective = technique.childNodes[ j ];\r\n\r\n\t\t\t\t\t\tfor ( var k = 0; k < perspective.childNodes.length; k ++ ) {\r\n\r\n\t\t\t\t\t\t\tvar param = perspective.childNodes[ k ];\r\n\r\n\t\t\t\t\t\t\tswitch ( param.nodeName ) {\r\n\r\n\t\t\t\t\t\t\t\tcase 'yfov':\r\n\t\t\t\t\t\t\t\t\tthis.yfov = param.textContent;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase 'xfov':\r\n\t\t\t\t\t\t\t\t\tthis.xfov = param.textContent;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase 'znear':\r\n\t\t\t\t\t\t\t\t\tthis.znear = param.textContent;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase 'zfar':\r\n\t\t\t\t\t\t\t\t\tthis.zfar = param.textContent;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase 'aspect_ratio':\r\n\t\t\t\t\t\t\t\t\tthis.aspect_ratio = param.textContent;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else if ( this.technique === 'orthographic' ) {\r\n\r\n\t\t\t\t\t\tvar orthographic = technique.childNodes[ j ];\r\n\r\n\t\t\t\t\t\tfor ( var k = 0; k < orthographic.childNodes.length; k ++ ) {\r\n\r\n\t\t\t\t\t\t\tvar param = orthographic.childNodes[ k ];\r\n\r\n\t\t\t\t\t\t\tswitch ( param.nodeName ) {\r\n\r\n\t\t\t\t\t\t\t\tcase 'xmag':\r\n\t\t\t\t\t\t\t\t\tthis.xmag = param.textContent;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase 'ymag':\r\n\t\t\t\t\t\t\t\t\tthis.ymag = param.textContent;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase 'znear':\r\n\t\t\t\t\t\t\t\t\tthis.znear = param.textContent;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase 'zfar':\r\n\t\t\t\t\t\t\t\t\tthis.zfar = param.textContent;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase 'aspect_ratio':\r\n\t\t\t\t\t\t\t\t\tthis.aspect_ratio = param.textContent;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tfunction InstanceCamera() {\r\n\r\n\t\tthis.url = \"\";\r\n\r\n\t}\r\n\r\n\tInstanceCamera.prototype.parse = function ( element ) {\r\n\r\n\t\tthis.url = element.getAttribute('url').replace(/^#/, '');\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\t// Light\r\n\r\n\tfunction Light() {\r\n\r\n\t\tthis.id = \"\";\r\n\t\tthis.name = \"\";\r\n\t\tthis.technique = \"\";\r\n\r\n\t}\r\n\r\n\tLight.prototype.parse = function ( element ) {\r\n\r\n\t\tthis.id = element.getAttribute( 'id' );\r\n\t\tthis.name = element.getAttribute( 'name' );\r\n\r\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tvar child = element.childNodes[ i ];\r\n\t\t\tif ( child.nodeType != 1 ) continue;\r\n\r\n\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\tcase 'technique_common':\r\n\r\n\t\t\t\t\tthis.parseCommon( child );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'technique':\r\n\r\n\t\t\t\t\tthis.parseTechnique( child );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tLight.prototype.parseCommon = function ( element ) {\r\n\r\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tswitch ( element.childNodes[ i ].nodeName ) {\r\n\r\n\t\t\t\tcase 'directional':\r\n\t\t\t\tcase 'point':\r\n\t\t\t\tcase 'spot':\r\n\t\t\t\tcase 'ambient':\r\n\r\n\t\t\t\t\tthis.technique = element.childNodes[ i ].nodeName;\r\n\r\n\t\t\t\t\tvar light = element.childNodes[ i ];\r\n\r\n\t\t\t\t\tfor ( var j = 0; j < light.childNodes.length; j ++ ) {\r\n\r\n\t\t\t\t\t\tvar child = light.childNodes[j];\r\n\r\n\t\t\t\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\t\t\t\tcase 'color':\r\n\r\n\t\t\t\t\t\t\t\tvar rgba = _floats( child.textContent );\r\n\t\t\t\t\t\t\t\tthis.color = new THREE.Color(0);\r\n\t\t\t\t\t\t\t\tthis.color.setRGB( rgba[0], rgba[1], rgba[2] );\r\n\t\t\t\t\t\t\t\tthis.color.a = rgba[3];\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tcase 'falloff_angle':\r\n\r\n\t\t\t\t\t\t\t\tthis.falloff_angle = parseFloat( child.textContent );\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tcase 'quadratic_attenuation':\r\n\t\t\t\t\t\t\t\tvar f = parseFloat( child.textContent );\r\n\t\t\t\t\t\t\t\tthis.distance = f ? Math.sqrt( 1 / f ) : 0;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tLight.prototype.parseTechnique = function ( element ) {\r\n\r\n\t\tthis.profile = element.getAttribute( 'profile' );\r\n\r\n\t\tfor ( var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tvar child = element.childNodes[ i ];\r\n\r\n\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\tcase 'intensity':\r\n\r\n\t\t\t\t\tthis.intensity = parseFloat(child.textContent);\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tfunction InstanceLight() {\r\n\r\n\t\tthis.url = \"\";\r\n\r\n\t}\r\n\r\n\tInstanceLight.prototype.parse = function ( element ) {\r\n\r\n\t\tthis.url = element.getAttribute('url').replace(/^#/, '');\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tfunction KinematicsModel( ) {\r\n\r\n\t\tthis.id = '';\r\n\t\tthis.name = '';\r\n\t\tthis.joints = [];\r\n\t\tthis.links = [];\r\n\r\n\t}\r\n\r\n\tKinematicsModel.prototype.parse = function( element ) {\r\n\r\n\t\tthis.id = element.getAttribute('id');\r\n\t\tthis.name = element.getAttribute('name');\r\n\t\tthis.joints = [];\r\n\t\tthis.links = [];\r\n\r\n\t\tfor (var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tvar child = element.childNodes[ i ];\r\n\t\t\tif ( child.nodeType != 1 ) continue;\r\n\r\n\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\tcase 'technique_common':\r\n\r\n\t\t\t\t\tthis.parseCommon(child);\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tKinematicsModel.prototype.parseCommon = function( element ) {\r\n\r\n\t\tfor (var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tvar child = element.childNodes[ i ];\r\n\t\t\tif ( child.nodeType != 1 ) continue;\r\n\r\n\t\t\tswitch ( element.childNodes[ i ].nodeName ) {\r\n\r\n\t\t\t\tcase 'joint':\r\n\t\t\t\t\tthis.joints.push( (new Joint()).parse(child) );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'link':\r\n\t\t\t\t\tthis.links.push( (new Link()).parse(child) );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tfunction Joint( ) {\r\n\r\n\t\tthis.sid = '';\r\n\t\tthis.name = '';\r\n\t\tthis.axis = new THREE.Vector3();\r\n\t\tthis.limits = {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 0\r\n\t\t};\r\n\t\tthis.type = '';\r\n\t\tthis.static = false;\r\n\t\tthis.zeroPosition = 0.0;\r\n\t\tthis.middlePosition = 0.0;\r\n\r\n\t}\r\n\r\n\tJoint.prototype.parse = function( element ) {\r\n\r\n\t\tthis.sid = element.getAttribute('sid');\r\n\t\tthis.name = element.getAttribute('name');\r\n\t\tthis.axis = new THREE.Vector3();\r\n\t\tthis.limits = {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 0\r\n\t\t};\r\n\t\tthis.type = '';\r\n\t\tthis.static = false;\r\n\t\tthis.zeroPosition = 0.0;\r\n\t\tthis.middlePosition = 0.0;\r\n\r\n\t\tvar axisElement = element.querySelector('axis');\r\n\t\tvar _axis = _floats(axisElement.textContent);\r\n\t\tthis.axis = getConvertedVec3(_axis, 0);\r\n\r\n\t\tvar min = element.querySelector('limits min') ? parseFloat(element.querySelector('limits min').textContent) : -360;\r\n\t\tvar max = element.querySelector('limits max') ? parseFloat(element.querySelector('limits max').textContent) : 360;\r\n\r\n\t\tthis.limits = {\r\n\t\t\tmin: min,\r\n\t\t\tmax: max\r\n\t\t};\r\n\r\n\t\tvar jointTypes = [ 'prismatic', 'revolute' ];\r\n\t\tfor (var i = 0; i < jointTypes.length; i ++ ) {\r\n\r\n\t\t\tvar type = jointTypes[ i ];\r\n\r\n\t\t\tvar jointElement = element.querySelector(type);\r\n\r\n\t\t\tif ( jointElement ) {\r\n\r\n\t\t\t\tthis.type = type;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// if the min is equal to or somehow greater than the max, consider the joint static\r\n\t\tif ( this.limits.min >= this.limits.max ) {\r\n\r\n\t\t\tthis.static = true;\r\n\r\n\t\t}\r\n\r\n\t\tthis.middlePosition = (this.limits.min + this.limits.max) / 2.0;\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tfunction Link( ) {\r\n\r\n\t\tthis.sid = '';\r\n\t\tthis.name = '';\r\n\t\tthis.transforms = [];\r\n\t\tthis.attachments = [];\r\n\r\n\t}\r\n\r\n\tLink.prototype.parse = function( element ) {\r\n\r\n\t\tthis.sid = element.getAttribute('sid');\r\n\t\tthis.name = element.getAttribute('name');\r\n\t\tthis.transforms = [];\r\n\t\tthis.attachments = [];\r\n\r\n\t\tfor (var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tvar child = element.childNodes[ i ];\r\n\t\t\tif ( child.nodeType != 1 ) continue;\r\n\r\n\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\tcase 'attachment_full':\r\n\t\t\t\t\tthis.attachments.push( (new Attachment()).parse(child) );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'rotate':\r\n\t\t\t\tcase 'translate':\r\n\t\t\t\tcase 'matrix':\r\n\r\n\t\t\t\t\tthis.transforms.push( (new Transform()).parse(child) );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tfunction Attachment( ) {\r\n\r\n\t\tthis.joint = '';\r\n\t\tthis.transforms = [];\r\n\t\tthis.links = [];\r\n\r\n\t}\r\n\r\n\tAttachment.prototype.parse = function( element ) {\r\n\r\n\t\tthis.joint = element.getAttribute('joint').split('/').pop();\r\n\t\tthis.links = [];\r\n\r\n\t\tfor (var i = 0; i < element.childNodes.length; i ++ ) {\r\n\r\n\t\t\tvar child = element.childNodes[ i ];\r\n\t\t\tif ( child.nodeType != 1 ) continue;\r\n\r\n\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\tcase 'link':\r\n\t\t\t\t\tthis.links.push( (new Link()).parse(child) );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'rotate':\r\n\t\t\t\tcase 'translate':\r\n\t\t\t\tcase 'matrix':\r\n\r\n\t\t\t\t\tthis.transforms.push( (new Transform()).parse(child) );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tfunction _source( element ) {\r\n\r\n\t\tvar id = element.getAttribute( 'id' );\r\n\r\n\t\tif ( sources[ id ] != undefined ) {\r\n\r\n\t\t\treturn sources[ id ];\r\n\r\n\t\t}\r\n\r\n\t\tsources[ id ] = ( new Source(id )).parse( element );\r\n\t\treturn sources[ id ];\r\n\r\n\t}\r\n\r\n\tfunction _nsResolver( nsPrefix ) {\r\n\r\n\t\tif ( nsPrefix === \"dae\" ) {\r\n\r\n\t\t\treturn \"http://www.collada.org/2005/11/COLLADASchema\";\r\n\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t}\r\n\r\n\tfunction _bools( str ) {\r\n\r\n\t\tvar raw = _strings( str );\r\n\t\tvar data = [];\r\n\r\n\t\tfor ( var i = 0, l = raw.length; i < l; i ++ ) {\r\n\r\n\t\t\tdata.push( (raw[i] === 'true' || raw[i] === '1') ? true : false );\r\n\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\r\n\t}\r\n\r\n\tfunction _floats( str ) {\r\n\r\n\t\tvar raw = _strings(str);\r\n\t\tvar data = [];\r\n\r\n\t\tfor ( var i = 0, l = raw.length; i < l; i ++ ) {\r\n\r\n\t\t\tdata.push( parseFloat( raw[ i ] ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\r\n\t}\r\n\r\n\tfunction _ints( str ) {\r\n\r\n\t\tvar raw = _strings( str );\r\n\t\tvar data = [];\r\n\r\n\t\tfor ( var i = 0, l = raw.length; i < l; i ++ ) {\r\n\r\n\t\t\tdata.push( parseInt( raw[ i ], 10 ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\r\n\t}\r\n\r\n\tfunction _strings( str ) {\r\n\r\n\t\treturn ( str.length > 0 ) ? _trimString( str ).split( /\\s+/ ) : [];\r\n\r\n\t}\r\n\r\n\tfunction _trimString( str ) {\r\n\r\n\t\treturn str.replace( /^\\s+/, \"\" ).replace( /\\s+$/, \"\" );\r\n\r\n\t}\r\n\r\n\tfunction _attr_as_float( element, name, defaultValue ) {\r\n\r\n\t\tif ( element.hasAttribute( name ) ) {\r\n\r\n\t\t\treturn parseFloat( element.getAttribute( name ) );\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn defaultValue;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction _attr_as_int( element, name, defaultValue ) {\r\n\r\n\t\tif ( element.hasAttribute( name ) ) {\r\n\r\n\t\t\treturn parseInt( element.getAttribute( name ), 10) ;\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn defaultValue;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction _attr_as_string( element, name, defaultValue ) {\r\n\r\n\t\tif ( element.hasAttribute( name ) ) {\r\n\r\n\t\t\treturn element.getAttribute( name );\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn defaultValue;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction _format_float( f, num ) {\r\n\r\n\t\tif ( f === undefined ) {\r\n\r\n\t\t\tvar s = '0.';\r\n\r\n\t\t\twhile ( s.length < num + 2 ) {\r\n\r\n\t\t\t\ts += '0';\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn s;\r\n\r\n\t\t}\r\n\r\n\t\tnum = num || 2;\r\n\r\n\t\tvar parts = f.toString().split( '.' );\r\n\t\tparts[ 1 ] = parts.length > 1 ? parts[ 1 ].substr( 0, num ) : \"0\";\r\n\r\n\t\twhile ( parts[ 1 ].length < num ) {\r\n\r\n\t\t\tparts[ 1 ] += '0';\r\n\r\n\t\t}\r\n\r\n\t\treturn parts.join( '.' );\r\n\r\n\t}\r\n\r\n\tfunction loadTextureImage ( texture, url ) {\r\n\r\n\t\tvar loader = new THREE.ImageLoader();\r\n\r\n\t\tloader.load( url, function ( image ) {\r\n\r\n\t\t\ttexture.image = image;\r\n\t\t\ttexture.needsUpdate = true;\r\n\r\n\t\t} );\r\n\r\n\t}\r\n\r\n\tfunction extractDoubleSided( obj, element ) {\r\n\r\n\t\tobj.doubleSided = false;\r\n\r\n\t\tvar node = element.querySelectorAll('extra double_sided')[0];\r\n\r\n\t\tif ( node ) {\r\n\r\n\t\t\tif ( node && parseInt( node.textContent, 10 ) === 1 ) {\r\n\r\n\t\t\t\tobj.doubleSided = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// Up axis conversion\r\n\r\n\tfunction setUpConversion() {\r\n\r\n\t\tif ( options.convertUpAxis !== true || colladaUp === options.upAxis ) {\r\n\r\n\t\t\tupConversion = null;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tswitch ( colladaUp ) {\r\n\r\n\t\t\t\tcase 'X':\r\n\r\n\t\t\t\t\tupConversion = options.upAxis === 'Y' ? 'XtoY' : 'XtoZ';\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'Y':\r\n\r\n\t\t\t\t\tupConversion = options.upAxis === 'X' ? 'YtoX' : 'YtoZ';\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'Z':\r\n\r\n\t\t\t\t\tupConversion = options.upAxis === 'X' ? 'ZtoX' : 'ZtoY';\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction fixCoords( data, sign ) {\r\n\r\n\t\tif ( options.convertUpAxis !== true || colladaUp === options.upAxis ) {\r\n\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tswitch ( upConversion ) {\r\n\r\n\t\t\tcase 'XtoY':\r\n\r\n\t\t\t\tvar tmp = data[ 0 ];\r\n\t\t\t\tdata[ 0 ] = sign * data[ 1 ];\r\n\t\t\t\tdata[ 1 ] = tmp;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'XtoZ':\r\n\r\n\t\t\t\tvar tmp = data[ 2 ];\r\n\t\t\t\tdata[ 2 ] = data[ 1 ];\r\n\t\t\t\tdata[ 1 ] = data[ 0 ];\r\n\t\t\t\tdata[ 0 ] = tmp;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'YtoX':\r\n\r\n\t\t\t\tvar tmp = data[ 0 ];\r\n\t\t\t\tdata[ 0 ] = data[ 1 ];\r\n\t\t\t\tdata[ 1 ] = sign * tmp;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'YtoZ':\r\n\r\n\t\t\t\tvar tmp = data[ 1 ];\r\n\t\t\t\tdata[ 1 ] = sign * data[ 2 ];\r\n\t\t\t\tdata[ 2 ] = tmp;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'ZtoX':\r\n\r\n\t\t\t\tvar tmp = data[ 0 ];\r\n\t\t\t\tdata[ 0 ] = data[ 1 ];\r\n\t\t\t\tdata[ 1 ] = data[ 2 ];\r\n\t\t\t\tdata[ 2 ] = tmp;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'ZtoY':\r\n\r\n\t\t\t\tvar tmp = data[ 1 ];\r\n\t\t\t\tdata[ 1 ] = data[ 2 ];\r\n\t\t\t\tdata[ 2 ] = sign * tmp;\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction getConvertedTranslation( axis, data ) {\r\n\r\n\t\tif ( options.convertUpAxis !== true || colladaUp === options.upAxis ) {\r\n\r\n\t\t\treturn data;\r\n\r\n\t\t}\r\n\r\n\t\tswitch ( axis ) {\r\n\t\t\tcase 'X':\r\n\t\t\t\tdata = upConversion === 'XtoY' ? data * -1 : data;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'Y':\r\n\t\t\t\tdata = upConversion === 'YtoZ' || upConversion === 'YtoX' ? data * -1 : data;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'Z':\r\n\t\t\t\tdata = upConversion === 'ZtoY' ? data * -1 : data ;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\t}\r\n\r\n\tfunction getConvertedVec3( data, offset ) {\r\n\r\n\t\tvar arr = [ data[ offset ], data[ offset + 1 ], data[ offset + 2 ] ];\r\n\t\tfixCoords( arr, -1 );\r\n\t\treturn new THREE.Vector3( arr[ 0 ], arr[ 1 ], arr[ 2 ] );\r\n\r\n\t}\r\n\r\n\tfunction getConvertedMat4( data ) {\r\n\r\n\t\tif ( options.convertUpAxis ) {\r\n\r\n\t\t\t// First fix rotation and scale\r\n\r\n\t\t\t// Columns first\r\n\t\t\tvar arr = [ data[ 0 ], data[ 4 ], data[ 8 ] ];\r\n\t\t\tfixCoords( arr, -1 );\r\n\t\t\tdata[ 0 ] = arr[ 0 ];\r\n\t\t\tdata[ 4 ] = arr[ 1 ];\r\n\t\t\tdata[ 8 ] = arr[ 2 ];\r\n\t\t\tarr = [ data[ 1 ], data[ 5 ], data[ 9 ] ];\r\n\t\t\tfixCoords( arr, -1 );\r\n\t\t\tdata[ 1 ] = arr[ 0 ];\r\n\t\t\tdata[ 5 ] = arr[ 1 ];\r\n\t\t\tdata[ 9 ] = arr[ 2 ];\r\n\t\t\tarr = [ data[ 2 ], data[ 6 ], data[ 10 ] ];\r\n\t\t\tfixCoords( arr, -1 );\r\n\t\t\tdata[ 2 ] = arr[ 0 ];\r\n\t\t\tdata[ 6 ] = arr[ 1 ];\r\n\t\t\tdata[ 10 ] = arr[ 2 ];\r\n\t\t\t// Rows second\r\n\t\t\tarr = [ data[ 0 ], data[ 1 ], data[ 2 ] ];\r\n\t\t\tfixCoords( arr, -1 );\r\n\t\t\tdata[ 0 ] = arr[ 0 ];\r\n\t\t\tdata[ 1 ] = arr[ 1 ];\r\n\t\t\tdata[ 2 ] = arr[ 2 ];\r\n\t\t\tarr = [ data[ 4 ], data[ 5 ], data[ 6 ] ];\r\n\t\t\tfixCoords( arr, -1 );\r\n\t\t\tdata[ 4 ] = arr[ 0 ];\r\n\t\t\tdata[ 5 ] = arr[ 1 ];\r\n\t\t\tdata[ 6 ] = arr[ 2 ];\r\n\t\t\tarr = [ data[ 8 ], data[ 9 ], data[ 10 ] ];\r\n\t\t\tfixCoords( arr, -1 );\r\n\t\t\tdata[ 8 ] = arr[ 0 ];\r\n\t\t\tdata[ 9 ] = arr[ 1 ];\r\n\t\t\tdata[ 10 ] = arr[ 2 ];\r\n\r\n\t\t\t// Now fix translation\r\n\t\t\tarr = [ data[ 3 ], data[ 7 ], data[ 11 ] ];\r\n\t\t\tfixCoords( arr, -1 );\r\n\t\t\tdata[ 3 ] = arr[ 0 ];\r\n\t\t\tdata[ 7 ] = arr[ 1 ];\r\n\t\t\tdata[ 11 ] = arr[ 2 ];\r\n\r\n\t\t}\r\n\r\n\t\treturn new THREE.Matrix4().set(\r\n\t\t\tdata[0], data[1], data[2], data[3],\r\n\t\t\tdata[4], data[5], data[6], data[7],\r\n\t\t\tdata[8], data[9], data[10], data[11],\r\n\t\t\tdata[12], data[13], data[14], data[15]\r\n\t\t\t);\r\n\r\n\t}\r\n\r\n\tfunction getConvertedIndex( index ) {\r\n\r\n\t\tif ( index > -1 && index < 3 ) {\r\n\r\n\t\t\tvar members = [ 'X', 'Y', 'Z' ],\r\n\t\t\t\tindices = { X: 0, Y: 1, Z: 2 };\r\n\r\n\t\t\tindex = getConvertedMember( members[ index ] );\r\n\t\t\tindex = indices[ index ];\r\n\r\n\t\t}\r\n\r\n\t\treturn index;\r\n\r\n\t}\r\n\r\n\tfunction getConvertedMember( member ) {\r\n\r\n\t\tif ( options.convertUpAxis ) {\r\n\r\n\t\t\tswitch ( member ) {\r\n\r\n\t\t\t\tcase 'X':\r\n\r\n\t\t\t\t\tswitch ( upConversion ) {\r\n\r\n\t\t\t\t\t\tcase 'XtoY':\r\n\t\t\t\t\t\tcase 'XtoZ':\r\n\t\t\t\t\t\tcase 'YtoX':\r\n\r\n\t\t\t\t\t\t\tmember = 'Y';\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase 'ZtoX':\r\n\r\n\t\t\t\t\t\t\tmember = 'Z';\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'Y':\r\n\r\n\t\t\t\t\tswitch ( upConversion ) {\r\n\r\n\t\t\t\t\t\tcase 'XtoY':\r\n\t\t\t\t\t\tcase 'YtoX':\r\n\t\t\t\t\t\tcase 'ZtoX':\r\n\r\n\t\t\t\t\t\t\tmember = 'X';\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase 'XtoZ':\r\n\t\t\t\t\t\tcase 'YtoZ':\r\n\t\t\t\t\t\tcase 'ZtoY':\r\n\r\n\t\t\t\t\t\t\tmember = 'Z';\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'Z':\r\n\r\n\t\t\t\t\tswitch ( upConversion ) {\r\n\r\n\t\t\t\t\t\tcase 'XtoZ':\r\n\r\n\t\t\t\t\t\t\tmember = 'X';\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase 'YtoZ':\r\n\t\t\t\t\t\tcase 'ZtoX':\r\n\t\t\t\t\t\tcase 'ZtoY':\r\n\r\n\t\t\t\t\t\t\tmember = 'Y';\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn member;\r\n\r\n\t}\r\n\r\n\treturn {\r\n\r\n\t\tload: load,\r\n\t\tparse: parse,\r\n\t\tsetPreferredShading: setPreferredShading,\r\n\t\tapplySkin: applySkin,\r\n\t\tgeometries : geometries,\r\n\t\toptions: options\r\n\r\n\t};\r\n\r\n};\r\n\r\nexport { ColladaLoader }\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/loaders/ColladaLoader.js","import * as THREE from 'three';\r\n\r\n// https://github.com/mrdoob/three.js/blob/dev/examples/js/loaders/OBJLoader.js\r\n\r\nconst OBJLoader = function ( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\r\n\tthis.materials = null;\r\n\r\n\tthis.regexp = {\r\n\t\t// v float float float\r\n\t\tvertex_pattern           : /^v\\s+([\\d|\\.|\\+|\\-|e|E]+)\\s+([\\d|\\.|\\+|\\-|e|E]+)\\s+([\\d|\\.|\\+|\\-|e|E]+)/,\r\n\t\t// vn float float float\r\n\t\tnormal_pattern           : /^vn\\s+([\\d|\\.|\\+|\\-|e|E]+)\\s+([\\d|\\.|\\+|\\-|e|E]+)\\s+([\\d|\\.|\\+|\\-|e|E]+)/,\r\n\t\t// vt float float\r\n\t\tuv_pattern               : /^vt\\s+([\\d|\\.|\\+|\\-|e|E]+)\\s+([\\d|\\.|\\+|\\-|e|E]+)/,\r\n\t\t// f vertex vertex vertex\r\n\t\tface_vertex              : /^f\\s+(-?\\d+)\\s+(-?\\d+)\\s+(-?\\d+)(?:\\s+(-?\\d+))?/,\r\n\t\t// f vertex/uv vertex/uv vertex/uv\r\n\t\tface_vertex_uv           : /^f\\s+(-?\\d+)\\/(-?\\d+)\\s+(-?\\d+)\\/(-?\\d+)\\s+(-?\\d+)\\/(-?\\d+)(?:\\s+(-?\\d+)\\/(-?\\d+))?/,\r\n\t\t// f vertex/uv/normal vertex/uv/normal vertex/uv/normal\r\n\t\tface_vertex_uv_normal    : /^f\\s+(-?\\d+)\\/(-?\\d+)\\/(-?\\d+)\\s+(-?\\d+)\\/(-?\\d+)\\/(-?\\d+)\\s+(-?\\d+)\\/(-?\\d+)\\/(-?\\d+)(?:\\s+(-?\\d+)\\/(-?\\d+)\\/(-?\\d+))?/,\r\n\t\t// f vertex//normal vertex//normal vertex//normal\r\n\t\tface_vertex_normal       : /^f\\s+(-?\\d+)\\/\\/(-?\\d+)\\s+(-?\\d+)\\/\\/(-?\\d+)\\s+(-?\\d+)\\/\\/(-?\\d+)(?:\\s+(-?\\d+)\\/\\/(-?\\d+))?/,\r\n\t\t// o object_name | g group_name\r\n\t\tobject_pattern           : /^[og]\\s*(.+)?/,\r\n\t\t// s boolean\r\n\t\tsmoothing_pattern        : /^s\\s+(\\d+|on|off)/,\r\n\t\t// mtllib file_reference\r\n\t\tmaterial_library_pattern : /^mtllib /,\r\n\t\t// usemtl material_name\r\n\t\tmaterial_use_pattern     : /^usemtl /\r\n\t};\r\n\r\n};\r\n\r\nOBJLoader.prototype = {\r\n\r\n\tconstructor: OBJLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar loader = new THREE.FileLoader( scope.manager );\r\n\t\tloader.setPath( this.path );\r\n\t\tloader.load( url, function ( text ) {\r\n\r\n\t\t\tonLoad( scope.parse( text ) );\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t},\r\n\r\n\tsetPath: function ( value ) {\r\n\r\n\t\tthis.path = value;\r\n\r\n\t},\r\n\r\n\tsetMaterials: function ( materials ) {\r\n\r\n\t\tthis.materials = materials;\r\n\r\n\t},\r\n\r\n\t_createParserState : function () {\r\n\r\n\t\tvar state = {\r\n\t\t\tobjects  : [],\r\n\t\t\tobject   : {},\r\n\r\n\t\t\tvertices : [],\r\n\t\t\tnormals  : [],\r\n\t\t\tuvs      : [],\r\n\r\n\t\t\tmaterialLibraries : [],\r\n\r\n\t\t\tstartObject: function ( name, fromDeclaration ) {\r\n\r\n\t\t\t\t// If the current object (initial from reset) is not from a g/o declaration in the parsed\r\n\t\t\t\t// file. We need to use it for the first parsed g/o to keep things in sync.\r\n\t\t\t\tif ( this.object && this.object.fromDeclaration === false ) {\r\n\r\n\t\t\t\t\tthis.object.name = name;\r\n\t\t\t\t\tthis.object.fromDeclaration = ( fromDeclaration !== false );\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar previousMaterial = ( this.object && typeof this.object.currentMaterial === 'function' ? this.object.currentMaterial() : undefined );\r\n\r\n\t\t\t\tif ( this.object && typeof this.object._finalize === 'function' ) {\r\n\r\n\t\t\t\t\tthis.object._finalize( true );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.object = {\r\n\t\t\t\t\tname : name || '',\r\n\t\t\t\t\tfromDeclaration : ( fromDeclaration !== false ),\r\n\r\n\t\t\t\t\tgeometry : {\r\n\t\t\t\t\t\tvertices : [],\r\n\t\t\t\t\t\tnormals  : [],\r\n\t\t\t\t\t\tuvs      : []\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmaterials : [],\r\n\t\t\t\t\tsmooth : true,\r\n\r\n\t\t\t\t\tstartMaterial : function( name, libraries ) {\r\n\r\n\t\t\t\t\t\tvar previous = this._finalize( false );\r\n\r\n\t\t\t\t\t\t// New usemtl declaration overwrites an inherited material, except if faces were declared\r\n\t\t\t\t\t\t// after the material, then it must be preserved for proper MultiMaterial continuation.\r\n\t\t\t\t\t\tif ( previous && ( previous.inherited || previous.groupCount <= 0 ) ) {\r\n\r\n\t\t\t\t\t\t\tthis.materials.splice( previous.index, 1 );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar material = {\r\n\t\t\t\t\t\t\tindex      : this.materials.length,\r\n\t\t\t\t\t\t\tname       : name || '',\r\n\t\t\t\t\t\t\tmtllib     : ( Array.isArray( libraries ) && libraries.length > 0 ? libraries[ libraries.length - 1 ] : '' ),\r\n\t\t\t\t\t\t\tsmooth     : ( previous !== undefined ? previous.smooth : this.smooth ),\r\n\t\t\t\t\t\t\tgroupStart : ( previous !== undefined ? previous.groupEnd : 0 ),\r\n\t\t\t\t\t\t\tgroupEnd   : -1,\r\n\t\t\t\t\t\t\tgroupCount : -1,\r\n\t\t\t\t\t\t\tinherited  : false,\r\n\r\n\t\t\t\t\t\t\tclone : function( index ) {\r\n\t\t\t\t\t\t\t\tvar cloned = {\r\n\t\t\t\t\t\t\t\t\tindex      : ( typeof index === 'number' ? index : this.index ),\r\n\t\t\t\t\t\t\t\t\tname       : this.name,\r\n\t\t\t\t\t\t\t\t\tmtllib     : this.mtllib,\r\n\t\t\t\t\t\t\t\t\tsmooth     : this.smooth,\r\n\t\t\t\t\t\t\t\t\tgroupStart : 0,\r\n\t\t\t\t\t\t\t\t\tgroupEnd   : -1,\r\n\t\t\t\t\t\t\t\t\tgroupCount : -1,\r\n\t\t\t\t\t\t\t\t\tinherited  : false\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\tcloned.clone = this.clone.bind(cloned);\r\n\t\t\t\t\t\t\t\treturn cloned;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\tthis.materials.push( material );\r\n\r\n\t\t\t\t\t\treturn material;\r\n\r\n\t\t\t\t\t},\r\n\r\n\t\t\t\t\tcurrentMaterial : function() {\r\n\r\n\t\t\t\t\t\tif ( this.materials.length > 0 ) {\r\n\t\t\t\t\t\t\treturn this.materials[ this.materials.length - 1 ];\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\treturn undefined;\r\n\r\n\t\t\t\t\t},\r\n\r\n\t\t\t\t\t_finalize : function( end ) {\r\n\r\n\t\t\t\t\t\tvar lastMultiMaterial = this.currentMaterial();\r\n\t\t\t\t\t\tif ( lastMultiMaterial && lastMultiMaterial.groupEnd === -1 ) {\r\n\r\n\t\t\t\t\t\t\tlastMultiMaterial.groupEnd = this.geometry.vertices.length / 3;\r\n\t\t\t\t\t\t\tlastMultiMaterial.groupCount = lastMultiMaterial.groupEnd - lastMultiMaterial.groupStart;\r\n\t\t\t\t\t\t\tlastMultiMaterial.inherited = false;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// Ignore objects tail materials if no face declarations followed them before a new o/g started.\r\n\t\t\t\t\t\tif ( end && this.materials.length > 1 ) {\r\n\r\n\t\t\t\t\t\t\tfor ( var mi = this.materials.length - 1; mi >= 0; mi-- ) {\r\n\t\t\t\t\t\t\t\tif ( this.materials[mi].groupCount <= 0 ) {\r\n\t\t\t\t\t\t\t\t\tthis.materials.splice( mi, 1 );\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// Guarantee at least one empty material, this makes the creation later more straight forward.\r\n\t\t\t\t\t\tif ( end && this.materials.length === 0 ) {\r\n\r\n\t\t\t\t\t\t\tthis.materials.push({\r\n\t\t\t\t\t\t\t\tname   : '',\r\n\t\t\t\t\t\t\t\tsmooth : this.smooth\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\treturn lastMultiMaterial;\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\t// Inherit previous objects material.\r\n\t\t\t\t// Spec tells us that a declared material must be set to all objects until a new material is declared.\r\n\t\t\t\t// If a usemtl declaration is encountered while this new object is being parsed, it will\r\n\t\t\t\t// overwrite the inherited material. Exception being that there was already face declarations\r\n\t\t\t\t// to the inherited material, then it will be preserved for proper MultiMaterial continuation.\r\n\r\n\t\t\t\tif ( previousMaterial && previousMaterial.name && typeof previousMaterial.clone === \"function\" ) {\r\n\r\n\t\t\t\t\tvar declared = previousMaterial.clone( 0 );\r\n\t\t\t\t\tdeclared.inherited = true;\r\n\t\t\t\t\tthis.object.materials.push( declared );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.objects.push( this.object );\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfinalize : function() {\r\n\r\n\t\t\t\tif ( this.object && typeof this.object._finalize === 'function' ) {\r\n\r\n\t\t\t\t\tthis.object._finalize( true );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\tparseVertexIndex: function ( value, len ) {\r\n\r\n\t\t\t\tvar index = parseInt( value, 10 );\r\n\t\t\t\treturn ( index >= 0 ? index - 1 : index + len / 3 ) * 3;\r\n\r\n\t\t\t},\r\n\r\n\t\t\tparseNormalIndex: function ( value, len ) {\r\n\r\n\t\t\t\tvar index = parseInt( value, 10 );\r\n\t\t\t\treturn ( index >= 0 ? index - 1 : index + len / 3 ) * 3;\r\n\r\n\t\t\t},\r\n\r\n\t\t\tparseUVIndex: function ( value, len ) {\r\n\r\n\t\t\t\tvar index = parseInt( value, 10 );\r\n\t\t\t\treturn ( index >= 0 ? index - 1 : index + len / 2 ) * 2;\r\n\r\n\t\t\t},\r\n\r\n\t\t\taddVertex: function ( a, b, c ) {\r\n\r\n\t\t\t\tvar src = this.vertices;\r\n\t\t\t\tvar dst = this.object.geometry.vertices;\r\n\r\n\t\t\t\tdst.push( src[ a + 0 ] );\r\n\t\t\t\tdst.push( src[ a + 1 ] );\r\n\t\t\t\tdst.push( src[ a + 2 ] );\r\n\t\t\t\tdst.push( src[ b + 0 ] );\r\n\t\t\t\tdst.push( src[ b + 1 ] );\r\n\t\t\t\tdst.push( src[ b + 2 ] );\r\n\t\t\t\tdst.push( src[ c + 0 ] );\r\n\t\t\t\tdst.push( src[ c + 1 ] );\r\n\t\t\t\tdst.push( src[ c + 2 ] );\r\n\r\n\t\t\t},\r\n\r\n\t\t\taddVertexLine: function ( a ) {\r\n\r\n\t\t\t\tvar src = this.vertices;\r\n\t\t\t\tvar dst = this.object.geometry.vertices;\r\n\r\n\t\t\t\tdst.push( src[ a + 0 ] );\r\n\t\t\t\tdst.push( src[ a + 1 ] );\r\n\t\t\t\tdst.push( src[ a + 2 ] );\r\n\r\n\t\t\t},\r\n\r\n\t\t\taddNormal : function ( a, b, c ) {\r\n\r\n\t\t\t\tvar src = this.normals;\r\n\t\t\t\tvar dst = this.object.geometry.normals;\r\n\r\n\t\t\t\tdst.push( src[ a + 0 ] );\r\n\t\t\t\tdst.push( src[ a + 1 ] );\r\n\t\t\t\tdst.push( src[ a + 2 ] );\r\n\t\t\t\tdst.push( src[ b + 0 ] );\r\n\t\t\t\tdst.push( src[ b + 1 ] );\r\n\t\t\t\tdst.push( src[ b + 2 ] );\r\n\t\t\t\tdst.push( src[ c + 0 ] );\r\n\t\t\t\tdst.push( src[ c + 1 ] );\r\n\t\t\t\tdst.push( src[ c + 2 ] );\r\n\r\n\t\t\t},\r\n\r\n\t\t\taddUV: function ( a, b, c ) {\r\n\r\n\t\t\t\tvar src = this.uvs;\r\n\t\t\t\tvar dst = this.object.geometry.uvs;\r\n\r\n\t\t\t\tdst.push( src[ a + 0 ] );\r\n\t\t\t\tdst.push( src[ a + 1 ] );\r\n\t\t\t\tdst.push( src[ b + 0 ] );\r\n\t\t\t\tdst.push( src[ b + 1 ] );\r\n\t\t\t\tdst.push( src[ c + 0 ] );\r\n\t\t\t\tdst.push( src[ c + 1 ] );\r\n\r\n\t\t\t},\r\n\r\n\t\t\taddUVLine: function ( a ) {\r\n\r\n\t\t\t\tvar src = this.uvs;\r\n\t\t\t\tvar dst = this.object.geometry.uvs;\r\n\r\n\t\t\t\tdst.push( src[ a + 0 ] );\r\n\t\t\t\tdst.push( src[ a + 1 ] );\r\n\r\n\t\t\t},\r\n\r\n\t\t\taddFace: function ( a, b, c, d, ua, ub, uc, ud, na, nb, nc, nd ) {\r\n\r\n\t\t\t\tvar vLen = this.vertices.length;\r\n\r\n\t\t\t\tvar ia = this.parseVertexIndex( a, vLen );\r\n\t\t\t\tvar ib = this.parseVertexIndex( b, vLen );\r\n\t\t\t\tvar ic = this.parseVertexIndex( c, vLen );\r\n\t\t\t\tvar id;\r\n\r\n\t\t\t\tif ( d === undefined ) {\r\n\r\n\t\t\t\t\tthis.addVertex( ia, ib, ic );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tid = this.parseVertexIndex( d, vLen );\r\n\r\n\t\t\t\t\tthis.addVertex( ia, ib, id );\r\n\t\t\t\t\tthis.addVertex( ib, ic, id );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( ua !== undefined ) {\r\n\r\n\t\t\t\t\tvar uvLen = this.uvs.length;\r\n\r\n\t\t\t\t\tia = this.parseUVIndex( ua, uvLen );\r\n\t\t\t\t\tib = this.parseUVIndex( ub, uvLen );\r\n\t\t\t\t\tic = this.parseUVIndex( uc, uvLen );\r\n\r\n\t\t\t\t\tif ( d === undefined ) {\r\n\r\n\t\t\t\t\t\tthis.addUV( ia, ib, ic );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tid = this.parseUVIndex( ud, uvLen );\r\n\r\n\t\t\t\t\t\tthis.addUV( ia, ib, id );\r\n\t\t\t\t\t\tthis.addUV( ib, ic, id );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( na !== undefined ) {\r\n\r\n\t\t\t\t\t// Normals are many times the same. If so, skip function call and parseInt.\r\n\t\t\t\t\tvar nLen = this.normals.length;\r\n\t\t\t\t\tia = this.parseNormalIndex( na, nLen );\r\n\r\n\t\t\t\t\tib = na === nb ? ia : this.parseNormalIndex( nb, nLen );\r\n\t\t\t\t\tic = na === nc ? ia : this.parseNormalIndex( nc, nLen );\r\n\r\n\t\t\t\t\tif ( d === undefined ) {\r\n\r\n\t\t\t\t\t\tthis.addNormal( ia, ib, ic );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tid = this.parseNormalIndex( nd, nLen );\r\n\r\n\t\t\t\t\t\tthis.addNormal( ia, ib, id );\r\n\t\t\t\t\t\tthis.addNormal( ib, ic, id );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\taddLineGeometry: function ( vertices, uvs ) {\r\n\r\n\t\t\t\tthis.object.geometry.type = 'Line';\r\n\r\n\t\t\t\tvar vLen = this.vertices.length;\r\n\t\t\t\tvar uvLen = this.uvs.length;\r\n\r\n\t\t\t\tfor ( var vi = 0, l = vertices.length; vi < l; vi ++ ) {\r\n\r\n\t\t\t\t\tthis.addVertexLine( this.parseVertexIndex( vertices[ vi ], vLen ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor ( var uvi = 0, l = uvs.length; uvi < l; uvi ++ ) {\r\n\r\n\t\t\t\t\tthis.addUVLine( this.parseUVIndex( uvs[ uvi ], uvLen ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t\tstate.startObject( '', false );\r\n\r\n\t\treturn state;\r\n\r\n\t},\r\n\r\n\tparse: function ( text ) {\r\n\r\n\t\tconsole.time( 'OBJLoader' );\r\n\r\n\t\tvar state = this._createParserState();\r\n\r\n\t\tif ( text.indexOf( '\\r\\n' ) !== - 1 ) {\r\n\r\n\t\t\t// This is faster than String.split with regex that splits on both\r\n\t\t\ttext = text.replace( /\\r\\n/g, '\\n' );\r\n\r\n\t\t}\r\n\r\n\t\tif ( text.indexOf( '\\\\\\n' ) !== - 1) {\r\n\r\n\t\t\t// join lines separated by a line continuation character (\\)\r\n\t\t\ttext = text.replace( /\\\\\\n/g, '' );\r\n\r\n\t\t}\r\n\r\n\t\tvar lines = text.split( '\\n' );\r\n\t\tvar line = '', lineFirstChar = '', lineSecondChar = '';\r\n\t\tvar lineLength = 0;\r\n\t\tvar result = [];\r\n\r\n\t\t// Faster to just trim left side of the line. Use if available.\r\n\t\tvar trimLeft = ( typeof ''.trimLeft === 'function' );\r\n\r\n\t\tfor ( var i = 0, l = lines.length; i < l; i ++ ) {\r\n\r\n\t\t\tline = lines[ i ];\r\n\r\n\t\t\tline = trimLeft ? line.trimLeft() : line.trim();\r\n\r\n\t\t\tlineLength = line.length;\r\n\r\n\t\t\tif ( lineLength === 0 ) continue;\r\n\r\n\t\t\tlineFirstChar = line.charAt( 0 );\r\n\r\n\t\t\t// @todo invoke passed in handler if any\r\n\t\t\tif ( lineFirstChar === '#' ) continue;\r\n\r\n\t\t\tif ( lineFirstChar === 'v' ) {\r\n\r\n\t\t\t\tlineSecondChar = line.charAt( 1 );\r\n\r\n\t\t\t\tif ( lineSecondChar === ' ' && ( result = this.regexp.vertex_pattern.exec( line ) ) !== null ) {\r\n\r\n\t\t\t\t\t// 0                  1      2      3\r\n\t\t\t\t\t// [\"v 1.0 2.0 3.0\", \"1.0\", \"2.0\", \"3.0\"]\r\n\r\n\t\t\t\t\tstate.vertices.push(\r\n\t\t\t\t\t\tparseFloat( result[ 1 ] ),\r\n\t\t\t\t\t\tparseFloat( result[ 2 ] ),\r\n\t\t\t\t\t\tparseFloat( result[ 3 ] )\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t} else if ( lineSecondChar === 'n' && ( result = this.regexp.normal_pattern.exec( line ) ) !== null ) {\r\n\r\n\t\t\t\t\t// 0                   1      2      3\r\n\t\t\t\t\t// [\"vn 1.0 2.0 3.0\", \"1.0\", \"2.0\", \"3.0\"]\r\n\r\n\t\t\t\t\tstate.normals.push(\r\n\t\t\t\t\t\tparseFloat( result[ 1 ] ),\r\n\t\t\t\t\t\tparseFloat( result[ 2 ] ),\r\n\t\t\t\t\t\tparseFloat( result[ 3 ] )\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t} else if ( lineSecondChar === 't' && ( result = this.regexp.uv_pattern.exec( line ) ) !== null ) {\r\n\r\n\t\t\t\t\t// 0               1      2\r\n\t\t\t\t\t// [\"vt 0.1 0.2\", \"0.1\", \"0.2\"]\r\n\r\n\t\t\t\t\tstate.uvs.push(\r\n\t\t\t\t\t\tparseFloat( result[ 1 ] ),\r\n\t\t\t\t\t\tparseFloat( result[ 2 ] )\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tthrow new Error( \"Unexpected vertex/normal/uv line: '\" + line  + \"'\" );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( lineFirstChar === \"f\" ) {\r\n\r\n\t\t\t\tif ( ( result = this.regexp.face_vertex_uv_normal.exec( line ) ) !== null ) {\r\n\r\n\t\t\t\t\t// f vertex/uv/normal vertex/uv/normal vertex/uv/normal\r\n\t\t\t\t\t// 0                        1    2    3    4    5    6    7    8    9   10         11         12\r\n\t\t\t\t\t// [\"f 1/1/1 2/2/2 3/3/3\", \"1\", \"1\", \"1\", \"2\", \"2\", \"2\", \"3\", \"3\", \"3\", undefined, undefined, undefined]\r\n\r\n\t\t\t\t\tstate.addFace(\r\n\t\t\t\t\t\tresult[ 1 ], result[ 4 ], result[ 7 ], result[ 10 ],\r\n\t\t\t\t\t\tresult[ 2 ], result[ 5 ], result[ 8 ], result[ 11 ],\r\n\t\t\t\t\t\tresult[ 3 ], result[ 6 ], result[ 9 ], result[ 12 ]\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t} else if ( ( result = this.regexp.face_vertex_uv.exec( line ) ) !== null ) {\r\n\r\n\t\t\t\t\t// f vertex/uv vertex/uv vertex/uv\r\n\t\t\t\t\t// 0                  1    2    3    4    5    6   7          8\r\n\t\t\t\t\t// [\"f 1/1 2/2 3/3\", \"1\", \"1\", \"2\", \"2\", \"3\", \"3\", undefined, undefined]\r\n\r\n\t\t\t\t\tstate.addFace(\r\n\t\t\t\t\t\tresult[ 1 ], result[ 3 ], result[ 5 ], result[ 7 ],\r\n\t\t\t\t\t\tresult[ 2 ], result[ 4 ], result[ 6 ], result[ 8 ]\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t} else if ( ( result = this.regexp.face_vertex_normal.exec( line ) ) !== null ) {\r\n\r\n\t\t\t\t\t// f vertex//normal vertex//normal vertex//normal\r\n\t\t\t\t\t// 0                     1    2    3    4    5    6   7          8\r\n\t\t\t\t\t// [\"f 1//1 2//2 3//3\", \"1\", \"1\", \"2\", \"2\", \"3\", \"3\", undefined, undefined]\r\n\r\n\t\t\t\t\tstate.addFace(\r\n\t\t\t\t\t\tresult[ 1 ], result[ 3 ], result[ 5 ], result[ 7 ],\r\n\t\t\t\t\t\tundefined, undefined, undefined, undefined,\r\n\t\t\t\t\t\tresult[ 2 ], result[ 4 ], result[ 6 ], result[ 8 ]\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t} else if ( ( result = this.regexp.face_vertex.exec( line ) ) !== null ) {\r\n\r\n\t\t\t\t\t// f vertex vertex vertex\r\n\t\t\t\t\t// 0            1    2    3   4\r\n\t\t\t\t\t// [\"f 1 2 3\", \"1\", \"2\", \"3\", undefined]\r\n\r\n\t\t\t\t\tstate.addFace(\r\n\t\t\t\t\t\tresult[ 1 ], result[ 2 ], result[ 3 ], result[ 4 ]\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tthrow new Error( \"Unexpected face line: '\" + line  + \"'\" );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( lineFirstChar === \"l\" ) {\r\n\r\n\t\t\t\tvar lineParts = line.substring( 1 ).trim().split( \" \" );\r\n\t\t\t\tvar lineVertices = [], lineUVs = [];\r\n\r\n\t\t\t\tif ( line.indexOf( \"/\" ) === - 1 ) {\r\n\r\n\t\t\t\t\tlineVertices = lineParts;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tfor ( var li = 0, llen = lineParts.length; li < llen; li ++ ) {\r\n\r\n\t\t\t\t\t\tvar parts = lineParts[ li ].split( \"/\" );\r\n\r\n\t\t\t\t\t\tif ( parts[ 0 ] !== \"\" ) lineVertices.push( parts[ 0 ] );\r\n\t\t\t\t\t\tif ( parts[ 1 ] !== \"\" ) lineUVs.push( parts[ 1 ] );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t\tstate.addLineGeometry( lineVertices, lineUVs );\r\n\r\n\t\t\t} else if ( ( result = this.regexp.object_pattern.exec( line ) ) !== null ) {\r\n\r\n\t\t\t\t// o object_name\r\n\t\t\t\t// or\r\n\t\t\t\t// g group_name\r\n\r\n\t\t\t\t// WORKAROUND: https://bugs.chromium.org/p/v8/issues/detail?id=2869\r\n\t\t\t\t// var name = result[ 0 ].substr( 1 ).trim();\r\n\t\t\t\tvar name = ( \" \" + result[ 0 ].substr( 1 ).trim() ).substr( 1 );\r\n\r\n\t\t\t\tstate.startObject( name );\r\n\r\n\t\t\t} else if ( this.regexp.material_use_pattern.test( line ) ) {\r\n\r\n\t\t\t\t// material\r\n\r\n\t\t\t\tstate.object.startMaterial( line.substring( 7 ).trim(), state.materialLibraries );\r\n\r\n\t\t\t} else if ( this.regexp.material_library_pattern.test( line ) ) {\r\n\r\n\t\t\t\t// mtl file\r\n\r\n\t\t\t\tstate.materialLibraries.push( line.substring( 7 ).trim() );\r\n\r\n\t\t\t} else if ( ( result = this.regexp.smoothing_pattern.exec( line ) ) !== null ) {\r\n\r\n\t\t\t\t// smooth shading\r\n\r\n\t\t\t\t// @todo Handle files that have varying smooth values for a set of faces inside one geometry,\r\n\t\t\t\t// but does not define a usemtl for each face set.\r\n\t\t\t\t// This should be detected and a dummy material created (later MultiMaterial and geometry groups).\r\n\t\t\t\t// This requires some care to not create extra material on each smooth value for \"normal\" obj files.\r\n\t\t\t\t// where explicit usemtl defines geometry groups.\r\n\t\t\t\t// Example asset: examples/models/obj/cerberus/Cerberus.obj\r\n\r\n\t\t\t\tvar value = result[ 1 ].trim().toLowerCase();\r\n\t\t\t\tstate.object.smooth = ( value === '1' || value === 'on' );\r\n\r\n\t\t\t\tvar material = state.object.currentMaterial();\r\n\t\t\t\tif ( material ) {\r\n\r\n\t\t\t\t\tmaterial.smooth = state.object.smooth;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// Handle null terminated files without exception\r\n\t\t\t\tif ( line === '\\0' ) continue;\r\n\r\n\t\t\t\tthrow new Error( \"Unexpected line: '\" + line  + \"'\" );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tstate.finalize();\r\n\r\n\t\tvar container = new THREE.Group();\r\n\t\tcontainer.materialLibraries = [].concat( state.materialLibraries );\r\n\r\n\t\tfor ( var i = 0, l = state.objects.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar object = state.objects[ i ];\r\n\t\t\tvar geometry = object.geometry;\r\n\t\t\tvar materials = object.materials;\r\n\t\t\tvar isLine = ( geometry.type === 'Line' );\r\n\r\n\t\t\t// Skip o/g line declarations that did not follow with any faces\r\n\t\t\tif ( geometry.vertices.length === 0 ) continue;\r\n\r\n\t\t\tvar buffergeometry = new THREE.BufferGeometry();\r\n\r\n\t\t\tbuffergeometry.addAttribute( 'position', new THREE.BufferAttribute( new Float32Array( geometry.vertices ), 3 ) );\r\n\r\n\t\t\tif ( geometry.normals.length > 0 ) {\r\n\r\n\t\t\t\tbuffergeometry.addAttribute( 'normal', new THREE.BufferAttribute( new Float32Array( geometry.normals ), 3 ) );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tbuffergeometry.computeVertexNormals();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( geometry.uvs.length > 0 ) {\r\n\r\n\t\t\t\tbuffergeometry.addAttribute( 'uv', new THREE.BufferAttribute( new Float32Array( geometry.uvs ), 2 ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Create materials\r\n\r\n\t\t\tvar createdMaterials = [];\r\n\r\n\t\t\tfor ( var mi = 0, miLen = materials.length; mi < miLen ; mi++ ) {\r\n\r\n\t\t\t\tvar sourceMaterial = materials[mi];\r\n\t\t\t\tvar material = undefined;\r\n\r\n\t\t\t\tif ( this.materials !== null ) {\r\n\r\n\t\t\t\t\tmaterial = this.materials.create( sourceMaterial.name );\r\n\r\n\t\t\t\t\t// mtl etc. loaders probably can't create line materials correctly, copy properties to a line material.\r\n\t\t\t\t\tif ( isLine && material && ! ( material instanceof THREE.LineBasicMaterial ) ) {\r\n\r\n\t\t\t\t\t\tvar materialLine = new THREE.LineBasicMaterial();\r\n\t\t\t\t\t\tmaterialLine.copy( material );\r\n\t\t\t\t\t\tmaterial = materialLine;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( ! material ) {\r\n\r\n\t\t\t\t\tmaterial = ( ! isLine ? new THREE.MeshPhongMaterial() : new THREE.LineBasicMaterial() );\r\n\t\t\t\t\tmaterial.name = sourceMaterial.name;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tmaterial.shading = sourceMaterial.smooth ? THREE.SmoothShading : THREE.FlatShading;\r\n\r\n\t\t\t\tcreatedMaterials.push(material);\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Create mesh\r\n\r\n\t\t\tvar mesh;\r\n\r\n\t\t\tif ( createdMaterials.length > 1 ) {\r\n\r\n\t\t\t\tfor ( var mi = 0, miLen = materials.length; mi < miLen ; mi++ ) {\r\n\r\n\t\t\t\t\tvar sourceMaterial = materials[mi];\r\n\t\t\t\t\tbuffergeometry.addGroup( sourceMaterial.groupStart, sourceMaterial.groupCount, mi );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tmesh = ( ! isLine ? new THREE.Mesh( buffergeometry, createdMaterials ) : new THREE.LineSegments( buffergeometry, createdMaterials ) );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tmesh = ( ! isLine ? new THREE.Mesh( buffergeometry, createdMaterials[ 0 ] ) : new THREE.LineSegments( buffergeometry, createdMaterials[ 0 ] ) );\r\n\t\t\t}\r\n\r\n\t\t\tmesh.name = object.name;\r\n\r\n\t\t\tcontainer.add( mesh );\r\n\r\n\t\t}\r\n\r\n\t\tconsole.timeEnd( 'OBJLoader' );\r\n\r\n\t\treturn container;\r\n\r\n\t}\r\n\r\n};\r\n\r\nexport { OBJLoader };\n\n\n// WEBPACK FOOTER //\n// ./src/loaders/OBJLoader.js","import * as THREE from 'three';\r\n\r\n// https://github.com/mrdoob/three.js/blob/dev/examples/js/loaders/STLLoader.js\r\n\r\nconst STLLoader = function ( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\r\n};\r\n\r\nSTLLoader.prototype = {\r\n\r\n\tconstructor: STLLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar loader = new THREE.FileLoader( scope.manager );\r\n\t\tloader.setResponseType( 'arraybuffer' );\r\n\t\tloader.load( url, function ( text ) {\r\n\r\n\t\t\tonLoad( scope.parse( text ) );\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t},\r\n\r\n\tparse: function ( data ) {\r\n\r\n\t\tvar isBinary = function () {\r\n\r\n\t\t\tvar expect, face_size, n_faces, reader;\r\n\t\t\treader = new DataView( binData );\r\n\t\t\tface_size = ( 32 / 8 * 3 ) + ( ( 32 / 8 * 3 ) * 3 ) + ( 16 / 8 );\r\n\t\t\tn_faces = reader.getUint32( 80, true );\r\n\t\t\texpect = 80 + ( 32 / 8 ) + ( n_faces * face_size );\r\n\r\n\t\t\tif ( expect === reader.byteLength ) {\r\n\r\n\t\t\t\treturn true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// An ASCII STL data must begin with 'solid ' as the first six bytes.\r\n\t\t\t// However, ASCII STLs lacking the SPACE after the 'd' are known to be\r\n\t\t\t// plentiful.  So, check the first 5 bytes for 'solid'.\r\n\r\n\t\t\t// US-ASCII ordinal values for 's', 'o', 'l', 'i', 'd'\r\n\t\t\tvar solid = [ 115, 111, 108, 105, 100 ];\r\n\r\n\t\t\tfor ( var i = 0; i < 5; i ++ ) {\r\n\r\n\t\t\t\t// If solid[ i ] does not match the i-th byte, then it is not an\r\n\t\t\t\t// ASCII STL; hence, it is binary and return true.\r\n\r\n\t\t\t\tif ( solid[ i ] != reader.getUint8( i, false ) ) return true;\r\n\r\n \t\t\t}\r\n\r\n\t\t\t// First 5 bytes read \"solid\"; declare it to be an ASCII STL\r\n\t\t\treturn false;\r\n\r\n\t\t};\r\n\r\n\t\tvar binData = this.ensureBinary( data );\r\n\r\n\t\treturn isBinary() ? this.parseBinary( binData ) : this.parseASCII( this.ensureString( data ) );\r\n\r\n\t},\r\n\r\n\tparseBinary: function ( data ) {\r\n\r\n\t\tvar reader = new DataView( data );\r\n\t\tvar faces = reader.getUint32( 80, true );\r\n\r\n\t\tvar r, g, b, hasColors = false, colors;\r\n\t\tvar defaultR, defaultG, defaultB, alpha;\r\n\r\n\t\t// process STL header\r\n\t\t// check for default color in header (\"COLOR=rgba\" sequence).\r\n\r\n\t\tfor ( var index = 0; index < 80 - 10; index ++ ) {\r\n\r\n\t\t\tif ( ( reader.getUint32( index, false ) == 0x434F4C4F /*COLO*/ ) &&\r\n\t\t\t\t( reader.getUint8( index + 4 ) == 0x52 /*'R'*/ ) &&\r\n\t\t\t\t( reader.getUint8( index + 5 ) == 0x3D /*'='*/ ) ) {\r\n\r\n\t\t\t\thasColors = true;\r\n\t\t\t\tcolors = [];\r\n\r\n\t\t\t\tdefaultR = reader.getUint8( index + 6 ) / 255;\r\n\t\t\t\tdefaultG = reader.getUint8( index + 7 ) / 255;\r\n\t\t\t\tdefaultB = reader.getUint8( index + 8 ) / 255;\r\n\t\t\t\talpha = reader.getUint8( index + 9 ) / 255;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar dataOffset = 84;\r\n\t\tvar faceLength = 12 * 4 + 2;\r\n\r\n\t\tvar geometry = new THREE.BufferGeometry();\r\n\r\n\t\tvar vertices = [];\r\n\t\tvar normals = [];\r\n\r\n\t\tfor ( var face = 0; face < faces; face ++ ) {\r\n\r\n\t\t\tvar start = dataOffset + face * faceLength;\r\n\t\t\tvar normalX = reader.getFloat32( start, true );\r\n\t\t\tvar normalY = reader.getFloat32( start + 4, true );\r\n\t\t\tvar normalZ = reader.getFloat32( start + 8, true );\r\n\r\n\t\t\tif ( hasColors ) {\r\n\r\n\t\t\t\tvar packedColor = reader.getUint16( start + 48, true );\r\n\r\n\t\t\t\tif ( ( packedColor & 0x8000 ) === 0 ) {\r\n\r\n\t\t\t\t\t// facet has its own unique color\r\n\r\n\t\t\t\t\tr = ( packedColor & 0x1F ) / 31;\r\n\t\t\t\t\tg = ( ( packedColor >> 5 ) & 0x1F ) / 31;\r\n\t\t\t\t\tb = ( ( packedColor >> 10 ) & 0x1F ) / 31;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tr = defaultR;\r\n\t\t\t\t\tg = defaultG;\r\n\t\t\t\t\tb = defaultB;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var i = 1; i <= 3; i ++ ) {\r\n\r\n\t\t\t\tvar vertexstart = start + i * 12;\r\n\r\n\t\t\t\tvertices.push( reader.getFloat32( vertexstart, true ) );\r\n\t\t\t\tvertices.push( reader.getFloat32( vertexstart + 4, true ) );\r\n\t\t\t\tvertices.push( reader.getFloat32( vertexstart + 8, true ) );\r\n\r\n\t\t\t\tnormals.push( normalX, normalY, normalZ );\r\n\r\n\t\t\t\tif ( hasColors ) {\r\n\r\n\t\t\t\t\tcolors.push( r, g, b );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tgeometry.addAttribute( 'position', new THREE.BufferAttribute( new Float32Array( vertices ), 3 ) );\r\n\t\tgeometry.addAttribute( 'normal', new THREE.BufferAttribute( new Float32Array( normals ), 3 ) );\r\n\r\n\t\tif ( hasColors ) {\r\n\r\n\t\t\tgeometry.addAttribute( 'color', new THREE.BufferAttribute( new Float32Array( colors ), 3 ) );\r\n\t\t\tgeometry.hasColors = true;\r\n\t\t\tgeometry.alpha = alpha;\r\n\r\n\t\t}\r\n\r\n\t\treturn geometry;\r\n\r\n\t},\r\n\r\n\tparseASCII: function ( data ) {\r\n\r\n\t\tvar geometry, length, patternFace, patternNormal, patternVertex, result, text;\r\n\t\tgeometry = new THREE.BufferGeometry();\r\n\t\tpatternFace = /facet([\\s\\S]*?)endfacet/g;\r\n\r\n\t\tvar vertices = [];\r\n\t\tvar normals = [];\r\n\r\n\t\tvar normal = new THREE.Vector3();\r\n\r\n\t\twhile ( ( result = patternFace.exec( data ) ) !== null ) {\r\n\r\n\t\t\ttext = result[ 0 ];\r\n\t\t\tpatternNormal = /normal[\\s]+([\\-+]?[0-9]+\\.?[0-9]*([eE][\\-+]?[0-9]+)?)+[\\s]+([\\-+]?[0-9]*\\.?[0-9]+([eE][\\-+]?[0-9]+)?)+[\\s]+([\\-+]?[0-9]*\\.?[0-9]+([eE][\\-+]?[0-9]+)?)+/g;\r\n\r\n\t\t\twhile ( ( result = patternNormal.exec( text ) ) !== null ) {\r\n\r\n\t\t\t\tnormal.x = parseFloat( result[ 1 ] );\r\n\t\t\t\tnormal.y = parseFloat( result[ 3 ] );\r\n\t\t\t\tnormal.z = parseFloat( result[ 5 ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tpatternVertex = /vertex[\\s]+([\\-+]?[0-9]+\\.?[0-9]*([eE][\\-+]?[0-9]+)?)+[\\s]+([\\-+]?[0-9]*\\.?[0-9]+([eE][\\-+]?[0-9]+)?)+[\\s]+([\\-+]?[0-9]*\\.?[0-9]+([eE][\\-+]?[0-9]+)?)+/g;\r\n\r\n\t\t\twhile ( ( result = patternVertex.exec( text ) ) !== null ) {\r\n\r\n\t\t\t\tvertices.push( parseFloat( result[ 1 ] ), parseFloat( result[ 3 ] ), parseFloat( result[ 5 ] ) );\r\n\t\t\t\tnormals.push( normal.x, normal.y, normal.z );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tgeometry.addAttribute( 'position', new THREE.BufferAttribute( new Float32Array( vertices ), 3 ) );\r\n\t\tgeometry.addAttribute( 'normal', new THREE.BufferAttribute( new Float32Array( normals ), 3 ) );\r\n\r\n\t\treturn geometry;\r\n\r\n\t},\r\n\r\n\tensureString: function ( buf ) {\r\n\r\n\t\tif ( typeof buf !== \"string\" ) {\r\n\r\n\t\t\tvar array_buffer = new Uint8Array( buf );\r\n\t\t\tvar strArray = [];\r\n\t\t\tfor ( var i = 0; i < buf.byteLength; i ++ ) {\r\n\r\n\t\t\t\tstrArray.push(String.fromCharCode( array_buffer[ i ] )); // implicitly assumes little-endian\r\n\r\n\t\t\t}\r\n\t\t\treturn strArray.join('');\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn buf;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tensureBinary: function ( buf ) {\r\n\r\n\t\tif ( typeof buf === \"string\" ) {\r\n\r\n\t\t\tvar array_buffer = new Uint8Array( buf.length );\r\n\t\t\tfor ( var i = 0; i < buf.length; i ++ ) {\r\n\r\n\t\t\t\tarray_buffer[ i ] = buf.charCodeAt( i ) & 0xff; // implicitly assumes little-endian\r\n\r\n\t\t\t}\r\n\t\t\treturn array_buffer.buffer || array_buffer;\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn buf;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\nexport { STLLoader };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/loaders/STLLoader.js","var Component = require(\"!../node_modules/_vue-loader@11.3.4@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=script&index=0!./model-mixin.vue\"),\n  /* template */\n  require(\"!!../node_modules/_vue-loader@11.3.4@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-b82a4cf6\\\"}!../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=template&index=0!./model-mixin.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/model-mixin.vue\n// module id = 5\n// module chunks = 1","import { Box3, Vector3, Vector2, BufferAttribute } from 'three';\r\n\r\nlet box = new Box3();\r\n\r\nfunction getSize( object ) {\r\n\r\n    box.setFromObject( object );\r\n\r\n    return box.getSize();\r\n}\r\n\r\nfunction getCenter( object ) {\r\n\r\n    box.setFromObject( object );\r\n\r\n    return box.getCenter();\r\n}\r\n\r\nfunction lightsDiff( lights, oldLights ) {\r\n\r\n}\r\n\r\nfunction toIndexed ( bufferGeometry ) {\r\n\r\n    var raw_positions = bufferGeometry.getAttribute( 'position' ).array;\r\n\r\n    var raw_uvs;\r\n    var hasUV = bufferGeometry.getAttribute( 'uv' ) !== undefined;\r\n    if ( hasUV ) raw_uvs = bufferGeometry.getAttribute( 'uv' ).array;\r\n\r\n    var raw_normals;\r\n    var hasNormal = bufferGeometry.getAttribute( 'normal' ) !== undefined;\r\n    if ( hasNormal ) raw_normals = bufferGeometry.getAttribute( 'normal' ).array;\r\n\r\n    var indices = [];\r\n    var vertices = [];\r\n    var normals = [];\r\n    var uvs = [];\r\n\r\n    var face, face_normalss, face_uvs, tmp_indices;\r\n\r\n    var v0 = new Vector3();\r\n    var v1 = new Vector3();\r\n    var v2 = new Vector3();\r\n\r\n    var n0 = new Vector3();\r\n    var n1 = new Vector3();\r\n    var n2 = new Vector3();\r\n\r\n    var uv0 = new Vector2();\r\n    var uv1 = new Vector2();\r\n    var uv2 = new Vector2();\r\n\r\n    for ( var i = 0; i < raw_positions.length; i += 9 ) {\r\n\r\n        v0.x = raw_positions[ i ];\r\n        v0.y = raw_positions[ i + 1 ];\r\n        v0.z = raw_positions[ i + 2 ];\r\n\r\n        v1.x = raw_positions[ i + 3 ];\r\n        v1.y = raw_positions[ i + 4 ];\r\n        v1.z = raw_positions[ i + 5 ];\r\n\r\n        v2.x = raw_positions[ i + 6 ];\r\n        v2.y = raw_positions[ i + 7 ];\r\n        v2.z = raw_positions[ i + 8 ];\r\n\r\n        face = [ v0, v1, v2 ];\r\n\r\n        if ( hasNormal ) {\r\n\r\n            n0.x = raw_normals[ i ];\r\n            n0.y = raw_normals[ i + 1 ];\r\n            n0.z = raw_normals[ i + 2 ];\r\n\r\n            n1.x = raw_normals[ i + 3 ];\r\n            n1.y = raw_normals[ i + 4 ];\r\n            n1.z = raw_normals[ i + 5 ];\r\n\r\n            n2.x = raw_normals[ i + 6 ];\r\n            n2.y = raw_normals[ i + 7 ];\r\n            n2.z = raw_normals[ i + 8 ];\r\n\r\n            face_normalss = [ n0, n1, n2 ];\r\n\r\n        }\r\n\r\n        if ( hasUV ) {\r\n\r\n            uv0.x = raw_uvs[ i ];\r\n            uv0.y = raw_uvs[ i + 1 ];\r\n\r\n            uv1.x = raw_uvs[ i + 2 ];\r\n            uv1.y = raw_uvs[ i + 3 ];\r\n\r\n            uv2.x = raw_uvs[ i + 4 ];\r\n            uv2.y = raw_uvs[ i + 5 ];\r\n\r\n            face_uvs = [ uv0, uv1, uv2 ];\r\n\r\n        }\r\n\r\n        tmp_indices = [];\r\n\r\n        face.forEach( function ( v, i ) {\r\n\r\n            var id = exists( v, vertices );\r\n            if ( id == -1 ) {\r\n\r\n                id = vertices.length;\r\n                vertices.push( v.clone() );\r\n\r\n                if ( hasNormal ) normals.push( face_normalss[ i ].clone() );\r\n                if ( hasUV ) uvs.push( face_uvs[ i ].clone() );\r\n\r\n            }\r\n            tmp_indices.push( id );\r\n\r\n        } );\r\n\r\n        indices.push( tmp_indices[ 0 ], tmp_indices[ 1 ], tmp_indices[ 2 ] );\r\n\r\n    }\r\n\r\n    var positionBuffer = new Float32Array( vertices.length * 3 );\r\n    if ( hasNormal ) var normalBuffer = new Float32Array( vertices.length * 3 );\r\n    if ( hasUV ) var uvBuffer = new Float32Array( vertices.length * 2 );\r\n\r\n    var i2 = 0;\r\n    var i3 = 0;\r\n    for ( i = 0; i < vertices.length; i++ ) {\r\n\r\n        i3 = i * 3;\r\n\r\n        positionBuffer[ i3 ] = vertices[ i ].x;\r\n        positionBuffer[ i3 + 1 ] = vertices[ i ].y;\r\n        positionBuffer[ i3 + 2 ] = vertices[ i ].z;\r\n\r\n        if ( hasNormal ) {\r\n\r\n            normalBuffer[ i3 ] = normals[ i ].x;\r\n            normalBuffer[ i3 + 1 ] = normals[ i ].y;\r\n            normalBuffer[ i3 + 2 ] = normals[ i ].z;\r\n\r\n        }\r\n\r\n        if ( hasUV ) {\r\n\r\n            i2 = i * 2;\r\n            uvBuffer[ i2 ] = uvs[ i ].x;\r\n            uvBuffer[ i2 + 1 ] = uvs[ i ].y;\r\n\r\n        }\r\n\r\n    }\r\n\r\n    bufferGeometry.addAttribute( 'position', new BufferAttribute( positionBuffer, 3 ) );\r\n    if ( hasNormal ) bufferGeometry.addAttribute( 'normal', new BufferAttribute( normalBuffer, 3 ) );\r\n    if ( hasUV ) bufferGeometry.addAttribute( 'uv', new BufferAttribute( uvBuffer, 2 ) );\r\n    bufferGeometry.setIndex( new BufferAttribute( new Uint32Array( indices ), 1 ) );\r\n    return bufferGeometry;\r\n\r\n    function exists( v, vertices ) {\r\n        for ( var i = 0; i < vertices.length; i++ ) {\r\n            if ( v.equals( vertices[ i ] ) ) return i;\r\n        }\r\n        return -1;\r\n    }\r\n}\r\n\r\nexport { getSize, getCenter, toIndexed }\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/util.js","exports = module.exports = require(\"../../node_modules/_css-loader@0.28.4@css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \".background-text{position:absolute;top:50%;left:0;z-index:1;width:100%;-webkit-transform:translateY(-50%);transform:translateY(-50%);text-align:center;font-size:60px}.background-buttons{position:absolute;top:0;left:10px;z-index:3}.background-buttons>p{margin-top:15px;color:#000}.background-buttons>button{background:#fff;padding:4px 6px;margin-top:5px;outline:none;border:1px solid #c4c4c4}.model-box{position:relative;z-index:2}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_css-loader@0.28.4@css-loader?{\"minimize\":true}!./~/_vue-loader@11.3.4@vue-loader/lib/style-compiler?{\"id\":\"data-v-4d9d1678\",\"scoped\":false,\"hasInlineConfig\":false}!./~/_vue-loader@11.3.4@vue-loader/lib/selector.js?type=styles&index=0!./examples/pages/demo-background.vue\n// module id = 67\n// module chunks = 1","exports = module.exports = require(\"../../node_modules/_css-loader@0.28.4@css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \".demo-block{width:100%;height:100%;background-color:#fff;border-radius:3px}.demo-block .demo-block-preview{width:50%;height:100%;float:left;position:relative}.demo-block .demo-block-code{width:50%;height:100%;background:#f9fafc;border-left:1px solid #dfe2e7;font-size:13px;float:left}.demo-block .demo-block-code pre code{font:normal 10pt Consolas,Monaco,monospace}.demo-block .demo-block-code .demo-block-code-box{width:100%;height:50%;position:relative;overflow:hidden}.demo-block .demo-block-code-box:after{content:\\\"\\\";display:block;position:absolute;bottom:0;left:0;width:90%;height:1px;background:-webkit-linear-gradient(left,#dfe2e7 80%,rgba(223,226,231,0))}.demo-block .demo-block-code-box h3{width:100%;padding:10px 20px;font-size:16px;font-weight:700;position:absolute}.demo-block .demo-block-code-box-content{position:absolute;top:40px;bottom:10px;left:20px;right:20px;overflow:auto}.demo-block .demo-block-code code{position:absolute;top:0;left:0}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_css-loader@0.28.4@css-loader?{\"minimize\":true}!./~/_vue-loader@11.3.4@vue-loader/lib/style-compiler?{\"id\":\"data-v-5d8f5ef3\",\"scoped\":false,\"hasInlineConfig\":false}!./~/_vue-loader@11.3.4@vue-loader/lib/selector.js?type=styles&index=0!./examples/components/demo-block.vue\n// module id = 68\n// module chunks = 1","exports = module.exports = require(\"../node_modules/_css-loader@0.28.4@css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \"*{margin:0;border:0;padding:0;box-sizing:border-box}li,ol,ul{list-style:none}a{color:#657180;text-decoration:none}.examples,body,html{width:100%;height:100%;color:#657180}body{background:#eee;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Helvetica,PingFang SC,Hiragino Sans GB,Microsoft YaHei,SimSun,sans-serif;background:#fff}.examples-header{position:absolute;top:0;width:100%;background:#f3f6fb;text-shadow:0 1px 0 hsla(0,0%,100%,.5);border-bottom:1px solid #dfe2e7;padding:15px 15px 15px 30px;line-height:20px}.examples-header .title{font-weight:700;font-size:18px;display:inline-block}.examples-header .github{color:#39f;display:inline-block;font-size:12px;float:right}.examples-content{width:100%;height:100%;padding-top:52px;overflow:hidden}.examples-menu{float:left;width:230px;height:100%;border-right:1px solid #dfe2e7;padding:10px 30px}.examples-menu .examples-menu-item{display:block;width:100%;height:30px;line-height:30px;font-size:14px;cursor:pointer}.examples-menu .examples-menu-item>a{display:block;width:100%;height:100%}.examples-menu .examples-menu-title{display:block;width:100%;padding:6px 0;margin-top:10px;font-size:14px;font-weight:700}.examples-menu .examples-menu-item:hover>a{color:#39f}.examples-pages{height:100%;overflow:hidden}.example-loading{position:absolute;top:0;left:0;width:100%;height:100%;text-align:center}.example-loading:before{border-radius:100%;margin:2px;border:3px solid #20a0ff;border-bottom-color:transparent;height:36px;width:36px;-webkit-animation:loading-rotate .75s 0s linear infinite;animation:loading-rotate .75s 0s linear infinite}.example-loading:after,.example-loading:before{content:\\\"\\\";display:inline-block;vertical-align:middle}.example-loading:after{height:100%;width:0}@-webkit-keyframes loading-rotate{0%{-webkit-transform:rotate(0) scale(1);transform:rotate(0) scale(1)}50%{-webkit-transform:rotate(180deg) scale(.6);transform:rotate(180deg) scale(.6)}to{-webkit-transform:rotate(1turn) scale(1);transform:rotate(1turn) scale(1)}}@keyframes loading-rotate{0%{-webkit-transform:rotate(0) scale(1);transform:rotate(0) scale(1)}50%{-webkit-transform:rotate(180deg) scale(.6);transform:rotate(180deg) scale(.6)}to{-webkit-transform:rotate(1turn) scale(1);transform:rotate(1turn) scale(1)}}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_css-loader@0.28.4@css-loader?{\"minimize\":true}!./~/_vue-loader@11.3.4@vue-loader/lib/style-compiler?{\"id\":\"data-v-7a736b78\",\"scoped\":false,\"hasInlineConfig\":false}!./~/_vue-loader@11.3.4@vue-loader/lib/selector.js?type=styles&index=0!./examples/App.vue\n// module id = 69\n// module chunks = 1"],"sourceRoot":""}